{"version":3,"sources":["imports.js"],"names":["window","Polymer","modules","lcModules","findModule","id","toLowerCase","DomModule","register","querySelector","console","warn","_styleOutsideTemplateCheck","selector","m","HTMLElement","customElements","define","p","Element","prototype","matchesSelector","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","Utils","mixin","target","source","i","extend","api","n$","Object","getOwnPropertyNames","n","length","copyOwnProperty","name","pd","getOwnPropertyDescriptor","defineProperty","getRootNode","node","parentNode","call","cachingMixin","base","__mixinApplications","WeakMap","application","get","set","dedupingMixin","baseMap","__mixinMap","extended","Map","CaseMap","_caseMap","_rx","dashToCamel","camelToDash","dashToCamelCase","dash","indexOf","replace","toUpperCase","camelToDashCase","camel","createNodeEventHandler","context","eventName","methodName","_rootDataHost","handler","e","detail","EventListeners","superClass","_addEventListenerToNode","addEventListener","removeEventListener","resolveCss","cssText","ownerDocument","CSS_URL_RX","pre","url","post","resolve","resolveAttrs","element","URL_ATTRS","a$","l","a","at","v","localName","attributes","value","search","BINDING_RX","ABS_URL","test","resolver","getUrlResolver","href","tempDoc","tempDocBase","resolveUrl","baseUri","document","implementation","createHTMLDocument","createElement","head","appendChild","__urlResolver","form","ResolveUrl","emptyArray","bindingRegex","IDENT","NUMBER","SQUOTE_STRING","DQUOTE_STRING","STRING","ARGUMENT","ARGUMENTS","ARGUMENT_LIST","BINDING","OPEN_BRACKET","CLOSE_BRACKET","NEGATE","EXPRESSION","RegExp","insertionPointTag","currentTemplate","parseTemplateAnnotations","template","content","_content","_notes","parseNodeAnnotations","hasAttribute","list","stripWhiteSpace","nodeType","Node","TEXT_NODE","parseTextNodeAnnotation","parseElementAnnotations","parseBindings","text","parts","lastIndex","exec","index","push","literal","slice","mode","negate","Boolean","trim","customEvent","notifyEvent","colon","substring","compoundIndex","event","literalFromParts","s","textContent","note","bindings","kind","isCompound","events","_hasInsertionPoint","parseChildNodesAnnotations","parseNodeAttributeAnnotations","prepElement","root","firstChild","t","is","getAttribute","removeAttribute","replaceChild","setAttribute","parseTemplate","next","nextSibling","removeChild","childAnnotation","parent","createDocumentFragment","templateContent","annotation","attrs","Array","b","parseNodeAttributeAnnotation","origName","propertyName","Annotations","_findTemplateAnnotatedNode","applyIdToMap","inst","map","dom","applyEventListener","host","j","e$","_addMethodEventListenerToNode","applyTemplateContent","TemplateStamp","$","HTMLTemplateElement","decorate","notes","_parseTemplateAnnotations","importNode","__noInsertionPoint","Path","path","dotIndex","isDeep","isAncestor","isDescendant","translate","newBase","normalize","split","isArray","args","toString","join","info","prop","part","last","nativeProperties","proto","props","getPrototypeOf","saveAccessorValue","model","property","undefined","__dataProto","hasOwnProperty","create","PropertyAccessors","_initializeProperties","__data","__dataPending","__dataOld","__dataInvalid","readOnly","_setProperty","_setPendingProperty","_invalidateProperties","old","_shouldPropChange","Promise","then","_flushProperties","oldProps","changedProps","_propertiesChanged","currentProps","caseMap","Attributes","__serializing","attribute","_valueToNodeAttribute","type","_deserializeAttribute","str","_serializeAttribute","Date","JSON","stringify","x","Number","parse","String","TYPES","ANY","COMPUTE","REFLECT","NOTIFY","PROPAGATE","OBSERVE","READ_ONLY","ensureOwnMappedArray","effects","runEffects","fx","fn","runObserverEffect","runNotifyEffect","_dispatchNotifyingEvent","CustomEvent","runReflectEffect","_propertyToAttribute","attrName","runMultiObserverEffect","runMethodEffect","runComputedEffect","result","computedProp","methodInfo","_setPropertyFromComputation","bindTemplate","processAnnotations","b$","binding","shouldAddListener","addAnnotatedListener","addAnnotationEffect","signature","addAnnotationMethodEffect","_addPropertyEffect","runAnnotationEffect","_nodes","_hasPropertyEffect","_setPropertyToNodeFromAnnotation","applyAnnotationValue","computeAnnotationValue","storage","__dataCompoundStorage","createMethodEffect","runAnnotationMethodEffect","val","_processed","k","parseMethod","rootProperty","pp","_hostProps","discoverTemplateHostProps","concat","p$","kk","tpp","Base","effect","_bindListeners","setupBindListeners","addNotifyListener","handleNotification","targetPath","_setPropertyFromNotification","sig","effectFn","dynamic","dynamicFn","static","arg","marshalArgs","apply","expression","match","parseArgs","argList","rawArg","parseArg","fc","structured","wildcard","data","values","baseChanged","setupBindings","nodes","__dataHost","setupCompoundBinding","literals","notifySplices","array","splices","change","indexSplices","splicesPath","notifySplice","added","removed","addedCount","object","upper","PropertyEffects","_asyncEffects","__dataInitialized","__dataPendingClients","__dataFromAbove","__dataLinkedPaths","__propertyEffects","_createPropertyAccessor","hasEffect","isPath","fromAbove","ready","_setupBindings","to","from","_hasReadOnlyEffect","_setPathOrUnmanagedProperty","dispatchEvent","len","items","ret","hadLength","pop","start","deleteCount","Math","floor","splice","shift","unshift","arguments","privateSetter","attr","Error","utils","effectUid","runComputedEffects","PROPERTY_EFFECT_TYPES","inputProps","computedProps","computeLinkedPaths","links","link","notifyProperties","runId","_runId","__dataInterim","__dataInterimOld","notified","notifyEffects","runEffectsForProperty","notifyPath","setProperties","options","ran","fxs","lastRun","BatchedEffects","_flushClients","_enqueueClient","queueProperty","client","clients","forEach","StyleGather","MODULE_STYLES_SELECTOR","INCLUDE_ATTR","_importModule","moduleId","import","cssFromModules","moduleIds","warnIfNotFound","cssFromModule","_cssText","cssFromElement","querySelectorAll","include","__appliedElement","body","StyleUtil","isTargetedBuild","buildType","ShadyDOM","inUse","cssBuildTypeForModule","module","dm","getCssBuildType","ElementMixin","properties","finalized","superProto","superCtor","constructor","PolymerElement","finalize","telemetry","config","_ownConfig","_finalizeConfig","cloneNode","_finalizeTemplate","_createPropertyFromConfig","observers","_createMethodObserver","style","insertBefore","ShadyCSS","prepareTemplate","extends","_propagateEffects","_bindTemplate","_template","__ownConfig","__flattenedProperties","_flattenedProperties","_observedAttributes","_addPropertiesToAttributes","_finalized","instanceCount","hostStack","registerHost","_isPropertyPending","computed","_createReadOnlyProperty","_hasComputedEffect","_createComputedProperty","reflectToAttribute","_hasReflectEffect","_createReflectedProperty","notify","_hasNotifyEffect","_createNotifyingProperty","observer","_createObservedProperty","isEmpty","updateStyles","beginHosting","_stampTemplate","_attachDom","endHosting","attachShadow","shadowRoot","_attributeToProperty","applyStyle","stack","stackLen","registrations","_regLog","log","dumpRegistrations","userPolymer","klass","Class","Async","_currVal","_lastVal","_callbacks","_twiddleContent","_twiddle","createTextNode","run","callback","waitTime","setTimeout","cancel","handle","clearTimeout","idx","_atEndOfMicrotask","cb","flush","takeRecords","MutationObserver","observe","characterData","Debouncer","self","boundFlush","go","wait","h","finish","isActive","debounce","debouncer","wrap","HAS_NATIVE_TA","touchAction","GESTURE_KEY","HANDLED_OBJ","TOUCH_ACTION","TAP_DISTANCE","TRACK_DISTANCE","TRACK_LENGTH","MOUSE_TIMEOUT","MOUSE_EVENTS","MOUSE_WHICH_TO_BUTTONS","MOUSE_HAS_BUTTONS","MouseEvent","buttons","IS_TOUCH_ONLY","navigator","userAgent","mouseCanceller","mouseEvent","skip","composedPath","POINTERSTATE","mouse","preventDefault","stopPropagation","setupTeardownMouseCanceller","setup","en","ignoreMouse","mouseIgnoreJob","unset","hasLeftMouseButton","ev","which","button","isSyntheticClick","gestures","findOriginalTarget","bcr","getBoundingClientRect","pageX","y","pageY","left","right","top","bottom","touch","scrollDecided","firstTouchAction","ta","trackDocument","stateObj","movefn","upfn","untrackDocument","recognizers","deepTargetFind","elementFromPoint","handleNative","handled","currentTarget","gobj","gs","changedTouches","touches","identifier","handleTouchAction","rootTarget","r","flow","reset","clientX","clientY","prevent","dx","abs","dy","cancelable","addListener","evType","add","removeListener","remove","recognizer","deps","dep","gd","_count","setTouchAction","recog","emits","findRecognizerByEvent","evName","fire","Event","bubbles","composed","defaultPrevented","se","sourceEvent","end","mousedown","touchstart","touchend","state","started","moves","addMove","move","hasMovedEnough","ct","touchmove","secondlast","lastmove","ddx","ddy","hover","NaN","save","click","forward","isNaN","Gestures","GestureEventListeners","AsyncRender","_scheduled","_beforeRenderQueue","_afterRenderQueue","beforeRender","_schedule","afterRender","requestAnimationFrame","_flushQueue","flushBeforeRender","flushAfterRender","queue","RenderStatus","afterNextRender","newSplice","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","current","currentStart","currentEnd","oldStart","oldEnd","rowCount","columnCount","distances","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","min","reverse","calcSplices","prefixCount","suffixCount","minLength","sharedPrefix","sharedSuffix","ops","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","isSlot","getEffectiveNodes","assignedNodes","flatten","childNodes","reduce","effectiveNodesObserverPromise","EffectiveNodesObserver","effectiveNodes","scheduled","_boundSchedule","schedule","connect","listenSlots","children","shadyChildrenObserver","observeChildren","mutations","processMutations","nativeChildrenObserver","childList","connected","unlistenSlots","unobserveChildren","disconnect","processSlotMutations","mutation","addedNodes","removedNodes","newNodes","nodeList","DomApi","patch","observerHandle","contains","doc","ip$","assignedSlot","externalNode","deep","Document","c$","getEffectiveChildNodes","c","ELEMENT_NODE","forwardMethods","methods","method","forwardReadOnlyProperties","configurable","forwardProperties","EventApi","obj","ctor","__domApi","Settings","useShadow","WebComponents","readyState","_warn","warning","LegacyElementMixin","created","_applyConfigListeners","listeners","_ensureConfigAttributes","hostAttributes","_ensureAttribute","_applyListeners","_ensureAttributes","isAttached","attached","detached","attributeChanged","_valueToAttribute","inherited","__proto__","assetPath","baseURI","hbl","__boundListeners","bl","key","_removeEventListenerFromNode","direction","slctr","forceRender","queryDistributedElements","filter","cn","tc","COMMENT_NODE","getDistributedNodes","getContentChildNodes","container","shouldObserve","getComputedStyleValue","jobName","_debouncers","tag","elt","onload","onerror","optAsync","rel","HTMLImports","whenReady","bool","classList","transformText","webkitTransform","transform","z","arrayOrPath","item","arr","DocumentFragment","LegacyElement","metaProps","beforeRegister","registered","behaviors","mixinBehaviors","MixinBehavior","flattenBehaviors","behavior","PolymerGenerated","__registered","_invokeFunction","_applyConfigMetaDataFrom","getNativeConstructor","DomBind","render","_removeChildren","_children","_insertChildren","nullClass","PatchedHTMLTemplateElement","_newInstance","DataTemplate","setPrototypeOf","Templatizer","__templatizerClass","baseClass","_createTemplatizerClass","_prepHostProperties","instCount","_configureProperties","_templateInstance","__hideTemplateChildren__","_showHideChildren","hide","__polymerTextContent__","__polymerDisplay__","display","iprop","instanceProps","hprop","_prepInstanceProperties","fwdHostPropToInstance","upgradeTemplate","hostProps","_createHP2IEffector","hostProp","fwdInstancePropToHost","_createIP2HEffector","_createHP2HEffector","instProp","fwdInstPropToHost","fwdHostPropToHost","el","_debouncerQueue","templatizer","as","indexAs","itemsIndexAs","sort","Function","delay","renderedItemCount","initialCount","targetFramerate","_targetFrameTime","_instances","_pool","_limit","Infinity","_boundRenderChunk","_renderChunk","__isDetached","_detachInstance","_attachInstance","ensureTemplatized","_ctor","__domRepeat","templatize","repeater","i$","forwardProperty","_getRootDataHost","_sortChanged","dataHost","_sortFn","_needFullRefresh","_debounceRender","_filterChanged","_filterFn","_computeFrameTime","rate","ceil","_initializeChunking","_chunkCount","_lastChunkTime","performance","now","_tryRenderChunk","_requestRenderChunk","currChunkTime","ratio","round","_observeChanged","_observePaths","_itemsChanged","_forwardItemPath","_checkObservedPaths","paths","_render","enqueueDebouncer","flushDebouncers","_applyFullRefresh","_setRenderedItemCount","isntIdxToItemsIdx","itemsIdxToInstIdx","_itemsIdxToInstIdx","instIdx","limit","itemIdx","flushProperties","_insertInstance","_detachAndRemoveInstance","_stampInstance","beforeRow","beforeNode","hidden","dot","itemsIdx","itemForElement","instance","modelForElement","indexForElement","restamp","_queueRender","DOCUMENT_FRAGMENT_NODE","_teardownInstance","if","async","_ensureInstance","_instance","_lastIf","lastChild","previousSibling","CustomStyle","processHook","_bindingRegex_patch","_bindingRegex_1_2_4","_bindingRegex_1_2_4_patched","_bindingRegex","MakePromise","asap","TypeError","_state","_value","_deferreds","doResolve","bind","reject","deferred","me","onFulfilled","onRejected","newValue","finale","done","reason","ex","exports","xhr","XMLHttpRequest","response","status","statusText","completes","resolveCompletes","rejectCompletes","progress","aborted","errored","timedOut","succeeded","send","_setProgress","lengthComputable","loaded","total","error","_setErrored","_updateStatus","_setTimedOut","_setResponse","parseResponse","open","acceptType","handleAs","headers","newHeaders","keys","requestHeader","_error","setRequestHeader","timeout","jsonPrefix","responseType","_responseType","_jsonPrefix","withCredentials","_encodeBodyObject","preferResponseText","prefixLen","responseText","_","responseXML","message","abort","_setAborted","contentType","bodyObj","_wwwFormUrlEncode","pieces","_wwwFormUrlEncodePiece","encodeURIComponent","_setStatus","_setStatusText","params","sync","auto","verbose","lastRequest","loading","lastResponse","lastError","activeRequests","debounceDuration","_boundHandleResponse","_handleResponse","queryString","queryParts","param","requestUrl","bindingChar","requestHeaders","header","toRequestOptions","generateRequest","request","requestOptions","catch","_handleError","_discardRequest","_setLastRequest","_setLoading","_setLastResponse","_setLastError","requestIndex","_requestOptionsChanged","intlLibraryScript","intlLibraryLoadingStatus","_setupIntlPolyfillCalled","_setupIntlPolyfill","intlLibraryUrl","Intl","IntlPolyfill","intlLibraryLoaded","_setupIntlPolyfillLocale","locale","libraryLoadedBindThis","supported","NumberFormat","supportedLocalesOf","localeMatcher","script","intlScript","fallbackLanguages","_enumerateFallbackLanguages","intlLocaleLoadedBindThis","intlLocaleLoadErrorBindThis","DEFAULT_LANG","fallbackSupport","anotherIntlLocaleLoadedBindThis","anotherIntlLocaleLoadErrorBindThis","enSupport","lang","isExtLangCode","extLangCode","isScriptCode","scriptCode","isCountryCode","countryCode","_lang","raw","offset","rawNumber","number","formatted","_setupObservers","textNode","_textMutated","attributeFilter","nodeObserver","observeNodes","attributeName","_rawChanged","_langChanged","_optionsChanged","_onOptionsPropertyChanged","_offsetChanged","_formatNumber","effectiveLang","format","_cp","ord","v0","plurals","amd","af","ak","am","ar","t0","n100","asa","ast","az","i10","i100","i1000","be","n10","bem","bez","bg","bh","bm","bn","bo","br","n1000000","brx","bs","f","f10","f100","ca","ce","cgg","chr","ckb","cs","cy","da","de","dsb","dv","dz","ee","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gl","gsw","gu","guw","gv","ha","haw","he","hi","hr","hsb","hu","hy","ig","ii","it","iu","iw","ja","jbo","jgo","ji","jmc","jv","jw","ka","kab","kaj","kcg","kde","kea","kkj","kl","km","kn","ko","ks","ksb","ksh","ku","kw","ky","lag","lb","lg","lkt","ln","lo","lt","lv","mas","mg","mgo","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","nnh","no","nqo","nr","nso","ny","nyn","om","or","os","pa","pap","pl","prg","ps","pt","rm","ro","rof","ru","rwk","sah","saq","sdh","seh","ses","sg","sh","shi","si","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","te","teo","th","ti","tig","tk","tl","tn","tr","ts","tzm","ug","uk","ur","uz","ve","vi","vo","vun","wa","wae","wo","xh","xog","yi","yo","zh","zu","paramAttribute","paramFormat","observeParams","_setupParams","elements","needParamObservation","tagName","_templateMutated","templateElement","templateTextNode","listen","_paramFormatChanged","oldParamFormat","lastTemplateText","_paramAttributeChanged","oldParamAttribute","_getPluralCategory","category","_selectTemplateText","templateText","templateObject","other","tmpNode","paramPlaceholder","shadowDomV1","shadyDomV1","innerHTML","useRaw","autoSaveDisabled","errorMessage","_loaded","_boundHandleStorage","_handleStorage","_load","_trySaveValue","_doNotSave","_debounceReload","reload","externalChange","localStorage","getItem","removeItem","setItem","html","defaultLang","hasNative","currentScript","_currentScript","domModule","registerI18nPreference","persist","isReady","_observe","language","browserLanguage","_disconnect","_onLoadEmptyStorage","isInitialized","_onLoadStorage","_onPersistChange","_onStorageValueChange","_htmlLangMutationObserverCallback","_htmlLangMutationObserver","_htmlLangMutationObserverCallbackBindThis","sharedData","customAttributes","_traverseTemplateTree","__ready__","standard","isLocalizableAttribute","_getType","_matchAttribute","_compareSelectors","s1","s2","name1","name2","localeCompare","setLocalizableAttribute","cursor","prev","selectors","registerLocalizableAttributes","textAttr","nodeName","deepcopy","o","u","__esModule","Buffer","isBuffer","Symbol","getOwnPropertySymbols","getKeys","getSymbols","getTime","lastIndexOf","copy","copyValue","copyCollection","d","ShadowDOMPolyfill","isStandardPropertyConfigurable","langPropertyDescriptor","extraWhiteSpaceNode","bundles","bundleFetchingInstances","startUrl","location","pathname","localesPath","attributesRepository","userPreference","debuglog","BehaviorsStore","I18nControllerBehavior","isI18nController","masterBundles","I18nBehavior","templateDefaultLang","observeHtmlLang","_getBundle","resolved","fallbackLanguageList","tryLang","_fetchStatus","lastLang","_handleLangAttributeChange","oldValue","oldLang","ajaxLang","_fetchLanguage","_updateEffectiveLang","targetLang","_fetchBundle","nextFallbackLanguage","fetchingInstance","_constructBundle","_forwardLangEventBindThis","_forwardLangEvent","_handleBundleFetchedBindThis","_handleBundleFetched","ajax","_handleResponseBindFetchingInstance","_handleErrorBindFetchingInstance","skipFetching","bundle","_deepMap","success","rawResponses","_observeHtmlLangChanged","_htmlLangObserver","_handleHtmlLangChange","baseLang","_constructDefaultBundle","parentTemplate","localizableText","jsonData","_traverseAttributes","messageId","attrId","isLocalizable","dummy","_generateMessageId","_setBundleValue","parsed","parameterized","processed","setAttributeNode","whiteSpaceElements","isWhiteSpace","isCompoundAnnotatedNode","span","templateTextParams","child","parsedValue","parsedValue2","childElementCount","_isCompoundAnnotatedText","childStatus","templateNonCommentChildNodes","templateChild","hasText","hasCompoundAnnotatedText","hasTextChild","hasCompoundAnnotatedChildNode","hasGrandChildren","grandChild","_hasAnnotatedText","_compoundAnnotationToSpan","_child","templateNode","childTextNode","currentList","DOCUMENT_NODE","childNode","messageIdPath","substr","table","i18nFormat","_templateLocalizable","_propertyEffects","attributeOldValue","_onDomChangeBindThis","_onDomChange","__data__","Bind","_createAccessors","_properties","i18nBehaviorDomBind","i18nDomBind","domBind","domBindProto","_Polymer","BaseElements","Mixins","Localizable","_uncamelCase","useNative","assetUrl","URL","currentImport","_i18nPreprocess","_rawTemplate","__templateLocalizable","Logger","I18nDomBind","stamped","LocalizableElement","I18nSubclassElement","I18nElement","UncamelCase","functionName","func","Define","PolymerElements","classId","cousin","rawTemplate","word"],"mappings":"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","file":"imports.js","sourcesContent":["window.Polymer = window.Polymer || {};\n(function() {\n\n  var modules = {};\n  var lcModules = {};\n  var findModule = function(id) {\n    return modules[id] || lcModules[id.toLowerCase()];\n  };\n\n  /**\n   * The `dom-module` element registers the dom it contains to the name given\n   * by the module's id attribute. It provides a unified database of dom\n   * accessible via any dom-module element. Use the `import(id, selector)`\n   * method to locate dom within this database. For example,\n   *\n   * <dom-module id=\"foo\">\n   *   <img src=\"stuff.png\">\n   * </dom-module>\n   *\n   * Then in code in some other location that cannot access the dom-module above\n   *\n   * var img = document.createElement('dom-module').import('foo', 'img');\n   *\n   */\n  class DomModule extends HTMLElement {\n\n    static get observedAttributes() { return ['id'] }\n\n    attributeChangedCallback() {\n      this.register();\n    }\n\n    _styleOutsideTemplateCheck() {\n      if (this.querySelector('style')) {\n        console.warn('dom-module %s has style outside template', this.id);\n      }\n    }\n\n    /**\n     * Registers the dom-module at a given id. This method should only be called\n     * when a dom-module is imperatively created. For\n     * example, `document.createElement('dom-module').register('foo')`.\n     * @method register\n     * @param {String} id The id at which to register the dom-module.\n     */\n    register(id) {\n      id = id || this.id;\n      if (id) {\n        this.id = id;\n        // store id separate from lowercased id so that\n        // in all cases mixedCase id will stored distinctly\n        // and lowercase version is a fallback\n        modules[id] = this;\n        lcModules[id.toLowerCase()] = this;\n        this._styleOutsideTemplateCheck();\n      }\n    }\n\n    /**\n     * Retrieves the dom specified by `selector` in the module specified by\n     * `id`. For example, this.import('foo', 'img');\n     * @method register\n     * @param {String} id\n     * @param {String} selector\n     * @return {Object} Returns the dom which matches `selector` in the module\n     * at the specified `id`.\n     */\n    import(id, selector) {\n      if (id) {\n        var m = findModule(id);\n        if (m && selector) {\n          return m.querySelector(selector);\n        }\n        return m;\n      }\n    }\n\n  }\n\n  customElements.define('dom-module', DomModule);\n\n  // export\n  Polymer.DomModule = new DomModule();\n\n  Polymer.DomModule.modules = modules;\n\n})();\n(function() {\n\n  'use strict';\n\n  var p = Element.prototype;\n   var matchesSelector = p.matches || p.matchesSelector ||\n     p.mozMatchesSelector || p.msMatchesSelector ||\n     p.oMatchesSelector || p.webkitMatchesSelector;\n\n  Polymer.Utils = {\n\n    /**\n     * Copies props from a source object to a target object.\n     *\n     * Note, this method uses a simple `for...in` strategy for enumerating\n     * properties.  To ensure only `ownProperties` are copied from source\n     * to target and that accessor implementations are copied, use `extend`.\n     *\n     * @method mixin\n     * @param {Object} target Target object to copy properties to.\n     * @param {Object} source Source object to copy properties from.\n     * @return {Object} Target object that was passed as first argument.\n     */\n    mixin(target, source) {\n      for (var i in source) {\n        target[i] = source[i];\n      }\n      return target;\n    },\n\n    /**\n     * Copies own properties (including accessor descriptors) from a source\n     * object to a target object.\n     *\n     * @method extend\n     * @param {Object} prototype Target object to copy properties to.\n     * @param {Object} api Source object to copy properties from.\n     * @return {Object} prototype object that was passed as first argument.\n     */\n    extend(prototype, api) {\n      if (prototype && api) {\n        var n$ = Object.getOwnPropertyNames(api);\n        for (var i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n          this.copyOwnProperty(n, api, prototype);\n        }\n      }\n      return prototype || api;\n    },\n\n    copyOwnProperty(name, source, target) {\n      var pd = Object.getOwnPropertyDescriptor(source, name);\n      if (pd) {\n        Object.defineProperty(target, name, pd);\n      }\n    },\n\n    // only needed for v0 native ShadowDOM support\n    getRootNode(node) {\n      if (node.getRootNode) {\n        return node.getRootNode();\n      }\n      if (!node) {\n        return null;\n      }\n      while(node && node.parentNode) {\n        node = node.parentNode;\n      }\n      return node;\n    },\n\n    matchesSelector(node, selector) {\n      return matchesSelector.call(node, selector);\n    },\n\n    cachingMixin(mixin) {\n      return function(base) {\n        if (!mixin.__mixinApplications) {\n          mixin.__mixinApplications = new WeakMap();\n        }\n        let application = mixin.__mixinApplications.get(base);\n        if (!application) {\n          application = mixin(base);\n          mixin.__mixinApplications.set(base, application);\n        }\n        return application;\n      }\n    },\n\n    dedupingMixin(mixin) {\n      mixin = this.cachingMixin(mixin);\n      return function(base) {\n        let baseMap = base.__mixinMap;\n        if (baseMap && baseMap.get(mixin)) {\n          return base;\n        } else {\n          let extended = mixin(base);\n          extended.__mixinMap = new Map(baseMap);\n          extended.__mixinMap.set(mixin, true);\n          return extended;\n        }\n      }\n    }\n\n  };\n\n})();\nPolymer.CaseMap = {\n\n    _caseMap: {},\n    _rx: {\n      dashToCamel: /-[a-z]/g,\n      camelToDash: /([A-Z])/g\n    },\n\n    dashToCamelCase: function(dash) {\n      return this._caseMap[dash] || (\n        this._caseMap[dash] = dash.indexOf('-') < 0 ? dash : dash.replace(this._rx.dashToCamel,\n          function(m) {\n            return m[1].toUpperCase();\n          }\n        )\n      );\n    },\n\n    camelToDashCase: function(camel) {\n      return this._caseMap[camel] || (\n        this._caseMap[camel] = camel.replace(this._rx.camelToDash, '-$1').toLowerCase()\n      );\n    }\n\n  };\n(function() {\n\n  'use strict';\n\n  function createNodeEventHandler(context, eventName, methodName) {\n    context = context._rootDataHost || context;\n    var handler = function(e) {\n      if (context[methodName]) {\n        context[methodName](e, e.detail);\n      } else {\n        console.warn('listener method `' + methodName + '` not defined');\n      }\n    };\n    return handler;\n  }\n\n  Polymer.EventListeners = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class EventListeners extends superClass {\n\n      _addMethodEventListenerToNode(node, eventName, methodName, context) {\n        context = context || node;\n        var handler = createNodeEventHandler(context, eventName, methodName);\n        this._addEventListenerToNode(node, eventName, handler);\n        return handler;\n      }\n\n      _addEventListenerToNode(node, eventName, handler) {\n        node.addEventListener(eventName, handler);\n      }\n\n      _removeEventListenerFromNode(node, eventName, handler) {\n        node.removeEventListener(eventName, handler);\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n    // path fixup for urls in cssText that's expected to\n    // come from a given ownerDocument\n    function resolveCss(cssText, ownerDocument) {\n      return cssText.replace(CSS_URL_RX, function(m, pre, url, post) {\n        return pre + '\\'' +\n          resolve(url.replace(/[\"']/g, ''), ownerDocument) +\n          '\\'' + post;\n      });\n    }\n\n    // url fixup for urls in an element's attributes made relative to\n    // ownerDoc's base url\n    function resolveAttrs(element, ownerDocument) {\n      for (var name in URL_ATTRS) {\n        var a$ = URL_ATTRS[name];\n        for (var i=0, l=a$.length, a, at, v; (i<l) && (a=a$[i]); i++) {\n          if (name === '*' || element.localName === name) {\n            at = element.attributes[a];\n            v = at && at.value;\n            if (v && (v.search(BINDING_RX) < 0)) {\n              at.value = (a === 'style') ?\n                resolveCss(v, ownerDocument) :\n                resolve(v, ownerDocument);\n            }\n          }\n        }\n      }\n    }\n\n    function resolve(url, ownerDocument) {\n      // do not resolve '#' links, they are used for routing\n      if (url && ABS_URL.test(url)) {\n        return url;\n      }\n      var resolver = getUrlResolver(ownerDocument);\n      resolver.href = url;\n      return resolver.href || url;\n    }\n\n    var tempDoc;\n    var tempDocBase;\n    function resolveUrl(url, baseUri) {\n      if (!tempDoc) {\n        tempDoc = document.implementation.createHTMLDocument('temp');\n        tempDocBase = tempDoc.createElement('base');\n        tempDoc.head.appendChild(tempDocBase);\n      }\n      tempDocBase.href = baseUri;\n      return resolve(url, tempDoc);\n    }\n\n    function getUrlResolver(ownerDocument) {\n      return ownerDocument.__urlResolver ||\n        (ownerDocument.__urlResolver = ownerDocument.createElement('a'));\n    }\n\n    var CSS_URL_RX = /(url\\()([^)]*)(\\))/g;\n    var URL_ATTRS = {\n      '*': ['href', 'src', 'style', 'url'],\n      form: ['action']\n    };\n    var ABS_URL = /(^\\/)|(^#)|(^[\\w-\\d]*:)/;\n    var BINDING_RX = /\\{\\{|\\[\\[/;\n\n    // exports\n    Polymer.ResolveUrl = {\n      resolveCss: resolveCss,\n      resolveAttrs: resolveAttrs,\n      resolveUrl: resolveUrl\n    };\n\n  })();\n/**\n * Scans a template to produce an annotation list that that associates\n * metadata culled from markup with tree locations\n * metadata and information to associate the metadata with nodes in an instance.\n *\n * Supported expressions include:\n *\n * Double-mustache annotations in text content. The annotation must be the only\n * content in the tag, compound expressions are not supported.\n *\n *     <[tag]>{{annotation}}<[tag]>\n *\n * Double-escaped annotations in an attribute, either {{}} or [[]].\n *\n *     <[tag] someAttribute=\"{{annotation}}\" another=\"[[annotation]]\"><[tag]>\n *\n * `on-` style event declarations.\n *\n *     <[tag] on-<event-name>=\"annotation\"><[tag]>\n *\n * Note that the `annotations` feature does not implement any behaviors\n * associated with these expressions, it only captures the data.\n *\n * Generated data-structure:\n *\n *     [\n *       {\n *         id: '<id>',\n *         events: [\n *           {\n *             name: '<name>'\n *             value: '<annotation>'\n *           }, ...\n *         ],\n *         bindings: [\n *           {\n *             kind: ['text'|'attribute'],\n *             mode: ['{'|'['],\n *             name: '<name>'\n *             value: '<annotation>'\n *           }, ...\n *         ],\n *         // TODO(sjmiles): this is annotation-parent, not node-parent\n *         parent: <reference to parent annotation object>,\n *         index: <integer index in parent's childNodes collection>\n *       },\n *       ...\n *     ]\n *\n * @class Annotations feature\n */\n(function() {\n\n  'use strict';\n\n  // null-array (shared empty array to avoid null-checks)\n  const emptyArray = [];\n\n  let bindingRegex = (function() {\n    let IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$\\\\-*]*' + ')';\n    let NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n    let SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n    let DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n    let STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n    let ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n    let ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n    let ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                  '(?:' + ARGUMENTS + '?' + ')' +\n                                '\\\\)\\\\s*' + ')';\n    let BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n    let OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n    let CLOSE_BRACKET = '(?:]]|}})';\n    let NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n    let EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n    return new RegExp(EXPRESSION, \"g\");\n  })();\n\n  let insertionPointTag = 'slot';\n  let currentTemplate;\n\n  function parseTemplateAnnotations(template) {\n    // TODO(kschaaf): File issue and/or remove when fixed\n    // hold a reference to content as _content to prevent odd Chrome gc issue\n    // nested templates also may receive their content as _content\n    let content = (template._content = template._content || template.content);\n    // since a template may be re-used, memo-ize notes.\n    if (!content._notes) {\n      content._notes = [];\n      // TODO(sorvell): whitespace and processAnnotations need to be factored\n      // into plugins\n      // TODO(kschaaf): template should be threaded through rather than implied state\n      currentTemplate = currentTemplate || template;\n      parseNodeAnnotations(content, content._notes,\n        template.hasAttribute('strip-whitespace'));\n    }\n    return content._notes;\n  }\n\n  // add annotations gleaned from subtree at `node` to `list`\n  function parseNodeAnnotations(node, list, stripWhiteSpace) {\n    return node.nodeType === Node.TEXT_NODE ?\n      parseTextNodeAnnotation(node, list) :\n        // TODO(sjmiles): are there other nodes we may encounter\n        // that are not TEXT_NODE but also not ELEMENT?\n        parseElementAnnotations(node, list, stripWhiteSpace);\n  }\n\n  // TODO(kschaaf): We could modify this to allow an escape mechanism by\n  // looking for the escape sequence in each of the matches and converting\n  // the part back to a literal type, and then bailing if only literals\n  // were found\n  function parseBindings(text) {\n    let parts = [];\n    let lastIndex = 0;\n    let m;\n    // Example: \"literal1{{prop}}literal2[[!compute(foo,bar)]]final\"\n    // Regex matches:\n    //        Iteration 1:  Iteration 2:\n    // m[1]: '{{'          '[['\n    // m[2]: ''            '!'\n    // m[3]: 'prop'        'compute(foo,bar)'\n    while ((m = bindingRegex.exec(text)) !== null) {\n      // Add literal part\n      if (m.index > lastIndex) {\n        parts.push({literal: text.slice(lastIndex, m.index)});\n      }\n      // Add binding part\n      // Mode (one-way or two)\n      let mode = m[1][0];\n      let negate = Boolean(m[2]);\n      let value = m[3].trim();\n      let customEvent, notifyEvent, colon;\n      if (mode == '{' && (colon = value.indexOf('::')) > 0) {\n        notifyEvent = value.substring(colon + 2);\n        value = value.substring(0, colon);\n        customEvent = true;\n      }\n      parts.push({\n        compoundIndex: parts.length,\n        value: value,\n        mode: mode,\n        negate: negate,\n        event: notifyEvent,\n        customEvent: customEvent\n      });\n      lastIndex = bindingRegex.lastIndex;\n    }\n    // Add a final literal part\n    if (lastIndex && lastIndex < text.length) {\n      let literal = text.substring(lastIndex);\n      if (literal) {\n        parts.push({\n          literal: literal\n        });\n      }\n    }\n    if (parts.length) {\n      return parts;\n    }\n  }\n\n  function literalFromParts(parts) {\n    let s = '';\n    for (let i=0; i<parts.length; i++) {\n      let literal = parts[i].literal;\n      s += literal || '';\n    }\n    return s;\n  }\n\n  // add annotations gleaned from TextNode `node` to `list`\n  function parseTextNodeAnnotation(node, list) {\n    let parts = parseBindings(node.textContent);\n    if (parts) {\n      // Initialize the textContent with any literal parts\n      // NOTE: default to a space here so the textNode remains; some browsers\n      // (IE) evacipate an empty textNode following cloneNode/importNode.\n      node.textContent = literalFromParts(parts) || ' ';\n      let note = {\n        bindings: [{\n          kind: 'text',\n          name: 'textContent',\n          parts: parts,\n          isCompound: parts.length !== 1\n        }]\n      };\n      list.push(note);\n      return note;\n    }\n  }\n\n  // add annotations gleaned from Element `node` to `list`\n  function parseElementAnnotations(element, list, stripWhiteSpace) {\n    let note = {\n      bindings: [],\n      events: []\n    };\n    if (element.localName === insertionPointTag) {\n      list._hasInsertionPoint = true;\n    }\n    parseChildNodesAnnotations(element, note, list, stripWhiteSpace);\n    // TODO(sjmiles): is this for non-ELEMENT nodes? If so, we should\n    // change the contract of this method, or filter these out above.\n    if (element.attributes) {\n      parseNodeAttributeAnnotations(element, note, list);\n      // TODO(sorvell): ad hoc callback for doing work on elements while\n      // leveraging annotator's tree walk.\n      // Consider adding an node callback registry and moving specific\n      // processing out of this module.\n      prepElement(element);\n    }\n    if (note.bindings.length || note.events.length || note.id) {\n      list.push(note);\n    }\n    return note;\n  }\n\n  // add annotations gleaned from children of `root` to `list`, `root`'s\n  // `note` is supplied as it is the note.parent of added annotations\n  function parseChildNodesAnnotations(root, note, list, stripWhiteSpace) {\n    if (root.firstChild) {\n      let node = root.firstChild;\n      let i = 0;\n      while (node) {\n        // BREAKME(kschaaf): pseudo-bc auto-wrapper for template type extensions\n        if (node.localName === 'template') {\n          let t = node;\n          let is = t.getAttribute('is');\n          if (is) {\n            t.removeAttribute('is');\n            node = t.ownerDocument.createElement(is);\n            root.replaceChild(node, t);\n            node.appendChild(t);\n            while(t.attributes.length) {\n              node.setAttribute(t.attributes[0].name, t.attributes[0].value);\n              t.removeAttribute(t.attributes[0].name);\n            }\n          }\n        }\n        if (node.localName === 'template' &&\n          !node.hasAttribute('preserve-content')) {\n          parseTemplate(node, i, list, note);\n        }\n        // collapse adjacent textNodes: fixes an IE issue that can cause\n        // text nodes to be inexplicably split =(\n        // note that root.normalize() should work but does not so we do this\n        // manually.\n        let next = node.nextSibling;\n        if (node.nodeType === Node.TEXT_NODE) {\n          let n = next;\n          while (n && (n.nodeType === Node.TEXT_NODE)) {\n            node.textContent += n.textContent;\n            next = n.nextSibling;\n            root.removeChild(n);\n            n = next;\n          }\n          // optionally strip whitespace\n          if (stripWhiteSpace && !node.textContent.trim()) {\n            root.removeChild(node);\n            // decrement index since node is removed\n            i--;\n          }\n        }\n        // if this node didn't get evacipated, parse it.\n        if (node.parentNode) {\n          let childAnnotation = parseNodeAnnotations(node, list,\n            stripWhiteSpace);\n          if (childAnnotation) {\n            childAnnotation.parent = note;\n            childAnnotation.index = i;\n          }\n        }\n        node = next;\n        i++;\n      }\n    }\n  }\n\n  // 1. Parse annotations from the template and memoize them on\n  //    content._notes (recurses into nested templates)\n  // 2. Remove template.content and store it in annotation list, where it\n  //    will be the responsibility of the host to set it back to the template\n  //    (this is both an optimization to avoid re-stamping nested template\n  //    children and avoids a bug in Chrome where nested template children\n  //    upgrade)\n  function parseTemplate(node, index, list, parent) {\n    let content = document.createDocumentFragment();\n    content._notes = parseTemplateAnnotations(node);\n    content.appendChild(node.content);\n    list.push({\n      bindings: emptyArray,\n      events: emptyArray,\n      templateContent: content,\n      parent: parent,\n      index: index\n    });\n  }\n\n  // add annotation data from attributes to the `annotation` for node `node`\n  // TODO(sjmiles): the distinction between an `annotation` and\n  // `annotation data` is not as clear as it could be\n  function parseNodeAttributeAnnotations(node, annotation) {\n    // Make copy of original attribute list, since the order may change\n    // as attributes are added and removed\n    let attrs = Array.prototype.slice.call(node.attributes);\n    for (let i=attrs.length-1, a; (a=attrs[i]); i--) {\n      let n = a.name;\n      let v = a.value;\n      let b;\n      // events (on-*)\n      if (n.slice(0, 3) === 'on-') {\n        node.removeAttribute(n);\n        annotation.events.push({\n          name: n.slice(3),\n          value: v\n        });\n      }\n      // bindings (other attributes)\n      else if ((b = parseNodeAttributeAnnotation(node, n, v))) {\n        annotation.bindings.push(b);\n      }\n      // static id\n      else if (n === 'id') {\n        annotation.id = v;\n      }\n    }\n  }\n\n  // construct annotation data from a generic attribute, or undefined\n  function parseNodeAttributeAnnotation(node, name, value) {\n    let parts = parseBindings(value);\n    if (parts) {\n      // Attribute or property\n      let origName = name;\n      let kind = 'property';\n      if (name[name.length-1] == '$') {\n        name = name.slice(0, -1);\n        kind = 'attribute';\n      }\n      // Initialize attribute bindings with any literal parts\n      let literal = literalFromParts(parts);\n      if (literal && kind == 'attribute') {\n        node.setAttribute(name, literal);\n      }\n      // Clear attribute before removing, since IE won't allow removing\n      // `value` attribute if it previously had a value (can't\n      // unconditionally set '' before removing since attributes with `$`\n      // can't be set using setAttribute)\n      if (node.localName === 'input' && origName === 'value') {\n        node.setAttribute(origName, '');\n      }\n      // Remove annotation\n      node.removeAttribute(origName);\n      // Case hackery: attributes are lower-case, but bind targets\n      // (properties) are case sensitive. Gambit is to map dash-case to\n      // camel-case: `foo-bar` becomes `fooBar`.\n      // Attribute bindings are excepted.\n      let propertyName = Polymer.CaseMap.dashToCamelCase(name);\n      if (kind === 'property') {\n        name = propertyName;\n      }\n      return {\n        kind: kind,\n        name: name,\n        propertyName: propertyName,\n        parts: parts,\n        literal: literal,\n        isCompound: parts.length !== 1\n      };\n    }\n  }\n\n  // TODO(sorvell): this should be factored into a plugin\n  function prepElement(element) {\n    Polymer.ResolveUrl.resolveAttrs(element, currentTemplate.ownerDocument);\n  }\n\n  Polymer.Annotations = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class Annotations extends superClass {\n\n      // preprocess-time\n\n      // construct and return a list of annotation records\n      // by scanning `template`'s content\n      //\n      // TODO(sorvell): This should just crawl over a template and call\n      // a supplied list of callbacks.\n      _parseTemplateAnnotations(template) {\n        return parseTemplateAnnotations(template);\n      }\n\n      // instance-time\n      // TODO(sorvell): consider trying to use QS instead of this proprietary\n      // search. This would require some unique way to identify a node, a guid.\n      // Is this faster? simpler? Is that worth polluting the node?\n      _findTemplateAnnotatedNode(root, note) {\n        // recursively ascend tree until we hit root\n        let parent = note.parent && this._findTemplateAnnotatedNode(root,\n          note.parent);\n        // unwind the stack, returning the indexed node at each level\n        if (parent) {\n          // note: marginally faster than indexing via childNodes\n          // (http://jsperf.com/childnodes-lookup)\n          for (let n=parent.firstChild, i=0; n; n=n.nextSibling) {\n            if (note.index === i++) {\n              return n;\n            }\n          }\n        } else {\n          return root;\n        }\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  /**\n   * Scans a template to produce an annotation object that stores expression\n   * metadata along with information to associate the metadata with nodes in an\n   * instance.\n   *\n   * Elements with `id` in the template are noted and marshaled into an\n   * the `$` hash in an instance.\n   *\n   * Example\n   *\n   *     &lt;template>\n   *       &lt;div id=\"foo\">&lt;/div>\n   *     &lt;/template>\n   *     &lt;script>\n   *      Polymer({\n   *        task: function() {\n   *          this.$.foo.style.color = 'red';\n   *        }\n   *      });\n   *     &lt;/script>\n   *\n   * Other expressions that are noted include:\n   *\n   * Double-mustache annotations in text content. The annotation must be the only\n   * content in the tag, compound expressions are not (currently) supported.\n   *\n   *     <[tag]>{{path.to.host.property}}<[tag]>\n   *\n   * Double-mustache annotations in an attribute.\n   *\n   *     <[tag] someAttribute=\"{{path.to.host.property}}\"><[tag]>\n   *\n   * Only immediate host properties can automatically trigger side-effects.\n   * Setting `host.path` in the example above triggers the binding, setting\n   * `host.path.to.host.property` does not.\n   *\n   * `on-` style event declarations.\n   *\n   *     <[tag] on-<event-name>=\"{{hostMethodName}}\"><[tag]>\n   *\n   * Note: **the `annotations` feature does not actually implement the behaviors\n   * associated with these expressions, it only captures the data**.\n   *\n   * Other optional features contain actual data implementations.\n   *\n   * @class standard feature: annotations\n   */\n\n  /*\n\n  Scans a template to produce an annotation map that stores expression metadata\n  and information that associates the metadata to nodes in a template instance.\n\n  Supported annotations are:\n\n    * id attributes\n    * binding annotations in text nodes\n      * double-mustache expressions: {{expression}}\n      * double-bracket expressions: [[expression]]\n    * binding annotations in attributes\n      * attribute-bind expressions: name=\"{{expression}} || [[expression]]\"\n      * property-bind expressions: name*=\"{{expression}} || [[expression]]\"\n      * property-bind expressions: name:=\"expression\"\n    * event annotations\n      * event delegation directives: on-<eventName>=\"expression\"\n\n  Generated data-structure:\n\n    [\n      {\n        id: '<id>',\n        events: [\n          {\n            mode: ['auto'|''],\n            name: '<name>'\n            value: '<expression>'\n          }, ...\n        ],\n        bindings: [\n          {\n            kind: ['text'|'attribute'|'property'],\n            mode: ['auto'|''],\n            name: '<name>'\n            value: '<expression>'\n          }, ...\n        ],\n        // TODO(sjmiles): confusingly, this is annotation-parent, not node-parent\n        parent: <reference to parent annotation>,\n        index: <integer index in parent's childNodes collection>\n      },\n      ...\n    ]\n\n  TODO(sjmiles): this module should produce either syntactic metadata\n  (e.g. double-mustache, double-bracket, star-attr), or semantic metadata\n  (e.g. manual-bind, auto-bind, property-bind). Right now it's half and half.\n\n  */\n\n  // construct `$` map (from id annotations)\n  function applyIdToMap(inst, map, dom, note) {\n    if (note.id) {\n      map[note.id] = inst._findTemplateAnnotatedNode(dom, note);\n    }\n  }\n\n  // install event listeners (from event annotations)\n  function applyEventListener(inst, dom, note, host) {\n    if (note.events && note.events.length) {\n      var node = inst._findTemplateAnnotatedNode(dom, note);\n      for (var j=0, e$=note.events, e; (j<e$.length) && (e=e$[j]); j++) {\n        inst._addMethodEventListenerToNode(node, e.name, e.value, host);\n      }\n    }\n  }\n\n  // push configuration references at configure time\n  function applyTemplateContent(inst, dom, note) {\n    if (note.templateContent) {\n      var node = inst._findTemplateAnnotatedNode(dom, note);\n      node._content = note.templateContent;\n    }\n  }\n\n  Polymer.TemplateStamp = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class TemplateStamp extends Polymer.Annotations(Polymer.EventListeners(superClass)) {\n\n      constructor() {\n        super();\n        this.$ = null;\n      }\n\n      _stampTemplate(template) {\n        // Polyfill support: bootstrap the template if it has not already been\n        if (template && !template.content &&\n            window.HTMLTemplateElement && HTMLTemplateElement.decorate) {\n          HTMLTemplateElement.decorate(template);\n        }\n        var notes = this._parseTemplateAnnotations(template);\n        var dom = document.importNode(template._content || template.content, true);\n        // NOTE: ShadyDom optimization indicating there is an insertion point\n        dom.__noInsertionPoint = !notes._hasInsertionPoint;\n        this.$ = {};\n        for (var i=0, l=notes.length, note; (i<l) && (note=notes[i]); i++) {\n          applyIdToMap(this, this.$, dom, note);\n          applyTemplateContent(this, dom, note);\n          applyEventListener(this, dom, note, this);\n        }\n        return dom;\n      }\n\n    }\n\n  });\n\n})();\nPolymer.Path = {\n\n    root: function(path) {\n      var dotIndex = path.indexOf('.');\n      if (dotIndex === -1) {\n        return path;\n      }\n      return path.slice(0, dotIndex);\n    },\n\n    isDeep: function(path) {\n      return path.indexOf('.') !== -1;\n    },\n\n    // Given `base` is `foo.bar`, `foo` is an ancestor, `foo.bar` is not\n    isAncestor: function(base, path) {\n      //     base.startsWith(path + '.');\n      return base.indexOf(path + '.') === 0;\n    },\n\n    // Given `base` is `foo.bar`, `foo.bar.baz` is an descendant\n    isDescendant: function(base, path) {\n      //     path.startsWith(base + '.');\n      return path.indexOf(base + '.') === 0;\n    },\n\n    // can be read as:  from  to       path\n    translate: function(base, newBase, path) {\n      // Defense?\n      return newBase + path.slice(base.length);\n    },\n\n    matches: function(base, path) {\n      return (base === path) ||\n             this.isAncestor(base, path) ||\n             this.isDescendant(base, path);\n    },\n\n    // Converts array-based paths to flattened path, optionally split into array\n    normalize: function(path, split) {\n      if (Array.isArray(path)) {\n        var parts = [];\n        for (var i=0; i<path.length; i++) {\n          var args = path[i].toString().split('.');\n          for (var j=0; j<args.length; j++) {\n            parts.push(args[j]);\n          }\n        }\n        return split ? parts : parts.join('.');\n      } else {\n        return split ? path.toString().split('.') : path;\n      }\n    },\n\n    get: function(root, path, info) {\n      var prop = root;\n      var parts = this.normalize(path, true);\n      // Loop over path parts[0..n-1] and dereference\n      for (var i=0; i<parts.length; i++) {\n        if (!prop) {\n          return;\n        }\n        var part = parts[i];\n        prop = prop[part];\n      }\n      if (info) {\n        info.path = parts.join('.');\n      }\n      return prop;\n    },\n\n    set: function(root, path, value) {\n      var prop = root;\n      var parts = this.normalize(path, true);\n      var last = parts[parts.length-1];\n      if (parts.length > 1) {\n        // Loop over path parts[0..n-2] and dereference\n        for (var i=0; i<parts.length-1; i++) {\n          var part = parts[i];\n          prop = prop[part];\n          if (!prop) {\n            return;\n          }\n        }\n        // Set value to object at end of path\n        prop[last] = value;\n      } else {\n        // Simple property set\n        prop[path] = value;\n      }\n      return parts.join('.');\n    }\n\n  };\n(function() {\n\n  'use strict';\n\n  // Save map of native properties\n  const nativeProperties = {};\n  let proto = HTMLElement.prototype;\n  while (proto) {\n    let props = Object.getOwnPropertyNames(proto);\n    for (let i=0; i<props.length; i++) {\n      nativeProperties[props[i]] = true;\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  function saveAccessorValue(model, property) {\n    // Don't read/store value for any native properties since they could throw\n    if (!nativeProperties[property]) {\n      let value = model[property];\n      if (value !== undefined) {\n        if (!model.__dataProto) {\n          model.__dataProto = {};\n        } else if (!model.hasOwnProperty('__dataProto')) {\n          model.__dataProto = Object.create(model.__dataProto);\n        }\n        model.__dataProto[property] = value;\n      }      \n    }\n  }\n\n  Polymer.PropertyAccessors = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class PropertyAccessors extends superClass {\n\n      constructor() {\n        super();\n        this._initializeProperties();\n      }\n\n      _initializeProperties() {\n        this.__data = {};\n        this.__dataPending = null;\n        this.__dataOld = null;\n        this.__dataInvalid = false;\n      }\n\n      _createPropertyAccessor(property, readOnly) {\n        saveAccessorValue(this, property);\n        Object.defineProperty(this, property, {\n          get: function() {\n            return this.__data && this.__data[property];\n          },\n          set: readOnly ? function() { } : function(value) {\n            this._setProperty(property, value);\n          }\n        });\n      }\n\n      _setProperty(property, value) {\n        if (this._setPendingProperty(property, value)) {\n          this._invalidateProperties();\n        }\n      }\n\n      _setPendingProperty(property, value) {\n        let old = this.__data[property];\n        if (this._shouldPropChange(value, old)) {\n          if (!this.__dataPending) {\n            this.__dataPending = {};\n            this.__dataOld = {};\n          }\n          // Ensure old is captured from the last turn\n          if (!(property in this.__dataOld)) {\n            this.__dataOld[property] = old;\n          }\n          this.__data[property] = value;\n          this.__dataPending[property] = value;\n          return true;\n        }\n      }\n\n      _invalidateProperties() {\n        if (!this.__dataInvalid) {\n          this.__dataInvalid = true;\n          Promise.resolve().then(() => {\n            if (this.__dataInvalid) {\n              this.__dataInvalid = false;\n              this._flushProperties();\n            }\n          });\n        }\n      }\n\n      _flushProperties() {\n        let oldProps = this.__dataOld;\n        let changedProps = this.__dataPending;\n        this.__dataPending = null;\n        this._propertiesChanged(this.__data, changedProps, oldProps);\n      }\n\n      _propertiesChanged(inst, currentProps, changedProps, oldProps) { // eslint-disable-line no-unused-vars\n      }\n\n      _shouldPropChange(value, old) {\n        return ((old !== value && (old === old || value === value)) ||\n          (typeof value == 'object'));\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  var caseMap = Polymer.CaseMap;\n\n  Polymer.Attributes = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class Attributes extends superClass {\n\n      constructor() {\n        super();\n        this.__serializing = false;\n      }\n\n      /**\n       * Ensures the element has the given attribute. If it does not,\n       * assigns the given value to the attribute.\n       *\n       *\n       * @method _ensureAttribute\n       * @param {string} attribute Name of attribute to ensure is set.\n       * @param {string} value of the attribute.\n       */\n      _ensureAttribute(attribute, value) {\n        if (!this.hasAttribute(attribute)) {\n          this._valueToNodeAttribute(this, value, attribute);\n        }\n      }\n\n      /**\n       * Deserializes an attribute to its associated property.\n       *\n       * This method calls the `_deserializeAttribute` method to convert the string to\n       * a typed value.\n       *\n       * @method _attributeToProperty\n       * @param {string} attribute Name of attribute to deserialize.\n       * @param {string} value of the attribute.\n       * @param {*} type type to deserialize to.\n       */\n      _attributeToProperty(attribute, value, type) {\n        // Don't deserialize back to property if currently reflecting\n        if (!this.__serializing) {\n          var property = caseMap.dashToCamelCase(attribute);\n          this[property] = this._deserializeAttribute(value, type);\n        }\n      }\n\n      /**\n       * Serializes a property to its associated attribute.\n       *\n       * @method _propertyToAttribute\n       * @param {string} property Property name to reflect.\n       * @param {*=} attribute Attribute name to reflect.\n       * @param {*=} value Property value to refect.\n       */\n      _propertyToAttribute(property, attribute, value) {\n        this.__serializing = true;\n        value = (value === undefined) ? this[property] : value;\n        this._valueToNodeAttribute(this, value,\n          attribute || caseMap.camelToDashCase(property));\n        this.__serializing = false;\n      }\n\n      /**\n       * Sets a typed value to an HTML attribute on a node.\n       *\n       * This method calls the `_serializeAttribute` method to convert the typed\n       * value to a string.  If the `_serializeAttribute` method returns `undefined`,\n       * the attribute will be removed (this is the default for boolean\n       * type `false`).\n       *\n       * @method _valueToAttribute\n       * @param {Element=} node Element to set attribute to.\n       * @param {*} value Value to serialize.\n       * @param {string} attribute Attribute name to serialize to.\n\n       */\n      _valueToNodeAttribute(node, value, attribute) {\n        var str = this._serializeAttribute(value);\n        if (str === undefined) {\n          node.removeAttribute(attribute);\n        } else {\n          node.setAttribute(attribute, str);\n        }\n      }\n\n      /**\n       * Converts a typed value to a string.\n       *\n       * This method is called by Polymer when setting JS property values to\n       * HTML attributes.  Users may override this method on Polymer element\n       * prototypes to provide serialization for custom types.\n       *\n       * @method _serializeAttribute\n       * @param {*} value Property value to serialize.\n       * @return {string} String serialized from the provided property value.\n       */\n      _serializeAttribute(value) {\n        /* eslint-disable no-fallthrough */\n        switch (typeof value) {\n          case 'boolean':\n            return value ? '' : undefined;\n\n          case 'object':\n            if (value instanceof Date) {\n              return value;\n            } else if (value) {\n              try {\n                return JSON.stringify(value);\n              } catch(x) {\n                return '';\n              }\n            }\n\n          default:\n            return value != null ? value : undefined;\n        }\n      }\n\n      /**\n       * Converts a string to a typed value.\n       *\n       * This method is called by Polymer when reading HTML attribute values to\n       * JS properties.  Users may override this method on Polymer element\n       * prototypes to provide deserialization for custom `type`s.  Note,\n       * the `type` argument is the value of the `type` field provided in the\n       * `properties` configuration object for a given property, and is\n       * by convention the constructor for the type to deserialize.\n       *\n       * Note: The return value of `undefined` is used as a sentinel value to\n       * indicate the attribute should be removed.\n       *\n       * @method _deserializeAttribute\n       * @param {string} value Attribute value to deserialize.\n       * @param {*} type Type to deserialize the string to.\n       * @return {*} Typed value deserialized from the provided string.\n       */\n      _deserializeAttribute(value, type) {\n        switch (type) {\n          case Number:\n            value = Number(value);\n            break;\n\n          case Boolean:\n            value = (value !== null);\n            break;\n\n          case Object:\n            try {\n              value = JSON.parse(value);\n            } catch(x) {\n              // allow non-JSON literals like Strings and Numbers\n            }\n            break;\n\n          case Array:\n            try {\n              value = JSON.parse(value);\n            } catch(x) {\n              value = null;\n              console.warn('Polymer::Attributes: couldn`t decode Array as JSON');\n            }\n            break;\n\n          case Date:\n            value = new Date(value);\n            break;\n\n          case String:\n          default:\n            break;\n        }\n        return value;\n      }\n      /* eslint-enable no-fallthrough */\n    }\n\n  });\n\n\n})();\n(function() {\n\n  'use strict';\n\n  const CaseMap = Polymer.CaseMap;\n\n  const TYPES = {\n    ANY: '__propertyEffects',\n    COMPUTE: '__computeEffects',\n    REFLECT: '__reflectEffects',\n    NOTIFY: '__notifyEffects',\n    PROPAGATE: '__propagateEffects',\n    OBSERVE: '__observeEffects',\n    READ_ONLY: '__readOnly'\n  }\n\n  function ensureOwnMappedArray(model, type) {\n    let effects = model[type];\n    if (!effects) {\n      effects = model[type] = {};\n    } else if (!model.hasOwnProperty(type)) {\n      effects = model[type] = Object.create(model[type]);\n      for (let p in effects) {\n        // TODO(kschaaf): replace with fast array copy #!%&$!\n        effects[p] = effects[p].slice();\n      }\n    }\n    return effects;\n  }\n\n  // -- effects ----------------------------------------------\n\n  function runEffects(inst, property, value, old, effects) {\n    for (let i=0, l=effects.length, fx; (i<l) && (fx=effects[i]); i++) {\n      if (Polymer.Path.matches(fx.path, property)) {\n        fx.fn(inst, property, inst.__data[property], old, fx.info);\n      }\n    }\n  }\n\n  function runObserverEffect(inst, property, value, old, info) {\n    let fn = (info.context || inst)[info.methodName];\n    if (fn) {\n      fn.call(inst, value, old);\n    } else {\n      console.warn('observer method `' + info.methodName + '` not defined');\n    }\n  }\n\n  function runNotifyEffect(inst, path, value, old, info) {\n    let detail = { value };\n    if (info.property !== path) {\n      detail.path = path;\n    }\n    inst._dispatchNotifyingEvent(new CustomEvent(info.eventName, { detail }))\n  }\n\n  function runReflectEffect(inst, property, value, old, info) {\n    inst._propertyToAttribute(property, info.attrName);\n  }\n\n  function runMultiObserverEffect(inst, property, value, old, info) {\n    runMethodEffect(inst, property, value, old, info);\n  }\n\n  function runComputedEffect(inst, property, value, old, info) {\n    var result = runMethodEffect(inst, property, value, old, info);\n    var computedProp = info.methodInfo;\n    inst._setPropertyFromComputation(computedProp, result);\n  }\n\n  // -- bindings / annotations ----------------------------------------------\n\n  function bindTemplate(inst, template) {\n    let notes = inst._parseTemplateAnnotations(template);\n    processAnnotations(notes);\n    for (let i=0, note; (i<notes.length) && (note=notes[i]); i++)  {\n      // where to find the node in the concretized list\n      let b$ = note.bindings;\n      for (let j=0, binding; (j<b$.length) && (binding=b$[j]); j++) {\n        if (shouldAddListener(binding)) {\n          addAnnotatedListener(inst, i, binding.name,\n            binding.parts[0].value,\n            binding.parts[0].event,\n            binding.parts[0].negate);\n        }\n        addAnnotationEffect(inst, binding, i);\n      }\n    }\n  }\n\n  function addAnnotationEffect(inst, note, index) {\n    for (let i=0; i<note.parts.length; i++) {\n      let part = note.parts[i];\n      if (part.signature) {\n        addAnnotationMethodEffect(inst, note, part, index);\n      } else if (!part.literal) {\n        if (note.kind === 'attribute' && note.name[0] === '-') {\n          console.warn('Cannot set attribute ' + note.name +\n            ' because \"-\" is not a valid attribute starting character');\n        } else {\n          inst._addPropertyEffect(part.value, TYPES.PROPAGATE, {\n            fn: runAnnotationEffect,\n            info:  {\n              kind: note.kind,\n              index: index,\n              name: note.name,\n              propertyName: note.propertyName,\n              value: part.value,\n              isCompound: note.isCompound,\n              compoundIndex: part.compoundIndex,\n              event: part.event,\n              customEvent: part.customEvent,\n              negate: part.negate\n            }\n          });\n        }\n      }\n    }\n  }\n\n  function runAnnotationEffect(inst, path, value, old, info) {\n    let node = inst._nodes[info.index];\n    // Subpath notification: transform path and set to client\n    // e.g.: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo.prop'=obj.sub.prop\n    if ((path.length > info.value.length) &&\n        (info.kind == 'property') && !info.isCompound &&\n        node._hasPropertyEffect && node._hasPropertyEffect(info.name)) {\n      path = Polymer.Path.translate(info.value, info.name, path);\n      inst._setPropertyToNodeFromAnnotation(node, path, value);\n    } else {\n      // Root or deeper path was set; extract bound path value\n      // e.g.: foo=\"{{obj.sub}}\", path: 'obj', set 'foo'=obj.sub\n      //   or: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo'=obj.sub\n      if (path != info.value) {\n        value = Polymer.Path.get(inst, info.value);\n        inst.__data[info.value] = value;\n      }\n      // Propagate value to child\n      applyAnnotationValue(inst, info, value);\n    }\n  }\n\n  function applyAnnotationValue(inst, info, value) {\n    let node = inst._nodes[info.index];\n    let property = info.name;\n    value = computeAnnotationValue(node, property, value, info);\n    if (info.kind == 'attribute') {\n      inst._valueToNodeAttribute(node, value, property);\n    } else {\n      if (node._hasPropertyEffect && node._hasPropertyEffect(property)) {\n        inst._setPropertyToNodeFromAnnotation(node, property, value);\n      } else if (inst._shouldPropChange(node[property], value)) {\n        node[property] = value;\n      }\n    }\n  }\n\n  // Process compound, negate, special case properties\n  function computeAnnotationValue(node, property, value, info) {\n    if (info.negate) {\n      value = !value;\n    }\n    if (info.isCompound) {\n      let storage = node.__dataCompoundStorage[property];\n      storage[info.compoundIndex] = value;\n      value = storage.join('');\n    }\n    if (info.kind !== 'attribute') {\n      // TODO(sorvell): preserve scoping during changes to class\n      // if (property === 'className') {\n      //   value = this._scopeElementClass(node, value);\n      // }\n      // Some browsers serialize `undefined` to `\"undefined\"`\n      if (property === 'textContent' ||\n          (node.localName == 'input' && property == 'value')) {\n        value = value == undefined ? '' : value;\n      }\n    }\n    return value;\n  }\n\n  function addAnnotationMethodEffect(inst, note, part, index) {\n    createMethodEffect(inst, part.signature, TYPES.PROPAGATE,\n      runAnnotationMethodEffect, {\n        index: index,\n        isCompound: note.isCompound,\n        compoundIndex: part.compoundIndex,\n        kind: note.kind,\n        name: note.name,\n        negate: part.negate,\n        part: part\n      }, true\n    );\n  }\n\n  function runAnnotationMethodEffect(inst, property, value, old, info) {\n    let val = runMethodEffect(inst, property, value, old, info);\n    applyAnnotationValue(inst, info.methodInfo, val);\n  }\n\n  function processAnnotations(notes) {\n    if (!notes._processed) {\n      for (let i=0; i<notes.length; i++) {\n        let note = notes[i];\n        // Parse bindings for methods & path roots (models)\n        for (let j=0; j<note.bindings.length; j++) {\n          let b = note.bindings[j];\n          for (let k=0; k<b.parts.length; k++) {\n            let p = b.parts[k];\n            if (!p.literal) {\n              p.signature = parseMethod(p.value);\n              if (!p.signature) {\n                p.rootProperty = Polymer.Path.root(p.value);\n              }\n            }\n          }\n        }\n        // Recurse into nested templates & bind parent props\n        if (note.templateContent) {\n          processAnnotations(note.templateContent._notes);\n          let pp = note.templateContent._hostProps =\n            discoverTemplateHostProps(note.templateContent._notes);\n          let bindings = [];\n          for (let prop in pp) {\n            bindings.push({\n              index: note.index,\n              kind: 'property',\n              name: '_host_' + prop,\n              parts: [{\n                mode: '{',\n                rootProperty: prop,\n                value: prop\n              }]\n            });\n          }\n          note.bindings = note.bindings.concat(bindings);\n        }\n      }\n      notes._processed = true;\n    }\n  }\n\n  // Finds all bindings in template content and stores the path roots in\n  // the path members in content._hostProps. Each outer template merges\n  // inner _hostProps to propagate inner parent property needs to outer\n  // templates.\n  function discoverTemplateHostProps(notes) {\n    let pp = {};\n    for (let i=0, n; (i<notes.length) && (n=notes[i]); i++) {\n      // Find all bindings to parent.* and spread them into _parentPropChain\n      for (let j=0, b$=n.bindings, b; (j<b$.length) && (b=b$[j]); j++) {\n        for (let k=0, p$=b.parts, p; (k<p$.length) && (p=p$[k]); k++) {\n          if (p.signature) {\n            let args = p.signature.args;\n            for (let kk=0; kk<args.length; kk++) {\n              let rootProperty = args[kk].rootProperty;\n              if (rootProperty) {\n                pp[rootProperty] = true;\n              }\n            }\n            pp[p.signature.methodName] = true;\n          } else {\n            if (p.rootProperty) {\n              pp[p.rootProperty] = true;\n            }\n          }\n        }\n      }\n      // Merge child _hostProps into this _hostProps\n      if (n.templateContent) {\n        let tpp = n.templateContent._hostProps;\n        Polymer.Base.mixin(pp, tpp);\n      }\n    }\n    return pp;\n  }\n\n  function shouldAddListener(effect) {\n    return effect.name &&\n           effect.kind != 'attribute' &&\n           effect.kind != 'text' &&\n           !effect.isCompound &&\n           effect.parts[0].mode === '{';\n  }\n\n  function addAnnotatedListener(inst, index, property, path, event, negate) {\n    if (!inst._bindListeners) {\n      inst._bindListeners = [];\n    }\n    let eventName = event ||\n      (CaseMap.camelToDashCase(property) + '-changed');\n    inst._bindListeners.push({\n      index: index,\n      property: property,\n      path: path,\n      event: eventName,\n      negate: negate\n    });\n  }\n\n  function setupBindListeners(inst) {\n    let b$ = inst._bindListeners;\n    for (let i=0, l=b$.length, info; (i<l) && (info=b$[i]); i++) {\n      let node = inst._nodes[info.index];\n      addNotifyListener(node, inst, info);\n    }\n  }\n\n  function addNotifyListener(node, inst, info) {\n    let rootProperty = Polymer.Path.root(info.path);\n    node.addEventListener(info.event, function(e) {\n      handleNotification(e, inst, info.property, info.path,\n        rootProperty, info.negate);\n    });\n  }\n\n  function handleNotification(e, inst, property, path, rootProperty, negate) {\n    let value;\n    let targetPath = e.detail && e.detail.path;\n    if (targetPath) {\n      path = Polymer.Path.translate(property, path, e.detail.path);\n      value = e.detail && e.detail.value;\n    } else {\n      value = e.target[property];\n    }\n    value = negate ? !value : value;\n    inst._setPropertyFromNotification(path, value, e);\n  }\n\n  // -- for method-based effects (complexObserver & computed) --------------\n\n  function createMethodEffect(inst, sig, type, effectFn, methodInfo, dynamic) {\n    let info = {\n      methodName: sig.methodName,\n      args: sig.args,\n      methodInfo: methodInfo,\n      dynamicFn: dynamic\n    };\n    // TODO(sorvell): why still here?\n    if (sig.static) {\n      inst._addPropertyEffect('__static__', type, {\n        fn: effectFn, info: info\n      });\n    } else {\n      for (let i=0, arg; (i<sig.args.length) && (arg=sig.args[i]); i++) {\n        if (!arg.literal) {\n          inst._addPropertyEffect(arg.name, type, {\n            fn: effectFn, info: info\n          });\n        }\n      }\n    }\n    if (dynamic) {\n      inst._addPropertyEffect(sig.methodName, type, {\n        fn: effectFn, info: info\n      });\n    }\n  }\n\n  function runMethodEffect(inst, property, value, old, info) {\n    // TODO(kschaaf): ideally rootDataHost would be a detail of Templatizer only\n    let context = inst._rootDataHost || inst;\n    let fn = context[info.methodName];\n    if (fn) {\n      let args = marshalArgs(inst.__data, info, property, value);\n      return fn.apply(context, args);\n    } else if (!info.dynamicFn) {\n      console.warn('method `' + info.methodName + '` not defined');\n    }\n  }\n\n  const emptyArray = [];\n\n  function parseMethod(expression) {\n    // tries to match valid javascript property names\n    let m = expression.match(/([^\\s]+?)\\(([\\s\\S]*)\\)/);\n    if (m) {\n      let sig = { methodName: m[1], static: true };\n      if (m[2].trim()) {\n        // replace escaped commas with comma entity, split on un-escaped commas\n        let args = m[2].replace(/\\\\,/g, '&comma;').split(',');\n        return parseArgs(args, sig);\n      } else {\n        sig.args = emptyArray;\n        return sig;\n      }\n    }\n  }\n\n  function parseArgs(argList, sig) {\n    sig.args = argList.map(function(rawArg) {\n      let arg = parseArg(rawArg);\n      if (!arg.literal) {\n        sig.static = false;\n      }\n      return arg;\n    }, this);\n    return sig;\n  }\n\n  function parseArg(rawArg) {\n    // clean up whitespace\n    let arg = rawArg.trim()\n      // replace comma entity with comma\n      .replace(/&comma;/g, ',')\n      // repair extra escape sequences; note only commas strictly need\n      // escaping, but we allow any other char to be escaped since its\n      // likely users will do this\n      .replace(/\\\\(.)/g, '\\$1')\n      ;\n    // basic argument descriptor\n    let a = {\n      name: arg\n    };\n    // detect literal value (must be String or Number)\n    let fc = arg[0];\n    if (fc === '-') {\n      fc = arg[1];\n    }\n    if (fc >= '0' && fc <= '9') {\n      fc = '#';\n    }\n    switch(fc) {\n      case \"'\":\n      case '\"':\n        a.value = arg.slice(1, -1);\n        a.literal = true;\n        break;\n      case '#':\n        a.value = Number(arg);\n        a.literal = true;\n        break;\n    }\n    // if not literal, look for structured path\n    if (!a.literal) {\n      a.rootProperty = Polymer.Path.root(arg);\n      // detect structured path (has dots)\n      a.structured = Polymer.Path.isDeep(arg);\n      if (a.structured) {\n        a.wildcard = (arg.slice(-2) == '.*');\n        if (a.wildcard) {\n          a.name = arg.slice(0, -2);\n        }\n      }\n    }\n    return a;\n  }\n\n  // path & value are used to fill in wildcard descriptor when effect is\n  // being called as a result of a path notification\n  function marshalArgs(data, info, path, value) {\n    let values = [];\n    let args = info.args;\n    for (let i=0, l=args.length; i<l; i++) {\n      let arg = args[i];\n      let name = arg.name;\n      let v;\n      if (arg.literal) {\n        v = arg.value;\n      } else if (path == name) {\n        v = value;\n      } else {\n        // TODO(kschaaf): confirm design of this\n        v = data[name];\n        if (v === undefined && arg.structured) {\n          v = Polymer.Path.get(data, name);\n        }\n      }\n      if (arg.wildcard) {\n        // Only send the actual path changed info if the change that\n        // caused the observer to run matched the wildcard\n        let baseChanged = (name.indexOf(path + '.') === 0);\n        let matches = (path.indexOf(name) === 0 && !baseChanged);\n        values[i] = {\n          path: matches ? path : name,\n          value: matches ? value : v,\n          base: v\n        };\n      } else {\n        values[i] = v;\n      }\n    }\n    return values;\n  }\n\n  function setupBindings(inst, dom, notes) {\n    if (notes.length) {\n      let nodes = new Array(notes.length);\n      for (let i=0; i < notes.length; i++) {\n        let note = notes[i];\n        let node = nodes[i] = inst._findTemplateAnnotatedNode(dom, note);\n        node.__dataHost = inst;\n        if (note.bindings) {\n          setupCompoundBinding(note, node);\n        }\n      }\n      inst._nodes = nodes;\n    }\n    if (inst._bindListeners) {\n      setupBindListeners(inst);\n    }\n  }\n\n  function setupCompoundBinding(note, node) {\n    let bindings = note.bindings;\n    for (let i=0; i<bindings.length; i++) {\n      let binding = bindings[i];\n      if (binding.isCompound) {\n        // Create compound storage map\n        let storage = node.__dataCompoundStorage ||\n          (node.__dataCompoundStorage = {});\n        let parts = binding.parts;\n        // Copy literals from parts into storage for this binding\n        let literals = new Array(parts.length);\n        for (let j=0; j<parts.length; j++) {\n          literals[j] = parts[j].literal;\n        }\n        let name = binding.name;\n        storage[name] = literals;\n        // Configure properties with their literal parts\n        if (binding.literal && binding.kind == 'property') {\n          // TODO(kschaaf) config integration\n          // if (node._configValue) {\n          //   node._configValue(name, binding.literal);\n          // } else {\n            node[name] = binding.literal;\n          // }\n        }\n      }\n    }\n  }\n\n  // data api\n\n  // Note: this implemetation only accepts normalized paths\n  function notifySplices(inst, array, path, splices) {\n    let change = {\n      indexSplices: splices\n    };\n    let splicesPath = path + '.splices';\n    inst._setProperty(splicesPath, change);\n    inst._setProperty(path + '.length', array.length);\n    // All path notification values are cached on `this.__data__`.\n    // Null here to allow potentially large splice records to be GC'ed.\n    inst.__data[splicesPath] = {indexSplices: null};\n  }\n\n  function notifySplice(inst, array, path, index, added, removed) {\n    notifySplices(inst, array, path, [{\n      index: index,\n      addedCount: added,\n      removed: removed,\n      object: array,\n      type: 'splice'\n    }]);\n  }\n\n  function upper(name) {\n    return name[0].toUpperCase() + name.substring(1);\n  }\n\n  Polymer.PropertyEffects = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class PropertyEffects extends Polymer.TemplateStamp(\n      Polymer.Attributes(Polymer.PropertyAccessors(superClass))) {\n\n      get PROPERTY_EFFECT_TYPES() {\n        return TYPES;\n      }\n\n      constructor() {\n        super();\n        this._asyncEffects = false;\n        this.__dataInitialized = false;\n        this.__dataPendingClients = null;\n        this.__dataFromAbove = false;\n        this.__dataLinkedPaths = null;\n        this._nodes = null;\n        // May be set on instance prior to upgrade\n        this.__dataCompoundStorage = this.__dataCompoundStorage || null;\n        this.__dataHost = this.__dataHost || null;\n      }\n\n      _initializeProperties() {\n        super._initializeProperties();\n        // initialize data with prototype values saved when creating accessors\n        if (this.__dataProto) {\n          this.__data = Object.create(this.__dataProto);\n          this.__dataPending = Object.create(this.__dataProto);\n          this.__dataOld = {};\n        } else {\n          this.__dataPending = null;\n        }\n        // update instance properties\n        for (let p in this.__propertyEffects) {\n          if (this.hasOwnProperty(p)) {\n            let value = this[p];\n            delete this[p];\n            this[p] = value;\n          }\n        }\n      }\n\n      _isPropertyPending(prop) {\n        return this.__dataPending && (prop in this.__dataPending);\n      }\n\n      // Prototype setup ----------------------------------------\n\n      _addPropertyEffect(path, type, effect) {\n        let property = Polymer.Path.root(path);\n        // __propertyEffects only used to track whether an accessor has been created or not\n        let effects = ensureOwnMappedArray(this, TYPES.ANY)[property];\n        let val;\n        if (!effects) {\n          effects = this.__propertyEffects[property] = [];\n          val = this._createPropertyAccessor(property,\n            type == TYPES.READ_ONLY);\n        }\n        // effects are accumulated into arrays per property based on type\n        if (effect) {\n          effect.path = path;\n          effects.push(effect);\n        }\n        effects = ensureOwnMappedArray(this, type)[property];\n        if (!effects) {\n          effects = this[type][property] = [];\n        }\n        effects.push(effect);\n        return val;\n      }\n\n      _hasPropertyEffect(property, type) {\n        let effects = this[type || TYPES.ANY];\n        return Boolean(effects && effects[property]);\n      }\n\n      _hasReadOnlyEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.READ_ONLY);\n      }\n\n      _hasNotifyEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.NOTIFY);\n      }\n\n      _hasReflectEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.REFLECT);\n      }\n\n      _hasComputedEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.COMPUTE);\n      }\n\n      // Runtime ----------------------------------------\n\n      // This function isolates relatively expensive functionality necessary\n      // for the public API, such that it is only done when paths enter the\n      // system, and not in every step of the hot path.\n      // If `path` is an unmanaged property (property without an accessor)\n      // or a path, sets the value at that path.  If the root of the path\n      // is a managed property, returns a normalized string path\n      // sutable for setting into the system via setProperty/setPendingProperty\n      // `path` can be a user-facing path string or array of path parts.\n      _setPathOrUnmanagedProperty(path, value) {\n        let rootProperty = Polymer.Path.root(Array.isArray(path) ? path[0] : path);\n        let hasEffect = this._hasPropertyEffect(rootProperty);\n        let isPath = (rootProperty !== path);\n        if (!hasEffect || isPath) {\n          path = Polymer.Path.set(this, path, value);\n        }\n        if (hasEffect) {\n          return path;\n        }\n      }\n\n      _invalidateProperties() {\n        if (this.__dataInitialized) {\n          if (this._asyncEffects) {\n            super._invalidateProperties();\n          } else {\n            this._flushProperties();\n          }\n        }\n      }\n\n      _flushProperties(fromAbove) {\n        if (!this.__dataInitialized) {\n          this.ready();\n        }\n        if (this.__dataPending || this.__dataPendingClients) {\n          this.__dataFromAbove = fromAbove;\n          super._flushProperties();\n          this.__dataFromAbove = false;\n        }\n      }\n\n      ready() {\n        this.__dataInitialized = true;\n      }\n\n      _stampTemplate(template) {\n        let dom = super._stampTemplate(template);\n        let notes = (template._content || template.content)._notes;\n        this._setupBindings(dom, notes);\n        return dom;\n      }\n\n      _propertiesChanged(currentProps, changedProps, oldProps) {\n        for (let p in changedProps) {\n          let effects = this.__propertyEffects[p];\n          runEffects(this, p, changedProps[p], oldProps[p], effects);\n        }\n      }\n\n      /**\n       * Aliases one data path as another, such that path notifications from one\n       * are routed to the other.\n       *\n       * @method linkPaths\n       * @param {string} to Target path to link.\n       * @param {string} from Source path to link.\n       */\n      linkPaths(to, from) {\n        to = Polymer.Path.normalize(to);\n        from = Polymer.Path.normalize(from);\n        this.__dataLinkedPaths = this.__dataLinkedPaths || {};\n        if (from) {\n          this.__dataLinkedPaths[to] = from;\n        } else {\n          this.__dataLinkedPaths(to);\n        }\n      }\n\n      /**\n       * Removes a data path alias previously established with `_linkPaths`.\n       *\n       * Note, the path to unlink should be the target (`to`) used when\n       * linking the paths.\n       *\n       * @method unlinkPaths\n       * @param {string} path Target path to unlink.\n       */\n      unlinkPaths(path) {\n        path = Polymer.Path.normalize(path);\n        if (this.__dataLinkedPaths) {\n          delete this.__dataLinkedPaths[path];\n        }\n      }\n\n      /**\n       * Notify that an array has changed.\n       *\n       * Example:\n       *\n       *     this.items = [ {name: 'Jim'}, {name: 'Todd'}, {name: 'Bill'} ];\n       *     ...\n       *     this.items.splice(1, 1, {name: 'Sam'});\n       *     this.items.push({name: 'Bob'});\n       *     this.notifySplices('items', [\n       *       { index: 1, removed: [{name: 'Todd'}], addedCount: 1, obect: this.items, type: 'splice' },\n       *       { index: 3, removed: [], addedCount: 1, object: this.items, type: 'splice'}\n       *     ]);\n       *\n       * @param {string} path Path that should be notified.\n       * @param {Array} splices Array of splice records indicating ordered\n       *   changes that occurred to the array. Each record should have the\n       *   following fields:\n       *    * index: index at which the change occurred\n       *    * removed: array of items that were removed from this index\n       *    * addedCount: number of new items added at this index\n       *    * object: a reference to the array in question\n       *    * type: the string literal 'splice'\n       *\n       *   Note that splice records _must_ be normalized such that they are\n       *   reported in index order (raw results from `Object.observe` are not\n       *   ordered and must be normalized/merged before notifying).\n      */\n      notifySplices(path, splices) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        notifySplices(this, array, info.path, splices);\n      }\n\n      /**\n       * Convienence method for reading a value from a path.\n       *\n       * Note, if any part in the path is undefined, this method returns\n       * `undefined` (this method does not throw when dereferencing undefined\n       * paths).\n       *\n       * @method get\n       * @param {(string|Array<(string|number)>)} path Path to the value\n       *   to read.  The path may be specified as a string (e.g. `foo.bar.baz`)\n       *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n       *   bracketed expressions are not supported; string-based path parts\n       *   *must* be separated by dots.  Note that when dereferencing array\n       *   indices, the index may be used as a dotted part directly\n       *   (e.g. `users.12.name` or `['users', 12, 'name']`).\n       * @param {Object=} root Root object from which the path is evaluated.\n       * @return {*} Value at the path, or `undefined` if any part of the path\n       *   is undefined.\n       */\n      get(path, root) {\n        return Polymer.Path.get(root || this, path);\n      }\n\n      /**\n       * Convienence method for setting a value to a path and notifying any\n       * elements bound to the same path.\n       *\n       * Note, if any part in the path except for the last is undefined,\n       * this method does nothing (this method does not throw when\n       * dereferencing undefined paths).\n       *\n       * @method set\n       * @param {(string|Array<(string|number)>)} path Path to the value\n       *   to write.  The path may be specified as a string (e.g. `'foo.bar.baz'`)\n       *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n       *   bracketed expressions are not supported; string-based path parts\n       *   *must* be separated by dots.  Note that when dereferencing array\n       *   indices, the index may be used as a dotted part directly\n       *   (e.g. `'users.12.name'` or `['users', 12, 'name']`).\n       * @param {*} value Value to set at the specified path.\n       * @param {Object=} root Root object from which the path is evaluated.\n       *   When specified, no notification will occur.\n      */\n      set(path, value, root) {\n        if (root) {\n          Polymer.Path.set(root, path, value);\n        } else {\n          if (!this._hasReadOnlyEffect(path)) {\n            if ((path = this._setPathOrUnmanagedProperty(path, value))) {\n              this._setProperty(path, value);\n            }\n          }          \n        }\n      }\n\n      _setPropertyFromNotification(path, value) {\n        this.set(path, value);\n      }\n\n      _dispatchNotifyingEvent(event) {\n        this.dispatchEvent(event);\n      }\n\n      _setPropertyToNodeFromAnnotation(node, prop, value) {\n        // TODO(sorvell): how do we know node has this api?\n        if (!node._hasReadOnlyEffect(prop)) {\n          node._setProperty(prop, value);\n        }\n      }\n\n      _setPropertyFromComputation(prop, value) {\n        this[prop] = value;\n      }\n\n      /**\n       * Adds items onto the end of the array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.push`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method push\n       * @param {String} path Path to array.\n       * @param {...any} var_args Items to push onto array\n       * @return {number} New length of the array.\n       */\n      push(path, ...items) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let len = array.length;\n        let ret = array.push(...items);\n        if (items.length) {\n          notifySplice(this, array, info.path, len, items.length, []);\n        }\n        return ret;\n      }\n\n      /**\n       * Removes an item from the end of array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.pop`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method pop\n       * @param {String} path Path to array.\n       * @return {any} Item that was removed.\n       */\n      pop(path) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let hadLength = Boolean(array.length);\n        let ret = array.pop();\n        if (hadLength) {\n          notifySplice(this, array, info.path, array.length, 0, [ret]);\n        }\n        return ret;\n      }\n\n      /**\n       * Starting from the start index specified, removes 0 or more items\n       * from the array and inserts 0 or more new itms in their place.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.splice`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method splice\n       * @param {String} path Path to array.\n       * @param {number} start Index from which to start removing/inserting.\n       * @param {number} deleteCount Number of items to remove.\n       * @param {...any} var_args Items to insert into array.\n       * @return {Array} Array of removed items.\n       */\n      splice(path, start, deleteCount, ...items) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        // Normalize fancy native splice handling of crazy start values\n        if (start < 0) {\n          start = array.length - Math.floor(-start);\n        } else {\n          start = Math.floor(start);\n        }\n        if (!start) {\n          start = 0;\n        }\n        let ret = array.splice(start, deleteCount, ...items);\n        if (items.length || ret.length) {\n          notifySplice(this, array, info.path, start, items.length, ret);\n        }\n        return ret;\n      }\n\n      /**\n       * Removes an item from the beginning of array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.pop`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method shift\n       * @param {String} path Path to array.\n       * @return {any} Item that was removed.\n       */\n      shift(path) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let hadLength = Boolean(array.length);\n        let ret = array.shift();\n        if (hadLength) {\n          notifySplice(this, array, info.path, 0, 0, [ret]);\n        }\n        return ret;\n      }\n\n      /**\n       * Adds items onto the beginning of the array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.push`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method unshift\n       * @param {String} path Path to array.\n       * @param {...any} var_args Items to insert info array\n       * @return {number} New length of the array.\n       */\n      unshift(path, ...items) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let ret = array.unshift(...items);\n        if (items.length) {\n          notifySplice(this, array, info.path, 0, items.length, []);\n        }\n        return ret;\n      }\n\n      /**\n       * Notify that a path has changed.\n       *\n       * Example:\n       *\n       *     this.item.user.name = 'Bob';\n       *     this.notifyPath('item.user.name');\n       *\n       * @param {string} path Path that should be notified.\n       * @param {*=} value Value at the path (optional).\n      */\n      notifyPath(path, value) {\n        if (arguments.length == 1) {\n          // Get value if not supplied\n          let info = {};\n          value = Polymer.Path.get(this, path, info);\n          path = info.path;\n        } else if (Array.isArray(path)) {\n          // Normalize path if needed\n          path = Polymer.Path.normalize(path);\n        }\n        this._setProperty(path, value);\n      }\n\n      // -- readOnly ----------------------------------------------\n\n      _createReadOnlyProperty(property, privateSetter) {\n        this._addPropertyEffect(property, TYPES.READ_ONLY);\n        if (privateSetter) {\n          this['_set' + upper(property)] = function(value) {\n            this._setProperty(property, value);\n          }\n        }\n      }\n\n      // -- observer ----------------------------------------------\n\n      _createObservedProperty(property, methodName, context) {\n        this._addPropertyEffect(property, TYPES.OBSERVE, {\n          fn: runObserverEffect,\n          info: {\n            methodName: methodName,\n            context: context ? this : null\n          }\n        });\n      }\n\n      // -- notify ----------------------------------------------\n\n      _createNotifyingProperty(property) {\n        this._addPropertyEffect(property, TYPES.NOTIFY, {\n          fn: runNotifyEffect,\n          info: {\n            eventName: CaseMap.camelToDashCase(property) + '-changed',\n            property: property\n          }\n        });\n      }\n\n      // -- reflect ----------------------------------------------\n\n      _createReflectedProperty(property) {\n        let attr = CaseMap.camelToDashCase(property);\n        if (attr[0] === '-') {\n          console.warn('Property ' + property + ' cannot be reflected to attribute ' +\n            attr + ' because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property thisead.');\n        } else {\n          this._addPropertyEffect(property, TYPES.REFLECT, {\n            fn: runReflectEffect,\n            info: {\n              attrName: attr\n            }\n          });\n        }\n      }\n\n      // -- complexObserver ----------------------------------------------\n\n      _createMethodObserver(expression) {\n        let sig = parseMethod(expression);\n        if (!sig) {\n          throw new Error(\"Malformed observer expression '\" + expression + \"'\");\n        }\n        createMethodEffect(this, sig, TYPES.OBSERVE, runMultiObserverEffect);\n      }\n\n      // -- computed ----------------------------------------------\n\n      _createComputedProperty(property, expression) {\n        let sig = parseMethod(expression);\n        if (!sig) {\n          throw new Error(\"Malformed computed expression '\" + expression + \"'\");\n        }\n        createMethodEffect(this, sig, TYPES.COMPUTE,\n          runComputedEffect, property);\n      }\n\n      // -- annotation ----------------------------------------------\n\n      _bindTemplate(template) {\n        bindTemplate(this, template);\n      }\n\n      _setupBindings(dom, notes) {\n        setupBindings(this, dom, notes);\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  let utils = Polymer.Utils;\n\n  let effectUid = 0;\n\n  function runComputedEffects(inst, changedProps, oldProps) {\n    const COMPUTE = inst.PROPERTY_EFFECT_TYPES.COMPUTE;\n    if (inst[COMPUTE]) {\n      let inputProps = changedProps;\n      let computedProps;\n      while (runEffects(inst, COMPUTE, inputProps)) {\n        utils.mixin(oldProps, inst.__dataOld);\n        utils.mixin(changedProps, inst.__dataPending);\n        computedProps = utils.mixin(computedProps || {}, inst.__dataPending);\n        inputProps = inst.__dataPending;\n        inst.__dataPending = null;\n      }\n      return computedProps;\n    }\n  }\n\n  function computeLinkedPaths(inst, changedProps, computedProps) {\n    const links = inst.__dataLinkedPaths;\n    if (links) {\n      let link;\n      for (let a in links) {\n        let b = links[a];\n        for (let path in changedProps) {\n          if (Polymer.Path.isDescendant(a, path)) {\n            link = Polymer.Path.translate(a, b, path);\n            changedProps[link] = computedProps[link] =\n              inst.__data[link] = changedProps[path];\n          } else if (Polymer.Path.isDescendant(b, path)) {\n            link = Polymer.Path.translate(b, a, path);\n            changedProps[link] = computedProps[link] =\n              inst.__data[link] = changedProps[path];\n          }\n        }\n      }\n    }\n  }\n\n  function notifyProperties(inst, changedProps, computedProps, oldProps) {\n    // Determine which props to notify\n    let props = inst.__dataFromAbove ? computedProps : changedProps;\n    // Save interim data for potential re-entry\n    let runId = (inst._runId = ((inst._runId || 0) + 1));\n    inst.__dataInterim = inst.__dataInterim ?\n      utils.mixin(inst.__dataInterim, changedProps) : changedProps;\n    inst.__dataInterimOld = inst.__dataInterimOld ?\n      utils.mixin(inst.__dataInterimOld, oldProps) : oldProps;\n    // Notify\n    let notified;\n    let notifyEffects = inst[inst.PROPERTY_EFFECT_TYPES.NOTIFY];\n    let id = effectUid++;\n    // Try normal notify effects; if none, fall back to try path notification\n    for (let prop in props) {\n      if (notifyEffects && runEffectsForProperty(inst, notifyEffects, id,\n        prop, oldProps && oldProps[prop])) {\n        notified = true;\n      } else if (notifyPath(inst, prop)) {\n        notified = true;\n      }\n    }\n    // Flush host if we actually notified and host was batching\n    let host;\n    if (notified && (host = inst.__dataHost) && host.setProperties) {\n      host._flushProperties();\n    }\n    // Combine & return interim data only for last entry\n    if (runId == inst._runId) {\n      changedProps = inst.__dataInterim;\n      oldProps = inst.__dataInterimOld;\n      inst.__dataInterim = null;\n      inst.__dataInterimOld = null;\n      return { changedProps, oldProps };\n    }\n  }\n\n  function notifyPath(inst, prop) {\n    let rootProperty = Polymer.Path.root(prop);\n    if (rootProperty !== prop) {\n      let name = Polymer.CaseMap.camelToDashCase(rootProperty) + '-changed';\n      let options = { detail: {value: inst.__data[prop], path: prop }};\n      inst._dispatchNotifyingEvent(new CustomEvent(name, options));\n      return true;\n    }\n  }\n\n  function runEffects(inst, type, props, oldProps) {\n    let ran;\n    let effects = inst[type];\n    if (effects) {\n      let id = effectUid++;\n      for (let prop in props) {\n        if (runEffectsForProperty(inst, effects, id, prop,\n          oldProps && oldProps[prop])) {\n          ran = true;\n        }\n      }\n    }\n    return ran;\n  }\n\n  function runEffectsForProperty(inst, effects, id, prop, old) {\n    let ran;\n    let rootProperty = Polymer.Path.root(prop);\n    let fxs = effects[rootProperty];\n    if (fxs) {\n      let fromAbove = inst.__dataFromAbove;\n      for (let i=0, l=fxs.length, fx; (i<l) && (fx=fxs[i]); i++) {\n        if (Polymer.Path.matches(fx.path, prop) &&\n          (!fx.info || fx.info.lastRun !== id)) {\n          fx.fn(inst, prop, inst.__data[prop], old, fx.info, fromAbove);\n          if (fx.info) {\n            fx.info.lastRun = id;\n          }\n          ran = true;\n        }\n      }\n    }\n    return ran;\n  }\n\n  Polymer.BatchedEffects = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class BatchedEffects extends Polymer.PropertyEffects(superClass) {\n\n      constructor() {\n        super();\n        this.__dataPendingClients = null;\n      }\n\n      // -- set properties machinery\n\n      _propertiesChanged(currentProps, changedProps, oldProps) {\n        // ----------------------------\n        // let c = Object.getOwnPropertyNames(changedProps || {});\n        // console.group(this.localName + '#' + this.id + ': ' + c);\n        // ----------------------------\n        // Compute\n        let computedProps = runComputedEffects(this, changedProps, oldProps);\n        // Compute linked paths\n        computeLinkedPaths(this, changedProps, computedProps);\n        // Notify\n        let props = notifyProperties(this, changedProps, computedProps, oldProps);\n        if (props) {\n          oldProps = props.oldProps;\n          changedProps = props.changedProps;\n          // Propagate\n          runEffects(this, this.PROPERTY_EFFECT_TYPES.PROPAGATE, changedProps);\n          // Flush clients\n          this._flushClients();\n          // Reflect\n          runEffects(this, this.PROPERTY_EFFECT_TYPES.REFLECT,\n            changedProps, oldProps);\n          // Observe\n          runEffects(this, this.PROPERTY_EFFECT_TYPES.OBSERVE,\n            changedProps, oldProps);\n        }\n        // ----------------------------\n        // console.groupEnd(this.localName + '#' + this.id + ': ' + c);\n        // ----------------------------\n      }\n\n      _setPropertyToNodeFromAnnotation(node, prop, value) {\n        // TODO(kschaaf): fix id of BatchedEffects client...\n        if (node.setProperties) {\n          if (!node._hasReadOnlyEffect(prop)) {\n            if (node._setPendingProperty(prop, value)) {\n              this._enqueueClient(node);\n            }\n          }\n        } else {\n          super._setPropertyToNodeFromAnnotation(node, prop, value);\n        }\n      }\n\n      _setPropertyFromNotification(path, value, event) {\n        let detail = event.detail;\n        if (detail && detail.queueProperty) {\n          if (!this._hasReadOnlyEffect(path)) {\n            if ((path = this._setPathOrUnmanagedProperty(path, value))) {\n              this._setPendingProperty(path, value);\n            }\n          }\n        } else {\n          super._setPropertyFromNotification(path, value, event);\n        }\n      }\n\n      _dispatchNotifyingEvent(event) {\n        event.detail.queueProperty = true;\n        super._dispatchNotifyingEvent(event);\n      }\n\n      _setPropertyFromComputation(prop, value) {\n        if (this._hasPropertyEffect(prop)) {\n          this._setPendingProperty(prop, value);\n        } else {\n          this[prop] = value;\n        }\n      }\n\n      _enqueueClient(client) {\n        this.__dataPendingClients = this.__dataPendingClients || new Map();\n        if (client !== this) {\n          this.__dataPendingClients.set(client, true);\n        }\n      }\n\n      _flushClients() {\n        // Flush all clients\n        let clients = this.__dataPendingClients;\n        if (clients) {\n          clients.forEach((v, client) => {\n            // TODO(kschaaf): more explicit check?\n            if (client._flushProperties) {\n              client._flushProperties(true);\n            }\n          });\n          this.__dataPendingClients = null;\n        }\n      }\n\n      setProperties(props) {\n        for (let path in props) {\n          if (!this._hasReadOnlyEffect(path)) {\n            let value = props[path];\n            if ((path = this._setPathOrUnmanagedProperty(path, value))) {\n              this._setPendingProperty(path, value);\n            }\n          }\n        }\n        this._invalidateProperties();\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n  'use strict';\n\n  var StyleGather = {\n    MODULE_STYLES_SELECTOR: 'style, link[rel=import][type~=css], template',\n    INCLUDE_ATTR: 'include',\n    _importModule(moduleId) {\n      if (!Polymer.DomModule) {\n        return null;\n      }\n      return Polymer.DomModule.import(moduleId);\n    },\n    cssFromModules(moduleIds, warnIfNotFound) {\n      var modules = moduleIds.trim().split(' ');\n      var cssText = '';\n      for (var i=0; i < modules.length; i++) {\n        cssText += this.cssFromModule(modules[i], warnIfNotFound);\n      }\n      return cssText;\n    },\n\n    // returns cssText of styles in a given module; also un-applies any\n    // styles that apply to the document.\n    cssFromModule(moduleId, warnIfNotFound) {\n      var m = this._importModule(moduleId);\n      if (m && !m._cssText) {\n        m._cssText = this.cssFromElement(m);\n      }\n      if (!m && warnIfNotFound) {\n        console.warn('Could not find style data in module named', moduleId);\n      }\n      return m && m._cssText || '';\n    },\n\n    // support lots of ways to discover css...\n    cssFromElement(element) {\n      var cssText = '';\n      // if element is a template, get content from its .content\n      var content = element.content || element;\n      var e$ = content.querySelectorAll(this.MODULE_STYLES_SELECTOR);\n      for (var i=0, e; i < e$.length; i++) {\n        e = e$[i];\n        // look inside templates for elements\n        if (e.localName === 'template') {\n          cssText += this.cssFromElement(e);\n        } else {\n          // style elements inside dom-modules will apply to the main document\n          // we don't want this, so we remove them here.\n          if (e.localName === 'style') {\n            var include = e.getAttribute(this.INCLUDE_ATTR);\n            // now support module refs on 'styling' elements\n            if (include) {\n              cssText += this.cssFromModules(include, true);\n            }\n            // get style element applied to main doc via HTMLImports polyfill\n            e = e.__appliedElement || e;\n            e.parentNode.removeChild(e);\n            cssText += Polymer.ResolveUrl.resolveCss(e.textContent, element.ownerDocument);\n            // it's an import, assume this is a text file of css content.\n            // TODO(sorvell): plan is to deprecate this way to get styles;\n            // remember to add deprecation warning when this is done.\n          } else if (e.import && e.import.body) {\n            cssText += Polymer.ResolveUrl.resolveCss(e.import.body.textContent, e.import);\n          }\n        }\n      }\n      return cssText;\n    }\n  };\n\n  Polymer.StyleGather = StyleGather;\n})();\n(function() {\n    'use strict';\n\n    var StyleUtil = {\n\n      isTargetedBuild: function(buildType) {\n        return (!window.ShadyDOM || !ShadyDOM.inUse) ?\n          buildType === 'shadow' : buildType === 'shady';\n      },\n\n      cssBuildTypeForModule: function (module) {\n        var dm = Polymer.DomModule.import(module);\n        if (dm) {\n          return this.getCssBuildType(dm);\n        }\n      },\n\n      getCssBuildType: function(element) {\n        return element.getAttribute('css-build');\n      }\n\n    };\n\n    Polymer.StyleUtil = StyleUtil;\n\n  })();\n(function() {\n\n  'use strict';\n\n  let utils = Polymer.Utils;\n  let caseMap = Polymer.CaseMap;\n\n  Polymer.ElementMixin = Polymer.Utils.cachingMixin(function(base) {\n\n    return class PolymerElement extends Polymer.BatchedEffects(base) {\n\n      // returns the config object on specifically on `this` class (not super)\n      // config is used for:\n      // (1) super chain mixes togther to make `flattenedProperties` which is\n      // then used to make observedAttributes and set property defaults\n      // (2) properties effects and observers are created from it at `finalize` time.\n      static get _ownConfig() {\n        if (!this.hasOwnProperty('__ownConfig')) {\n          this.__ownConfig = this.hasOwnProperty('config') ? this.config : {};\n        }\n        return this.__ownConfig;\n      }\n\n      // a flattened list of properties mixed together from the chain of all\n      // constructor's `config.properties`\n      // This list is used to create\n      // (1) observedAttributes,\n      // (2) element default values\n      static get _flattenedProperties() {\n        if (!this.hasOwnProperty('__flattenedProperties')) {\n          this.__flattenedProperties = this._ownConfig.properties || {};\n          let superCtor = Object.getPrototypeOf(this.prototype).constructor;\n          if (superCtor.prototype instanceof PolymerElement) {\n            this.__flattenedProperties = utils.mixin(\n              Object.create(superCtor._flattenedProperties),\n              this.__flattenedProperties);\n          }\n        }\n        return this.__flattenedProperties;\n      }\n\n      static get observedAttributes() {\n        if (!this.hasOwnProperty('_observedAttributes')) {\n          // observedAttributes must be finalized at registration time\n          this._observedAttributes = this._addPropertiesToAttributes(\n            this._flattenedProperties, []);\n        }\n        return this._observedAttributes;\n      }\n\n      static _addPropertiesToAttributes(properties, list) {\n        for (let prop in properties) {\n          list.push(Polymer.CaseMap.camelToDashCase(prop));\n        }\n        return list;\n      }\n\n      static get finalized() {\n        return this.hasOwnProperty('_finalized');\n      }\n\n      static set finalized(value) {\n        this._finalized = value;\n      }\n\n      // TODO(sorvell): need to work on public api surrouding `finalize`.\n      // Due to meta-programming, it's awkward to make a subclass impl of this.\n      // However, a user might want to call `finalize` prior to define to do\n      // this work eagerly. Need to also decide on `finalizeConfig(config)` and\n      // `finalizeTemplate(template)`. Both are public but have simiarly\n      // awkward subclassing characteristics.\n      static finalize() {\n        let proto = this.prototype;\n        if (!this.finalized) {\n\n          let superProto = Object.getPrototypeOf(proto);\n          let superCtor = superProto && superProto.constructor;\n          if (superCtor.prototype instanceof PolymerElement) {\n            superCtor.finalize();\n          }\n          this.finalized = true;\n          if (this.hasOwnProperty('is') && this.is) {\n            Polymer.telemetry.register(proto);\n          }\n          let config = this._ownConfig;\n          if (config) {\n            this._finalizeConfig(config);\n          }\n          if (this.template) {\n            let template = this.template.cloneNode(true);\n            this._finalizeTemplate(template);\n          }\n        }\n      }\n\n      static _finalizeConfig(config) {\n        if (config.properties) {\n          // process properties\n          for (let p in config.properties) {\n            this.prototype._createPropertyFromConfig(p, config.properties[p]);\n          }\n        }\n        if (config.observers) {\n          for (let i=0; i < config.observers.length; i++) {\n            this.prototype._createMethodObserver(config.observers[i]);\n          }\n        }\n      }\n\n      static get template() {\n        if (!this.hasOwnProperty('_template')) {\n          // TODO(sorvell): support more ways to acquire template.\n          // this requires `is` on constructor...\n          this._template = Polymer.DomModule.import(this.is, 'template') ||\n            // note: implemented so a subclass can retrieve the super\n            // template; call the super impl this way so that `this` points\n            // to the superclass.\n            Object.getPrototypeOf(this.prototype).constructor.template;\n        }\n        return this._template;\n      }\n\n      static _finalizeTemplate(template) {\n        // support `include=\"module-name\"`\n        let cssText = Polymer.StyleGather.cssFromElement(template);\n        if (cssText) {\n          let style = document.createElement('style');\n          style.textContent = cssText;\n          template.content.insertBefore(style, template.content.firstChild);\n        }\n        if (window.ShadyCSS) {\n          window.ShadyCSS.prepareTemplate(template, this.is, this.extends);\n        }\n        var proto = this.prototype;\n        // clear any existing propagation effects inherited from superClass.\n        proto._propagateEffects = {};\n        this.prototype._bindTemplate(template);\n        proto._template = template;\n      }\n\n      constructor() {\n        super();\n        // note: `this.constructor.prototype` is wrong in Safari so make sure to\n        // use `__proto__`\n        Polymer.telemetry.instanceCount++;\n        // add self to host's pending client list\n        hostStack.registerHost(this);\n      }\n\n      _initializeProperties() {\n        if (!this.constructor.finalized) {\n          this.constructor.finalize();\n        }\n        super._initializeProperties();\n        // apply property defaults...\n        let p$ = this.constructor._flattenedProperties;\n        for (let p in p$) {\n          let info = p$[p];\n          if (('value' in info) && !this._isPropertyPending(p)) {\n            var value = typeof info.value == 'function' ?\n              info.value.call(this) :\n              info.value;\n            if (this._hasReadOnlyEffect(p)) {\n              this._setProperty(p, value)\n            } else {\n              this[p] = value;\n            }\n          }\n        }\n      }\n\n      // create a property using the metadata in the `config` object\n      _createPropertyFromConfig(name, info) {\n        // computed forces readOnly...\n        if (info.computed) {\n          info.readOnly = true;\n        }\n        // readOnly, computed, reflect, notify only if not already doing so...\n        if (info.readOnly && !this._hasReadOnlyEffect(name)) {\n          this._createReadOnlyProperty(name, !info.computed);\n        }\n        if (info.computed && !this._hasComputedEffect(name)) {\n          this._createComputedProperty(name, info.computed);\n        }\n        if (info.reflectToAttribute && !this._hasReflectEffect(name)) {\n          this._createReflectedProperty(name);\n        }\n        if (info.notify && !this._hasNotifyEffect(name)) {\n          this._createNotifyingProperty(name);\n        }\n        // always add observer\n        if (info.observer) {\n          this._createObservedProperty(name, info.observer);\n        }\n      }\n\n      // reserved for canonical behavior\n      connectedCallback() {\n        if (hostStack.isEmpty()) {\n          this._flushProperties();\n          this.updateStyles();\n        }\n      }\n\n      disconnectedCallback() {}\n\n      ready() {\n        super.ready();\n        if (this._template) {\n          hostStack.beginHosting(this);\n          this.root = this._stampTemplate(this._template);\n          this._flushProperties();\n          this.root = this._attachDom(this.root);\n          hostStack.endHosting(this);\n        } else {\n          this.root = this;\n          this._flushProperties();\n        }\n      }\n\n      /**\n       * Attach an element's stamped dom to itself. By default,\n       * this method creates a `shadowRoot` and adds the dom to it.\n       * However, this method may be overridden to allow an element\n       * to put its dom in another location.\n       *\n       * @method _attachDom\n       * @param {NodeList} dom to attach to the element.\n       * @returns {Node} node to which the dom has been attached.\n       */\n      _attachDom(dom) {\n        if (this.attachShadow) {\n          if (dom) {\n            if (!this.shadowRoot) {\n              this.attachShadow({mode: 'open'});\n            }\n            this.shadowRoot.appendChild(dom);\n            return this.shadowRoot;\n          }\n        } else {\n          throw new Error(`ShadowDOM not available. ` +\n            // BREAKME(sorvell): move to developer conditional when supported.\n           `Polymer.Element can\n              create dom as children instead of in ShadowDOM by setting\n              \\`this.root = this;\\` before \\`ready\\`.`);\n        }\n      }\n\n      attributeChangedCallback(name, old, value) {\n        let property = caseMap.dashToCamelCase(name);\n        let type = this.constructor._flattenedProperties[property].type;\n        if (!this._hasReadOnlyEffect(property)) {\n          this._attributeToProperty(name, value, type);\n        }\n      }\n\n      updateStyles(properties) {\n        if (window.ShadyCSS) {\n          ShadyCSS.applyStyle(this, properties);\n        }\n      }\n\n    }\n\n  });\n\n  let hostStack = {\n\n    stack: [],\n\n    isEmpty() {\n      return !this.stack.length;\n    },\n\n    registerHost(inst) {\n      if (this.stack.length) {\n        let host = this.stack[this.stack.length-1];\n        host._enqueueClient(inst);\n      }\n    },\n\n    beginHosting(inst) {\n      this.stack.push(inst);\n    },\n\n    endHosting(inst) {\n      let stackLen = this.stack.length;\n      if (stackLen && this.stack[stackLen-1] == inst) {\n        this.stack.pop();\n      }\n    }\n\n  }\n\n  // telemetry\n  Polymer.telemetry = {\n    instanceCount: 0,\n    registrations: [],\n    _regLog: function(prototype) {\n      console.log('[' + prototype.is + ']: registered')\n    },\n    register: function(prototype) {\n      this.registrations.push(prototype);\n      Polymer.log && this._regLog(prototype);\n    },\n    dumpRegistrations: function() {\n      this.registrations.forEach(this._regLog);\n    }\n  };\n\n  Polymer.Element = Polymer.ElementMixin(HTMLElement);\n\n  Polymer.updateStyles = function(props) {\n    if (window.ShadyCSS) {\n      ShadyCSS.updateStyles(props);\n    }\n  };\n\n})();\n(function() {\n\n    // TODO(sorvell): There is an implicit depency on `Polymer.Class` here\n    // that would be good to resolve. It's because (elements/class.html)\n    // because this file specially handles `Polymer`.\n\n    // Polymer is a Function, but of course this is also an Object, so we\n    // hang various other objects off of Polymer.*\n\n    var userPolymer = window.Polymer;\n\n    window.Polymer = function(info) {\n      // if input is a `class` (aka a function with a prototype), use the prototype\n      // remember that the `constructor` will never be called\n      var klass;\n      if (typeof info === 'function') {\n        klass = info;\n      } else {\n        klass = Polymer.Class(info);\n      }\n      var options = {};\n      if (klass.extends) {\n        options.extends = klass.extends;\n      }\n      customElements.define(klass.is, klass, options);\n      return klass;\n    };\n\n    if (userPolymer) {\n      for (var i in userPolymer) {\n        Polymer[i] = userPolymer[i];\n      }\n    }\n\n  })();\n(function() {\n\n  'use strict';\n\n  Polymer.Async = {\n\n    _currVal: 0,\n    _lastVal: 0,\n    _callbacks: [],\n    _twiddleContent: 0,\n    _twiddle: document.createTextNode(''),\n\n    run: function (callback, waitTime) {\n      if (waitTime > 0) {\n        return ~setTimeout(callback, waitTime);\n      } else {\n        this._twiddle.textContent = this._twiddleContent++;\n        this._callbacks.push(callback);\n        return this._currVal++;\n      }\n    },\n\n    cancel: function(handle) {\n      if (handle < 0) {\n        clearTimeout(~handle);\n      } else {\n        var idx = handle - this._lastVal;\n        if (idx >= 0) {\n          if (!this._callbacks[idx]) {\n            throw 'invalid async handle: ' + handle;\n          }\n          this._callbacks[idx] = null;\n        }\n      }\n    },\n\n    _atEndOfMicrotask: function() {\n      var len = this._callbacks.length;\n      for (var i=0; i<len; i++) {\n        var cb = this._callbacks[i];\n        if (cb) {\n          try {\n            cb();\n          } catch(e) {\n            // Clear queue up to this point & start over after throwing\n            i++;\n            this._callbacks.splice(0, i);\n            this._lastVal += i;\n            this._twiddle.textContent = this._twiddleContent++;\n            throw e;\n          }\n        }\n      }\n      this._callbacks.splice(0, len);\n      this._lastVal += len;\n    },\n\n    flush: function() {\n      this.observer.takeRecords();\n      this._atEndOfMicrotask();\n    }\n  };\n\n  Polymer.Async.observer = new window.MutationObserver(function() {\n    Polymer.Async._atEndOfMicrotask();\n  });\n  Polymer.Async.observer.observe(Polymer.Async._twiddle, {characterData: true});\n\n})();\nPolymer.Debouncer = function Debouncer(context) {\n  this.context = context;\n  var self = this;\n  this.boundFlush = function() {\n    self.flush();\n  };\n};\n\nPolymer.Utils.mixin(Polymer.Debouncer.prototype, {\n\n  go: function(callback, wait) {\n    var h;\n    this.finish = function() {\n      Polymer.Async.cancel(h);\n    };\n    h = Polymer.Async.run(this.boundFlush, wait);\n    this.callback = callback;\n  },\n\n  cancel: function() {\n    if (this.finish) {\n      this.finish();\n      this.finish = null;\n    }\n  },\n\n  flush: function() {\n    if (this.finish) {\n      this.cancel();\n      this.callback.call(this.context);\n    }\n  },\n\n  isActive: function() {\n    return Boolean(this.finish);\n  }\n\n});\n\nPolymer.Debouncer.debounce = function(debouncer, callback, wait, context) {\n  context = context || this;\n  if (debouncer) {\n    debouncer.cancel();\n  } else {\n    debouncer = new Polymer.Debouncer(context);\n  }\n  debouncer.go(callback, wait);\n  return debouncer;\n};\n(function() {\n\n  'use strict';\n\n  // let DIRECTION_MAP = {\n  //   x: 'pan-x',\n  //   y: 'pan-y',\n  //   none: 'none',\n  //   all: 'auto'\n  // };\n\n  let wrap = function(n) { return n; };\n\n  // detect native touch action support\n  let HAS_NATIVE_TA = typeof document.head.style.touchAction === 'string';\n  let GESTURE_KEY = '__polymerGestures';\n  let HANDLED_OBJ = '__polymerGesturesHandled';\n  let TOUCH_ACTION = '__polymerGesturesTouchAction';\n  // radius for tap and track\n  let TAP_DISTANCE = 25;\n  let TRACK_DISTANCE = 5;\n  // number of last N track positions to keep\n  let TRACK_LENGTH = 2;\n\n  // Disabling \"mouse\" handlers for 2500ms is enough\n  let MOUSE_TIMEOUT = 2500;\n  let MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'click'];\n  // an array of bitmask values for mapping MouseEvent.which to MouseEvent.buttons\n  let MOUSE_WHICH_TO_BUTTONS = [0, 1, 4, 2];\n  let MOUSE_HAS_BUTTONS = (function() {\n    try {\n      return new MouseEvent('test', {buttons: 1}).buttons === 1;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  // Check for touch-only devices\n  let IS_TOUCH_ONLY = navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);\n\n  // touch will make synthetic mouse events\n  // `preventDefault` on touchend will cancel them,\n  // but this breaks `<input>` focus and link clicks\n  // disable mouse handlers for MOUSE_TIMEOUT ms after\n  // a touchend to ignore synthetic mouse events\n  let mouseCanceller = function(mouseEvent) {\n    // skip synthetic mouse events\n    mouseEvent[HANDLED_OBJ] = {skip: true};\n    // disable \"ghost clicks\"\n    if (mouseEvent.type === 'click') {\n      let path = mouseEvent.composedPath && mouseEvent.composedPath();\n      if (path) {\n        for (let i = 0; i < path.length; i++) {\n          if (path[i] === POINTERSTATE.mouse.target) {\n            return;\n          }\n        }\n      }\n      mouseEvent.preventDefault();\n      mouseEvent.stopPropagation();\n    }\n  };\n\n  function setupTeardownMouseCanceller(setup) {\n    for (let i = 0, en; i < MOUSE_EVENTS.length; i++) {\n      en = MOUSE_EVENTS[i];\n      if (setup) {\n        document.addEventListener(en, mouseCanceller, true);\n      } else {\n        document.removeEventListener(en, mouseCanceller, true);\n      }\n    }\n  }\n\n  function ignoreMouse() {\n    if (IS_TOUCH_ONLY) {\n      return;\n    }\n    if (!POINTERSTATE.mouse.mouseIgnoreJob) {\n      setupTeardownMouseCanceller(true);\n    }\n    let unset = function() {\n      setupTeardownMouseCanceller();\n      POINTERSTATE.mouse.target = null;\n      POINTERSTATE.mouse.mouseIgnoreJob = null;\n    };\n    POINTERSTATE.mouse.mouseIgnoreJob = Polymer.Debouncer.debounce(\n      POINTERSTATE.mouse.mouseIgnoreJob, unset, MOUSE_TIMEOUT);\n  }\n\n  function hasLeftMouseButton(ev) {\n    let type = ev.type;\n    // exit early if the event is not a mouse event\n    if (MOUSE_EVENTS.indexOf(type) === -1) {\n      return false;\n    }\n    // ev.button is not reliable for mousemove (0 is overloaded as both left button and no buttons)\n    // instead we use ev.buttons (bitmask of buttons) or fall back to ev.which (deprecated, 0 for no buttons, 1 for left button)\n    if (type === 'mousemove') {\n      // allow undefined for testing events\n      let buttons = ev.buttons === undefined ? 1 : ev.buttons;\n      if ((ev instanceof window.MouseEvent) && !MOUSE_HAS_BUTTONS) {\n        buttons = MOUSE_WHICH_TO_BUTTONS[ev.which] || 0;\n      }\n      // buttons is a bitmask, check that the left button bit is set (1)\n      return Boolean(buttons & 1);\n    } else {\n      // allow undefined for testing events\n      let button = ev.button === undefined ? 0 : ev.button;\n      // ev.button is 0 in mousedown/mouseup/click for left button activation\n      return button === 0;\n    }\n  }\n\n  function isSyntheticClick(ev) {\n    if (ev.type === 'click') {\n      // ev.detail is 0 for HTMLElement.click in most browsers\n      if (ev.detail === 0) {\n        return true;\n      }\n      // in the worst case, check that the x/y position of the click is within\n      // the bounding box of the target of the event\n      // Thanks IE 10 >:(\n      let t = gestures.findOriginalTarget(ev);\n      let bcr = t.getBoundingClientRect();\n      // use page x/y to account for scrolling\n      let x = ev.pageX, y = ev.pageY;\n      // ev is a synthetic click if the position is outside the bounding box of the target\n      return !((x >= bcr.left && x <= bcr.right) && (y >= bcr.top && y <= bcr.bottom));\n    }\n    return false;\n  }\n\n  let POINTERSTATE = {\n    mouse: {\n      target: null,\n      mouseIgnoreJob: null\n    },\n    touch: {\n      x: 0,\n      y: 0,\n      id: -1,\n      scrollDecided: false\n    }\n  };\n\n  function firstTouchAction(ev) {\n    let ta = 'auto';\n    let path = ev.composedPath && ev.composedPath();\n    if (path) {\n      for (let i = 0, n; i < path.length; i++) {\n        n = path[i];\n        if (n[TOUCH_ACTION]) {\n          ta = n[TOUCH_ACTION];\n          break;\n        }\n      }\n    }\n    return ta;\n  }\n\n  function trackDocument(stateObj, movefn, upfn) {\n    stateObj.movefn = movefn;\n    stateObj.upfn = upfn;\n    document.addEventListener('mousemove', movefn);\n    document.addEventListener('mouseup', upfn);\n  }\n\n  function untrackDocument(stateObj) {\n    document.removeEventListener('mousemove', stateObj.movefn);\n    document.removeEventListener('mouseup', stateObj.upfn);\n    stateObj.movefn = null;\n    stateObj.upfn = null;\n  }\n\n  let gestures = {\n    gestures: {},\n    recognizers: [],\n\n    deepTargetFind: function(x, y) {\n      let node = document.elementFromPoint(x, y);\n      let next = node;\n      // this code path is only taken when native ShadowDOM is used\n      // if there is a shadowroot, it may have a node at x/y\n      // if there is not a shadowroot, exit the loop\n      while (next && next.shadowRoot) {\n        // if there is a node at x/y in the shadowroot, look deeper\n        next = next.shadowRoot.elementFromPoint(x, y);\n        if (next) {\n          node = next;\n        }\n      }\n      return node;\n    },\n    // a cheaper check than ev.composedPath()[0];\n    findOriginalTarget: function(ev) {\n      // shadowdom\n      if (ev.composedPath) {\n        return ev.composedPath()[0];\n      }\n      // shadydom\n      return ev.target;\n    },\n    handleNative: function(ev) {\n      let handled;\n      let type = ev.type;\n      let node = wrap(ev.currentTarget);\n      let gobj = node[GESTURE_KEY];\n      if (!gobj) {\n        return;\n      }\n      let gs = gobj[type];\n      if (!gs) {\n        return;\n      }\n      if (!ev[HANDLED_OBJ]) {\n        ev[HANDLED_OBJ] = {};\n        if (type.slice(0, 5) === 'touch') {\n          let t = ev.changedTouches[0];\n          if (type === 'touchstart') {\n            // only handle the first finger\n            if (ev.touches.length === 1) {\n              POINTERSTATE.touch.id = t.identifier;\n            }\n          }\n          if (POINTERSTATE.touch.id !== t.identifier) {\n            return;\n          }\n          if (!HAS_NATIVE_TA) {\n            if (type === 'touchstart' || type === 'touchmove') {\n              gestures.handleTouchAction(ev);\n            }\n          }\n          if (type === 'touchend') {\n            let rootTarget = ev.composedPath ? ev.composedPath()[0] : ev.target;\n            POINTERSTATE.mouse.target = rootTarget;\n            // ignore syntethic mouse events after a touch\n            ignoreMouse(true);\n          }\n        }\n      }\n      handled = ev[HANDLED_OBJ];\n      // used to ignore synthetic mouse events\n      if (handled.skip) {\n        return;\n      }\n      let recognizers = gestures.recognizers;\n      // reset recognizer state\n      for (let i = 0, r; i < recognizers.length; i++) {\n        r = recognizers[i];\n        if (gs[r.name] && !handled[r.name]) {\n          if (r.flow && r.flow.start.indexOf(ev.type) > -1) {\n            if (r.reset) {\n              r.reset();\n            }\n          }\n        }\n      }\n      // enforce gesture recognizer order\n      for (let i = 0, r; i < recognizers.length; i++) {\n        r = recognizers[i];\n        if (gs[r.name] && !handled[r.name]) {\n          handled[r.name] = true;\n          r[type](ev);\n        }\n      }\n    },\n\n    handleTouchAction: function(ev) {\n      let t = ev.changedTouches[0];\n      let type = ev.type;\n      if (type === 'touchstart') {\n        POINTERSTATE.touch.x = t.clientX;\n        POINTERSTATE.touch.y = t.clientY;\n        POINTERSTATE.touch.scrollDecided = false;\n      } else if (type === 'touchmove') {\n        if (POINTERSTATE.touch.scrollDecided) {\n          return;\n        }\n        POINTERSTATE.touch.scrollDecided = true;\n        let ta = firstTouchAction(ev);\n        let prevent = false;\n        let dx = Math.abs(POINTERSTATE.touch.x - t.clientX);\n        let dy = Math.abs(POINTERSTATE.touch.y - t.clientY);\n        if (!ev.cancelable) {\n          // scrolling is happening\n        } else if (ta === 'none') {\n          prevent = true;\n        } else if (ta === 'pan-x') {\n          prevent = dy > dx;\n        } else if (ta === 'pan-y') {\n          prevent = dx > dy;\n        }\n        if (prevent) {\n          ev.preventDefault();\n        } else {\n          gestures.prevent('track');\n        }\n      }\n    },\n\n    addListener: function(node, evType, handler) {\n      if (this.gestures[evType]) {\n        this.add(node, evType, handler);\n        return true;\n      }\n    },\n\n    removeListener: function(node, evType, handler) {\n      if (this.gestures[evType]) {\n        this.remove(node, evType, handler);\n        return true;\n      }\n    },\n\n    // automate the event listeners for the native events\n    add: function(node, evType, handler) {\n      // SD polyfill: handle case where `node` is unwrapped, like `document`\n      node = wrap(node);\n      let recognizer = this.gestures[evType];\n      let deps = recognizer.deps;\n      let name = recognizer.name;\n      let gobj = node[GESTURE_KEY];\n      if (!gobj) {\n        node[GESTURE_KEY] = gobj = {};\n      }\n      for (let i = 0, dep, gd; i < deps.length; i++) {\n        dep = deps[i];\n        // don't add mouse handlers on iOS because they cause gray selection overlays\n        if (IS_TOUCH_ONLY && MOUSE_EVENTS.indexOf(dep) > -1) {\n          continue;\n        }\n        gd = gobj[dep];\n        if (!gd) {\n          gobj[dep] = gd = {_count: 0};\n        }\n        if (gd._count === 0) {\n          node.addEventListener(dep, this.handleNative);\n        }\n        gd[name] = (gd[name] || 0) + 1;\n        gd._count = (gd._count || 0) + 1;\n      }\n      node.addEventListener(evType, handler);\n      if (recognizer.touchAction) {\n        this.setTouchAction(node, recognizer.touchAction);\n      }\n    },\n\n    // automate event listener removal for native events\n    remove: function(node, evType, handler) {\n      // SD polyfill: handle case where `node` is unwrapped, like `document`\n      node = wrap(node);\n      let recognizer = this.gestures[evType];\n      let deps = recognizer.deps;\n      let name = recognizer.name;\n      let gobj = node[GESTURE_KEY];\n      if (gobj) {\n        for (let i = 0, dep, gd; i < deps.length; i++) {\n          dep = deps[i];\n          gd = gobj[dep];\n          if (gd && gd[name]) {\n            gd[name] = (gd[name] || 1) - 1;\n            gd._count = (gd._count || 1) - 1;\n            if (gd._count === 0) {\n              node.removeEventListener(dep, this.handleNative);\n            }\n          }\n        }\n      }\n      node.removeEventListener(evType, handler);\n    },\n\n    register: function(recog) {\n      this.recognizers.push(recog);\n      for (let i = 0; i < recog.emits.length; i++) {\n        this.gestures[recog.emits[i]] = recog;\n      }\n    },\n\n    findRecognizerByEvent: function(evName) {\n      for (let i = 0, r; i < this.recognizers.length; i++) {\n        r = this.recognizers[i];\n        for (let j = 0, n; j < r.emits.length; j++) {\n          n = r.emits[j];\n          if (n === evName) {\n            return r;\n          }\n        }\n      }\n      return null;\n    },\n\n    // set scrolling direction on node to check later on first move\n    // must call this before adding event listeners!\n    setTouchAction: function(node, value) {\n      if (HAS_NATIVE_TA) {\n        node.style.touchAction = value;\n      }\n      node[TOUCH_ACTION] = value;\n    },\n\n    fire: function(target, type, detail) {\n      let ev = new Event(type, { bubbles: true, cancelable: true, composed: true });\n      ev.detail = detail;\n      target.dispatchEvent(ev);\n      // forward `preventDefault` in a clean way\n      if (ev.defaultPrevented) {\n        let se = detail.sourceEvent;\n        // sourceEvent may be a touch, which is not preventable this way\n        if (se && se.preventDefault) {\n          se.preventDefault();\n        }\n      }\n    },\n\n    prevent: function(evName) {\n      let recognizer = this.findRecognizerByEvent(evName);\n      if (recognizer.info) {\n        recognizer.info.prevent = true;\n      }\n    }\n  };\n\n  gestures.register({\n    name: 'downup',\n    deps: ['mousedown', 'touchstart', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['mouseup', 'touchend']\n    },\n    emits: ['down', 'up'],\n\n    info: {\n      movefn: null,\n      upfn: null\n    },\n\n    reset: function() {\n      untrackDocument(this.info);\n    },\n\n    mousedown: function(e) {\n      if (!hasLeftMouseButton(e)) {\n        return;\n      }\n      let t = gestures.findOriginalTarget(e);\n      let self = this;\n      let movefn = function movefn(e) {\n        if (!hasLeftMouseButton(e)) {\n          self.fire('up', t, e);\n          untrackDocument(self.info);\n        }\n      };\n      let upfn = function upfn(e) {\n        if (hasLeftMouseButton(e)) {\n          self.fire('up', t, e);\n        }\n        untrackDocument(self.info);\n      };\n      trackDocument(this.info, movefn, upfn);\n      this.fire('down', t, e);\n    },\n    touchstart: function(e) {\n      this.fire('down', gestures.findOriginalTarget(e), e.changedTouches[0]);\n    },\n    touchend: function(e) {\n      this.fire('up', gestures.findOriginalTarget(e), e.changedTouches[0]);\n    },\n    fire: function(type, target, event) {\n      gestures.fire(target, type, {\n        x: event.clientX,\n        y: event.clientY,\n        sourceEvent: event,\n        prevent: function(e) {\n          return gestures.prevent(e);\n        }\n      });\n    }\n  });\n\n  gestures.register({\n    name: 'track',\n    touchAction: 'none',\n    deps: ['mousedown', 'touchstart', 'touchmove', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['mouseup', 'touchend']\n    },\n    emits: ['track'],\n\n    info: {\n      x: 0,\n      y: 0,\n      state: 'start',\n      started: false,\n      moves: [],\n      addMove: function(move) {\n        if (this.moves.length > TRACK_LENGTH) {\n          this.moves.shift();\n        }\n        this.moves.push(move);\n      },\n      movefn: null,\n      upfn: null,\n      prevent: false\n    },\n\n    reset: function() {\n      this.info.state = 'start';\n      this.info.started = false;\n      this.info.moves = [];\n      this.info.x = 0;\n      this.info.y = 0;\n      this.info.prevent = false;\n      untrackDocument(this.info);\n    },\n\n    hasMovedEnough: function(x, y) {\n      if (this.info.prevent) {\n        return false;\n      }\n      if (this.info.started) {\n        return true;\n      }\n      let dx = Math.abs(this.info.x - x);\n      let dy = Math.abs(this.info.y - y);\n      return (dx >= TRACK_DISTANCE || dy >= TRACK_DISTANCE);\n    },\n\n    mousedown: function(e) {\n      if (!hasLeftMouseButton(e)) {\n        return;\n      }\n      let t = gestures.findOriginalTarget(e);\n      let self = this;\n      let movefn = function movefn(e) {\n        let x = e.clientX, y = e.clientY;\n        if (self.hasMovedEnough(x, y)) {\n          // first move is 'start', subsequent moves are 'move', mouseup is 'end'\n          self.info.state = self.info.started ? (e.type === 'mouseup' ? 'end' : 'track') : 'start';\n          self.info.addMove({x: x, y: y});\n          if (!hasLeftMouseButton(e)) {\n            // always fire \"end\"\n            self.info.state = 'end';\n            untrackDocument(self.info);\n          }\n          self.fire(t, e);\n          self.info.started = true;\n        }\n      };\n      let upfn = function upfn(e) {\n        if (self.info.started) {\n          gestures.prevent('tap');\n          movefn(e);\n        }\n\n        // remove the temporary listeners\n        untrackDocument(self.info);\n      };\n      // add temporary document listeners as mouse retargets\n      trackDocument(this.info, movefn, upfn);\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    },\n\n    touchstart: function(e) {\n      let ct = e.changedTouches[0];\n      this.info.x = ct.clientX;\n      this.info.y = ct.clientY;\n    },\n\n    touchmove: function(e) {\n      let t = gestures.findOriginalTarget(e);\n      let ct = e.changedTouches[0];\n      let x = ct.clientX, y = ct.clientY;\n      if (this.hasMovedEnough(x, y)) {\n        this.info.addMove({x: x, y: y});\n        this.fire(t, ct);\n        this.info.state = 'track';\n        this.info.started = true;\n      }\n    },\n\n    touchend: function(e) {\n      let t = gestures.findOriginalTarget(e);\n      let ct = e.changedTouches[0];\n      // only trackend if track was started and not aborted\n      if (this.info.started) {\n        // iff tracking, always prevent tap\n        gestures.prevent('tap');\n        // reset started state on up\n        this.info.state = 'end';\n        this.info.addMove({x: ct.clientX, y: ct.clientY});\n        this.fire(t, ct);\n      }\n    },\n\n    fire: function(target, touch) {\n      let secondlast = this.info.moves[this.info.moves.length - 2];\n      let lastmove = this.info.moves[this.info.moves.length - 1];\n      let dx = lastmove.x - this.info.x;\n      let dy = lastmove.y - this.info.y;\n      let ddx, ddy = 0;\n      if (secondlast) {\n        ddx = lastmove.x - secondlast.x;\n        ddy = lastmove.y - secondlast.y;\n      }\n      return gestures.fire(target, 'track', {\n        state: this.info.state,\n        x: touch.clientX,\n        y: touch.clientY,\n        dx: dx,\n        dy: dy,\n        ddx: ddx,\n        ddy: ddy,\n        sourceEvent: touch,\n        hover: function() {\n          return gestures.deepTargetFind(touch.clientX, touch.clientY);\n        }\n      });\n    }\n\n  });\n\n  gestures.register({\n    name: 'tap',\n    deps: ['mousedown', 'click', 'touchstart', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['click', 'touchend']\n    },\n    emits: ['tap'],\n    info: {\n      x: NaN,\n      y: NaN,\n      prevent: false\n    },\n    reset: function() {\n      this.info.x = NaN;\n      this.info.y = NaN;\n      this.info.prevent = false;\n    },\n    save: function(e) {\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    },\n\n    mousedown: function(e) {\n      if (hasLeftMouseButton(e)) {\n        this.save(e);\n      }\n    },\n    click: function(e) {\n      if (hasLeftMouseButton(e)) {\n        this.forward(e);\n      }\n    },\n\n    touchstart: function(e) {\n      this.save(e.changedTouches[0]);\n    },\n    touchend: function(e) {\n      this.forward(e.changedTouches[0]);\n    },\n\n    forward: function(e) {\n      let dx = Math.abs(e.clientX - this.info.x);\n      let dy = Math.abs(e.clientY - this.info.y);\n      let t = gestures.findOriginalTarget(e);\n      // dx,dy can be NaN if `click` has been simulated and there was no `down` for `start`\n      if (isNaN(dx) || isNaN(dy) || (dx <= TAP_DISTANCE && dy <= TAP_DISTANCE) || isSyntheticClick(e)) {\n        // prevent taps from being generated if an event has canceled them\n        if (!this.info.prevent) {\n          gestures.fire(t, 'tap', {\n            x: e.clientX,\n            y: e.clientY,\n            sourceEvent: e\n          });\n        }\n      }\n    }\n  });\n\n  // expose for bc with Polymer 1.0 (e.g. add `tap` listener to document)\n  Polymer.Gestures = gestures;\n\n  Polymer.GestureEventListeners = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class GestureEventListeners extends Polymer.EventListeners(superClass) {\n\n      _addEventListenerToNode(node, eventName, handler) {\n        if (!gestures.addListener(node, eventName, handler)) {\n          super._addEventListenerToNode(node, eventName, handler);\n        }\n      }\n\n      _removeEventListenerToNode(node, eventName, handler) {\n        if (!gestures.removeListener(node, eventName, handler)) {\n          super._addEventListenerToNode(node, eventName, handler);\n        }\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  Polymer.AsyncRender = {\n\n    _scheduled: false,\n\n    _beforeRenderQueue: [],\n\n    _afterRenderQueue: [],\n\n    beforeRender: function(cb) {\n      if (!this._scheduled) {\n        this._schedule();\n      }\n      this._beforeRenderQueue.push(cb);\n    },\n\n    afterRender: function(cb) {\n      if (!this._scheduled) {\n        this._schedule();\n      }\n      this._afterRenderQueue.push(cb);\n    },\n\n    _schedule: function() {\n      this._scheduled = true;\n      var self = this;\n      // before next render\n      requestAnimationFrame(function() {\n        self._scheduled = false;\n        self._flushQueue(self._beforeRenderQueue);\n        // after the render\n        setTimeout(function() {\n          self._flushQueue(self._afterRenderQueue);\n        });\n      });\n    },\n\n    flush: function() {\n      this.flushBeforeRender();\n      this.flushAfterRender();\n    },\n\n    flushBeforeRender: function() {\n      this._flushQueue(this._beforeRenderQueue);\n    },\n\n    flushAfterRender: function() {\n      this._flushQueue(this._afterRenderQueue);\n    },\n\n    _flushQueue: function(queue) {\n      for (var i=0; i<queue.length; i++) {\n        // TODO(sorvell): include exception handling from Async.\n        try {\n          queue[i]();\n        } catch(e) {\n          console.warn(e);\n        }\n      }\n      queue.splice(0, queue.length);\n    }\n\n  };\n\n  // bc\n  Polymer.RenderStatus = {\n    afterNextRender: function(context, fn, args) {\n      Polymer.AsyncRender.afterRender(function() {\n        fn.apply(context, args);\n      });\n    }\n  }\n\n})();\n(function() {\n\n  'use strict';\n\n  function newSplice(index, removed, addedCount) {\n    return {\n      index: index,\n      removed: removed,\n      addedCount: addedCount\n    };\n  }\n\n  const EDIT_LEAVE = 0;\n  const EDIT_UPDATE = 1;\n  const EDIT_ADD = 2;\n  const EDIT_DELETE = 3;\n\n  let ArraySplice = {\n\n    // Note: This function is *based* on the computation of the Levenshtein\n    // \"edit\" distance. The one change is that \"updates\" are treated as two\n    // edits - not one. With Array splices, an update is really a delete\n    // followed by an add. By retaining this, we optimize for \"keeping\" the\n    // maximum array items in the original array. For example:\n    //\n    //   'xxxx123' -> '123yyyy'\n    //\n    // With 1-edit updates, the shortest path would be just to update all seven\n    // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n    // leaves the substring '123' intact.\n    calcEditDistances(current, currentStart, currentEnd,\n                                old, oldStart, oldEnd) {\n      // \"Deletion\" columns\n      let rowCount = oldEnd - oldStart + 1;\n      let columnCount = currentEnd - currentStart + 1;\n      let distances = new Array(rowCount);\n\n      // \"Addition\" rows. Initialize null column.\n      for (let i = 0; i < rowCount; i++) {\n        distances[i] = new Array(columnCount);\n        distances[i][0] = i;\n      }\n\n      // Initialize null row\n      for (let j = 0; j < columnCount; j++)\n        distances[0][j] = j;\n\n      for (let i = 1; i < rowCount; i++) {\n        for (let j = 1; j < columnCount; j++) {\n          if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n            distances[i][j] = distances[i - 1][j - 1];\n          else {\n            let north = distances[i - 1][j] + 1;\n            let west = distances[i][j - 1] + 1;\n            distances[i][j] = north < west ? north : west;\n          }\n        }\n      }\n\n      return distances;\n    },\n\n    // This starts at the final weight, and walks \"backward\" by finding\n    // the minimum previous weight recursively until the origin of the weight\n    // matrix.\n    spliceOperationsFromEditDistances(distances) {\n      let i = distances.length - 1;\n      let j = distances[0].length - 1;\n      let current = distances[i][j];\n      let edits = [];\n      while (i > 0 || j > 0) {\n        if (i == 0) {\n          edits.push(EDIT_ADD);\n          j--;\n          continue;\n        }\n        if (j == 0) {\n          edits.push(EDIT_DELETE);\n          i--;\n          continue;\n        }\n        let northWest = distances[i - 1][j - 1];\n        let west = distances[i - 1][j];\n        let north = distances[i][j - 1];\n\n        let min;\n        if (west < north)\n          min = west < northWest ? west : northWest;\n        else\n          min = north < northWest ? north : northWest;\n\n        if (min == northWest) {\n          if (northWest == current) {\n            edits.push(EDIT_LEAVE);\n          } else {\n            edits.push(EDIT_UPDATE);\n            current = northWest;\n          }\n          i--;\n          j--;\n        } else if (min == west) {\n          edits.push(EDIT_DELETE);\n          i--;\n          current = west;\n        } else {\n          edits.push(EDIT_ADD);\n          j--;\n          current = north;\n        }\n      }\n\n      edits.reverse();\n      return edits;\n    },\n\n    /**\n     * Splice Projection functions:\n     *\n     * A splice map is a representation of how a previous array of items\n     * was transformed into a new array of items. Conceptually it is a list of\n     * tuples of\n     *\n     *   <index, removed, addedCount>\n     *\n     * which are kept in ascending index order of. The tuple represents that at\n     * the |index|, |removed| sequence of items were removed, and counting forward\n     * from |index|, |addedCount| items were added.\n     */\n\n    /**\n     * Lacking individual splice mutation information, the minimal set of\n     * splices can be synthesized given the previous state and final state of an\n     * array. The basic approach is to calculate the edit distance matrix and\n     * choose the shortest path through it.\n     *\n     * Complexity: O(l * p)\n     *   l: The length of the current array\n     *   p: The length of the old array\n     */\n    calcSplices(current, currentStart, currentEnd,\n                          old, oldStart, oldEnd) {\n      let prefixCount = 0;\n      let suffixCount = 0;\n      let splice;\n\n      let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n      if (currentStart == 0 && oldStart == 0)\n        prefixCount = this.sharedPrefix(current, old, minLength);\n\n      if (currentEnd == current.length && oldEnd == old.length)\n        suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n      currentStart += prefixCount;\n      oldStart += prefixCount;\n      currentEnd -= suffixCount;\n      oldEnd -= suffixCount;\n\n      if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n        return [];\n\n      if (currentStart == currentEnd) {\n        splice = newSplice(currentStart, [], 0);\n        while (oldStart < oldEnd)\n          splice.removed.push(old[oldStart++]);\n\n        return [ splice ];\n      } else if (oldStart == oldEnd)\n        return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n      let ops = this.spliceOperationsFromEditDistances(\n          this.calcEditDistances(current, currentStart, currentEnd,\n                                 old, oldStart, oldEnd));\n\n      splice = undefined;\n      let splices = [];\n      let index = currentStart;\n      let oldIndex = oldStart;\n      for (let i = 0; i < ops.length; i++) {\n        switch(ops[i]) {\n          case EDIT_LEAVE:\n            if (splice) {\n              splices.push(splice);\n              splice = undefined;\n            }\n\n            index++;\n            oldIndex++;\n            break;\n          case EDIT_UPDATE:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.addedCount++;\n            index++;\n\n            splice.removed.push(old[oldIndex]);\n            oldIndex++;\n            break;\n          case EDIT_ADD:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.addedCount++;\n            index++;\n            break;\n          case EDIT_DELETE:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.removed.push(old[oldIndex]);\n            oldIndex++;\n            break;\n        }\n      }\n\n      if (splice) {\n        splices.push(splice);\n      }\n      return splices;\n    },\n\n    sharedPrefix(current, old, searchLength) {\n      for (let i = 0; i < searchLength; i++)\n        if (!this.equals(current[i], old[i]))\n          return i;\n      return searchLength;\n    },\n\n    sharedSuffix(current, old, searchLength) {\n      let index1 = current.length;\n      let index2 = old.length;\n      let count = 0;\n      while (count < searchLength && this.equals(current[--index1], old[--index2]))\n        count++;\n\n      return count;\n    },\n\n    calculateSplices(current, previous) {\n      return this.calcSplices(current, 0, current.length, previous, 0,\n                              previous.length);\n    },\n\n    equals(currentValue, previousValue) {\n      return currentValue === previousValue;\n    }\n\n  };\n\n  Polymer.ArraySplice = {\n    calculateSplices(current, previous) {\n      return ArraySplice.calculateSplices(current, previous);\n    }\n  }\n\n})();\n(function() {\n\n  function isSlot(node) {\n    return (node.localName === 'slot');\n  }\n\n  function getEffectiveNodes(node) {\n    if (isSlot(node)) {\n      return node.assignedNodes({flatten: true});\n    } else {\n      return Array.from(node.childNodes).map(node => {\n        if (isSlot(node)) {\n          return node.assignedNodes({flatten: true});\n        } else {\n          return [node];\n        }\n      }).reduce((a, b) => a.concat(b), []);\n    }\n  }\n\n  let effectiveNodesObserverPromise = Promise.resolve();\n\n  class EffectiveNodesObserver {\n\n    constructor(target, callback) {\n      this.target = target;\n      this.callback = callback;\n      this.effectiveNodes = [];\n      this.observer = null;\n      this.scheduled = false;\n      this._boundSchedule = () => {\n        this.schedule();\n      }\n      this.connect();\n      this.schedule();\n    }\n\n    connect() {\n      if (isSlot(this.target)) {\n        this.listenSlots([this.target]);\n      } else {\n        this.listenSlots(this.target.children);\n        if (window.ShadyDOM) {\n          this.shadyChildrenObserver =\n            ShadyDOM.observeChildren(this.target, (mutations) => {\n              this.processMutations(mutations);\n            });\n        } else {\n          this.nativeChildrenObserver =\n            new MutationObserver((mutations) => {\n              this.processMutations(mutations);\n            });\n          this.nativeChildrenObserver.observe(this.target, {childList: true});\n        }\n      }\n      this.connected = true;\n    }\n\n    disconnect() {\n      if (isSlot(this.target)) {\n        this.unlistenSlots([this.target]);\n      } else {\n        this.unlistenSlots(this.target.children);\n        if (window.ShadyDOM && this.shadyChildrenObserver) {\n          ShadyDOM.unobserveChildren(this.shadyChildrenObserver);\n          this.shadyChildrenObserver = null;\n        } else if (this.nativeChildrenObserver) {\n          this.nativeChildrenObserver.disconnect();\n          this.nativeChildrenObserver = null;\n        }\n      }\n      this.connected = false;\n    }\n\n    schedule() {\n      if (!this.scheduled) {\n        this.scheduled = true;\n        effectiveNodesObserverPromise.then(() => {\n          this.flush();\n        });\n      }\n    }\n\n    processMutations(mutations) {\n      this.processSlotMutations(mutations);\n      this.flush();\n    }\n\n    processSlotMutations(mutations) {\n      if (mutations) {\n        for (let i=0; i < mutations.length; i++) {\n          let mutation = mutations[i];\n          if (mutation.addedNodes) {\n            this.listenSlots(mutation.addedNodes);\n          }\n          if (mutation.removedNodes) {\n            this.unlistenSlots(mutation.removedNodes);\n          }\n        }\n      }\n    }\n\n    flush() {\n      if (!this.connected) {\n        return;\n      }\n      if (window.ShadyDOM) {\n        ShadyDOM.flush();\n      }\n      if (this.nativeChildrenObserver) {\n        this.processSlotMutations(this.nativeChildrenObserver.takeRecords());\n      } else if (this.shadyChildrenObserver) {\n        this.processSlotMutations(this.shadyChildrenObserver.takeRecords());\n      }\n      this.scheduled = false;\n      let info = {\n        target: this.target,\n        addedNodes: [],\n        removedNodes: []\n      };\n      let newNodes = getEffectiveNodes(this.target);\n      let splices = Polymer.ArraySplice.calculateSplices(newNodes,\n        this.effectiveNodes);\n      // process removals\n      for (let i=0, s; (i<splices.length) && (s=splices[i]); i++) {\n        for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n          info.removedNodes.push(n);\n        }\n      }\n      // process adds\n      for (let i=0, s; (i<splices.length) && (s=splices[i]); i++) {\n        for (let j=s.index; j < s.index + s.addedCount; j++) {\n          info.addedNodes.push(newNodes[j]);\n        }\n      }\n      // update cache\n      this.effectiveNodes = newNodes;\n      if (info.addedNodes.length || info.removedNodes.length) {\n        this.callback.call(this.target, info);\n      }\n    }\n\n    listenSlots(nodeList) {\n      for (let i=0; i < nodeList.length; i++) {\n        let n = nodeList[i];\n        if (isSlot(n)) {\n          n.addEventListener('slotchange', this._boundSchedule);\n        }\n      }\n    }\n\n    unlistenSlots(nodeList) {\n      for (let i=0; i < nodeList.length; i++) {\n        let n = nodeList[i];\n        if (isSlot(n)) {\n          n.removeEventListener('slotchange', this._boundSchedule);\n        }\n      }\n    }\n\n  }\n\n  class DomApi {\n\n    constructor(node) {\n      if (window.ShadyDOM) {\n        ShadyDOM.patch(node);\n      }\n      this.node = node;\n    }\n\n    observeNodes(callback) {\n      if (window.ShadyDOM) {\n        ShadyDOM.flush();\n      }\n      return new EffectiveNodesObserver(this.node, callback);\n    }\n\n    unobserveNodes(observerHandle) {\n      observerHandle.disconnect();\n    }\n\n    notifyObserver() {}\n\n    deepContains(node) {\n      if (this.node.contains(node)) {\n        return true;\n      }\n      let n = node;\n      let doc = node.ownerDocument;\n      // walk from node to `this` or `document`\n      while (n && n !== doc && n !== this.node) {\n        // use logical parentnode, or native ShadowRoot host\n        n = Polymer.dom(n).parentNode || n.host;\n      }\n      return n === this.node;\n    }\n\n    getOwnerRoot() {\n      return this.node.getRootNode();\n    }\n\n    getDistributedNodes() {\n      return (this.node.localName === 'slot') ?\n        this.node.assignedNodes({flatten: true}) :\n        [];\n    }\n\n    getDestinationInsertionPoints() {\n      let ip$ = [];\n      let n = this.node.assignedSlot;\n      while (n) {\n        ip$.push(n);\n        n = n.assignedSlot;\n      }\n      return ip$;\n    }\n\n    importNode(externalNode, deep) {\n      let doc = this.node instanceof Document ? this.node :\n        this.node.ownerDocument;\n      return doc.importNode(externalNode, deep);\n    }\n\n    getEffectiveChildNodes() {\n      return getEffectiveNodes(this.node);\n    }\n\n    queryDistributedElements(selector) {\n      let c$ = this.getEffectiveChildNodes();\n      let list = [];\n      for (let i=0, l=c$.length, c; (i<l) && (c=c$[i]); i++) {\n        if ((c.nodeType === Node.ELEMENT_NODE) &&\n            Polymer.Utils.matchesSelector(c, selector)) {\n          list.push(c);\n        }\n      }\n      return list;\n    }\n\n  }\n\n  function forwardMethods(proto, methods) {\n    for (let i=0; i < methods.length; i++) {\n      let method = methods[i];\n      proto[method] = function() {\n        return this.node[method].apply(this.node, arguments);\n      }\n    }\n  }\n\n  function forwardReadOnlyProperties(proto, properties) {\n    for (let i=0; i < properties.length; i++) {\n      let name = properties[i];\n      Object.defineProperty(proto, name, {\n        get: function() {\n          return this.node[name];\n        },\n        configurable: true\n      });\n    }\n  }\n\n  function forwardProperties(proto, properties) {\n    for (let i=0; i < properties.length; i++) {\n      let name = properties[i];\n      Object.defineProperty(proto, name, {\n        get: function() {\n          return this.node[name];\n        },\n        set: function(value) {\n          this.name[name] = value;\n        },\n        configurable: true\n      });\n    }\n  }\n\n  forwardMethods(DomApi.prototype, [\n    'cloneNode', 'appendChild', 'insertBefore', 'removeChild',\n    'replaceChild', 'setAttribute', 'removeAttribute',\n    'querySelector', 'querySelectorAll'\n  ]);\n\n  forwardReadOnlyProperties(DomApi.prototype, [\n    'activeElement',\n    'parentNode', 'firstChild', 'lastChild',\n    'nextSibling', 'previousSibling', 'firstElementChild',\n    'lastElementChild', 'nextElementSibling', 'previousElementSibling',\n    'childNodes', 'children'\n  ]);\n\n  forwardProperties(DomApi.prototype, [\n    'textContent', 'innerHTML'\n  ]);\n\n\n  class EventApi {\n    constructor(event) {\n      this.event = event;\n    }\n\n    get rootTarget() {\n      return this.event.composedPath()[0];\n    }\n\n    get localTarget() {\n      return this.event.target;\n    }\n\n    get path() {\n      return this.event.composedPath();\n    }\n  }\n\n  Polymer.dom = function(obj) {\n    obj = obj || document;\n    let ctor = obj instanceof Event ? EventApi : DomApi;\n    if (!obj.__domApi) {\n      obj.__domApi = new ctor(obj);\n    }\n    return obj.__domApi;\n  };\n\n  Polymer.dom.flush = function() {\n    if (window.ShadyDOM) {\n      ShadyDOM.flush();\n    }\n    if (customElements.flush) {\n      customElements.flush();\n    }\n  }\n\n  Polymer.Settings = {\n    useShadow: true\n  };\n\n})();\n(function() {\n\n  // unresolved\n\n  function resolve() {\n    document.body.removeAttribute('unresolved');\n  }\n\n  if (window.WebComponents) {\n    addEventListener('WebComponentsReady', resolve);\n  } else {\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      resolve();\n    } else {\n      addEventListener('DOMContentLoaded', resolve);\n    }\n  }\n\n})();\n(function() {\n\n  'use strict';\n\n  var utils = Polymer.Utils;\n\n  // TODO(sorvell): same api as before.\n  Polymer._warn = function(warning) {\n    console.warn(warning);\n  }\n\n  Polymer.LegacyElementMixin = Polymer.Utils.cachingMixin(function(base) {\n\n    return class LegacyElement extends Polymer.GestureEventListeners(\n      Polymer.ElementMixin(base)) {\n\n      constructor() {\n        super();\n        this.created();\n      }\n\n      _applyListeners() {\n        this._applyConfigListeners(this.constructor._ownConfig);\n      }\n\n      _applyConfigListeners(config) {\n        if (config.listeners) {\n          for (let l in config.listeners) {\n            this._addMethodEventListenerToNode(this, l, config.listeners[l]);\n          }\n        }\n      }\n\n      _ensureAttributes() {\n        this._ensureConfigAttributes(this.constructor._ownConfig);\n      }\n\n      _ensureConfigAttributes(config) {\n        if (config.hostAttributes) {\n          for (let a in config.hostAttributes) {\n            this._ensureAttribute(a, config.hostAttributes[a]);\n          }\n        }\n      }\n\n      ready() {\n        this._applyListeners();\n        this._ensureAttributes();\n        super.ready();\n      }\n\n      connectedCallback() {\n        super.connectedCallback();\n        this.isAttached = true;\n        this.attached();\n      }\n\n      disconnectedCallback() {\n        this.isAttached = false;\n        super.disconnectedCallback();\n        this.detached();\n      }\n\n      attributeChangedCallback(name, old, value) {\n        super.attributeChangedCallback(name, old, value);\n        this.attributeChanged(name, old, value);\n      }\n\n      created() {}\n\n      attached() {}\n\n      detached() {}\n\n      attributeChanged() {}\n\n      serialize(value) {\n        return this._serializeAttribute(value);\n      }\n\n      deserialize(value, type) {\n        return this._deserializeAttribute(value, type);\n      }\n\n      reflectPropertyToAttribute(property, attribute, value) {\n        this._propertyToAttribute(this, property, attribute, value);\n      }\n\n      serializeValueToAttribute(value, attribute, node) {\n        this._valueToAttribute(node || this, value, attribute);\n      }\n\n      /**\n       * Copies own properties (including accessor descriptors) from a source\n       * object to a target object.\n       *\n       * @method extend\n       * @param {Object} prototype Target object to copy properties to.\n       * @param {Object} api Source object to copy properties from.\n       * @return {Object} prototype object that was passed as first argument.\n       */\n      extend(prototype, api) {\n        return utils.extend(prototype, api);\n      }\n\n      /**\n       * Copies props from a source object to a target object.\n       *\n       * Note, this method uses a simple `for...in` strategy for enumerating\n       * properties.  To ensure only `ownProperties` are copied from source\n       * to target and that accessor implementations are copied, use `extend`.\n       *\n       * @method mixin\n       * @param {Object} target Target object to copy properties to.\n       * @param {Object} source Source object to copy properties from.\n       * @return {Object} Target object that was passed as first argument.\n       */\n      mixin(target, source) {\n        return utils.mixin(target, source);\n      }\n\n      chainObject(object, inherited) {\n        if (object && inherited && object !== inherited) {\n          if (!Object.__proto__) {\n            object = this.extend(Object.create(inherited), object);\n          }\n          object.__proto__ = inherited;\n        }\n        return object;\n      }\n\n      /* **** Begin Template **** */\n      /**\n       * Calls `importNode` on the `content` of the `template` specified and\n       * returns a document fragment containing the imported content.\n       *\n       * @method instanceTemplate\n       * @param {HTMLTemplateElement} template HTML template element to instance.\n       * @return {DocumentFragment} Document fragment containing the imported\n       *   template content.\n      */\n      instanceTemplate(template) {\n        var dom =\n          document.importNode(template._content || template.content, true);\n        return dom;\n      }\n\n      /**\n       * Rewrites a given URL relative to the original location of the document\n       * containing the `dom-module` for this element.  This method will return\n       * the same URL before and after vulcanization.\n       *\n       * @method resolveUrl\n       * @param {string} url URL to resolve.\n       * @return {string} Rewritten URL relative to the import\n       */\n      resolveUrl(url) {\n        var module = Polymer.DomModule.import(this.is);\n        var root = '';\n        if (module) {\n          var assetPath = module.getAttribute('assetpath') || '';\n          root = Polymer.ResolveUrl.resolveUrl(\n            assetPath, module.ownerDocument.baseURI);\n        }\n        return Polymer.ResolveUrl.resolveUrl(url, root);\n      }\n\n      /* **** Begin Events **** */\n      /**\n       * Dispatches a custom event with an optional detail value.\n       *\n       * @method fire\n       * @param {String} type Name of event type.\n       * @param {*=} detail Detail value containing event-specific\n       *   payload.\n       * @param {Object=} options Object specifying options.  These may include:\n       *  `bubbles` (boolean, defaults to `true`),\n       *  `cancelable` (boolean, defaults to false), and\n       *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n       * @return {CustomEvent} The new event that was fired.\n       */\n      fire(type, detail, options) {\n        options = options || {};\n        detail = (detail === null || detail === undefined) ? {} : detail;\n        var event = new Event(type, {\n          bubbles: options.bubbles === undefined ? true : options.bubbles,\n          cancelable: Boolean(options.cancelable),\n          composed: options.composed === undefined ? true: options.composed\n        });\n        event.detail = detail;\n        var node = options.node || this;\n        node.dispatchEvent(event)\n        return event;\n      }\n\n      /**\n       * Convenience method to add an event listener on a given element,\n       * late bound to a named method on this element.\n       *\n       * @method listen\n       * @param {Element} node Element to add event listener to.\n       * @param {string} eventName Name of event to listen for.\n       * @param {string} methodName Name of handler method on `this` to call.\n       */\n      listen(node, eventName, methodName) {\n        node = node || this;\n        var hbl = this.__boundListeners ||\n          (this.__boundListeners = new WeakMap());\n        var bl = hbl.get(node);\n        if (!bl) {\n          bl = {};\n          hbl.set(node, bl);\n        }\n        var key = eventName + methodName;\n        if (!bl[key]) {\n          bl[key] = this._addMethodEventListenerToNode(\n            node, eventName, methodName, this);\n        }\n      }\n\n      /**\n       * Convenience method to remove an event listener from a given element,\n       * late bound to a named method on this element.\n       *\n       * @method unlisten\n       * @param {Element} node Element to remove event listener from.\n       * @param {string} eventName Name of event to stop listening to.\n       * @param {string} methodName Name of handler method on `this` to not call\n       anymore.\n       */\n      unlisten(node, eventName, methodName) {\n        node = node || this;\n        var bl = this.__boundListeners && this.__boundListeners.get(node);\n        var key = eventName + methodName;\n        var handler = bl && bl[key];\n        if (handler) {\n          this._removeEventListenerFromNode(node, eventName, handler);\n          bl[key] = null;\n        }\n      }\n\n      /**\n       * Override scrolling behavior to all direction, one direction, or none.\n       *\n       * Valid scroll directions:\n       *   - 'all': scroll in any direction\n       *   - 'x': scroll only in the 'x' direction\n       *   - 'y': scroll only in the 'y' direction\n       *   - 'none': disable scrolling for this node\n       *\n       * @method setScrollDirection\n       * @param {String=} direction Direction to allow scrolling\n       * Defaults to `all`.\n       * @param {HTMLElement=} node Element to apply scroll direction setting.\n       * Defaults to `this`.\n       */\n      setScrollDirection(direction, node) {\n        Polymer.Gestures.setTouchAction(node || this, direction || 'auto');\n      }\n      /* **** End Events **** */\n\n      /**\n       * Convenience method to run `querySelector` on this local DOM scope.\n       *\n       * This function calls `Polymer.dom(this.root).querySelector(slctr)`.\n       *\n       * @method $$\n       * @param {string} slctr Selector to run on this local DOM scope\n       * @return {Element} Element found by the selector, or null if not found.\n       */\n      $$(slctr) {\n        return this.root.querySelector(slctr);\n      }\n\n      /**\n       * Return the element whose local dom within which this element\n       * is contained. This is a shorthand for\n       * `this.getRootNode().host`.\n       */\n      get domHost() {\n        var root = this.getRootNode();\n        return (root instanceof DocumentFragment) ? root.host : root;\n      }\n\n      /**\n       * Force this element to distribute its children to its local dom.\n       * This is necessary only when ShadyDOM is used and only in cases that\n       * are not automatically handled. For example,\n       * a user should call `distributeContent` if distribution has been\n       * invalidated due to an element being added or removed from the shadowRoot\n       * that contains an insertion point (<slot>) inside its subtree.\n       * @method distributeContent\n       */\n      distributeContent() {\n        if (window.ShadyDOM && this.shadowRoot) {\n          this.shadowRoot.forceRender();\n        }\n      }\n\n      /**\n       * Returns a list of nodes that are the effective childNodes. The effective\n       * childNodes list is the same as the element's childNodes except that\n       * any `<content>` elements are replaced with the list of nodes distributed\n       * to the `<content>`, the result of its `getDistributedNodes` method.\n       *\n       * @method getEffectiveChildNodes\n       * @return {Array<Node>} List of effctive child nodes.\n       */\n      getEffectiveChildNodes() {\n        return Polymer.dom(this).getEffectiveChildNodes();\n      }\n\n      /**\n       * Returns a list of nodes distributed within this element that match\n       * `selector`. These can be dom children or elements distributed to\n       * children that are insertion points.\n       * @method queryDistributedElements\n       * @param {string} selector Selector to run.\n       * @return {Array<Node>} List of distributed elements that match selector.\n       */\n      queryDistributedElements(selector) {\n        return Polymer.dom(this).queryDistributedElements(selector);\n      }\n\n      /**\n       * Returns a list of elements that are the effective children. The effective\n       * children list is the same as the element's children except that\n       * any `<content>` elements are replaced with the list of elements\n       * distributed to the `<content>`.\n       *\n       * @method getEffectiveChildren\n       * @return {Array<Node>} List of effctive children.\n       */\n      getEffectiveChildren() {\n        var list = this.getEffectiveChildNodes();\n        return list.filter(function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      }\n\n      /**\n       * Returns a string of text content that is the concatenation of the\n       * text content's of the element's effective childNodes (the elements\n       * returned by <a href=\"#getEffectiveChildNodes>getEffectiveChildNodes</a>.\n       *\n       * @method getEffectiveTextContent\n       * @return {Array<Node>} List of effctive children.\n       */\n      getEffectiveTextContent() {\n        var cn = this.getEffectiveChildNodes();\n        var tc = [];\n        for (var i=0, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n\n      /**\n       * Returns the first effective childNode within this element that\n       * match `selector`. These can be dom child nodes or elements distributed\n       * to children that are insertion points.\n       * @method queryEffectiveChildren\n       * @param {string} selector Selector to run.\n       * @return {Object<Node>} First effective child node that matches selector.\n       */\n      queryEffectiveChildren(selector) {\n        var e$ = this.queryDistributedElements(selector);\n        return e$ && e$[0];\n      }\n\n      /**\n       * Returns a list of effective childNodes within this element that\n       * match `selector`. These can be dom child nodes or elements distributed\n       * to children that are insertion points.\n       * @method queryEffectiveChildren\n       * @param {string} selector Selector to run.\n       * @return {Array<Node>} List of effective child nodes that match selector.\n       */\n      queryAllEffectiveChildren(selector) {\n        return this.queryDistributedElements(selector);\n      }\n\n      /**\n       * Returns a list of nodes distributed to this element's `<content>`.\n       *\n       * If this element contains more than one `<content>` in its local DOM,\n       * an optional selector may be passed to choose the desired content.\n       *\n       * @method getContentChildNodes\n       * @param {String=} slctr CSS selector to choose the desired\n       *   `<content>`.  Defaults to `content`.\n       * @return {Array<Node>} List of distributed nodes for the `<content>`.\n       */\n      getContentChildNodes(slctr) {\n        var content = this.root.querySelector(slctr || 'content');\n        return content ? content.getDistributedNodes() : [];\n      }\n\n      /**\n       * Returns a list of element children distributed to this element's\n       * `<content>`.\n       *\n       * If this element contains more than one `<content>` in its\n       * local DOM, an optional selector may be passed to choose the desired\n       * content.  This method differs from `getContentChildNodes` in that only\n       * elements are returned.\n       *\n       * @method getContentChildNodes\n       * @param {String=} slctr CSS selector to choose the desired\n       *   `<content>`.  Defaults to `content`.\n       * @return {Array<HTMLElement>} List of distributed nodes for the\n       *   `<content>`.\n       */\n      getContentChildren(slctr) {\n        return this.getContentChildNodes(slctr).filter(function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      }\n\n      /**\n       * Checks whether an element is in this element's light DOM tree.\n       *\n       * @method isLightDescendant\n       * @param {?Node} node The element to be checked.\n       * @return {Boolean} true if node is in this element's light DOM tree.\n       */\n      isLightDescendant(node) {\n        return this !== node && this.contains(node) &&\n            this.getRootNode() === node.getRootNode();\n      }\n\n      /**\n       * Checks whether an element is in this element's local DOM tree.\n       *\n       * @method isLocalDescendant\n       * @param {HTMLElement=} node The element to be checked.\n       * @return {Boolean} true if node is in this element's local DOM tree.\n       */\n      isLocalDescendant(node) {\n        return this.root === node.getRootNode();\n      }\n\n      // NOTE: should now be handled by ShadyCss library.\n      scopeSubtree(container, shouldObserve) { // eslint-disable-line no-unused-vars\n      }\n\n      /**\n       * Returns the computed style value for the given property.\n       * @param {String} property\n       * @return {String} the computed value\n       */\n      getComputedStyleValue(property) {\n        return ShadyCSS.getComputedStyleValue(this, property);\n      }\n\n      // debounce\n\n      /**\n       * Call `debounce` to collapse multiple requests for a named task into\n       * one invocation which is made after the wait time has elapsed with\n       * no new request.  If no wait time is given, the callback will be called\n       * at microtask timing (guaranteed before paint).\n       *\n       *     debouncedClickAction(e) {\n       *       // will not call `processClick` more than once per 100ms\n       *       this.debounce('click', function() {\n       *        this.processClick();\n       *       } 100);\n       *     }\n       *\n       * @method debounce\n       * @param {String} jobName String to indentify the debounce job.\n       * @param {Function} callback Function that is called (with `this`\n       *   context) when the wait time elapses.\n       * @param {number} wait Optional wait time in milliseconds (ms) after the\n       *   last signal that must elapse before invoking `callback`\n       */\n      debounce(jobName, callback, wait) {\n        this._debouncers = this._debouncers || {};\n        return this._debouncers[jobName] = Polymer.Debouncer.debounce(\n          this._debouncers[jobName], callback, wait, this);\n      }\n\n      /**\n       * Returns whether a named debouncer is active.\n       *\n       * @method isDebouncerActive\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       * @return {boolean} Whether the debouncer is active (has not yet fired).\n       */\n      isDebouncerActive(jobName) {\n        this._debouncers = this._debouncers || {};\n        var debouncer = this._debouncers[jobName];\n        return !!(debouncer && debouncer.isActive());\n      }\n\n      /**\n       * Immediately calls the debouncer `callback` and inactivates it.\n       *\n       * @method flushDebouncer\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       */\n      flushDebouncer(jobName) {\n        this._debouncers = this._debouncers || {};\n        var debouncer = this._debouncers[jobName];\n        if (debouncer) {\n          debouncer.flush();\n        }\n      }\n\n      /**\n       * Cancels an active debouncer.  The `callback` will not be called.\n       *\n       * @method cancelDebouncer\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       */\n      cancelDebouncer(jobName) {\n        this._debouncers = this._debouncers || {}\n        var debouncer = this._debouncers[jobName];\n        if (debouncer) {\n          debouncer.cancel();\n        }\n      }\n\n      /**\n       * Runs a callback function asyncronously.\n       *\n       * By default (if no waitTime is specified), async callbacks are run at\n       * microtask timing, which will occur before paint.\n       *\n       * @method async\n       * @param {Function} callback The callback function to run, bound to `this`.\n       * @param {number=} waitTime Time to wait before calling the\n       *   `callback`.  If unspecified or 0, the callback will be run at microtask\n       *   timing (before paint).\n       * @return {number} Handle that may be used to cancel the async job.\n       */\n      async(callback, waitTime) {\n        var self = this;\n        return Polymer.Async.run(function() {\n          callback.call(self);\n        }, waitTime);\n      }\n\n      /**\n       * Cancels an async operation started with `async`.\n       *\n       * @method cancelAsync\n       * @param {number} handle Handle returned from original `async` call to\n       *   cancel.\n       */\n      cancelAsync(handle) {\n        Polymer.Async.cancel(handle);\n      }\n\n      // other\n\n      /**\n       * Convenience method for creating an element and configuring it.\n       *\n       * @method create\n       * @param {string} tag HTML element tag to create.\n       * @param {Object} props Object of properties to configure on the\n       *    instance.\n       * @return {Element} Newly created and configured element.\n       */\n      create(tag, props) {\n        var elt = document.createElement(tag);\n        if (props) {\n          if (elt.setProperties) {\n            elt.setProperties(props);\n          } else {\n            for (var n in props) {\n              elt[n] = props[n];\n            }\n          }\n        }\n        return elt;\n      }\n\n      /**\n       * Convenience method for importing an HTML document imperatively.\n       *\n       * This method creates a new `<link rel=\"import\">` element with\n       * the provided URL and appends it to the document to start loading.\n       * In the `onload` callback, the `import` property of the `link`\n       * element will contain the imported document contents.\n       *\n       * @method importHref\n       * @param {string} href URL to document to load.\n       * @param {Function} onload Callback to notify when an import successfully\n       *   loaded.\n       * @param {Function} onerror Callback to notify when an import\n       *   unsuccessfully loaded.\n       * @param {boolean} optAsync True if the import should be loaded `async`.\n       *   Defaults to `false`.\n       * @return {HTMLLinkElement} The link element for the URL to be loaded.\n       */\n      importHref(href, onload, onerror, optAsync) {\n        var l = document.createElement('link');\n        l.rel = 'import';\n        l.href = href;\n\n        optAsync = Boolean(optAsync);\n        if (optAsync) {\n          l.setAttribute('async', '');\n        }\n\n        var self = this;\n        if (onload) {\n          l.onload = function(e) {\n            // NOTE: Push load handler until after `HTMLImports.whenReady`,\n            // if available, to better coordinate with use of customElements\n            // polyfill's document upgrade ordering guarantees (ensures,\n            // for example, a dom-module for an element in an async import\n            // customizes before any elements matching a define call).\n            if (window.HTMLImports) {\n              // wait until any other pending imports are ready\n              HTMLImports.whenReady(function() {\n                // wait until the CustomElements polyfill has upgraded elements.\n                // (needed because CE's whenReady is installed afer this one)\n                setTimeout(function() {\n                  onload.call(self, e);\n                });\n              });\n            } else {\n              onload.call(self, e);\n            }\n          }\n        }\n        if (onerror) {\n          l.onerror = function(e) {\n            onerror.call(self, e);\n          }\n        }\n        document.head.appendChild(l);\n        return l;\n      }\n\n      /**\n       * Polyfill for Element.prototype.matches, which is sometimes still\n       * prefixed.\n       *\n       * @method elementMatches\n       * @param {string} selector Selector to test.\n       * @param {Element=} node Element to test the selector against.\n       * @return {boolean} Whether the element matches the selector.\n       */\n      elementMatches(selector, node) {\n        return Polymer.Utils.matchesSelector(node || this, selector);\n      }\n\n      /**\n       * Toggles an HTML attribute on or off.\n       *\n       * @method toggleAttribute\n       * @param {String} name HTML attribute name\n       * @param {boolean=} bool Boolean to force the attribute on or off.\n       *    When unspecified, the state of the attribute will be reversed.\n       * @param {HTMLElement=} node Node to target.  Defaults to `this`.\n       */\n      toggleAttribute(name, bool, node) {\n        node = node || this;\n        if (arguments.length == 1) {\n          bool = !node.hasAttribute(name);\n        }\n        if (bool) {\n          node.setAttribute(name, '');\n        } else {\n          node.removeAttribute(name);\n        }\n      }\n\n\n      /**\n       * Toggles a CSS class on or off.\n       *\n       * @method toggleClass\n       * @param {String} name CSS class name\n       * @param {boolean=} bool Boolean to force the class on or off.\n       *    When unspecified, the state of the class will be reversed.\n       * @param {HTMLElement=} node Node to target.  Defaults to `this`.\n       */\n      toggleClass(name, bool, node) {\n        node = node || this;\n        if (arguments.length == 1) {\n          bool = !node.classList.contains(name);\n        }\n        if (bool) {\n          node.classList.add(name);\n        } else {\n          node.classList.remove(name);\n        }\n      }\n\n      /**\n       * Cross-platform helper for setting an element's CSS `transform` property.\n       *\n       * @method transformText\n       * @param {String} transform Transform setting.\n       * @param {HTMLElement=} node Element to apply the transform to.\n       * Defaults to `this`\n       */\n      transform(transformText, node) {\n        node = node || this;\n        node.style.webkitTransform = transformText;\n        node.style.transform = transformText;\n      }\n\n      /**\n       * Cross-platform helper for setting an element's CSS `translate3d`\n       * property.\n       *\n       * @method translate3d\n       * @param {number} x X offset.\n       * @param {number} y Y offset.\n       * @param {number} z Z offset.\n       * @param {HTMLElement=} node Element to apply the transform to.\n       * Defaults to `this`.\n       */\n      translate3d(x, y, z, node) {\n        node = node || this;\n        this.transform('translate3d(' + x + ',' + y + ',' + z + ')', node);\n      }\n\n      /**\n       * Removes an item from an array, if it exists.\n       *\n       * If the array is specified by path, a change notification is\n       * generated, so that observers, data bindings and computed\n       * properties watching that path can update.\n       *\n       * If the array is passed directly, **no change\n       * notification is generated**.\n       *\n       * @method arrayDelete\n       * @param {String|Array} path Path to array from which to remove the item\n       *   (or the array itself).\n       * @param {any} item Item to remove.\n       * @return {Array} Array containing item removed.\n       */\n      arrayDelete(arrayOrPath, item) {\n        var index;\n        if (Array.isArray(arrayOrPath)) {\n          index = arrayOrPath.indexOf(item);\n          if (index >= 0) {\n            return arrayOrPath.splice(index, 1);\n          }\n        } else {\n          var arr = Polymer.Path.get(this, arrayOrPath);\n          index = arr.indexOf(item);\n          if (index >= 0) {\n            return this.splice(arrayOrPath, index, 1);\n          }\n        }\n      }\n\n    }\n\n  });\n\n  // bc\n  Polymer.LegacyElement = Polymer.LegacyElementMixin(HTMLElement);\n  Polymer.Base = Polymer.LegacyElement.prototype;\n\n})();\n(function() {\n\n    'use strict';\n\n    var utils = Polymer.Utils;\n    var LegacyElementMixin = Polymer.LegacyElementMixin;\n\n    var metaProps = {\n      attached: true,\n      detached: true,\n      ready: true,\n      created: true,\n      beforeRegister: true,\n      registered: true,\n      attributeChanged: true,\n      // meta objects\n      behaviors: true,\n      hostAttributes: true,\n      properties: true,\n      observers: true,\n      listeners: true\n    }\n\n    var mixinBehaviors = function(behaviors, klass) {\n      for (var i=0; i<behaviors.length; i++) {\n        var b = behaviors[i];\n        if (b) {\n          klass = Array.isArray(b) ? mixinBehaviors(b, klass) :\n            MixinBehavior(b, klass);\n        }\n      }\n      return klass;\n    }\n\n    var flattenBehaviors = function(behaviors, list) {\n      list = list || [];\n      if (behaviors) {\n        for (var i=0; i < behaviors.length; i++) {\n          var b = behaviors[i];\n          if (b) {\n            if (Array.isArray(b)) {\n              flattenBehaviors(b, list);\n            } else {\n              if (list.indexOf(b) < 0) {\n                list.push(b);\n              }\n            }\n          } else {\n            Polymer._warn('behavior is null, check for missing or 404 import');\n          }\n        }\n      }\n      return list;\n    }\n\n    var MixinBehavior = function(behavior, Base) {\n\n      var config = {\n        properties: behavior.properties,\n        observers: behavior.observers\n      };\n\n      class PolymerGenerated extends Base {\n\n        static get config() {\n          return config;\n        }\n\n        _invokeFunction(fn, args) {\n          if (fn) {\n            fn.apply(this, args);\n          }\n        }\n\n        constructor() {\n          super();\n          // call `registered` only if it was not called for *this* constructor\n          if (!PolymerGenerated.hasOwnProperty('__registered')) {\n            PolymerGenerated.__registered = true;\n            if (behavior.registered) {\n              behavior.registered.call(Object.getPrototypeOf(this));\n            }\n          }\n        }\n\n        created() {\n          super.created();\n          this._invokeFunction(behavior.created);\n        }\n\n        _applyConfigMetaData() {\n          super._applyConfigMetaData();\n          this._applyConfigMetaDataFrom(behavior);\n        }\n\n        _applyListeners() {\n          super._applyListeners();\n          this._applyConfigListeners(behavior);\n        }\n\n        _ensureAttributes() {\n          // ensure before calling super so that subclasses can override defaults\n          this._ensureConfigAttributes(behavior);\n          super._ensureAttributes();\n        }\n\n        ready() {\n          super.ready();\n          this._invokeFunction(behavior.ready);\n        }\n\n        attached() {\n          super.attached();\n          this._invokeFunction(behavior.attached);\n        }\n\n        detached() {\n          super.detached();\n          this._invokeFunction(behavior.detached);\n        }\n\n        attributeChanged(name, old, value) {\n          super.attributeChanged(name, old, value);\n          this._invokeFunction(behavior.attributeChanged, [name, old, value]);\n        }\n      }\n\n      for (var p in behavior) {\n        if (!(p in metaProps))\n          utils.copyOwnProperty(p, behavior, PolymerGenerated.prototype);\n      }\n\n      return PolymerGenerated;\n    }\n\n    //var nativeConstructors = {};\n\n    /**\n     * Returns the native element constructor for the tag specified.\n     *\n     * @method getNativeConstructor\n     * @param {string} tag  HTML tag name.\n     * @return {Object} Native constructor for specified tag.\n    */\n    var getNativeConstructor = function(tag) {\n      if (tag) {\n        // TODO(kschaaf): hack, for now, needs to be removed; needed to allow\n        // subclassing from overwridden constructors in CEv1 polyfill\n        return window['HTML' + tag[0].toUpperCase() + tag.slice(1) + 'Element'];\n        // var c = nativeConstructors[tag];\n        // if (!c) {\n        //   c = document.createElement(tag).constructor;\n        //   nativeConstructors[tag] = c;\n        // }\n        // return c;\n      } else {\n        return HTMLElement;\n      }\n    }\n\n    Polymer.Class = function(info) {\n      if (!info) {\n        Polymer._warn('Polymer.Class requires `info` argument');\n      }\n      var klass = LegacyElementMixin(getNativeConstructor(info.extends));\n      var behaviors = flattenBehaviors(info.behaviors);\n      if (behaviors.length) {\n        klass = mixinBehaviors(behaviors, klass);\n      }\n      klass = MixinBehavior(info, klass);\n      // decorate klass with registration info\n      klass.is = info.is;\n      klass.extends = info.extends;\n      // behaviors on prototype for BC...\n      behaviors.reverse();\n      klass.prototype.behaviors = behaviors;\n      // NOTE: while we could call `beforeRegister` here to maintain\n      // some BC, the state of the element at this point is not as it was in 1.0\n      // In 1.0, the method was called *after* mixing prototypes together\n      // but before processing of meta-objects. Since this is now done\n      // in 1 step via `MixinBehavior`, this is no longer possible.\n      // However, *most* work (not setting `is`) that was previously done in\n      // `beforeRegister` should be possible in `registered`.\n      return klass;\n    }\n\n  })();\n(function() {\n\n    class DomBind extends Polymer.BatchedEffects(HTMLElement) {\n\n      connectedCallback() {\n        this.render();\n      }\n\n      disconnectedCallback() {\n        this._removeChildren();\n      }\n\n      _insertChildren() {\n        this.parentNode.insertBefore(this.root, this);\n      }\n\n      _removeChildren() {\n        if (this._children) {\n          for (var i=0; i<this._children.length; i++) {\n            this.root.appendChild(this._children[i]);\n          }\n        }\n      }\n\n      /**\n       * Forces the element to render its content. This is typically only\n       * necessary to call if HTMLImports with the async attribute are used.\n       */\n      render() {\n        if (!this._children) {\n          var template = this.querySelector('template');\n          if (!template) {\n            throw new Error('dom-bind requires a <template> child');\n          }\n          this._bindTemplate(template);\n          this.root = this._stampTemplate(template);\n          this._children = [];\n          for (var n=this.root.firstChild; n; n=n.nextSibling) {\n            this._children[this._children.length] = n;\n          }\n          this._flushProperties(this);\n        }\n        this._insertChildren();\n        this.dispatchEvent(new CustomEvent('dom-change'));\n      }\n\n    }\n\n    customElements.define('dom-bind', DomBind);\n\n  })();\n(function() {\n    'use strict';\n\n    class nullClass {}\n\n    function PatchedHTMLTemplateElement() {\n      return PatchedHTMLTemplateElement._newInstance;\n    }\n    PatchedHTMLTemplateElement.prototype = Object.create(HTMLTemplateElement.prototype, {\n      constructor: {\n        value: PatchedHTMLTemplateElement\n      }\n    });\n    PatchedHTMLTemplateElement._newInstance = null;\n\n    class DataTemplate extends Polymer.BatchedEffects(PatchedHTMLTemplateElement) {\n      static upgradeTemplate(template) {\n        PatchedHTMLTemplateElement._newInstance = template;\n        Object.setPrototypeOf(template, DataTemplate.prototype);\n        new DataTemplate();\n        PatchedHTMLTemplateElement._newInstance = null;\n      }\n    }\n\n    class Templatizer {\n\n      static enqueueDebouncer(debouncer) {\n        this._debouncerQueue = this._debouncerQueue || [];\n        this._debouncerQueue.push(debouncer);\n      }\n\n      static flushDebouncers() {\n        if (this._debouncerQueue) {\n          while (this._debouncerQueue.length) {\n            this._debouncerQueue.shift().flush();\n          }\n        }\n      }\n\n      templatize(template, options) {\n        let klass = template.__templatizerClass;\n        // Return memoized class if already templatized (allows calling\n        // templatize on same template more than once)\n        if (klass) {\n          return klass;\n        }\n        // Ensure template has _content\n        template._content = template._content || template.content;\n        // Get memoized base class for the prototypical template\n        let baseClass = template._content.__templatizerClass;\n        if (!baseClass) {\n          baseClass = template._content.__templatizerClass =\n            this._createTemplatizerClass(template, options);\n        }\n        // Host property forwarding must be installed onto template instance\n        this._prepHostProperties(template, options);\n        // Subclass base class to add template reference for this specific\n        // template\n        klass = class TemplateInstance extends baseClass {};\n        klass.prototype.template = template;\n        klass.instCount = 0;   \n        template.__templatizerClass = klass;         \n        return klass;\n      }\n\n      _createTemplatizerClass(template, options) {\n        // Anonymous class created by the templatizer\n        var klass = class extends Polymer.BatchedEffects(nullClass) {\n          //TODO(kschaaf): for debugging; remove?\n          get localName() { return 'template#' + this.template.id + '/TemplateInstance' }\n          constructor(host, props) {\n            super();\n            //TODO(kschaaf): for debugging; remove?\n            this.id = this.constructor.instCount;\n            this.constructor.instCount++;\n            this.__dataHost = this.template;\n            if (host) {\n              this._rootDataHost = host.__dataHost ?\n                host.__dataHost._rootDataHost || host.__dataHost : host;\n            }\n            this._hostProps = template._content._hostProps;\n            this._configureProperties(props);\n            //TODO(kschaaf): id marshalling unnecessary\n            this.root = this._stampTemplate(template);\n            // Save list of stamped children\n            var children = this.children = [];\n            for (var n = this.root.firstChild; n; n=n.nextSibling) {\n              children.push(n);\n              n._templateInstance = this;\n            }\n            if (host.__hideTemplateChildren__) {\n              this._showHideChildren(true);\n            }\n            this._flushProperties(true);\n          }\n          _showHideChildren(hide) {\n            var c = this.children;\n            for (var i=0; i<c.length; i++) {\n              var n = c[i];\n              // Ignore non-changes\n              if (Boolean(hide) != Boolean(n.__hideTemplateChildren__)) {\n                if (n.nodeType === Node.TEXT_NODE) {\n                  if (hide) {\n                    n.__polymerTextContent__ = n.textContent;\n                    n.textContent = '';\n                  } else {\n                    n.textContent = n.__polymerTextContent__;\n                  }\n                } else if (n.style) {\n                  if (hide) {\n                    n.__polymerDisplay__ = n.style.display;\n                    n.style.display = 'none';\n                  } else {\n                    n.style.display = n.__polymerDisplay__;\n                  }\n                }\n              }\n              n.__hideTemplateChildren__ = hide;\n              if (n._showHideChildren) {\n                n._showHideChildren(hide);\n              }\n            }\n          }\n          _configureProperties(props) {\n            if (props) {\n              for (var iprop in options.instanceProps) {\n                if (iprop in props) {\n                  this[iprop] = props[iprop];\n                }\n              }\n            }\n            for (var hprop in this._hostProps) {\n              this[hprop] = this.template['_host_' + hprop];\n            }\n          }\n          forwardProperty(prop, value, host) {\n            this._setPendingProperty(prop, value);\n            if (host) {\n              host._enqueueClient(this);\n            }\n          }\n          flushProperties() {\n            this._flushProperties(true);\n          }\n          dispatchEvent() { }\n        }\n        // TODO(kschaaf): event listeners created need to be decorated with e.model\n        klass.prototype._bindTemplate(template);\n        this._prepInstanceProperties(klass, template, options);\n        return klass;\n      }\n\n      _prepHostProperties(template, options) {\n        if (options.fwdHostPropToInstance) {\n          // Provide data API\n          // TODO(kschaaf): memoize template proto\n          DataTemplate.upgradeTemplate(template);\n          // Add template - >instances effects\n          // and host <- template effects\n          var hostProps = template._content._hostProps;\n          for (var prop in hostProps) {\n            template._addPropertyEffect('_host_' + prop,\n              template.PROPERTY_EFFECT_TYPES.PROPAGATE,\n              {fn: this._createHP2IEffector(prop, options)});\n            template._createNotifyingProperty('_host_' + prop);\n          }\n          // Mix any pre-bound data into __data; no need to flush this to\n          // instances since they pull from the template at instance-time\n          if (template.__dataProto) {\n            Polymer.Utils.mixin(template.__data, template.__dataProto);\n          }\n        }\n      }\n\n      _createHP2IEffector(hostProp, options) {\n        return function(inst, prop, value) {\n          options.fwdHostPropToInstance.call(inst, inst,\n            prop.substring('_host_'.length), value);\n        }\n      }\n\n      _prepInstanceProperties(klass, template, options) {\n        var hostProps = template._content._hostProps || {};\n        for (var iprop in options.instanceProps) {\n          delete hostProps[iprop];\n          if (options.fwdInstancePropToHost) {\n            klass.prototype._addPropertyEffect(iprop,\n              klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,\n              {fn: this._createIP2HEffector(iprop, options)});\n          }\n        }\n        if (options.fwdHostPropToInstance && template.__dataHost) {\n          for (var hprop in hostProps) {\n            klass.prototype._addPropertyEffect(hprop,\n              klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,\n              {fn: this._createHP2HEffector(template)})\n          }\n        }\n      }\n\n      _createIP2HEffector(instProp, options) {\n        return function fwdInstPropToHost(inst, prop, value, old, info, fromAbove) {\n          if (!fromAbove) {\n            options.fwdInstancePropToHost.call(inst, inst, prop, value);\n          }\n        }\n      }\n\n      _createHP2HEffector(template) {\n        return function fwdHostPropToHost(inst, prop, value, old, info, fromAbove) {\n          if (!fromAbove) {\n            // TODO(kschaaf) This does not take advantage of the efficient\n            // upward flow in batched effects\n            template._setProperty('_host_' + prop, value);\n          }\n        }\n      }\n\n      /**\n       * Returns the template \"model\" associated with a given element, which\n       * serves as the binding scope for the template instance the element is\n       * contained in. A template model is an instance of `Polymer.Base`, and\n       * should be used to manipulate data associated with this template instance.\n       *\n       * Example:\n       *\n       *   var model = modelForElement(el);\n       *   if (model.index < 10) {\n       *     model.set('item.checked', true);\n       *   }\n       *\n       * @method modelForElement\n       * @param {HTMLElement} el Element for which to return a template model.\n       * @return {Object<Polymer.Base>} Model representing the binding scope for\n       *   the element.\n       */\n      modelForElement(host, el) {\n        var model;\n        while (el) {\n          // An element with a _templateInstance marks the top boundary\n          // of a scope; walk up until we find one, and then ensure that\n          // its __dataHost matches `this`, meaning this dom-repeat stamped it\n          if ((model = el._templateInstance)) {\n            // Found an element stamped by another template; keep walking up\n            // from its __dataHost\n            if (model.__dataHost != host) {\n              el = model.__dataHost;\n            } else {\n              return model;\n            }\n          } else {\n            // Still in a template scope, keep going up until\n            // a _templateInstance is found\n            el = el.parentNode;\n          }\n        }\n      }\n    }\n\n    Polymer.Templatizer = Templatizer;\n\n  })();\n(function() {\n  'use strict';\n\n  var templatizer = new Polymer.Templatizer();\n\n  Polymer({\n\n    is: 'dom-repeat',\n\n    _template: null,\n\n    /**\n     * Fired whenever DOM is added or removed by this template (by\n     * default, rendering occurs lazily).  To force immediate rendering, call\n     * `render`.\n     *\n     * @event dom-change\n     */\n\n    properties: {\n\n      /**\n       * An array containing items determining how many instances of the template\n       * to stamp and that that each template instance should bind to.\n       */\n      items: {\n        type: Array\n      },\n\n      /**\n       * The name of the variable to add to the binding scope for the array\n       * element associated with a given template instance.\n       */\n      as: {\n        type: String,\n        value: 'item'\n      },\n\n      /**\n       * The name of the variable to add to the binding scope with the index\n       * for the inst.  If `sort` is provided, the index will reflect the\n       * sorted order (rather than the original array order).\n       */\n      indexAs: {\n        type: String,\n        value: 'index'\n      },\n\n      /**\n       * The name of the variable to add to the binding scope with the index\n       * for the inst.  If `sort` is provided, the index will reflect the\n       * sorted order (rather than the original array order).\n       */\n      itemsIndexAs: {\n        type: String,\n        value: 'itemsIndex'\n      },\n\n      /**\n       * A function that should determine the sort order of the items.  This\n       * property should either be provided as a string, indicating a method\n       * name on the element's host, or else be an actual function.  The\n       * function should match the sort function passed to `Array.sort`.\n       * Using a sort function has no effect on the underlying `items` array.\n       */\n      sort: {\n        type: Function,\n        observer: '_sortChanged'\n      },\n\n      /**\n       * A function that can be used to filter items out of the view.  This\n       * property should either be provided as a string, indicating a method\n       * name on the element's host, or else be an actual function.  The\n       * function should match the sort function passed to `Array.filter`.\n       * Using a filter function has no effect on the underlying `items` array.\n       */\n      filter: {\n        type: Function,\n        observer: '_filterChanged'\n      },\n\n      /**\n       * When using a `filter` or `sort` function, the `observe` property\n       * should be set to a space-separated list of the names of item\n       * sub-fields that should trigger a re-sort or re-filter when changed.\n       * These should generally be fields of `item` that the sort or filter\n       * function depends on.\n       */\n      observe: {\n        type: String,\n        observer: '_observeChanged'\n      },\n\n      /**\n       * When using a `filter` or `sort` function, the `delay` property\n       * determines a debounce time after a change to observed item\n       * properties that must pass before the filter or sort is re-run.\n       * This is useful in rate-limiting shuffing of the view when\n       * item changes may be frequent.\n       */\n      delay: Number,\n\n      /**\n       * Count of currently rendered items after `filter` (if any) has been applied.\n       * If \"chunking mode\" is enabled, `renderedItemCount` is updated each time a\n       * set of template instances is rendered.\n       *\n       */\n      renderedItemCount: {\n        type: Number,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * Defines an initial count of template instances to render after setting\n       * the `items` array, before the next paint, and puts the `dom-repeat`\n       * into \"chunking mode\".  The remaining items will be created and rendered\n       * incrementally at each animation frame therof until all instances have\n       * been rendered.\n       */\n      initialCount: {\n        type: Number,\n        observer: '_initializeChunking'\n      },\n\n      /**\n       * When `initialCount` is used, this property defines a frame rate to\n       * target by throttling the number of instances rendered each frame to\n       * not exceed the budget for the target frame rate.  Setting this to a\n       * higher number will allow lower latency and higher throughput for\n       * things like event handlers, but will result in a longer time for the\n       * remaining items to complete rendering.\n       */\n      targetFramerate: {\n        type: Number,\n        value: 20\n      },\n\n      _targetFrameTime: {\n        type: Number,\n        computed: '_computeFrameTime(targetFramerate)'\n      }\n\n    },\n\n    observers: [\n      '_itemsChanged(items.*)'\n    ],\n\n    created: function() {\n      this._instances = [];\n      this._pool = [];\n      this._limit = Infinity;\n      var self = this;\n      this._boundRenderChunk = function() {\n        self._renderChunk();\n      };\n    },\n\n    detached: function() {\n      this.__isDetached = true;\n      for (var i=0; i<this._instances.length; i++) {\n        this._detachInstance(i);\n      }\n    },\n\n    attached: function() {\n      // only perform attachment if the element was previously detached.\n      if (this.__isDetached) {\n        this.__isDetached = false;\n        var parent = this.parentNode;\n        for (var i=0; i<this._instances.length; i++) {\n          this._attachInstance(i, parent);\n        }\n      }\n    },\n\n    ensureTemplatized: function() {\n      // Templatizing (generating the instance constructor) needs to wait\n      // until ready, since won't have its template content handed back to\n      // it until then\n      if (!this._ctor) {\n        var template = this.template = this.querySelector('template');\n        template.__domRepeat = this;\n        if (!template) {\n          throw new Error('dom-repeat requires a <template> child');\n        }\n        // Template instance props that should be excluded from forwarding\n        var instanceProps = {};\n        instanceProps[this.as] = true;\n        instanceProps[this.indexAs] = true;\n        instanceProps[this.itemsIndexAs] = true;\n        this._ctor = templatizer.templatize(template, {\n          instanceProps: instanceProps,\n          fwdHostPropToInstance: function(host, prop, value) {\n            var repeater = this.__domRepeat;\n            var i$ = repeater._instances;\n            for (var i=0, inst; (i<i$.length) && (inst=i$[i]); i++) {\n              inst.forwardProperty(prop, value, host);\n            }\n          },\n          fwdInstancePropToHost: function(inst, prop, value) {\n            var repeater = inst.template.__domRepeat;\n            if (Polymer.Path.matches(repeater.as, prop)) {\n              let idx = inst[repeater.itemsIndexAs];\n              if (prop == repeater.as) {\n                repeater.items[idx] = value;\n              }\n              let path = Polymer.Path.translate(repeater.as, 'items.' + idx, prop);\n              repeater.notifyPath(path, value);\n            }\n          }\n        });\n      }\n    },\n\n    _getRootDataHost: function() {\n      return this.__dataHost._rootDataHost || this.__dataHost;\n    },\n\n    _sortChanged: function(sort) {\n      var dataHost = this._getRootDataHost();\n      this._sortFn = sort && (typeof sort == 'function' ? sort :\n        function() { return dataHost[sort].apply(dataHost, arguments); });\n      this._needFullRefresh = true;\n      if (this.items) {\n        this._debounceRender();\n      }\n    },\n\n    _filterChanged: function(filter) {\n      var dataHost = this._getRootDataHost();\n      this._filterFn = filter && (typeof filter == 'function' ? filter :\n        function() { return dataHost[filter].apply(dataHost, arguments); });\n      this._needFullRefresh = true;\n      if (this.items) {\n        this._debounceRender();\n      }\n    },\n\n    _computeFrameTime: function(rate) {\n      return Math.ceil(1000/rate);\n    },\n\n    _initializeChunking: function() {\n      if (this.initialCount) {\n        this._limit = this.initialCount;\n        this._chunkCount = this.initialCount;\n        this._lastChunkTime = performance.now();\n      }\n    },\n\n    _tryRenderChunk: function() {\n      // Debounced so that multiple calls through `_render` between animation\n      // frames only queue one new rAF (e.g. array mutation & chunked render)\n      if (this.items && this._limit < this.items.length) {\n        this.debounce('renderChunk', this._requestRenderChunk);\n      }\n    },\n\n    _requestRenderChunk: function() {\n      requestAnimationFrame(this._boundRenderChunk);\n    },\n\n    _renderChunk: function() {\n      // Simple auto chunkSize throttling algorithm based on feedback loop:\n      // measure actual time between frames and scale chunk count by ratio\n      // of target/actual frame time\n      var currChunkTime = performance.now();\n      var ratio = this._targetFrameTime / (currChunkTime - this._lastChunkTime);\n      this._chunkCount = Math.round(this._chunkCount * ratio) || 1;\n      this._limit += this._chunkCount;\n      this._lastChunkTime = currChunkTime;\n      this._debounceRender();\n    },\n\n    _observeChanged: function() {\n      this._observePaths = this.observe &&\n        this.observe.replace('.*', '.').split(' ');\n    },\n\n    _itemsChanged: function(change) {\n      if (this.items && !Array.isArray(this.items)) {\n        console.warn('dom-repeat expected array for `items`, found', this.items);\n      }\n      // If path was to an item (e.g. 'items.3' or 'items.3.foo'), forward the\n      // path to that instance synchronously (retuns false for non-item paths)\n      if (!this._forwardItemPath(change.path, change.value)) {\n        // Otherwise, the array was reset ('items') or spliced ('items.splices'),\n        // so queue a full refresh\n        this._needFullRefresh = true;\n        this._initializeChunking();\n        this._debounceRender();\n      }\n    },\n\n    _checkObservedPaths: function(path) {\n      if (this._observePaths) {\n        path = path.substring(path.indexOf('.') + 1);\n        var paths = this._observePaths;\n        for (var i=0; i<paths.length; i++) {\n          if (path.indexOf(paths[i]) === 0) {\n            this._needFullRefresh = true;\n            if (this.delay) {\n              this.debounce('render', this._render, this.delay);\n            } else {\n              this._debounceRender();\n            }\n            return true;\n          }\n        }\n      }\n    },\n\n    _debounceRender: function() {\n      Polymer.Templatizer.enqueueDebouncer(this.debounce('_render', this._render));\n    },\n\n    /**\n     * Forces the element to render its content. Normally rendering is\n     * asynchronous to a provoking change. This is done for efficiency so\n     * that multiple changes trigger only a single render. The render method\n     * should be called if, for example, template rendering is required to\n     * validate application state.\n     */\n    render: function() {\n      // Queue this repeater, then flush all in order\n      this._needFullRefresh = true;\n      this._debounceRender();\n      Polymer.Templatizer.flushDebouncers();\n    },\n\n    _render: function() {\n      this.ensureTemplatized();\n      this._applyFullRefresh();\n      // Reset the pool\n      // TODO(kschaaf): Reuse pool across turns and nested templates\n      // Requires updating hostProps and dealing with the fact that path\n      // notifications won't reach instances sitting in the pool, which\n      // could result in out-of-sync instances since simply re-setting\n      // `item` may not be sufficient if the pooled instance happens to be\n      // the same item.\n      this._pool.length = 0;\n      // Set rendered item count\n      this._setRenderedItemCount(this._instances.length);\n      // Notify users\n      this.fire('dom-change');\n      // Check to see if we need to render more items\n      this._tryRenderChunk();\n    },\n\n    _applyFullRefresh: function() {\n      const items = this.items || [];\n      let isntIdxToItemsIdx = new Array(items.length);\n      for (let i=0; i<items.length; i++) {\n        isntIdxToItemsIdx[i] = i;\n      }\n      // Apply user filter\n      if (this._filterFn) {\n        isntIdxToItemsIdx = isntIdxToItemsIdx.filter((i, idx, array) =>\n          this._filterFn(items[i], idx, array));\n      }\n      // Apply user sort\n      if (this._sortFn) {\n        isntIdxToItemsIdx.sort((a, b) => this._sortFn(items[a], items[b]));\n      }\n      // items->inst map kept for item path forwarding\n      const itemsIdxToInstIdx = this._itemsIdxToInstIdx = {};\n      let instIdx = 0;\n      // Generate instances and assign items\n      const limit = Math.min(isntIdxToItemsIdx.length, this._limit);\n      for (; instIdx<limit; instIdx++) {\n        let inst = this._instances[instIdx];\n        let itemIdx = isntIdxToItemsIdx[instIdx];\n        let item = items[itemIdx];\n        itemsIdxToInstIdx[itemIdx] = instIdx;\n        if (inst && instIdx < this._limit) {\n          inst.forwardProperty(this.as, item);\n          inst.forwardProperty(this.indexAs, instIdx);\n          inst.forwardProperty(this.itemsIndexAs, itemIdx);\n          inst.flushProperties();\n        } else {\n          this._insertInstance(item, instIdx, itemIdx);\n        }\n      }\n      // Remove any extra instances from previous state\n      for (let i=this._instances.length-1; i>=instIdx; i--) {\n        this._detachAndRemoveInstance(i);\n      }\n    },\n\n    _detachInstance: function(idx) {\n      var inst = this._instances[idx];\n      //TODO(sorvell): why is this necessary?\n      if (inst.children) {\n        for (var i=0; i<inst.children.length; i++) {\n          var el = inst.children[i];\n          inst.root.appendChild(el);\n        }\n      }\n      return inst;\n    },\n\n    _attachInstance: function(idx, parent) {\n      var inst = this._instances[idx];\n      parent.insertBefore(inst.root, this);\n    },\n\n    _detachAndRemoveInstance: function(idx) {\n      var inst = this._detachInstance(idx);\n      if (inst) {\n        this._pool.push(inst);\n      }\n      this._instances.splice(idx, 1);\n    },\n\n    _stampInstance: function(item, instIdx, itemIdx) {\n      var model = {};\n      model[this.as] = item;\n      model[this.indexAs] = instIdx;\n      model[this.itemsIndexAs] = itemIdx;\n      return new this._ctor(this, model);\n    },\n\n    _insertInstance: function(item, instIdx, itemIdx) {\n      var inst = this._pool.pop();\n      if (inst) {\n        // TODO(kschaaf): If the pool is shared across turns, hostProps\n        // need to be re-set to reused instances in addition to item\n        inst.forwardProperty(this.as, item);\n        inst.forwardProperty(this.indexAs, instIdx);\n        inst.forwardProperty(this.itemsIndexAs, itemIdx);\n      } else {\n        inst = this._stampInstance(item, instIdx, itemIdx);\n      }\n      var beforeRow = this._instances[instIdx + 1];\n      var beforeNode = beforeRow ? beforeRow.children[0] : this;\n      // TODO(sorvell): remove when fragment patching is auto-magic.\n      if (window.ShadyDOM) {\n        ShadyDOM.patch(inst.root);\n      }\n      this.parentNode.insertBefore(inst.root, beforeNode);\n      this._instances[instIdx] = inst;\n      return inst;\n    },\n\n    // Implements extension point from Templatizer mixin\n    _showHideChildren: function(hidden) {\n      for (var i=0; i<this._instances.length; i++) {\n        this._instances[i]._showHideChildren(hidden);\n      }\n    },\n\n    // Called as a side effect of a host items.<key>.<path> path change,\n    // responsible for notifying item.<path> changes to inst for key\n    _forwardItemPath: function(path, value) {\n      if (this._itemsIdxToInstIdx) {\n        path = path.slice(6); // 'items.'.length == 6\n        var dot = path.indexOf('.');\n        var itemsIdx = dot < 0 ? path : path.substring(0, dot);\n        var instIdx = this._itemsIdxToInstIdx[itemsIdx];\n        var inst = this._instances[instIdx];\n        if (inst) {\n          path = dot < 0 ? '' : path.substring(dot+1);\n          if (!this._checkObservedPaths(path)) {\n            inst.forwardProperty(this.as + (path ? '.' + path : ''), value);\n            inst.flushProperties();\n            return true;\n          }        \n        }\n      }\n    },\n\n    /**\n     * Returns the item associated with a given element stamped by\n     * this `dom-repeat`.\n     *\n     * Note, to modify sub-properties of the item,\n     * `modelForElement(el).set('item.<sub-prop>', value)`\n     * should be used.\n     *\n     * @method itemForElement\n     * @param {HTMLElement} el Element for which to return the item.\n     * @return {any} Item associated with the element.\n     */\n    itemForElement: function(el) {\n      var instance = this.modelForElement(el);\n      return instance && instance[this.as];\n    },\n\n    /**\n     * Returns the inst index for a given element stamped by this `dom-repeat`.\n     * If `sort` is provided, the index will reflect the sorted order (rather\n     * than the original array order).\n     *\n     * @method indexForElement\n     * @param {HTMLElement} el Element for which to return the index.\n     * @return {any} Row index associated with the element (note this may\n     *   not correspond to the array index if a user `sort` is applied).\n     */\n    indexForElement: function(el) {\n      var instance = this.modelForElement(el);\n      return instance && instance[this.indexAs];\n    },\n\n    /**\n     * Returns the template \"model\" associated with a given element, which\n     * serves as the binding scope for the template instance the element is\n     * contained in. A template model is an instance of `Polymer.Base`, and\n     * should be used to manipulate data associated with this template instance.\n     *\n     * Example:\n     *\n     *   var model = modelForElement(el);\n     *   if (model.index < 10) {\n     *     model.set('item.checked', true);\n     *   }\n     *\n     * @method modelForElement\n     * @param {HTMLElement} el Element for which to return a template model.\n     * @return {Object<Polymer.Base>} Model representing the binding scope for\n     *   the element.\n     */\n    modelForElement: function(el) {\n      return templatizer.modelForElement(this.template, el);\n    }\n\n  });\n\n})();\n(function() {\n\n  var templatizer = new Polymer.Templatizer();\n\n  /**\n   * Stamps the template iff the `if` property is truthy.\n   *\n   * When `if` becomes falsey, the stamped content is hidden but not\n   * removed from dom. When `if` subsequently becomes truthy again, the content\n   * is simply re-shown. This approach is used due to its favorable performance\n   * characteristics: the expense of creating template content is paid only\n   * once and lazily.\n   *\n   * Set the `restamp` property to true to force the stamped content to be\n   * created / destroyed when the `if` condition changes.\n   */\n  Polymer({\n\n    is: 'dom-if',\n\n    _template: null,\n\n    /**\n     * Fired whenever DOM is added or removed/hidden by this template (by\n     * default, rendering occurs lazily).  To force immediate rendering, call\n     * `render`.\n     *\n     * @event dom-change\n     */\n\n    properties: {\n\n      /**\n       * A boolean indicating whether this template should stamp.\n       */\n      'if': {\n        type: Boolean,\n        observer: '_queueRender'\n      },\n\n      /**\n       * When true, elements will be removed from DOM and discarded when `if`\n       * becomes false and re-created and added back to the DOM when `if`\n       * becomes true.  By default, stamped elements will be hidden but left\n       * in the DOM when `if` becomes false, which is generally results\n       * in better performance.\n       */\n      restamp: {\n        type: Boolean,\n        observer: '_queueRender'\n      }\n\n    },\n\n    _queueRender: function() {\n      Polymer.Templatizer.enqueueDebouncer(this.debounce('_render', this._render));\n    },\n\n    detached: function() {\n      if (!this.parentNode ||\n          (this.parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE &&\n           !this.parentNode.host)) {\n        this._teardownInstance();\n      }\n    },\n\n    attached: function() {\n      if (this.if) {\n        // NOTE: ideally should not be async, but node can be attached\n        // when shady dom is in the act of distributing/composing so push it out\n        this.async(this._ensureInstance);\n      }\n    },\n\n    /**\n     * Forces the element to render its content. Normally rendering is\n     * asynchronous to a provoking change. This is done for efficiency so\n     * that multiple changes trigger only a single render. The render method\n     * should be called if, for example, template rendering is required to\n     * validate application state.\n     */\n    render: function() {\n      Polymer.Templatizer.flushDebouncers();\n    },\n\n    _render: function() {\n      if (this.if) {\n        this._ensureInstance();\n        this._showHideChildren();\n      } else if (this.restamp) {\n        this._teardownInstance();\n      }\n      if (!this.restamp && this._instance) {\n        this._showHideChildren();\n      }\n      if (this.if != this._lastIf) {\n        this.fire('dom-change');\n        this._lastIf = this.if;\n      }\n    },\n\n    _ensureInstance: function() {\n      var parentNode = this.parentNode;\n      // Guard against element being detached while render was queued\n      if (parentNode) {\n        if (!this._ctor) {\n          var template = this.querySelector('template');\n          if (!template) {\n            throw new Error('dom-if requires a <template> child');\n          }\n          var self = this;\n          this._ctor = templatizer.templatize(template, {\n            fwdHostPropToInstance: function(host, prop, value) {\n              if (self._instance) {\n                self._instance.forwardProperty(prop, value, host);\n              }\n            }\n          });\n        }\n        if (!this._instance) {\n          this._instance = new this._ctor(this);\n          var root = this._instance.root;\n          parentNode.insertBefore(root, this);\n        } else {\n          var c$ = this._instance.children;\n          if (c$ && c$.length) {\n            // Detect case where dom-if was re-attached in new position\n            var lastChild = this.previousSibling;\n            if (lastChild !== c$[c$.length-1]) {\n              for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n                parentNode.insertBefore(n, this);\n              }\n            }\n          }\n        }\n      }\n    },\n\n    _teardownInstance: function() {\n      if (this._instance) {\n        var c$ = this._instance.children;\n        if (c$ && c$.length) {\n          // use first child parent, for case when dom-if may have been detached\n          var parent = c$[0].parentNode;\n          for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n            parent.removeChild(n);\n          }\n        }\n        this._instance = null;\n      }\n    },\n\n    _showHideChildren: function() {\n      var hidden = this.__hideTemplateChildren__ || !this.if;\n      if (this._instance) {\n        this._instance._showHideChildren(hidden);\n      }\n    }\n\n  });\n\n})();\n(function() {\n  'use strict';\n  // NOTE: CustomStyle must be loaded prior to loading Polymer.\n  // To support asynchronous loading of custom-style, an async import\n  // can be made that loads custom-style and then polymer.\n  if (window.CustomStyle) {\n    var attr = 'include';\n    window.CustomStyle.processHook = function(style) {\n      var include = style.getAttribute(attr);\n      if (!include) {\n        return;\n      }\n      style.removeAttribute(attr);\n      style.textContent = Polymer.StyleGather.cssFromModules(include) + style.textContent;\n    };\n  }\n\n})();\n(function () {\n  var _bindingRegex_patch = {\n    // Issue with https://github.com/Polymer/polymer/issues/3349 \n    _bindingRegex_1_2_4: (function() {\n      var IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$-*]*' + ')';\n      var NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n      var SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n      var DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n      var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n      var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n      var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n      var ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                    '(?:' + ARGUMENTS + '?' + ')' +\n                                  '\\\\)\\\\s*' + ')';\n      var BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n      var OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n      var CLOSE_BRACKET = '(?:]]|}})';\n      var NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n      var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n      return new RegExp(EXPRESSION, \"g\");\n    })(),\n\n    // Fix from https://github.com/TimvdLippe/polymer/blob/fix-binding-with-dash/src/lib/annotations/annotations.html\n    _bindingRegex_1_2_4_patched: (function() {\n      var IDENT  = '(?:' + '[a-zA-Z_\\\\$][\\\\w\\\\.:\\\\$\\\\-\\\\*]*' + ')';\n      var NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n      var SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n      var DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n      var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n      var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n      var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n      var ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                    '(?:' + ARGUMENTS + '?' + ')' +\n                                  '\\\\)\\\\s*' + ')';\n      var BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n      var OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n      var CLOSE_BRACKET = '(?:]]|}})';\n      var NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n      var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n      return new RegExp(EXPRESSION, \"g\");\n    })()\n  };\n    \n  if (!Polymer.Element && Polymer.Annotations._bindingRegex.toString() === \n      _bindingRegex_patch._bindingRegex_1_2_4.toString()) {\n    console.log('Fixing Polymer issue#3349 by patching Polymer.Annotations._bindingRegex for Polymer 1.2.4');\n    Polymer.Annotations._bindingRegex = _bindingRegex_patch._bindingRegex_1_2_4_patched;\n  }\n})();\n/**\n@license\nCopyright (c) 2016 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\nfunction MakePromise (asap) {\n  function Promise(fn) {\n\t\tif (typeof this !== 'object' || typeof fn !== 'function') throw new TypeError();\n\t\tthis._state = null;\n\t\tthis._value = null;\n\t\tthis._deferreds = []\n\n\t\tdoResolve(fn, resolve.bind(this), reject.bind(this));\n\t}\n\n\tfunction handle(deferred) {\n\t\tvar me = this;\n\t\tif (this._state === null) {\n\t\t\tthis._deferreds.push(deferred);\n\t\t\treturn\n\t\t}\n\t\tasap(function() {\n\t\t\tvar cb = me._state ? deferred.onFulfilled : deferred.onRejected\n\t\t\tif (typeof cb !== 'function') {\n\t\t\t\t(me._state ? deferred.resolve : deferred.reject)(me._value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar ret;\n\t\t\ttry {\n\t\t\t\tret = cb(me._value);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdeferred.resolve(ret);\n\t\t})\n\t}\n\n\tfunction resolve(newValue) {\n\t\ttry { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n\t\t\tif (newValue === this) throw new TypeError();\n\t\t\tif (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n\t\t\t\tvar then = newValue.then;\n\t\t\t\tif (typeof then === 'function') {\n\t\t\t\t\tdoResolve(then.bind(newValue), resolve.bind(this), reject.bind(this));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._state = true;\n\t\t\tthis._value = newValue;\n\t\t\tfinale.call(this);\n\t\t} catch (e) { reject.call(this, e); }\n\t}\n\n\tfunction reject(newValue) {\n\t\tthis._state = false;\n\t\tthis._value = newValue;\n\t\tfinale.call(this);\n\t}\n\n\tfunction finale() {\n\t\tfor (var i = 0, len = this._deferreds.length; i < len; i++) {\n\t\t\thandle.call(this, this._deferreds[i]);\n\t\t}\n\t\tthis._deferreds = null;\n\t}\n\n\t/**\n\t * Take a potentially misbehaving resolver function and make sure\n\t * onFulfilled and onRejected are only called once.\n\t *\n\t * Makes no guarantees about asynchrony.\n\t */\n\tfunction doResolve(fn, onFulfilled, onRejected) {\n\t\tvar done = false;\n\t\ttry {\n\t\t\tfn(function (value) {\n\t\t\t\tif (done) return;\n\t\t\t\tdone = true;\n\t\t\t\tonFulfilled(value);\n\t\t\t}, function (reason) {\n\t\t\t\tif (done) return;\n\t\t\t\tdone = true;\n\t\t\t\tonRejected(reason);\n\t\t\t})\n\t\t} catch (ex) {\n\t\t\tif (done) return;\n\t\t\tdone = true;\n\t\t\tonRejected(ex);\n\t\t}\n\t}\n\n\tPromise.prototype['catch'] = function (onRejected) {\n\t\treturn this.then(null, onRejected);\n\t};\n\n\tPromise.prototype.then = function(onFulfilled, onRejected) {\n\t\tvar me = this;\n\t\treturn new Promise(function(resolve, reject) {\n      handle.call(me, {\n        onFulfilled: onFulfilled,\n        onRejected: onRejected,\n        resolve: resolve,\n        reject: reject\n      });\n\t\t})\n\t};\n\n\tPromise.resolve = function (value) {\n\t\tif (value && typeof value === 'object' && value.constructor === Promise) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(value);\n\t\t});\n\t};\n\n\tPromise.reject = function (value) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\treject(value);\n\t\t});\n\t};\n\n\t\n  return Promise;\n}\n\nif (typeof module !== 'undefined') {\n  module.exports = MakePromise;\n};\nif (!window.Promise) {\n  window.Promise = MakePromise(Polymer.Base.async);\n};\n'use strict';\n\n  Polymer({\n    is: 'iron-request',\n\n    hostAttributes: {\n      hidden: true\n    },\n\n    properties: {\n\n      /**\n       * A reference to the XMLHttpRequest instance used to generate the\n       * network request.\n       *\n       * @type {XMLHttpRequest}\n       */\n      xhr: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return new XMLHttpRequest();\n        }\n      },\n\n      /**\n       * A reference to the parsed response body, if the `xhr` has completely\n       * resolved.\n       *\n       * @type {*}\n       * @default null\n       */\n      response: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return null;\n        }\n      },\n\n      /**\n       * A reference to the status code, if the `xhr` has completely resolved.\n       */\n      status: {\n        type: Number,\n        notify: true,\n        readOnly: true,\n        value: 0\n      },\n\n      /**\n       * A reference to the status text, if the `xhr` has completely resolved.\n       */\n      statusText: {\n        type: String,\n        notify: true,\n        readOnly: true,\n        value: ''\n      },\n\n      /**\n       * A promise that resolves when the `xhr` response comes back, or rejects\n       * if there is an error before the `xhr` completes.\n       *\n       * @type {Promise}\n       */\n      completes: {\n        type: Object,\n        readOnly: true,\n        notify: true,\n        value: function() {\n          return new Promise(function (resolve, reject) {\n            this.resolveCompletes = resolve;\n            this.rejectCompletes = reject;\n          }.bind(this));\n        }\n      },\n\n      /**\n       * An object that contains progress information emitted by the XHR if\n       * available.\n       *\n       * @default {}\n       */\n      progress: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Aborted will be true if an abort of the request is attempted.\n       */\n      aborted: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false,\n      },\n\n      /**\n       * Errored will be true if the browser fired an error event from the\n       * XHR object (mainly network errors).\n       */\n      errored: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false\n      },\n\n      /**\n       * TimedOut will be true if the XHR threw a timeout event.\n       */\n      timedOut: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false\n      }\n    },\n\n    /**\n     * Succeeded is true if the request succeeded. The request succeeded if it\n     * loaded without error, wasn't aborted, and the status code is ≥ 200, and\n     * < 300, or if the status code is 0.\n     *\n     * The status code 0 is accepted as a success because some schemes - e.g.\n     * file:// - don't provide status codes.\n     *\n     * @return {boolean}\n     */\n    get succeeded() {\n      if (this.errored || this.aborted || this.timedOut) {\n        return false;\n      }\n      var status = this.xhr.status || 0;\n\n      // Note: if we are using the file:// protocol, the status code will be 0\n      // for all outcomes (successful or otherwise).\n      return status === 0 ||\n        (status >= 200 && status < 300);\n    },\n\n    /**\n     * Sends an HTTP request to the server and returns the XHR object.\n     *\n     * The handling of the `body` parameter will vary based on the Content-Type\n     * header. See the docs for iron-ajax's `body` param for details.\n     *\n     * @param {{\n     *   url: string,\n     *   method: (string|undefined),\n     *   async: (boolean|undefined),\n     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n     *   headers: (Object|undefined),\n     *   handleAs: (string|undefined),\n     *   jsonPrefix: (string|undefined),\n     *   withCredentials: (boolean|undefined)}} options -\n     *     url The url to which the request is sent.\n     *     method The HTTP method to use, default is GET.\n     *     async By default, all requests are sent asynchronously. To send synchronous requests,\n     *         set to false.\n     *     body The content for the request body for POST method.\n     *     headers HTTP request headers.\n     *     handleAs The response type. Default is 'text'.\n     *     withCredentials Whether or not to send credentials on the request. Default is false.\n     *   timeout: (Number|undefined)\n     * @return {Promise}\n     */\n    send: function (options) {\n      var xhr = this.xhr;\n\n      if (xhr.readyState > 0) {\n        return null;\n      }\n\n      xhr.addEventListener('progress', function (progress) {\n        this._setProgress({\n          lengthComputable: progress.lengthComputable,\n          loaded: progress.loaded,\n          total: progress.total\n        });\n      }.bind(this))\n\n      xhr.addEventListener('error', function (error) {\n        this._setErrored(true);\n        this._updateStatus();\n        this.rejectCompletes(error);\n      }.bind(this));\n\n      xhr.addEventListener('timeout', function (error) {\n        this._setTimedOut(true);\n        this._updateStatus();\n        this.rejectCompletes(error);\n      }.bind(this));\n\n      xhr.addEventListener('abort', function () {\n        this._updateStatus();\n        this.rejectCompletes(new Error('Request aborted.'));\n      }.bind(this));\n\n      // Called after all of the above.\n      xhr.addEventListener('loadend', function () {\n        this._updateStatus();\n        this._setResponse(this.parseResponse());\n\n        if (!this.succeeded) {\n          this.rejectCompletes(new Error('The request failed with status code: ' + this.xhr.status));\n          return;\n        }\n\n        this.resolveCompletes(this);\n      }.bind(this));\n\n      this.url = options.url;\n      xhr.open(\n        options.method || 'GET',\n        options.url,\n        options.async !== false\n      );\n\n      var acceptType = {\n        'json': 'application/json',\n        'text': 'text/plain',\n        'html': 'text/html',\n        'xml': 'application/xml',\n        'arraybuffer': 'application/octet-stream'\n      }[options.handleAs];\n      var headers = options.headers || Object.create(null);\n      var newHeaders = Object.create(null);\n      for (var key in headers) {\n        newHeaders[key.toLowerCase()] = headers[key];\n      }\n      headers = newHeaders;\n\n      if (acceptType && !headers['accept']) {\n        headers['accept'] = acceptType;\n      }\n      Object.keys(headers).forEach(function (requestHeader) {\n        if (/[A-Z]/.test(requestHeader)) {\n          Polymer.Base._error('Headers must be lower case, got', requestHeader);\n        }\n        xhr.setRequestHeader(\n          requestHeader,\n          headers[requestHeader]\n        );\n      }, this);\n\n      if (options.async !== false) {\n        if (options.async) {\n          xhr.timeout = options.timeout;\n        }\n\n        var handleAs = options.handleAs;\n\n        // If a JSON prefix is present, the responseType must be 'text' or the\n        // browser won’t be able to parse the response.\n        if (!!options.jsonPrefix || !handleAs) {\n          handleAs = 'text';\n        }\n\n        // In IE, `xhr.responseType` is an empty string when the response\n        // returns. Hence, caching it as `xhr._responseType`.\n        xhr.responseType = xhr._responseType = handleAs;\n\n        // Cache the JSON prefix, if it exists.\n        if (!!options.jsonPrefix) {\n          xhr._jsonPrefix = options.jsonPrefix;\n        }\n      }\n\n      xhr.withCredentials = !!options.withCredentials;\n\n\n      var body = this._encodeBodyObject(options.body, headers['content-type']);\n\n      xhr.send(\n        /** @type {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|\n                   null|string|undefined} */\n        (body));\n\n      return this.completes;\n    },\n\n    /**\n     * Attempts to parse the response body of the XHR. If parsing succeeds,\n     * the value returned will be deserialized based on the `responseType`\n     * set on the XHR.\n     *\n     * @return {*} The parsed response,\n     * or undefined if there was an empty response or parsing failed.\n     */\n    parseResponse: function () {\n      var xhr = this.xhr;\n      var responseType = xhr.responseType || xhr._responseType;\n      var preferResponseText = !this.xhr.responseType;\n      var prefixLen = (xhr._jsonPrefix && xhr._jsonPrefix.length) || 0;\n\n      try {\n        switch (responseType) {\n          case 'json':\n            // If the xhr object doesn't have a natural `xhr.responseType`,\n            // we can assume that the browser hasn't parsed the response for us,\n            // and so parsing is our responsibility. Likewise if response is\n            // undefined, as there's no way to encode undefined in JSON.\n            if (preferResponseText || xhr.response === undefined) {\n              // Try to emulate the JSON section of the response body section of\n              // the spec: https://xhr.spec.whatwg.org/#response-body\n              // That is to say, we try to parse as JSON, but if anything goes\n              // wrong return null.\n              try {\n                return JSON.parse(xhr.responseText);\n              } catch (_) {\n                return null;\n              }\n            }\n\n            return xhr.response;\n          case 'xml':\n            return xhr.responseXML;\n          case 'blob':\n          case 'document':\n          case 'arraybuffer':\n            return xhr.response;\n          case 'text':\n          default: {\n            // If `prefixLen` is set, it implies the response should be parsed\n            // as JSON once the prefix of length `prefixLen` is stripped from\n            // it. Emulate the behavior above where null is returned on failure\n            // to parse.\n            if (prefixLen) {\n              try {\n                return JSON.parse(xhr.responseText.substring(prefixLen));\n              } catch (_) {\n                return null;\n              }\n            }\n            return xhr.responseText;\n          }\n        }\n      } catch (e) {\n        this.rejectCompletes(new Error('Could not parse response. ' + e.message));\n      }\n    },\n\n    /**\n     * Aborts the request.\n     */\n    abort: function () {\n      this._setAborted(true);\n      this.xhr.abort();\n    },\n\n    /**\n     * @param {*} body The given body of the request to try and encode.\n     * @param {?string} contentType The given content type, to infer an encoding\n     *     from.\n     * @return {*} Either the encoded body as a string, if successful,\n     *     or the unaltered body object if no encoding could be inferred.\n     */\n    _encodeBodyObject: function(body, contentType) {\n      if (typeof body == 'string') {\n        return body;  // Already encoded.\n      }\n      var bodyObj = /** @type {Object} */ (body);\n      switch(contentType) {\n        case('application/json'):\n          return JSON.stringify(bodyObj);\n        case('application/x-www-form-urlencoded'):\n          return this._wwwFormUrlEncode(bodyObj);\n      }\n      return body;\n    },\n\n    /**\n     * @param {Object} object The object to encode as x-www-form-urlencoded.\n     * @return {string} .\n     */\n    _wwwFormUrlEncode: function(object) {\n      if (!object) {\n        return '';\n      }\n      var pieces = [];\n      Object.keys(object).forEach(function(key) {\n        // TODO(rictic): handle array values here, in a consistent way with\n        //   iron-ajax params.\n        pieces.push(\n            this._wwwFormUrlEncodePiece(key) + '=' +\n            this._wwwFormUrlEncodePiece(object[key]));\n      }, this);\n      return pieces.join('&');\n    },\n\n    /**\n     * @param {*} str A key or value to encode as x-www-form-urlencoded.\n     * @return {string} .\n     */\n    _wwwFormUrlEncodePiece: function(str) {\n      // Spec says to normalize newlines to \\r\\n and replace %20 spaces with +.\n      // jQuery does this as well, so this is likely to be widely compatible.\n      if (str === null) {\n        return '';\n      }\n      return encodeURIComponent(str.toString().replace(/\\r?\\n/g, '\\r\\n'))\n          .replace(/%20/g, '+');\n    },\n\n    /**\n     * Updates the status code and status text.\n     */\n    _updateStatus: function() {\n      this._setStatus(this.xhr.status);\n      this._setStatusText((this.xhr.statusText === undefined) ? '' : this.xhr.statusText);\n    }\n  });\n'use strict';\n\n  Polymer({\n\n    is: 'iron-ajax',\n\n    /**\n     * Fired when a request is sent.\n     *\n     * @event request\n     * @event iron-ajax-request\n     */\n\n    /**\n     * Fired when a response is received.\n     *\n     * @event response\n     * @event iron-ajax-response\n     */\n\n    /**\n     * Fired when an error is received.\n     *\n     * @event error\n     * @event iron-ajax-error\n     */\n\n    hostAttributes: {\n      hidden: true\n    },\n\n    properties: {\n      /**\n       * The URL target of the request.\n       */\n      url: {\n        type: String\n      },\n\n      /**\n       * An object that contains query parameters to be appended to the\n       * specified `url` when generating a request. If you wish to set the body\n       * content when making a POST request, you should use the `body` property\n       * instead.\n       */\n      params: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * The HTTP method to use such as 'GET', 'POST', 'PUT', or 'DELETE'.\n       * Default is 'GET'.\n       */\n      method: {\n        type: String,\n        value: 'GET'\n      },\n\n      /**\n       * HTTP request headers to send.\n       *\n       * Example:\n       *\n       *     <iron-ajax\n       *         auto\n       *         url=\"http://somesite.com\"\n       *         headers='{\"X-Requested-With\": \"XMLHttpRequest\"}'\n       *         handle-as=\"json\"></iron-ajax>\n       *\n       * Note: setting a `Content-Type` header here will override the value\n       * specified by the `contentType` property of this element.\n       */\n      headers: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Content type to use when sending data. If the `contentType` property\n       * is set and a `Content-Type` header is specified in the `headers`\n       * property, the `headers` property value will take precedence.\n       *\n       * Varies the handling of the `body` param.\n       */\n      contentType: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * Body content to send with the request, typically used with \"POST\"\n       * requests.\n       *\n       * If body is a string it will be sent unmodified.\n       *\n       * If Content-Type is set to a value listed below, then\n       * the body will be encoded accordingly.\n       *\n       *    * `content-type=\"application/json\"`\n       *      * body is encoded like `{\"foo\":\"bar baz\",\"x\":1}`\n       *    * `content-type=\"application/x-www-form-urlencoded\"`\n       *      * body is encoded like `foo=bar+baz&x=1`\n       *\n       * Otherwise the body will be passed to the browser unmodified, and it\n       * will handle any encoding (e.g. for FormData, Blob, ArrayBuffer).\n       *\n       * @type (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object)\n       */\n      body: {\n        type: Object,\n        value: null\n      },\n\n      /**\n       * Toggle whether XHR is synchronous or asynchronous. Don't change this\n       * to true unless You Know What You Are Doing™.\n       */\n      sync: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Specifies what data to store in the `response` property, and\n       * to deliver as `event.detail.response` in `response` events.\n       *\n       * One of:\n       *\n       *    `text`: uses `XHR.responseText`.\n       *\n       *    `xml`: uses `XHR.responseXML`.\n       *\n       *    `json`: uses `XHR.responseText` parsed as JSON.\n       *\n       *    `arraybuffer`: uses `XHR.response`.\n       *\n       *    `blob`: uses `XHR.response`.\n       *\n       *    `document`: uses `XHR.response`.\n       */\n      handleAs: {\n        type: String,\n        value: 'json'\n      },\n\n      /**\n       * Set the withCredentials flag on the request.\n       */\n      withCredentials: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set the timeout flag on the request.\n       */\n      timeout: {\n        type: Number,\n        value: 0\n      },\n\n      /**\n       * If true, automatically performs an Ajax request when either `url` or\n       * `params` changes.\n       */\n      auto: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * If true, error messages will automatically be logged to the console.\n       */\n      verbose: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The most recent request made by this iron-ajax element.\n       */\n      lastRequest: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * True while lastRequest is in flight.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * lastRequest's response.\n       *\n       * Note that lastResponse and lastError are set when lastRequest finishes,\n       * so if loading is true, then lastResponse and lastError will correspond\n       * to the result of the previous request.\n       *\n       * The type of the response is determined by the value of `handleAs` at\n       * the time that the request was generated.\n       *\n       * @type {Object}\n       */\n      lastResponse: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * lastRequest's error, if any.\n       *\n       * @type {Object}\n       */\n      lastError: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * An Array of all in-flight requests originating from this iron-ajax\n       * element.\n       */\n      activeRequests: {\n        type: Array,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return [];\n        }\n      },\n\n      /**\n       * Length of time in milliseconds to debounce multiple automatically generated requests.\n       */\n      debounceDuration: {\n        type: Number,\n        value: 0,\n        notify: true\n      },\n\n      /**\n       * Prefix to be stripped from a JSON response before parsing it.\n       *\n       * In order to prevent an attack using CSRF with Array responses\n       * (http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/)\n       * many backends will mitigate this by prefixing all JSON response bodies\n       * with a string that would be nonsensical to a JavaScript parser.\n       *\n       */\n      jsonPrefix: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * By default, iron-ajax's events do not bubble. Setting this attribute will cause its\n       * request and response events as well as its iron-ajax-request, -response,  and -error\n       * events to bubble to the window object. The vanilla error event never bubbles when\n       * using shadow dom even if this.bubbles is true because a scoped flag is not passed with\n       * it (first link) and because the shadow dom spec did not used to allow certain events,\n       * including events named error, to leak outside of shadow trees (second link).\n       * https://www.w3.org/TR/shadow-dom/#scoped-flag\n       * https://www.w3.org/TR/2015/WD-shadow-dom-20151215/#events-that-are-not-leaked-into-ancestor-trees\n       */\n      bubbles: {\n        type: Boolean,\n        value: false\n      },\n\n      _boundHandleResponse: {\n        type: Function,\n        value: function() {\n          return this._handleResponse.bind(this);\n        }\n      }\n    },\n\n    observers: [\n      '_requestOptionsChanged(url, method, params.*, headers, contentType, ' +\n          'body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)'\n    ],\n\n    /**\n     * The query string that should be appended to the `url`, serialized from\n     * the current value of `params`.\n     *\n     * @return {string}\n     */\n    get queryString () {\n      var queryParts = [];\n      var param;\n      var value;\n\n      for (param in this.params) {\n        value = this.params[param];\n        param = window.encodeURIComponent(param);\n\n        if (Array.isArray(value)) {\n          for (var i = 0; i < value.length; i++) {\n            queryParts.push(param + '=' + window.encodeURIComponent(value[i]));\n          }\n        } else if (value !== null) {\n          queryParts.push(param + '=' + window.encodeURIComponent(value));\n        } else {\n          queryParts.push(param);\n        }\n      }\n\n      return queryParts.join('&');\n    },\n\n    /**\n     * The `url` with query string (if `params` are specified), suitable for\n     * providing to an `iron-request` instance.\n     *\n     * @return {string}\n     */\n    get requestUrl() {\n      var queryString = this.queryString;\n      var url = this.url || '';\n\n      if (queryString) {\n        var bindingChar = url.indexOf('?') >= 0 ? '&' : '?';\n        return url + bindingChar + queryString;\n      }\n\n      return url;\n    },\n\n    /**\n     * An object that maps header names to header values, first applying the\n     * the value of `Content-Type` and then overlaying the headers specified\n     * in the `headers` property.\n     *\n     * @return {Object}\n     */\n    get requestHeaders() {\n      var headers = {};\n      var contentType = this.contentType;\n      if (contentType == null && (typeof this.body === 'string')) {\n        contentType = 'application/x-www-form-urlencoded';\n      }\n      if (contentType) {\n        headers['content-type'] = contentType;\n      }\n      var header;\n\n      if (this.headers instanceof Object) {\n        for (header in this.headers) {\n          headers[header] = this.headers[header].toString();\n        }\n      }\n\n      return headers;\n    },\n\n    /**\n     * Request options suitable for generating an `iron-request` instance based\n     * on the current state of the `iron-ajax` instance's properties.\n     *\n     * @return {{\n     *   url: string,\n     *   method: (string|undefined),\n     *   async: (boolean|undefined),\n     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n     *   headers: (Object|undefined),\n     *   handleAs: (string|undefined),\n     *   jsonPrefix: (string|undefined),\n     *   withCredentials: (boolean|undefined)}}\n     */\n    toRequestOptions: function() {\n      return {\n        url: this.requestUrl || '',\n        method: this.method,\n        headers: this.requestHeaders,\n        body: this.body,\n        async: !this.sync,\n        handleAs: this.handleAs,\n        jsonPrefix: this.jsonPrefix,\n        withCredentials: this.withCredentials,\n        timeout: this.timeout\n      };\n    },\n\n    /**\n     * Performs an AJAX request to the specified URL.\n     *\n     * @return {!IronRequestElement}\n     */\n    generateRequest: function() {\n      var request = /** @type {!IronRequestElement} */ (document.createElement('iron-request'));\n      var requestOptions = this.toRequestOptions();\n\n      this.push('activeRequests', request);\n\n      request.completes.then(\n        this._boundHandleResponse\n      ).catch(\n        this._handleError.bind(this, request)\n      ).then(\n        this._discardRequest.bind(this, request)\n      );\n\n      request.send(requestOptions);\n\n      this._setLastRequest(request);\n      this._setLoading(true);\n\n      this.fire('request', {\n        request: request,\n        options: requestOptions\n      }, {bubbles: this.bubbles});\n\n      this.fire('iron-ajax-request', {\n        request: request,\n        options: requestOptions\n      }, {bubbles: this.bubbles});\n\n      return request;\n    },\n\n    _handleResponse: function(request) {\n      if (request === this.lastRequest) {\n        this._setLastResponse(request.response);\n        this._setLastError(null);\n        this._setLoading(false);\n      }\n      this.fire('response', request, {bubbles: this.bubbles});\n      this.fire('iron-ajax-response', request, {bubbles: this.bubbles});\n    },\n\n    _handleError: function(request, error) {\n      if (this.verbose) {\n        Polymer.Base._error(error);\n      }\n\n      if (request === this.lastRequest) {\n        this._setLastError({\n          request: request,\n          error: error,\n          status: request.xhr.status,\n          statusText: request.xhr.statusText,\n          response: request.xhr.response\n        });\n        this._setLastResponse(null);\n        this._setLoading(false);\n      }\n\n      // Tests fail if this goes after the normal this.fire('error', ...)\n      this.fire('iron-ajax-error', {\n        request: request,\n        error: error\n      }, {bubbles: this.bubbles});\n\n      this.fire('error', {\n        request: request,\n        error: error\n      }, {bubbles: this.bubbles});\n    },\n\n    _discardRequest: function(request) {\n      var requestIndex = this.activeRequests.indexOf(request);\n\n      if (requestIndex > -1) {\n        this.splice('activeRequests', requestIndex, 1);\n      }\n    },\n\n    _requestOptionsChanged: function() {\n      this.debounce('generate-request', function() {\n        if (this.url == null) {\n          return;\n        }\n\n        if (this.auto) {\n          this.generateRequest();\n        }\n      }, this.debounceDuration);\n    },\n\n  });\n(function () {\n  var intlLibraryScript;\n  var intlLibraryLoadingStatus = 'initializing';\n  var _setupIntlPolyfillCalled = false;\n\n  /**\n   * Set up Intl polyfill if required\n   */\n  function _setupIntlPolyfill () {\n    // Polyfill Intl if required\n    var intlLibraryUrl = this.resolveUrl('../intl/dist/Intl.min.js');\n    if (window.Intl) {\n      if (window.IntlPolyfill && window.Intl === window.IntlPolyfill) {\n        intlLibraryLoadingStatus = 'loaded';\n      }\n      else {\n        intlLibraryLoadingStatus = 'native';\n      }\n    }\n    else {\n      intlLibraryLoadingStatus = 'loading';\n      intlLibraryScript = document.createElement('script');\n      intlLibraryScript.setAttribute('src', intlLibraryUrl);\n      intlLibraryScript.setAttribute('id', 'intl-js-library');\n      intlLibraryScript.addEventListener('load', function intlLibraryLoaded (e) {\n        intlLibraryLoadingStatus = 'loaded';\n        e.target.removeEventListener('load', intlLibraryLoaded);\n        return false;\n      });\n      var s = document.querySelector('script') || document.body;\n      s.parentNode.insertBefore(intlLibraryScript, s);\n    }\n  }\n\n  /**\n   * Set up polyfill locale of Intl if required\n   *\n   * @param {String} locale Target locale to polyfill\n   * @param {Function} callback Callback function to handle locale load\n   * @return {Boolean} true if supported; false if callback will be called\n   */\n  function _setupIntlPolyfillLocale (locale, callback) {\n    if (!window.IntlPolyfill) {\n      switch (intlLibraryLoadingStatus) {\n      case 'loading':\n        if (intlLibraryScript) {\n          var libraryLoadedBindThis = function (e) {\n            _setupIntlPolyfillLocale.call(this, locale, callback);\n            e.target.removeEventListener('load', libraryLoadedBindThis);\n          }.bind(this);\n          intlLibraryScript.addEventListener('load', libraryLoadedBindThis);\n          return false;\n        }\n        else {\n          console.error('Intl.js is not being loaded');\n        }\n        break;\n      // impossible cases\n      case 'initializing':\n      case 'loaded':\n      case 'native':\n      default:\n        /* istanbul ignore next: these cases are impossible */\n        break;\n      }\n    }\n    else {\n      if (intlLibraryLoadingStatus !== 'native') {\n        var supported = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup' });\n        var script;\n        var intlScript;\n        if (supported.length === 0) {\n          // load the locale\n          var fallbackLanguages = _enumerateFallbackLanguages(locale);\n          locale = fallbackLanguages.shift();\n          script = document.querySelector('script#intl-js-locale-' + locale);\n          if (!script) {\n            script = document.createElement('script');\n            script.setAttribute('id', 'intl-js-locale-' + locale);\n            script.setAttribute('src', this.resolveUrl('../intl/locale-data/jsonp/' + locale + '.js'));\n            var intlLocaleLoadedBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('load', intlLocaleLoadedBindThis);\n                callback.call(this, locale);\n              }\n              return false;\n            }.bind(this);\n            var intlLocaleLoadErrorBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('error', intlLocaleLoadErrorBindThis);\n                script.setAttribute('loaderror','');\n                locale = fallbackLanguages.shift();\n                if (!locale) {\n                  locale = this.DEFAULT_LANG;\n                }\n                var fallbackSupport = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup'});\n                if (fallbackSupport.length > 0) {\n                  callback.call(this, locale);\n                }\n                else {\n                  _setupIntlPolyfillLocale.call(this, locale, callback);\n                }\n                return false;\n              }\n            }.bind(this);\n            script.addEventListener('load', intlLocaleLoadedBindThis);\n            script.addEventListener('error', intlLocaleLoadErrorBindThis);\n            intlScript = document.querySelector('script#intl-js-library') || document.body;\n            intlScript.parentNode.insertBefore(script, intlScript.nextSibling);\n          }\n          else if (!script.hasAttribute('loaderror')) {\n            // already loading\n            var anotherIntlLocaleLoadedBindThis = function (e) {\n              if (e.target === script) {\n                callback.call(this, locale);\n                e.target.removeEventListener('load', anotherIntlLocaleLoadedBindThis);\n                return false;\n              }\n            }.bind(this);\n            var anotherIntlLocaleLoadErrorBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('error', anotherIntlLocaleLoadErrorBindThis);\n                locale = fallbackLanguages.shift();\n                if (!locale) {\n                  locale = this.DEFAULT_LANG;\n                }\n                var fallbackSupport = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup'});\n                if (fallbackSupport.length > 0) {\n                  callback.call(this, locale);\n                }\n                else {\n                  _setupIntlPolyfillLocale.call(this, locale, callback);\n                }\n                return false;\n              }\n            }.bind(this);\n            script.addEventListener('load', anotherIntlLocaleLoadedBindThis);\n            script.addEventListener('error', anotherIntlLocaleLoadErrorBindThis);\n          }\n          else {\n            var enSupport = Intl.NumberFormat.supportedLocalesOf(this.DEFAULT_LANG, { localeMatcher: 'lookup'});\n            if (enSupport.length > 0) {\n              callback.call(this, this.DEFAULT_LANG);\n            }\n            else {\n              _setupIntlPolyfillLocale.call(this, this.DEFAULT_LANG, callback);\n            }\n          }\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Enumerate fallback locales for the target locale.\n   * \n   * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n   *\n   * ### Examples:\n   *\n   *| Target Locale | Fallback 1 | Fallback 2 | Fallback 3 |\n   *|:--------------|:-----------|:-----------|:-----------|\n   *| ru            | N/A        | N/A        | N/A        |\n   *| en-GB         | en         | N/A        | N/A        |\n   *| en-Latn-GB    | en-GB      | en-Latn    | en         |\n   *| fr-CA         | fr         | N/A        | N/A        |\n   *| zh-Hans-CN    | zh-Hans    | zh         | N/A        |\n   *| zh-CN         | zh-Hans    | zh         | N/A        |\n   *| zh-TW         | zh-Hant    | zh         | N/A        |\n   *\n   * #### Note:\n   *\n   * For zh language, the script Hans or Hant is supplied as its default script when a country/region code is supplied.\n   *\n   * @param {string} lang Target locale.\n   * @return {Array} List of fallback locales including the target locale at the index 0.\n   */\n  function _enumerateFallbackLanguages (lang) {\n    var result = [];\n    var parts;\n    var match;\n    var isExtLangCode = 0;\n    var extLangCode;\n    var isScriptCode = 0;\n    var scriptCode;\n    var isCountryCode = 0;\n    var countryCode;\n    var n;\n    if (!lang || lang.length === 0) {\n      result.push('');\n    }\n    else {\n      parts = lang.split(/[-_]/);\n      // normalize ISO-639-1 language codes\n      if (parts.length > 0 &&\n          parts[0].match(/^[A-Za-z]{2,3}$/)) {\n        // language codes have to be lowercased\n        // e.g. JA -> ja, FR -> fr\n        // TODO: normalize 3-letter codes to 2-letter codes\n        parts[0] = parts[0].toLowerCase();\n      }\n      // normalize ISO-639-3 extension language codes\n      if (parts.length >= 2 &&\n          parts[1].match(/^[A-Za-z]{3}$/) &&\n          !parts[1].match(/^[Cc][Hh][SsTt]$/)) { // exclude CHS,CHT\n        // extension language codes have to be lowercased\n        // e.g. YUE -> yue\n        isExtLangCode = 1;\n        extLangCode = parts[1] = parts[1].toLowerCase();\n      }\n      // normalize ISO-15924 script codes\n      if (parts.length >= isExtLangCode + 2 &&\n          (match = parts[isExtLangCode + 1].match(/^([A-Za-z])([A-Za-z]{3})$/))) {\n        // script codes have to be capitalized only at the first character\n        // e.g. HANs -> Hans, lAtN -> Latn\n        isScriptCode = 1;\n        scriptCode = parts[isExtLangCode + 1] = match[1].toUpperCase() + match[2].toLowerCase();\n      }\n      // normalize ISO-3166-1 country/region codes\n      if (parts.length >= isExtLangCode + isScriptCode + 2 &&\n          (match = parts[isExtLangCode + isScriptCode + 1].match(/^[A-Za-z0-9]{2,3}$/))) {\n        // country/region codes have to be capitalized\n        // e.g. cn -> CN, jP -> JP\n        isCountryCode = 1;\n        countryCode = parts[isExtLangCode + isScriptCode + 1] = match[0].toUpperCase();\n      }\n      // extensions have to be in lowercases\n      // e.g. U-cA-Buddhist -> u-ca-buddhist, X-LiNux -> x-linux\n      if (parts.length >= isExtLangCode + isScriptCode + isCountryCode + 2) {\n        for (n = isExtLangCode + isScriptCode + isCountryCode + 1; n < parts.length; n++) {\n          parts[n] = parts[n].toLowerCase();\n        }\n      }\n      // enumerate fallback languages\n      while (parts.length > 0) {\n        // normalize delimiters as -\n        // e.g. ja_JP -> ja-JP\n        result.push(parts.join('-'));\n        if (isScriptCode &&\n            isCountryCode &&\n            parts.length == isExtLangCode + isScriptCode + 2) {\n          // script code can be omitted to default\n          // e.g. en-Latn-GB -> en-GB, zh-Hans-CN -> zh-CN\n          parts.splice(isExtLangCode + isScriptCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode + isScriptCode, 0, scriptCode);\n        }\n        if (isExtLangCode &&\n            isCountryCode &&\n            parts.length == isExtLangCode + isScriptCode + 2) {\n          // ext lang code can be omitted to default\n          // e.g. zh-yue-Hans-CN -> zh-Hans-CN\n          parts.splice(isExtLangCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode, 0, extLangCode);\n        }\n        if (isExtLangCode &&\n            isScriptCode &&\n            parts.length == isExtLangCode + isScriptCode + 1) {\n          // ext lang code can be omitted to default\n          // e.g. zh-yue-Hans -> zh-Hans\n          parts.splice(isExtLangCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode, 0, extLangCode);\n        }\n        if (!isScriptCode &&\n            !isExtLangCode &&\n            isCountryCode &&\n            parts.length == 2) {\n          // default script code can be added in certain cases with country codes\n          // e.g. zh-CN -> zh-Hans-CN, zh-TW -> zh-Hant-TW\n          switch (result[result.length - 1]) {\n          case 'zh-CN':\n          case 'zh-CHS':\n            result.push('zh-Hans');\n            break;\n          case 'zh-TW':\n          case 'zh-SG':\n          case 'zh-HK':\n          case 'zh-CHT':\n            result.push('zh-Hant');\n            break;\n          default:\n            break;\n          }\n        }\n        parts.pop();\n      }\n    }\n    return result;\n  }\n\n  Polymer({\n    is: 'i18n-number',\n\n    /**\n     * Fired whenever the formatted text is rendered.\n     *\n     * @event rendered\n     */\n    \n    properties: {\n      /**\n       * The locale for the formatted number.\n       * The typical value is bound to `{{effectiveLang}}` when the containing element has\n       * `BehaviorsStore.I18nBehavior`.\n       */\n      _lang: {\n        type: String,\n        value: 'en',\n        observer: '_langChanged',\n        reflectToAttribute: false\n      },\n\n      /**\n       * Options object for Intl.NumberFormat \n       * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat)\n       */\n      options: {\n        type: Object,\n        observer: '_optionsChanged',\n        notify: true\n      },\n\n      /**\n       * Raw string synchronized with textContent\n       */\n      raw: {\n        type: String,\n        observer: '_rawChanged'\n      },\n\n      /**\n       * Offset for number\n       *\n       * Note: number = rawNumber - offset \n       */\n      offset: {\n        type: Number,\n        value: 0,\n        observer: '_offsetChanged'\n      },\n\n      /**\n       * Raw number parsed from raw\n       */\n      rawNumber: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * Number calculated from rawNumber and offset\n       */\n      number: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * Formatted string rendered for UI\n       *\n       * Note:\n       *   - While Intl.js Polyfill locale module is being loaded, the value is set as `undefined` until load completion.\n       */\n      formatted: {\n        type: String,\n        notify: true\n      }\n    },\n\n    observers: [\n      '_onOptionsPropertyChanged(options.*)'\n    ],\n\n    /**\n     * Default locale constant 'en'\n     */\n    DEFAULT_LANG: 'en',\n\n    /**\n     * Start loading Intl polyfill only once\n     */\n    registered: function () {\n      if (!_setupIntlPolyfillCalled) {\n        _setupIntlPolyfillCalled = true;\n        _setupIntlPolyfill.call(this);\n      }\n    },\n\n    ready: function () {\n      this._setupObservers();\n      this.raw = this.textNode.data;\n      if (!this.lang) {\n        // Polyfill non-functional default value for lang property in Safari 7\n        this.lang = this.DEFAULT_LANG;\n      }\n    },\n\n    attached: function () {\n      this.raw = this.textNode.data;\n    },\n\n    /**\n     * Set up observers of textContent mutations\n     */\n    _setupObservers: function () {\n      this.textNode = Polymer.dom(this).childNodes[0];\n      if (!this.textNode) {\n        Polymer.dom(this).appendChild(document.createTextNode(''));\n        this.textNode = Polymer.dom(this).childNodes[0];\n      }\n      this.observer = new MutationObserver(this._textMutated.bind(this));\n      this.observer.observe(this.textNode, { characterData: true });\n      this.observer.observe(this, { attributes: true, attributeFilter: [ 'lang' ] });\n      this.nodeObserver = Polymer.dom(this).observeNodes(function (info) {\n        if (info.addedNodes[0] && \n            info.addedNodes[0].nodeType === info.addedNodes[0].TEXT_NODE) {\n          this.textNode = info.addedNodes[0];\n          this.raw = this.textNode.data;\n          console.log('i18n-number: text node added with ' + this.raw);\n          this.observer.observe(this.textNode, { characterData: true });\n        }\n      }.bind(this));\n    },\n\n    /**\n     * MutationObserver callback of the child text node to re-render on text mutations.\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _textMutated: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'characterData':\n          console.log('i18n-number: _textMutated: raw = ' + mutation.target.data);\n          if (this.raw !== mutation.target.data) {\n            this.raw = mutation.target.data;\n          }\n          break;\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            this._lang = this.lang;\n          }\n          break;\n        default:\n          /* istanbul ignore next: mutation.type is characterData or attributes */\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Observer of `raw` property to re-render the formatted number.\n     *\n     * @param {string} raw New raw number string.\n     */\n    _rawChanged: function (raw) {\n      if (this.textNode) {\n        if (raw !== this.textNode.data) {\n          this.textNode.data = raw;\n        }\n        //console.log('i18n-number: _rawChanged: raw = ' + raw);\n        this._render(this.lang, this.options, raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `lang` property to re-render the formatted number.\n     *\n     * @param {string} lang New locale.\n     */\n    _langChanged: function (lang) {\n      if (!lang) {\n        this.lang = this.DEFAULT_LANG;\n        lang = this.lang;\n      }\n      if (this.textNode) {\n        //console.log('i18n-number: _langChanged: lang = ' + lang);\n        this._render(lang, this.options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `options` property to re-render the formatted number.\n     *\n     * @param {Object} options New options for Intl.NumberFormat.\n     */\n    _optionsChanged: function (options) {\n      if (this.textNode) {\n        //console.log('i18n-number: _optionsChanged: options = ' + JSON.stringify(options));\n        this._render(this.lang, options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `options` sub-properties to re-render the formatted number.\n     */\n    _onOptionsPropertyChanged: function (/* changeRecord */) {\n      if (this.textNode) {\n        //console.log('_onOptionsPropertyChanged: path = ' + changeRecord.path + ' value = ' + JSON.stringify(changeRecord.value));\n        this._render(this.lang, this.options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `offset` property to re-render the formatted number.\n     *\n     * @param {number} offset New offset.\n     */\n    _offsetChanged: function (offset) {\n      if (this.textNode) {\n        //console.log('i18n-number: _offsetChanged: offset = ' + offset);\n        this._render(this.lang, this.options, this.raw, offset);\n      }\n    },\n\n    /**\n     * Formats the number\n     *\n     * @param {string} lang Locale for formatting.\n     * @param {Object} options Options for Intl.NumberFormat.\n     * @param {number} number Number to format.\n     * @return {string} Formatted number string.\n     */\n    _formatNumber: function (lang, options, number) {\n      if (!lang) {\n        lang = this.DEFAULT_LANG;\n      }\n      switch (intlLibraryLoadingStatus) {\n      case 'loaded':\n      case 'loading':\n      default:\n        try {\n          if (_setupIntlPolyfillLocale.call(this, lang, function (locale) {\n            this.effectiveLang = locale;\n            this._render.call(this, locale, this.options, this.raw, this.offset);\n          }.bind(this))) {\n            return new Intl.NumberFormat(lang, options).format(number);\n          }\n          else {\n            // waiting for callback\n            return undefined;\n          }\n        }\n        catch (e) {\n          return number.toString();\n        }\n        /* istanbul ignore next: unreachable code due to returns in the same case */\n        break;\n      case 'native':\n        // native\n        try {\n          return new Intl.NumberFormat(lang, options).format(number);\n        }\n        catch (e) {\n          return number.toString();\n        }\n        /* istanbul ignore next: unreachable code due to returns in the same case */\n        break;\n      }\n    },\n\n    /**\n     * Renders the formatted number\n     *\n     * @param {string} lang Locale for formatting.\n     * @param {Object} options Options for Intl.NumberFormat.\n     * @param {string} raw Raw number string.\n     * @param {number} offset Offset for number.\n     */\n    _render: function (lang, options, raw, offset) {\n      // TODO: rendering may be done redundantly on property initializations\n      raw = raw.trim();\n      if (!raw && !this.formatted) {\n        //console.log('i18n-number: skipping _render as raw is null');\n        return;\n      }\n      if (raw) {\n        this.rawNumber = Number(raw);\n        this.number = this.rawNumber - offset;\n        this.formatted = this._formatNumber(lang, options, this.number);\n      }\n      else {\n        this.rawNumber = undefined;\n        this.number = undefined;\n        this.formatted = '';\n      }\n      this.$.number.textContent = this.formatted ? this.formatted : '';\n      //console.log('i18n-number: _render ' + this.formatted);\n      if (typeof this.formatted !== 'undefined') {\n        this.fire('rendered');\n      }\n    },\n\n    /**\n     * Renders the formatted number with the current parameters\n     *\n     * Note: (As of Polymer 1.2.3)\n     *   Explicit render() call is needed whenever the observer \n     *   `_onOptionsPropertyChanged(options.*)` is NOT invoked \n     *   after a property of `options` is changed.  An explicit call \n     *   `this.notifyPath('options', this.options, true)` can also \n     *   trigger re-rendering.\n     *\n     *   If the changed property of `options` is bound in an annotation\n     *   like `{{options.currency}}`, the observer `_onOptionsPropertyChanged(options.*)`\n     *   is automatically called whenever the property value is changed\n     *   and thus no explicit call of `render()` or `notifyPath()` is\n     *   required.\n     */\n    render: function () {\n      this._render(this.lang, this.options, this.raw, this.offset);\n    }\n  });\n  })();\nvar _cp = [\nfunction(n, ord) {\n  if (ord) return 'other';\n  return 'other';\n},\nfunction(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one' : 'other';\n},\nfunction(n, ord) {\n  if (ord) return 'other';\n  return ((n == 0\n          || n == 1)) ? 'one' : 'other';\n},\nfunction(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n}\n];\n\n(function (root, plurals) {\n  if (typeof define === 'function' && define.amd) {\n    define(plurals);\n  } else if (typeof exports === 'object') {\n    module.exports = plurals;\n  } else {\n    root.plurals = plurals;\n  }\n}(this, {\naf: _cp[1],\n\nak: _cp[2],\n\nam: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nar: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((n100 >= 3 && n100 <= 10)) ? 'few'\n      : ((n100 >= 11 && n100 <= 99)) ? 'many'\n      : 'other';\n},\n\nas: function(n, ord) {\n  if (ord) return ((n == 1 || n == 5 || n == 7 || n == 8 || n == 9\n          || n == 10)) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nasa: _cp[1],\n\nast: _cp[3],\n\naz: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], i10 = i.slice(-1),\n      i100 = i.slice(-2), i1000 = i.slice(-3);\n  if (ord) return ((i10 == 1 || i10 == 2 || i10 == 5 || i10 == 7 || i10 == 8)\n          || (i100 == 20 || i100 == 50 || i100 == 70\n          || i100 == 80)) ? 'one'\n      : ((i10 == 3 || i10 == 4) || (i1000 == 100 || i1000 == 200\n          || i1000 == 300 || i1000 == 400 || i1000 == 500 || i1000 == 600 || i1000 == 700\n          || i1000 == 800\n          || i1000 == 900)) ? 'few'\n      : (i == 0 || i10 == 6 || (i100 == 40 || i100 == 60\n          || i100 == 90)) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nbe: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return ((n10 == 2\n          || n10 == 3) && n100 != 12 && n100 != 13) ? 'few' : 'other';\n  return (n10 == 1 && n100 != 11) ? 'one'\n      : ((n10 >= 2 && n10 <= 4) && (n100 < 12\n          || n100 > 14)) ? 'few'\n      : (t0 && n10 == 0 || (n10 >= 5 && n10 <= 9)\n          || (n100 >= 11 && n100 <= 14)) ? 'many'\n      : 'other';\n},\n\nbem: _cp[1],\n\nbez: _cp[1],\n\nbg: _cp[1],\n\nbh: _cp[2],\n\nbm: _cp[0],\n\nbn: function(n, ord) {\n  if (ord) return ((n == 1 || n == 5 || n == 7 || n == 8 || n == 9\n          || n == 10)) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nbo: _cp[0],\n\nbr: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2),\n      n1000000 = t0 && s[0].slice(-6);\n  if (ord) return 'other';\n  return (n10 == 1 && n100 != 11 && n100 != 71 && n100 != 91) ? 'one'\n      : (n10 == 2 && n100 != 12 && n100 != 72 && n100 != 92) ? 'two'\n      : (((n10 == 3 || n10 == 4) || n10 == 9) && (n100 < 10\n          || n100 > 19) && (n100 < 70 || n100 > 79) && (n100 < 90\n          || n100 > 99)) ? 'few'\n      : (n != 0 && t0 && n1000000 == 0) ? 'many'\n      : 'other';\n},\n\nbrx: _cp[1],\n\nbs: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nca: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return ((n == 1\n          || n == 3)) ? 'one'\n      : (n == 2) ? 'two'\n      : (n == 4) ? 'few'\n      : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\nce: _cp[1],\n\ncgg: _cp[1],\n\nchr: _cp[1],\n\nckb: _cp[1],\n\ncs: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : ((i >= 2 && i <= 4) && v0) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\ncy: function(n, ord) {\n  if (ord) return ((n == 0 || n == 7 || n == 8\n          || n == 9)) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((n == 3\n          || n == 4)) ? 'few'\n      : ((n == 5\n          || n == 6)) ? 'many'\n      : 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : (n == 3) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n},\n\nda: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return (n == 1 || !t0 && (i == 0\n          || i == 1)) ? 'one' : 'other';\n},\n\nde: _cp[3],\n\ndsb: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i100 = i.slice(-2), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1\n          || f100 == 1) ? 'one'\n      : (v0 && i100 == 2\n          || f100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4) || (f100 == 3\n          || f100 == 4)) ? 'few'\n      : 'other';\n},\n\ndv: _cp[1],\n\ndz: _cp[0],\n\nee: _cp[1],\n\nel: _cp[1],\n\nen: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return (n10 == 1 && n100 != 11) ? 'one'\n      : (n10 == 2 && n100 != 12) ? 'two'\n      : (n10 == 3 && n100 != 13) ? 'few'\n      : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\neo: _cp[1],\n\nes: _cp[1],\n\net: _cp[3],\n\neu: _cp[1],\n\nfa: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nff: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nfi: _cp[3],\n\nfil: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), f10 = f.slice(-1);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (v0 && (i == 1 || i == 2 || i == 3)\n          || v0 && i10 != 4 && i10 != 6 && i10 != 9\n          || !v0 && f10 != 4 && f10 != 6 && f10 != 9) ? 'one' : 'other';\n},\n\nfo: _cp[1],\n\nfr: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nfur: _cp[1],\n\nfy: _cp[3],\n\nga: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((t0 && n >= 3 && n <= 6)) ? 'few'\n      : ((t0 && n >= 7 && n <= 10)) ? 'many'\n      : 'other';\n},\n\ngd: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((n == 1\n          || n == 11)) ? 'one'\n      : ((n == 2\n          || n == 12)) ? 'two'\n      : (((t0 && n >= 3 && n <= 10)\n          || (t0 && n >= 13 && n <= 19))) ? 'few'\n      : 'other';\n},\n\ngl: _cp[3],\n\ngsw: _cp[1],\n\ngu: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nguw: _cp[2],\n\ngv: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1) ? 'one'\n      : (v0 && i10 == 2) ? 'two'\n      : (v0 && (i100 == 0 || i100 == 20 || i100 == 40 || i100 == 60\n          || i100 == 80)) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\nha: _cp[1],\n\nhaw: _cp[1],\n\nhe: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (i == 2 && v0) ? 'two'\n      : (v0 && (n < 0\n          || n > 10) && t0 && n10 == 0) ? 'many'\n      : 'other';\n},\n\nhi: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nhr: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nhsb: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i100 = i.slice(-2), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1\n          || f100 == 1) ? 'one'\n      : (v0 && i100 == 2\n          || f100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4) || (f100 == 3\n          || f100 == 4)) ? 'few'\n      : 'other';\n},\n\nhu: function(n, ord) {\n  if (ord) return ((n == 1\n          || n == 5)) ? 'one' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nhy: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nid: _cp[0],\n\nig: _cp[0],\n\nii: _cp[0],\n\n\"in\": _cp[0],\n\nis: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], t0 = Number(s[0]) == n,\n      i10 = i.slice(-1), i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (t0 && i10 == 1 && i100 != 11\n          || !t0) ? 'one' : 'other';\n},\n\nit: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return ((n == 11 || n == 8 || n == 80\n          || n == 800)) ? 'many' : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\niu: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\niw: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (i == 2 && v0) ? 'two'\n      : (v0 && (n < 0\n          || n > 10) && t0 && n10 == 0) ? 'many'\n      : 'other';\n},\n\nja: _cp[0],\n\njbo: _cp[0],\n\njgo: _cp[1],\n\nji: _cp[3],\n\njmc: _cp[1],\n\njv: _cp[0],\n\njw: _cp[0],\n\nka: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], i100 = i.slice(-2);\n  if (ord) return (i == 1) ? 'one'\n      : (i == 0 || ((i100 >= 2 && i100 <= 20) || i100 == 40 || i100 == 60\n          || i100 == 80)) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nkab: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nkaj: _cp[1],\n\nkcg: _cp[1],\n\nkde: _cp[0],\n\nkea: _cp[0],\n\nkk: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return (n10 == 6 || n10 == 9\n          || t0 && n10 == 0 && n != 0) ? 'many' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nkkj: _cp[1],\n\nkl: _cp[1],\n\nkm: _cp[0],\n\nkn: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nko: _cp[0],\n\nks: _cp[1],\n\nksb: _cp[1],\n\nksh: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : 'other';\n},\n\nku: _cp[1],\n\nkw: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nky: _cp[1],\n\nlag: function(n, ord) {\n  var s = String(n).split('.'), i = s[0];\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : ((i == 0\n          || i == 1) && n != 0) ? 'one'\n      : 'other';\n},\n\nlb: _cp[1],\n\nlg: _cp[1],\n\nlkt: _cp[0],\n\nln: _cp[2],\n\nlo: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nlt: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n10 == 1 && (n100 < 11\n          || n100 > 19)) ? 'one'\n      : ((n10 >= 2 && n10 <= 9) && (n100 < 11\n          || n100 > 19)) ? 'few'\n      : (f != 0) ? 'many'\n      : 'other';\n},\n\nlv: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', v = f.length,\n      t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1),\n      n100 = t0 && s[0].slice(-2), f100 = f.slice(-2), f10 = f.slice(-1);\n  if (ord) return 'other';\n  return (t0 && n10 == 0 || (n100 >= 11 && n100 <= 19)\n          || v == 2 && (f100 >= 11 && f100 <= 19)) ? 'zero'\n      : (n10 == 1 && n100 != 11 || v == 2 && f10 == 1 && f100 != 11\n          || v != 2 && f10 == 1) ? 'one'\n      : 'other';\n},\n\nmas: _cp[1],\n\nmg: _cp[2],\n\nmgo: _cp[1],\n\nmk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1);\n  if (ord) return (i10 == 1 && i100 != 11) ? 'one'\n      : (i10 == 2 && i100 != 12) ? 'two'\n      : ((i10 == 7\n          || i10 == 8) && i100 != 17 && i100 != 18) ? 'many'\n      : 'other';\n  return (v0 && i10 == 1\n          || f10 == 1) ? 'one' : 'other';\n},\n\nml: _cp[1],\n\nmn: _cp[1],\n\nmo: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one'\n      : (!v0 || n == 0\n          || n != 1 && (n100 >= 1 && n100 <= 19)) ? 'few'\n      : 'other';\n},\n\nmr: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nms: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nmt: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 0\n          || (n100 >= 2 && n100 <= 10)) ? 'few'\n      : ((n100 >= 11 && n100 <= 19)) ? 'many'\n      : 'other';\n},\n\nmy: _cp[0],\n\nnah: _cp[1],\n\nnaq: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nnb: _cp[1],\n\nnd: _cp[1],\n\nne: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return ((t0 && n >= 1 && n <= 4)) ? 'one' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nnl: _cp[3],\n\nnn: _cp[1],\n\nnnh: _cp[1],\n\nno: _cp[1],\n\nnqo: _cp[0],\n\nnr: _cp[1],\n\nnso: _cp[2],\n\nny: _cp[1],\n\nnyn: _cp[1],\n\nom: _cp[1],\n\nor: _cp[1],\n\nos: _cp[1],\n\npa: _cp[2],\n\npap: _cp[1],\n\npl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i != 1 && (i10 == 0 || i10 == 1)\n          || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 12 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nprg: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', v = f.length,\n      t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1),\n      n100 = t0 && s[0].slice(-2), f100 = f.slice(-2), f10 = f.slice(-1);\n  if (ord) return 'other';\n  return (t0 && n10 == 0 || (n100 >= 11 && n100 <= 19)\n          || v == 2 && (f100 >= 11 && f100 <= 19)) ? 'zero'\n      : (n10 == 1 && n100 != 11 || v == 2 && f10 == 1 && f100 != 11\n          || v != 2 && f10 == 1) ? 'one'\n      : 'other';\n},\n\nps: _cp[1],\n\npt: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((t0 && n >= 0 && n <= 2) && n != 2) ? 'one' : 'other';\n},\n\n\"pt-PT\": _cp[3],\n\nrm: _cp[1],\n\nro: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one'\n      : (!v0 || n == 0\n          || n != 1 && (n100 >= 1 && n100 <= 19)) ? 'few'\n      : 'other';\n},\n\nrof: _cp[1],\n\nroot: _cp[0],\n\nru: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i10 == 0 || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 11 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nrwk: _cp[1],\n\nsah: _cp[0],\n\nsaq: _cp[1],\n\nsdh: _cp[1],\n\nse: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nseh: _cp[1],\n\nses: _cp[0],\n\nsg: _cp[0],\n\nsh: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nshi: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one'\n      : ((t0 && n >= 2 && n <= 10)) ? 'few'\n      : 'other';\n},\n\nsi: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '';\n  if (ord) return 'other';\n  return ((n == 0 || n == 1)\n          || i == 0 && f == 1) ? 'one' : 'other';\n},\n\nsk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : ((i >= 2 && i <= 4) && v0) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\nsl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1) ? 'one'\n      : (v0 && i100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4)\n          || !v0) ? 'few'\n      : 'other';\n},\n\nsma: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmi: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmj: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmn: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsms: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsn: _cp[1],\n\nso: _cp[1],\n\nsq: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one'\n      : (n10 == 4 && n100 != 14) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nsr: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nss: _cp[1],\n\nssy: _cp[1],\n\nst: _cp[1],\n\nsv: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return ((n10 == 1\n          || n10 == 2) && n100 != 11 && n100 != 12) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\nsw: _cp[3],\n\nsyr: _cp[1],\n\nta: _cp[1],\n\nte: _cp[1],\n\nteo: _cp[1],\n\nth: _cp[0],\n\nti: _cp[2],\n\ntig: _cp[1],\n\ntk: _cp[1],\n\ntl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), f10 = f.slice(-1);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (v0 && (i == 1 || i == 2 || i == 3)\n          || v0 && i10 != 4 && i10 != 6 && i10 != 9\n          || !v0 && f10 != 4 && f10 != 6 && f10 != 9) ? 'one' : 'other';\n},\n\ntn: _cp[1],\n\nto: _cp[0],\n\ntr: _cp[1],\n\nts: _cp[1],\n\ntzm: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((n == 0 || n == 1)\n          || (t0 && n >= 11 && n <= 99)) ? 'one' : 'other';\n},\n\nug: _cp[1],\n\nuk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2), i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return (n10 == 3 && n100 != 13) ? 'few' : 'other';\n  return (v0 && i10 == 1 && i100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i10 == 0 || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 11 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nur: _cp[3],\n\nuz: _cp[1],\n\nve: _cp[1],\n\nvi: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nvo: _cp[1],\n\nvun: _cp[1],\n\nwa: _cp[2],\n\nwae: _cp[1],\n\nwo: _cp[0],\n\nxh: _cp[1],\n\nxog: _cp[1],\n\nyi: _cp[3],\n\nyo: _cp[0],\n\nzh: _cp[0],\n\nzu: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n}\n}));\nPolymer({\n  is: 'i18n-format',\n\n  /**\n   * Fired whenever the formatted text is rendered.\n   *\n   * @event rendered\n   */\n\n  properties: {\n    /**\n     * The locale for the template text.\n     * The typical value is bound to `{{effectiveLang}}` when the containing element has\n     * `BehaviorsStore.I18nBehavior`.\n     */\n    _lang: {\n      type: String,\n      value: 'en',\n      reflectToAttribute: false,\n      observer: '_langChanged'\n    },\n\n    /**\n     * The parameter attribute name to identify parameters.\n     * No need to change in a normal usage.\n     */\n    paramAttribute: {\n      type: String,\n      value: (function () { return Polymer.Element ? 'slot' : 'param'; })(),\n      observer: '_paramAttributeChanged'\n    },\n\n    /**\n     * The parameter format in the template text.\n     * The `'n'` in the format means n-th parameter.\n     * No need to change in a normal usage.\n     */\n    paramFormat: {\n      type: String,\n      value: '{n}',\n      observer: '_paramFormatChanged'\n    },\n\n    /**\n     * When the boolean attribute `observe-params` is specified, \n     * the template is re-rendered on every parameter mutation.\n     * If not specified, the template is re-rendered only on `lang` changes and template text changes.\n     *\n     * Note: If true, re-rendering may be performed muiltiple times redundantly on a locale change.\n     */\n    observeParams: {\n      type: Boolean,\n      value: true // TODO: optimize re-rendering\n    }\n  },\n\n  /**\n   * Default locale constant 'en'\n   */\n  DEFAULT_LANG: 'en',\n\n  ready: function () {\n    this._setupParams();\n    if (!this.lang) {\n      // Polyfill non-functional default value for lang property in Safari 7\n      this.lang = this.DEFAULT_LANG;\n    }\n  },\n\n  attached: function () {\n    this.render();\n  },\n\n  /**\n   * Traverse the local DOM and set up parameters and observers.\n   */\n  _setupParams: function () {\n    var n;\n    this.elements = Array.prototype.filter.call(\n      Polymer.dom(this).childNodes,\n      function (node) {\n        return node.nodeType === node.ELEMENT_NODE;\n      }\n    );\n    var needParamObservation = this.observeParams &&\n                               this.elements.length > 0 && \n                               this.elements[0].tagName.toLowerCase() === 'json-data';\n    this.observer = new MutationObserver(this._templateMutated.bind(this));\n    this.observer.observe(this, { attributes: true, attributeFilter: [ 'lang' ] });\n    for (n = 0; n < this.elements.length; n++) {\n      if (n === 0) {\n        this.templateElement = this.elements[n];\n        this.templateTextNode = Polymer.dom(this.templateElement).childNodes[0];\n        this.observer.observe(this.templateTextNode, { characterData: true });\n      }\n      else {\n        if (!this.elements[n].hasAttribute(this.paramAttribute)) {\n          this.elements[n].setAttribute(this.paramAttribute, '' + n);\n        }\n        if (needParamObservation) {\n          // TODO: childNodes[0] may not be a text node\n          this.observer.observe(Polymer.dom(this.elements[n]).childNodes[0], { characterData: true });\n          if (this.elements[n].tagName.toLowerCase() === 'i18n-number') {\n            this.listen(this.elements[n], 'rendered', 'render');\n          }\n        }\n      }\n    }\n    //console.log('i18n-format: _setupParams: elements = ' + this.elements);\n  },\n\n  /**\n   * MutationObserver callback of child text nodes to re-render on template text or parameter mutations.\n   *\n   * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n   */\n  _templateMutated: function (mutations) {\n    mutations.forEach(function(mutation) {\n      switch (mutation.type) {\n      case 'characterData':\n        //console.log('i18n-format: ' + this.id + '._templateMutated(): characterData: tag = ' + \n        //            Polymer.dom(mutation.target).parentNode.tagName.toLowerCase() + \n        //            ' data = ' + mutation.target.data);\n        if ((Polymer.Element ? mutation.target : Polymer.dom(mutation.target)).parentNode.tagName.toLowerCase() !== 'i18n-number' ||\n            typeof (Polymer.Element ? mutation.target : Polymer.dom(mutation.target)).parentNode.formatted !== 'undefined') {\n          this.render();\n        }\n        break;\n      case 'attributes':\n        if (mutation.attributeName === 'lang') {\n          this._lang = this.lang;\n        }\n        break;\n      default:\n        /* istanbul ignore next: mutation.type is always characterData or attributes */\n        break;\n      }\n    }, this);\n  },\n\n  /**\n   * Observer of `lang` property to re-render the template text.\n   *\n   * @param {string} lang New locale.\n   */\n  _langChanged: function (lang /*, oldLang */) {\n    //console.log('i18n-format: ' + this.id + '._langChanged() lang = ' + lang + ' oldLang = ' + oldLang);\n    if (this.elements &&\n        lang !== undefined &&\n        lang !== null &&\n        !lang.match(/^{{.*}}$/) &&\n        !lang.match(/^\\[\\[.*\\]\\]$/)) {\n      this.render();\n    }\n    //else {\n    //  console.log('i18n-format: skipping render()');\n    //}\n  },\n\n  /**\n   * Observer of `paramFormat` property to re-render the template text.\n   *\n   * @param {string} paramFormat New paramFormat.\n   * @param {string} oldParamFormat Old paramFormat.\n   */\n  _paramFormatChanged: function (paramFormat, oldParamFormat) {\n    //console.log('i18n-format: ' + this.id + '._paramFormatChanged() new = ' + paramFormat + ' old = ' + oldParamFormat);\n    if (this.elements &&\n        oldParamFormat !== undefined &&\n        paramFormat &&\n        this.lang !== undefined &&\n        this.lang !== null &&\n        !this.lang.match(/^{{.*}}$/) &&\n        !this.lang.match(/^\\[\\[.*\\]\\]$/)) {\n      this.lastTemplateText = undefined;\n      this.render();\n    }\n  },\n\n  /**\n   * Observer of `paramAttribute` property to reset parameter attributes.\n   *\n   * @param {string} paramAttribute New paramAttribute.\n   * @param {string} oldParamAttribute Old paramAttribute.\n   */\n  _paramAttributeChanged: function (paramAttribute, oldParamAttribute) {\n    //console.log('i18n-format: ' + this.id + '._paramAttributeChanged() new = ' + paramAttribute + ' old = ' + oldParamAttribute);\n    var n;\n    if (this.elements &&\n        oldParamAttribute !== undefined &&\n        paramAttribute &&\n        this.lang !== undefined &&\n        this.lang !== null &&\n        !this.lang.match(/^{{.*}}$/) &&\n        !this.lang.match(/^\\[\\[.*\\]\\]$/)) {\n      for (n = 1; n < this.elements.length; n++) {\n        this.elements[n].removeAttribute(oldParamAttribute);\n        if (!this.elements[n].hasAttribute(paramAttribute)) {\n          this.elements[n].setAttribute(paramAttribute, '' + n);\n        }\n      }\n      this.lastTemplateText = undefined;\n      this.render();\n    }\n  },\n\n  /**\n   * Detect the CLDR plural category of a number \n   * with [`make-plural` library](https://github.com/eemeli/make-plural.js).\n   *\n   * @param {number} n The number to get the plural category for.\n   * @return {string} Plural category of the number. \n   */\n  _getPluralCategory: function (n) {\n    var category = 'other';\n    var lang = this.lang || this.DEFAULT_LANG;\n    lang = lang.split(/[-_]/)[0];\n    if (window.plurals[lang]) {\n      category = window.plurals[lang](n);\n    }\n    else {\n      category = window.plurals.en(n);\n    }\n    //console.log('i18n-format: _getPluralCategory(' + n + ') = ' + category);\n    return category;\n  },\n\n  /**\n   * Select a template text by parameters.\n   *\n   * @return {string} Selected template text. \n   */\n  _selectTemplateText: function () {\n    var templateText = '';\n    if (!this.templateElement) {\n      return templateText;\n    }\n    else if (this.templateElement.tagName.toLowerCase() === 'json-data') {\n      var templateObject;\n      try {\n        templateObject = JSON.parse(this.templateTextNode.data);\n      }\n      catch (ex) {\n        if (this.templateTextNode.data) {\n          console.warn('i18n-format: parse error in json-data');\n        }\n        return templateText;\n      }\n      var n;\n      for (n = 1;\n           typeof templateObject === 'object' && n < this.elements.length;\n           n++) {\n        var param = this.elements[n];\n        if (param.tagName.toLowerCase() === 'i18n-number') {\n          // plural selector\n          var category = this._getPluralCategory(param.number);\n          if (typeof param.number === 'undefined' ||\n              typeof param.formatted === 'undefined') {\n            // i18n-number is not ready\n            //console.log('i18n-format: i18n-number is not ready');\n            templateObject = undefined;\n          }\n          else if (templateObject[param.rawNumber]) {\n            templateObject = templateObject[param.rawNumber];\n          }\n          else if (templateObject[category]) {\n            // plural category matched\n            templateObject = templateObject[category];\n          }\n          else if (templateObject.other) {\n            // other\n            templateObject = templateObject.other;\n          }\n          else {\n            // default\n            templateObject = '';\n            console.warn('i18n-format: cannot find a template');\n          }\n        }\n        else {\n          // string selector\n          if (templateObject[param.textContent]) {\n            // template found\n            templateObject = templateObject[param.textContent];\n          }\n          else if (templateObject.other) {\n            // other\n            templateObject = templateObject.other;\n          }\n          else {\n            // default\n            templateObject = '';\n            console.warn('i18n-format: cannot find a template');\n          }\n        }\n      }\n      if (typeof templateObject === 'string') {\n        templateText = templateObject;\n      }\n      else if (typeof templateObject === 'undefined') {\n        templateText = undefined;\n      }\n      else {\n        templateText = '';\n        console.warn('i18n-format: cannot find a template');\n      }\n    }\n    else {\n      templateText = this.templateTextNode.data;\n    }\n    return templateText;\n  },\n\n  /**\n   * Render the template text.\n   */\n  render: function () {\n    var templateText = this._selectTemplateText();\n    var tmpNode = document.createElement('span');\n    var paramPlaceholder;\n    var childNodes = [];\n    var i;\n    var shadowDomV1 = !!Polymer.Element;\n    var shadyDomV1 = !!window.ShadyDOM;\n\n    if (templateText === this.lastTemplateText) {\n      //console.log('i18n-format: skipping rendering as the templateText has not changed');\n      return;\n    }\n    else if (typeof templateText === 'undefined') {\n      return;\n    }\n    else {\n      this.lastTemplateText = templateText;\n      //console.log('i18n-format: ' + this.id + '.render() templateText = ' + templateText);\n    }\n\n    i = 1;\n    while (i < this.elements.length) {\n      paramPlaceholder = this.paramFormat.replace('n', i);\n      templateText = templateText.replace(paramPlaceholder, \n                      shadowDomV1 ? '<slot name=\"' + i + '\"></slot>' :\n                      '<content select=\"[' + this.paramAttribute + '=\\'' + i + '\\']\"></content>');\n      i++;\n    }\n    \n    tmpNode.innerHTML = templateText;\n\n    if (Polymer.Element) {\n      this.root.innerHTML = ''; // Polymer 2.x\n    }\n    else {\n      Polymer.dom(this.root).innerHTML = '';\n    }\n\n    // References of childNodes have to be copied for Shady DOM compatibility\n    for (i = 0; i < tmpNode.childNodes.length; i++) {\n      childNodes[i] = tmpNode.childNodes[i];\n    }\n\n    for (i = 0; i < childNodes.length; i++) {\n      // each node has to be appended via Polymer.dom()\n      Polymer.dom(this.root).appendChild(childNodes[i]);\n    }\n\n    if (shadyDomV1) {\n      ShadyDOM.flush();\n    }\n    this.fire('rendered');\n  }\n});\nPolymer({\n    is: 'iron-localstorage',\n\n    properties: {\n      /**\n       * localStorage item key\n       */\n      name: {\n        type: String,\n        value: ''\n      },\n      /**\n       * The data associated with this storage.\n       * If set to null item will be deleted.\n       * @type {*}\n       */\n      value: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * If true: do not convert value to JSON on save/load\n       */\n      useRaw: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Value will not be saved automatically if true. You'll have to do it manually with `save()`\n       */\n      autoSaveDisabled: {\n        type: Boolean,\n        value: false\n      },\n      /**\n       * Last error encountered while saving/loading items\n       */\n      errorMessage: {\n        type: String,\n        notify: true\n      },\n\n      /** True if value has been loaded */\n      _loaded: {\n        type: Boolean,\n        value: false\n      }\n    },\n\n    observers: [\n      '_debounceReload(name,useRaw)',\n      '_trySaveValue(autoSaveDisabled)',\n      '_trySaveValue(value.*)'\n    ],\n\n    ready: function() {\n      this._boundHandleStorage = this._handleStorage.bind(this);\n    },\n\n    attached: function() {\n      window.addEventListener('storage', this._boundHandleStorage);\n    },\n\n    detached: function() {\n      window.removeEventListener('storage', this._boundHandleStorage);\n    },\n\n    _handleStorage: function(ev) {\n      if (ev.key == this.name) {\n        this._load(true);\n      }\n    },\n\n    _trySaveValue: function() {\n      if (this._doNotSave) {\n        return;\n      }\n      if (this._loaded && !this.autoSaveDisabled) {\n        this.debounce('save', this.save);\n      }\n    },\n\n    _debounceReload: function() {\n      this.debounce('reload', this.reload);\n    },\n\n    /**\n     * Loads the value again. Use if you modify\n     * localStorage using DOM calls, and want to\n     * keep this element in sync.\n     */\n    reload: function() {\n      this._loaded = false;\n      this._load();\n    },\n\n    /**\n     * loads value from local storage\n     * @param {boolean=} externalChange true if loading changes from a different window\n     */\n    _load: function(externalChange) {\n      try {\n        var v = window.localStorage.getItem(this.name);\n      } catch (ex) {\n        this.errorMessage = ex.message;\n\n        this._error(\"Could not save to localStorage.  Try enabling cookies for this page.\", ex);\n      };\n\n      if (v === null) {\n        this._loaded = true;\n        this._doNotSave = true;  // guard for save watchers\n        this.value = null;\n        this._doNotSave = false;\n        this.fire('iron-localstorage-load-empty', { externalChange: externalChange});\n      } else {\n        if (!this.useRaw) {\n          try { // parse value as JSON\n            v = JSON.parse(v);\n          } catch(x) {\n            this.errorMessage = \"Could not parse local storage value\";\n            Polymer.Base._error(\"could not parse local storage value\", v);\n            v = null;\n          }\n        }\n        this._loaded = true;\n        this._doNotSave = true;\n        this.value = v;\n        this._doNotSave = false;\n        this.fire('iron-localstorage-load', { externalChange: externalChange});\n      }\n    },\n\n    /**\n     * Saves the value to localStorage. Call to save if autoSaveDisabled is set.\n     * If `value` is null or undefined, deletes localStorage.\n     */\n    save: function() {\n      var v = this.useRaw ? this.value : JSON.stringify(this.value);\n      try {\n        if (this.value === null || this.value === undefined) {\n          window.localStorage.removeItem(this.name);\n        } else {\n          window.localStorage.setItem(this.name, /** @type {string} */ (v));\n        }\n      }\n      catch(ex) {\n        // Happens in Safari incognito mode,\n        this.errorMessage = ex.message;\n        Polymer.Base._error(\"Could not save to localStorage. Incognito mode may be blocking this action\", ex);\n      }\n    }\n\n    /**\n     * Fired when value loads from localStorage.\n     *\n     * @event iron-localstorage-load\n     * @param {{externalChange:boolean}} detail -\n     *     externalChange: true if change occured in different window.\n     */\n\n    /**\n     * Fired when loaded value does not exist.\n     * Event handler can be used to initialize default value.\n     *\n     * @event iron-localstorage-load-empty\n     * @param {{externalChange:boolean}} detail -\n     *     externalChange: true if change occured in different window.\n     */\n  });\n(function(document) {\n  'use strict';\n\n  // html element of this document\n  var html = document.querySelector('html');\n  // app global default language\n  var defaultLang = html.hasAttribute('lang') ? html.getAttribute('lang') : '';\n\n  // imperative synchronous registration of the template for Polymer 2.x\n  var template = ((!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript)\n    .ownerDocument.querySelector('template#i18n-preference');\n  var domModule = document.createElement('dom-module');\n  var currentScript = (!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript;\n  var registerI18nPreference = function () {\n\n  currentScript.ownerDocument.querySelector('div#dom-module-placeholder').appendChild(domModule);\n  domModule.appendChild(template);\n  domModule.register('i18n-preference');\n\n  Polymer({\n    is: 'i18n-preference',\n\n    properties: {\n      /**\n       * Persistence of preference \n       */\n      persist: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_onPersistChange'\n      }\n    },\n\n    /**\n     * Ready callback to initialize this.lang\n     */\n    ready: function () {\n      if (this.persist) {\n        // delay this.lang update\n      }\n      else {\n        //this.$.storage.value = undefined;\n      }\n      this.isReady = true;\n    },\n\n    /**\n     * Attached callback to initialize html.lang and its observation\n     */\n    attached: function () {\n      this._observe();\n      if (this.persist) {\n        // delay html.lang update\n      }\n      else {\n        if (!html.hasAttribute('preferred')) {\n          html.setAttribute('lang', navigator.language || navigator.browserLanguage);\n        }\n      }\n    },\n\n    /**\n     * Detached callback to diconnect html.lang observation\n     */\n    detached: function () {\n      this._disconnect();\n    },\n\n    /**\n     * Initialize an empty localstorage\n     */\n    _onLoadEmptyStorage: function () {\n      if (this.isReady) {\n        if (this.persist) {\n          if (this.isInitialized) {\n            // store html.lang value\n            this.$.storage.value = html.getAttribute('lang');\n          }\n          else {\n            if (html.hasAttribute('preferred')) {\n              this.$.storage.value = html.getAttribute('lang');\n            }\n            else {\n              this.$.storage.value = navigator.language || navigator.browserLanguage;\n              if (html.getAttribute('lang') !== this.$.storage.value) {\n                html.setAttribute('lang', this.$.storage.value);\n              }\n            }\n            this.isInitialized = true;\n          }\n        }\n        else {\n          // leave the empty storage as it is\n        }\n      }\n    },\n\n\n    /**\n     * Handle the loaded storage value\n     */\n    _onLoadStorage: function () {\n      if (this.isReady) {\n        if (this.persist) {\n          // preferred attribute in html to put higher priority\n          // in the default html language than navigator.language\n          if (html.hasAttribute('preferred')) {\n            if (this.$.storage.value !== defaultLang) {\n              // overwrite the storage by the app default language\n              this.$.storage.value = defaultLang;\n            }\n          }\n          else {\n            // load the value from the storage\n            html.setAttribute('lang', this.$.storage.value);\n          }\n        }\n        else {\n          // empty the storage\n          this.$.storage.value = undefined;\n        }\n      }\n    },\n\n    /**\n     * Handle persist changes\n     *\n     * @param {Boolean} value new this.persist value\n     */\n    _onPersistChange: function (value) {\n      if (this.isReady) {\n        if (value) {\n          if (this.$.storage.value !== html.getAttribute('lang')) {\n            // save to the storage\n            this.$.storage.value = html.getAttribute('lang');\n          }\n        }\n        else {\n          // empty the storage\n          this.$.storage.value = undefined;\n        }\n      }\n    },\n\n    /**\n     * Handle storage value changes\n     *\n     * @param {Event} e value-changed event on the storage\n     */\n    _onStorageValueChange: function (e) {\n      var value = e.detail.value;\n      if (this.isReady) {\n        if (this.persist) {\n          if (value) {\n            if (value !== html.getAttribute('lang')) {\n              // save to the lang\n              html.setAttribute('lang', value);\n            }\n          }\n          else {\n            // update the storage\n            this.$.storage.value = html.getAttribute('lang');\n          }\n        }\n        else {\n          if (value) {\n            // empty the storage\n            this.$.storage.value = undefined;\n          }\n        }\n      }\n    },\n\n    /**\n     * Handle value changes on localstorage\n     *\n     * @param {MutationRecord[]} mutations Array of MutationRecords for html.lang\n     *\n     * Note: \n     *   - Bound to this element\n     */\n    _htmlLangMutationObserverCallback: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            if (this.$.storage.value !== mutation.target.getAttribute('lang')) {\n              this.$.storage.value = mutation.target.getAttribute('lang');\n            }\n          }\n          break;\n        default:\n          break;\n        }\n      }.bind(this));\n    },\n\n    /**\n     * Set up html.lang mutation observer\n     */\n    _observe: function () {\n      // observe html lang mutations\n      if (!this._htmlLangMutationObserver) {\n        this._htmlLangMutationObserverCallbackBindThis = \n          this._htmlLangMutationObserverCallback.bind(this);\n        this._htmlLangMutationObserver =\n          new MutationObserver(this._htmlLangMutationObserverCallbackBindThis);\n      }\n      this._htmlLangMutationObserver.observe(html, { attributes: true });\n    },\n\n    /**\n     * Disconnect html.lang mutation observer\n     */\n    _disconnect: function () {\n      if (this._htmlLangMutationObserver) {\n        this._htmlLangMutationObserver.disconnect();\n      }\n    }\n  });\n  }\n  if ((!window.HTMLImports || HTMLImports.hasNative)) {\n    registerI18nPreference();\n  }\n  else {\n    HTMLImports.whenReady(registerI18nPreference);\n  }\n})(document);\n(function () {\n  // shared data\n  var sharedData = {};\n\n  // imperative synchronous registration of the template for Polymer 2.x\n  var template = ((!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript)\n    .ownerDocument.querySelector('template#i18n-attr-repo');\n  var domModule = document.createElement('dom-module');\n  domModule.appendChild(template);\n  domModule.register('i18n-attr-repo');\n\n  Polymer({\n    is: 'i18n-attr-repo',\n\n    ready: function () {\n      this.data = sharedData;\n\n      var customAttributes = Polymer.dom(this).querySelector('template#custom');\n      // traverse custom attributes repository\n      if (customAttributes) {\n        this._traverseTemplateTree(customAttributes._content || customAttributes.content);\n      }\n\n      if (this.data.__ready__) {\n        return; // traverse standard attributes only once\n      }\n      this.data.__ready__ = true;\n      this._traverseTemplateTree(this.$.standard._content || this.$.standard.content);\n    },\n\n    /**\n     * Judge if a specific attribute of an element requires localization.\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {string} attr Target attribute name.\n     * @return {string or boolean} true - property, '$' - attribute, false - not targeted, 'type-name' - type name\n     */\n    isLocalizableAttribute: function (element, attr) {\n      var tagName = element.tagName.toLowerCase();\n      attr = attr.replace(/\\$$/, '');\n      if (this.data['any-elements'] &&\n          this.data['any-elements'][attr]) {\n        return this.data['any-elements'][attr];\n      }\n      else if (this.data[tagName]) {\n        return this.data[tagName]['any-attributes'] ||\n               this._getType(element, this.data[tagName][attr]);\n      }\n      else {\n        return false;\n      }\n    },\n\n    /**\n     * Get the type name or '$' for a specific attribute of an element from the attributes repository\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {object} value this.data[tagName][attr]\n     * @return {string or boolean} true - property, '$' - attribute, false - not targeted, 'type-name' - type name\n     */\n    _getType: function (element, value) {\n      var selector;\n      var result;\n      if (typeof value === 'object') {\n        for (selector in value) {\n          if (selector) {\n            if (this._matchAttribute(element, selector)) {\n              result = this._getType(element, value[selector]);\n              if (result) {\n                return result;\n              }\n            }\n          }\n        }\n        if (value['']) {\n          if (this._matchAttribute(element, '')) {\n            result = this._getType(element, value['']);\n            if (result) {\n              return result;\n            }\n          }\n        }\n        return false;\n      }\n      else {\n        return value;\n      }\n    },\n\n    /**\n     * Get the type name or '$' for a specific attribute of an element from the attributes repository\n     *\n     * Format for selectors:\n     *  - `attr=value` - Value of `attr` matches Regex `^value$`\n     *  - `!boolean-attr` - Boolean attribute does not exist\n     *  - `boolean-attr` - Boolean attribute exists with empty value\n     *  - empty string `''` - Always matches\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {string} selector Matching condition for target attribute.\n     * @return {boolean} true - matching, false - not matching\n     */\n    _matchAttribute: function (element, selector) {\n      var value;\n      var match;\n      // default ''\n      if (selector === '') {\n        return true;\n      }\n      // attr=value Regex ^value$\n      match = selector.match(/^([^!=]*)=(.*)$/);\n      if (match) {\n        if (element.hasAttribute(match[1])) {\n          value = element.getAttribute(match[1]);\n          return !!value.match(new RegExp('^' + match[2] + '$'));\n        }\n        else {\n          return false;\n        }\n      }\n      // !boolean-attr\n      match = selector.match(/^!([^!=]*)$/);\n      if (match) {\n        return !element.hasAttribute(match[1]);\n      }\n      // boolean-attr or empty-attr\n      match = selector.match(/^([^!=]*)$/);\n      if (match) {\n        if (element.hasAttribute(match[1])) {\n          value = element.getAttribute(match[1]);\n          return !value;\n        }\n        else {\n          return false;\n        }\n      }\n      // no matching\n      return false;\n    },\n\n    /**\n     * Comparator for attribute selectors\n     *\n     * @param {string} s1 selector 1\n     * @param {string} s2 selector 2\n     * @return {number} comparison result as -1, 0, or 1\n     */\n    _compareSelectors: function (s1, s2) {\n      var name1 = s1.replace(/^!/, '').replace(/=.*$/, '').toLowerCase();\n      var name2 = s2.replace(/^!/, '').replace(/=.*$/, '').toLowerCase();\n      return name1.localeCompare(name2);\n    },\n\n    /**\n     * Add a new localizable attribute of an element to the repository.\n     *\n     * Format for selector values for defining I18N-target attributes:\n     *   - `attr1=value1,attr2=value2,boolean-attr,!boolean-attr` - Attribute value matching condition for property\n     *   - `attr1=value1,attr2=value2,$` - Attribute value matching condition for attribute\n     *   - `boolean-attr=` - Boolean attribute condition\n     *   - `attr1=value1,type` - Attribute value condition with type name (type is currently ineffective)\n     *\n     * @param {string} element Target element name.\n     * @param {string} attr Target attribute name.\n     * @param {?*} value Selector value\n     */\n    setLocalizableAttribute: function (element, attr, value) {\n      this.data[element] = this.data[element] || {};\n      var cursor = this.data[element];\n      var prev = attr;\n      var type = true;\n      var selectors = [];\n\n      if (typeof value === 'string' && value) {\n        selectors = value.split(',');\n        if (selectors[selectors.length - 1].match(/^[^!=][^=]*$/)) {\n          type = selectors.pop();\n        }\n        selectors = selectors.map(function (selector) {\n          return selector.replace(/=$/, '');\n        });\n        selectors.sort(this._compareSelectors);\n        while (selectors[0] === '') {\n          selectors.shift();\n        }\n      }\n\n      selectors.forEach(function (selector, index) {\n        if (typeof cursor[prev] !== 'object') {\n          cursor[prev] = cursor[prev] ? { '': cursor[prev] } : {};\n        }\n        cursor[prev][selector] = cursor[prev][selector] || {};\n        cursor = cursor[prev];\n        prev = selector;\n      });\n\n      if (typeof cursor[prev] === 'object' &&\n          cursor[prev] &&\n          Object.keys(cursor[prev]).length) {\n        cursor = cursor[prev];\n        prev = '';\n      }\n      cursor[prev] = type;\n    },\n\n    /**\n     * Pick up localizable attributes description for a custom element \n     * from `text-attr` attribute and register them to the repository.\n     * The `text-attr` attribute is used in the template of a custom\n     * element to declare localizable attributes of its own element.\n     *\n     * Format:\n     *\n     *  Type 1: `<template text-attr=\"localizable-attr1 attr2\">`\n     *\n     *  Type 2: `<template text-attr localizable-attr1 attr2=\"value2\">`\n     *\n     * @param {string} element Target element name.\n     * @param {HTMLTemplateElement} template Template of the element.\n     */\n    registerLocalizableAttributes: function (element, template) {\n      if (!element) {\n        element = template.getAttribute('id');\n      }\n      if (element) {\n        var attrs = (template.getAttribute('text-attr') || '').split(' ');\n        var textAttr = false;\n        attrs.forEach(function (attr) {\n          if (attr) {\n            this.setLocalizableAttribute(element, attr, true);\n          }\n        }, this);\n        Array.prototype.forEach.call(template.attributes, function (attr) {\n          switch (attr.name) {\n          case 'id':\n          case 'lang':\n          case 'localizable-text':\n          case 'assetpath':\n            break;\n          case 'text-attr':\n            textAttr = true;\n            break;\n          default:\n            if (textAttr) {\n              this.setLocalizableAttribute(element, attr.name, attr.value);\n            }\n            break;\n          }\n        }.bind(this));\n      }\n    },\n\n    /**\n     * Traverse the template of `i18n-attr-repo` in the ready() callback\n     * and construct the localizable attributes repository object. The method calls itself\n     * recursively for traversal.\n     *\n     * @param {HTMLElement} node The target HTML node for traversing.\n     */    \n    _traverseTemplateTree: function (node) {\n      var name;\n      if (node.nodeType === node.ELEMENT_NODE) {\n        name = node.nodeName.toLowerCase();\n        Array.prototype.forEach.call(node.attributes, function (attribute) {\n          this.data[name] = this.data[name] || {};\n          this.setLocalizableAttribute(name, attribute.name, attribute.value);\n        }, this);\n      }\n      if (node.childNodes.length > 0) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          this._traverseTemplateTree(node.childNodes[i]);\n        }\n      }\n    }\n  });\n})();\n/*!\n * @license deepcopy.js Copyright(c) 2013 sasa+1\n * https://github.com/sasaplus1/deepcopy.js\n * Released under the MIT license.\n */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.deepcopy=e():t.deepcopy=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";t.exports=n(3)},function(t,e){\"use strict\";function n(t,e){if(\"[object Array]\"!==o.call(t))throw new TypeError(\"array must be an Array\");var n=void 0,r=void 0,u=void 0;for(n=0,r=t.length;r>n;++n)if(u=t[n],u===e||u!==u&&e!==e)return n;return-1}e.__esModule=!0;var o=Object.prototype.toString,r=\"undefined\"!=typeof Buffer?function(t){return Buffer.isBuffer(t)}:function(){return!1},u=\"function\"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=typeof t;if(null===t||\"function\"!==e&&\"object\"!==e)throw new TypeError(\"obj must be an Object\");var n=[],o=void 0;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);return n},i=\"function\"==typeof Symbol?function(t){return Object.getOwnPropertySymbols(t)}:function(){return[]};e.getKeys=u,e.getSymbols=i,e.indexOf=n,e.isBuffer=r},function(t,e,n){\"use strict\";function o(t,e){var n=u(t);return null!==n?n:r(t,e)}function r(t,e){if(\"function\"!=typeof e)throw new TypeError(\"customizer is must be a Function\");if(\"function\"==typeof t){var n=String(t);return/^\\s*function\\s*\\S*\\([^\\)]*\\)\\s*{\\s*\\[native code\\]\\s*}/.test(n)?t:new Function(\"return \"+String(n))()}var o=c.call(t);if(\"[object Array]\"===o)return[];if(\"[object Object]\"===o&&t.constructor===Object)return{};if(\"[object Date]\"===o)return new Date(t.getTime());if(\"[object RegExp]\"===o){var r=String(t),u=r.lastIndexOf(\"/\");return new RegExp(r.slice(1,u),r.slice(u+1))}if((0,i.isBuffer)(t)){var f=new Buffer(t.length);return t.copy(f),f}var l=e(t);return void 0!==l?l:null}function u(t){var e=typeof t;return null!==t&&\"object\"!==e&&\"function\"!==e?t:null}e.__esModule=!0,e.copyValue=e.copyCollection=e.copy=void 0;var i=n(1),c=Object.prototype.toString;e.copy=o,e.copyCollection=r,e.copyValue=u},function(t,e,n){\"use strict\";function o(t){}function r(t){var e=arguments.length<=1||void 0===arguments[1]?o:arguments[1];if(null===t)return null;var n=(0,i.copyValue)(t);if(null!==n)return n;var r=(0,i.copyCollection)(t,e),c=null!==r?r:t,f=[t],l=[c];return u(t,e,c,f,l)}function u(t,e,n,o,r){if(null===t)return null;var f=(0,i.copyValue)(t);if(null!==f)return f;var l=(0,c.getKeys)(t).concat((0,c.getSymbols)(t)),p=void 0,s=void 0,a=void 0,y=void 0,d=void 0,v=void 0,b=void 0,j=void 0;for(p=0,s=l.length;s>p;++p)a=l[p],y=t[a],d=(0,c.indexOf)(o,y),v=void 0,b=void 0,j=void 0,-1===d?(v=(0,i.copy)(y,e),b=null!==v?v:y,null!==y&&/^(?:function|object)$/.test(typeof y)&&(o.push(y),r.push(b))):j=r[d],n[a]=j||u(y,e,b,o,r);return n}e.__esModule=!0;var i=n(2),c=n(1);e[\"default\"]=r,t.exports=e[\"default\"]}])});\n/* jshint -W100 */\n(function(document) {\n  'use strict';\n\n  var html = document.querySelector('html');\n  if (window.ShadowDOMPolyfill) {\n    // Fix #38. Add reflectToAttribute effect on html.lang property\n    // for supplementing Shadow DOM MutationObserver polyfill\n    Object.defineProperty(html, 'lang', {\n      get: function () {\n        return this.getAttribute('lang');\n      },\n      set: function (value) {\n        this.setAttribute('lang', value);\n      }\n    });\n  }\n\n  // Safari 7 predefines non-configurable standard properties\n  // Note: They become configurable with ShadowDOMPolyfill, which wraps them.\n  var isStandardPropertyConfigurable = (function () {\n    var langPropertyDescriptor = Object.getOwnPropertyDescriptor(document.createElement('span'), 'lang');\n    return !langPropertyDescriptor || langPropertyDescriptor.configurable;\n  })();\n  // Polymer 1.4.0 on Safari 7 inserts extra unexpected whitepace node at the beginning of template\n  var extraWhiteSpaceNode = !isStandardPropertyConfigurable;\n  if (Polymer.Element) {\n    isStandardPropertyConfigurable = false;\n  }\n\n  // app global bundle storage\n  var bundles = { '': {} }; // with an empty default bundle\n  // app global default language\n  var defaultLang = html.hasAttribute('lang') ? html.getAttribute('lang') : '';\n  // shared fetching instances for bundles\n  var bundleFetchingInstances = {};\n\n  // path for start URL\n  var startUrl = (function () {\n    var path = window.location.pathname;\n    if (document.querySelector('meta[name=app-root]') &&\n        document.querySelector('meta[name=app-root]').getAttribute('content')) {\n      // <meta name=\"app-root\" content=\"/\"> to customize application root\n      path = document.querySelector('meta[name=app-root]').getAttribute('content');\n    }\n    else if (document.querySelector('link[rel=manifest]') &&\n             document.querySelector('link[rel=manifest]').getAttribute('href') &&\n             document.querySelector('link[rel=manifest]').getAttribute('href').match(/^\\//)) {\n      // assume manifest is located at the application root folder\n      path = document.querySelector('link[rel=manifest]').getAttribute('href');\n    }\n    return path.replace(/\\/[^\\/]*$/,'/');\n  })();\n\n  // path for locales from <html locales-path=\"locales\">\n  var localesPath = html.hasAttribute('locales-path') ? \n                      html.getAttribute('locales-path') : 'locales';\n\n  // Support ShadowDOM V1 on Polymer 2.x\n  var paramAttribute = Polymer.Element ? 'slot' : 'param';\n\n  var attributesRepository = ((!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript)\n    .ownerDocument.querySelector('i18n-attr-repo');\n\n  // set up userPreference\n  var userPreference = document.querySelector('i18n-preference');\n  if (!userPreference) {\n    userPreference = document.createElement('i18n-preference');\n    // append to body\n    document.querySelector('body').appendChild(userPreference);\n  }\n\n  // debug log when <html debug> attribute exists\n  var debuglog = html.hasAttribute('debug') ?\n    function (arg) {\n      console.log(arg);\n    } :\n    function () {};\n\n  window.BehaviorsStore = window.BehaviorsStore || {};\n  /**\n   * Apply `BehaviorsStore.I18nControllerBehavior` to manipulate internal variables for I18N\n   *\n   * Note: This behavior is not for normal custom elements to apply I18N. UI is not expected.\n   */\n  BehaviorsStore.I18nControllerBehavior = {\n    properties: {\n\n      /**\n       * Flag for detection of `I18nControllerBehavior`\n       *\n       * `true` if I18nControllerBehavior is applied\n       *\n       * Note: Module-specific JSON resources are NOT fetched for `I18nControllerBehavior`\n       */\n      isI18nController: {\n        type: Boolean,\n        value: true,\n        readOnly: true\n      },\n\n      /**\n       * HTML element object for the current document\n       */\n      html: {\n        type: Object,\n        value: html\n      },\n\n      /**\n       * Master bundles object for storing all the localized and default resources\n       */\n      masterBundles: {\n        type: Object,\n        value: bundles\n      },\n\n      /**\n       * Default lang for the document, i.e., the initial value of `<html lang>` attribute\n       */\n      defaultLang: {\n        type: String,\n        value: defaultLang,\n        readOnly: true\n      },\n\n      /**\n       * List of elements which are fetching bundles\n       */\n      bundleFetchingInstances: {\n        type: Object,\n        value: bundleFetchingInstances\n      },\n\n      /**\n       * Root URL path of the application ends with '/' to fetch bundles\n       */\n      startUrl: {\n        type: String,\n        value: startUrl,\n        readOnly: true\n      },\n\n      /**\n       * Path for locales\n       *\n       * Default value is `'locales'`\n       */\n      localesPath: {\n        type: String,\n        value: localesPath,\n        readOnly: true\n      },\n\n      /**\n       * <i18n-attr-repo> element to store attributes repository\n       */\n      attributesRepository: {\n        type: Object,\n        value: attributesRepository,\n        readOnly: true\n      },\n\n      /**\n       * <i18n-preference> element\n       */\n      userPreference: {\n        type: Object,\n        value: userPreference,\n        readOnly: true\n      }\n    }\n  };\n  /**\n   * Apply `BehaviorsStore.I18nBehavior` to implement localizable elements.\n   *\n   *     <dom-module id=\"custom-element\">\n   *       <template>\n   *         <span>Hard-coded UI texts are automatically made localizable</span>\n   *       </template>\n   *       <﻿﻿script﻿﻿>\n   *         Polymer({\n   *           is: 'custom-element',\n   *           behaviors: [ \n   *             BehaviorsStore.I18nBehavior  // Add this behavior\n   *           ]\n   *         });\n   *       <﻿﻿/script﻿﻿>\n   *     </dom-module>\n   *\n   * `I18nBehavior` automatically extracts UI texts from `template` and \n   * binds them to localizable variables in `this.text` object.\n   *\n   * According to the `lang` attribute value, `this.text`, and thus the bound UI texts,\n   * dynamically mutates by loading localized values from a JSON file in the `locales` directory.\n   * By default, `lang` attribute values of all the localizable elements with `I18nBehavior` are\n   * automatically updated according to `<html lang>` attribute value.\n   *\n   * The UI text externalization can be processed at build time as well by `gulp-*` task\n   * so that `I18nBehavior` can immediately recognize the extracted texts in JSON and \n   * skip run-time externalization.\n   *\n   * Run-time externalization is suitable for development and debugging \n   * since the code changes are immediately reflected at reloading without build-time preprocesses.\n   * In contrast, build-time externalization is suitable for production builds \n   * since it eliminates run-time externalization overheads.\n   * \n   * ### Steps to localize a custom element\n   *\n   * 1. [JavaScript] Add `BehaviorsStore.I18nBehavior` to `behaviors`\n   * 1. [gulp] Add `gulp-*` filter for `custom-element.html` and generate `custom-element.json`\n   * 1. [locales] Put `custom-element.lang.json` in `locales` directory\n   * 1. [translation] Translate `locales/custom-element.lang.json`\n   *\n   * - - -\n   *\n   * ### Directory structure of bundle files\n   *\n   * Normal bundles (`/element-root/locales/element-name.*.json`) for elements\n   * are stored under their root directories.\n   *\n   * Shared bundles (`/locales/bundle.*.json`) are generated at build time \n   * by merging all the targeted bundles of the localizable elements. \n   *\n   * Once the shared bundles are loaded, there should be no need to search for \n   * normal bundles per element unless the element is intentionally excluded \n   * from the shared bundles.\n   *\n   * ```\n   *      /bundle.json \n   *      /locales/bundle.ja.json\n   *              /bundle.fr.json\n   *              /bundle.zh-Hans.json\n   *\n   *      /elements/my-list/my-list.json\n   *                       /locales/my-list.ja.json\n   *                               /my-list.zh-Hans.json\n   *\n   *               /google-chart-demo/google-chart-demo.json\n   *                                 /locales/google-chart-demo.ja.json\n   *                                         /google-chart-demo.fr.json\n   * ```\n   *\n   * - - -\n   *\n   * ### Localizable `<template is=\"i18n-dom-bind\" id=\"app\">` element\n   *\n   * `<template is=\"i18n-dom-bind\">` template element extends \n   * `<template is=\"dom-bind\">` template element with all the capabilities of \n   * `I18nBehavior`.  \n   *\n   * The `id` attribute value is used for naming bundle files instead of the element name.\n   * \n   * The bundle files are stored at the locales directory under the application root. \n   *\n   * ```\n   *      /app.json\n   *      /locales/app.ja.json\n   *              /app.fr.json\n   *              /app.zh-Hans.json\n   * ```\n   *\n   * - - -\n   *\n   * ### TODOs\n   *\n   * - Support user locale preference per user\n   *\n   * @polymerBehavior BehaviorsStore.I18nBehavior\n   * @group I18nBehavior\n   * @hero hero.svg\n   * @demo demo/index.html\n   */\n  BehaviorsStore.I18nBehavior = {\n\n    /**\n     * Fired when the text message bundle object (`this.text`) is updated after `this.lang` is changed.\n     *\n     * @event lang-updated\n     */\n\n    /**\n     * Fired when a shared bundle is fetched.\n     *\n     * @event bundle-fetched\n     */\n\n    properties: {\n      /**\n       * The locale of the element.\n       * The default value is copied from `<html lang>` attribute of the current page.\n       * If `<html lang>` is not specified, `''` is set to use the template default language.\n       *\n       * The value is synchronized with `<html lang>` attribute of the current page by default.\n       *\n       * ### Note:\n       *  - The value may not reflect the current UI locale until the localized texts are loaded.\n       */\n      lang: {\n        type: String,\n        value: defaultLang,\n        reflectToAttribute: true,\n        observer: '_langChanged'\n      },\n\n      /**\n       * Text message bundle object for the current locale.\n       * The object is shared among all the instances of the same element.\n       * The value is updated when `lang-updated` event is fired.\n       */\n      text: {\n        type: Object,\n        computed: '_getBundle(lang)'\n      },\n\n      /**\n       * Data model bundle object for the current locale.\n       * The data are bound to localizable attribute values in the element template.\n       * The object is cloned from `this.text.model` per instance.\n       * The value is NOT automatically updated in sync with `this.text`.\n       * \n       * How to manually update the model object when `lang-updated` event is fired:\n       * ```\n       *     this.model = deepcopy(this.text.model);\n       * ```\n       */\n      model: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * The locale of the hard-coded texts in the element's template.\n       * The read-only value can be specified by the `lang` attribute of the element's `template`.\n       * The default value is 'en' if not specified in the `template` element.\n       *\n       * ```\n       *  <dom-module id=\"custom-element\">\n       *    <template lang=\"en\">\n       *      <span>Hard-coded text in English</span>\n       *    </template>\n       *  <dom-module>\n       * ```\n       */\n      templateDefaultLang: {\n        type: String,\n        value: 'en'\n      },\n\n      /**\n       * The effective locale of the element.\n       * The value is updated when the localized texts are loaded and `lang-updated` event is fired.\n       */\n      effectiveLang: {\n        type: String\n      },\n\n      /**\n       * Boolean flag to synchronize with the value of  `<html lang>` attribute.\n       */\n      observeHtmlLang: {\n        type: Boolean,\n        value: true,\n        observer: '_observeHtmlLangChanged'\n      }\n    },\n\n    listeners: {\n      'lang-updated': '_updateEffectiveLang'\n    },\n\n    /* \n       bundles = \n       {\n        \"\": {},\n        \"en\": {\n          \"my-list\": {\n            \"p_2\": \"You now have:\",\n            \"model\": {\n              \"list\": {\n                \"items\": [\n                  \"item 1\", \"item 2\"\n                ]\n              }\n            }\n          },\n          \"google-chart-demo\": {\n            \"simple-chart-desc\": [\n              \"template {1} string\", \"param 1\"\n            ]\n            \"model\": {\n              \"simple-chart\": {\n                \"options\": { \"title\": \"Simple Chart\" },\n                \"rows\": []\n              }\n            }\n          }\n        },\n        \"ja\": {\n          \"my-list\": {},\n          \"google-chart-demo\": {}\n        }\n      }\n\n      bundles[lang]\n      /bundle.json - fallback\n      /locales/bundle.en.json\n              /bundle.ja.json\n              /bundle.fr.json\n              /bundle.zh-Hans.json\n\n      bundles[lang][is]\n      /elements/my-list/my-list.json - fallback\n                       /locales/my-list.en.json\n                               /my-list.ja.json\n                               /my-list.zh-Hans.json\n\n               /google-chart-demo/google-chart-demo.json - fallback\n                                 /locales/google-chart-demo.en.json\n                                         /google-chart-demo.ja.json\n                                         /google-chart-demo.zh-Hans.json\n\n      app/elements/my-list/my-list.json\n                          /locales/my-list.fr.json\n                                  /my-list.ja.json\n                                  /my-list.zh-Hans.json\n\n      dist/elements/my-list/my-list.json\n                           /locales/my-list.fr.json\n                                   /my-list.ja.json\n                                   /my-list.zh-Hans.json\n\n    */\n\n\n    /**\n     * The backend logic for `this.text` object.\n     *\n     * @param {string} lang Locale for the text message bundle.\n     * @return {Object} Text message bundle for the locale.\n     */\n    _getBundle: function (lang) {\n      //console.log('_getBundle called for ' + this.is + ' with lang = ' + lang);\n\n      var resolved;\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n\n      if (lang && lang.length > 0) {\n        var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n        var tryLang;\n        while ((tryLang = fallbackLanguageList.shift())) {\n          if (!bundles[tryLang]) {\n            // set up an empty bundle for the language if missing\n            bundles[tryLang] = {};\n          }\n          if (bundles[tryLang][id]) {\n            // bundle found\n            resolved = bundles[tryLang][id];\n            break;\n          }\n        }\n      }\n      else {\n        // lang is not specified\n        lang = '';\n        resolved = bundles[lang][id];\n      }\n\n      // Fallback priorities: last > app default > element default > fallback > {}\n      // TODO: need more research on fallback priorities\n      if (!resolved) { \n        if (this._fetchStatus && bundles[this._fetchStatus.lastLang] && bundles[this._fetchStatus.lastLang][id]) {\n          // old bundle for now (no changes should be shown)\n          resolved = bundles[this._fetchStatus.lastLang][id]; \n        }\n        else if (defaultLang && defaultLang.length > 0 &&\n                 bundles[defaultLang] && bundles[defaultLang][id]) {\n          // app default language for now\n          resolved = bundles[defaultLang][id]; \n        }\n        else if (this.templateDefaultLang && this.templateDefaultLang.length > 0 &&\n                 bundles[this.templateDefaultLang] && bundles[this.templateDefaultLang][id]) {\n          // element default language for now\n          resolved = bundles[this.templateDefaultLang][id]; \n        }\n        /* no more fallback should happen */\n        /* istanbul ignore else */\n        else if (bundles[''][id]) {\n          // fallback language for now (this should be the same as element default)\n          resolved = bundles[''][id];\n        }\n        else {\n          // give up providing a bundle (this should not happen)\n          resolved = {};\n        }\n      }\n\n      return resolved;\n    },\n\n    /**\n     * Enumerate fallback locales for the target locale.\n     * \n     * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n     *\n     * ### Examples:\n     *\n     *| Target Locale | Fallback 1 | Fallback 2 | Fallback 3 |\n     *|:--------------|:-----------|:-----------|:-----------|\n     *| ru            | N/A        | N/A        | N/A        |\n     *| en-GB         | en         | N/A        | N/A        |\n     *| en-Latn-GB    | en-GB      | en-Latn    | en         |\n     *| fr-CA         | fr         | N/A        | N/A        |\n     *| zh-Hans-CN    | zh-Hans    | zh         | N/A        |\n     *| zh-CN         | zh-Hans    | zh         | N/A        |\n     *| zh-TW         | zh-Hant    | zh         | N/A        |\n     *\n     * #### Note:\n     *\n     * For zh language, the script Hans or Hant is supplied as its default script when a country/region code is supplied.\n     *\n     * @param {string} lang Target locale.\n     * @return {Array} List of fallback locales including the target locale at the index 0.\n     */\n    _enumerateFallbackLanguages: function (lang) {\n      var result = [];\n      var parts;\n      var match;\n      var isExtLangCode = 0;\n      var extLangCode;\n      var isScriptCode = 0;\n      var scriptCode;\n      var isCountryCode = 0;\n      var countryCode;\n      var n;\n      if (!lang || lang.length === 0) {\n        result.push('');\n      }\n      else {\n        parts = lang.split(/[-_]/);\n        // normalize ISO-639-1 language codes\n        if (parts.length > 0 &&\n            parts[0].match(/^[A-Za-z]{2,3}$/)) {\n          // language codes have to be lowercased\n          // e.g. JA -> ja, FR -> fr\n          // TODO: normalize 3-letter codes to 2-letter codes\n          parts[0] = parts[0].toLowerCase();\n        }\n        // normalize ISO-639-3 extension language codes\n        if (parts.length >= 2 &&\n            parts[1].match(/^[A-Za-z]{3}$/) &&\n            !parts[1].match(/^[Cc][Hh][SsTt]$/)) { // exclude CHS,CHT\n          // extension language codes have to be lowercased\n          // e.g. YUE -> yue\n          isExtLangCode = 1;\n          extLangCode = parts[1] = parts[1].toLowerCase();\n        }\n        // normalize ISO-15924 script codes\n        if (parts.length >= isExtLangCode + 2 &&\n            (match = parts[isExtLangCode + 1].match(/^([A-Za-z])([A-Za-z]{3})$/))) {\n          // script codes have to be capitalized only at the first character\n          // e.g. HANs -> Hans, lAtN -> Latn\n          isScriptCode = 1;\n          scriptCode = parts[isExtLangCode + 1] = match[1].toUpperCase() + match[2].toLowerCase();\n        }\n        // normalize ISO-3166-1 country/region codes\n        if (parts.length >= isExtLangCode + isScriptCode + 2 &&\n            (match = parts[isExtLangCode + isScriptCode + 1].match(/^[A-Za-z0-9]{2,3}$/))) {\n          // country/region codes have to be capitalized\n          // e.g. cn -> CN, jP -> JP\n          isCountryCode = 1;\n          countryCode = parts[isExtLangCode + isScriptCode + 1] = match[0].toUpperCase();\n        }\n        // extensions have to be in lowercases\n        // e.g. U-cA-Buddhist -> u-ca-buddhist, X-LiNux -> x-linux\n        if (parts.length >= isExtLangCode + isScriptCode + isCountryCode + 2) {\n          for (n = isExtLangCode + isScriptCode + isCountryCode + 1; n < parts.length; n++) {\n            parts[n] = parts[n].toLowerCase();\n          }\n        }\n        // enumerate fallback languages\n        while (parts.length > 0) {\n          // normalize delimiters as -\n          // e.g. ja_JP -> ja-JP\n          result.push(parts.join('-'));\n          if (isScriptCode &&\n              isCountryCode &&\n              parts.length == isExtLangCode + isScriptCode + 2) {\n            // script code can be omitted to default\n            // e.g. en-Latn-GB -> en-GB, zh-Hans-CN -> zh-CN\n            parts.splice(isExtLangCode + isScriptCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode + isScriptCode, 0, scriptCode);\n          }\n          if (isExtLangCode &&\n              isCountryCode &&\n              parts.length == isExtLangCode + isScriptCode + 2) {\n            // ext lang code can be omitted to default\n            // e.g. zh-yue-Hans-CN -> zh-Hans-CN\n            parts.splice(isExtLangCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode, 0, extLangCode);\n          }\n          if (isExtLangCode &&\n              isScriptCode &&\n              parts.length == isExtLangCode + isScriptCode + 1) {\n            // ext lang code can be omitted to default\n            // e.g. zh-yue-Hans -> zh-Hans\n            parts.splice(isExtLangCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode, 0, extLangCode);\n          }\n          if (!isScriptCode &&\n              !isExtLangCode &&\n              isCountryCode &&\n              parts.length == 2) {\n            // default script code can be added in certain cases with country codes\n            // e.g. zh-CN -> zh-Hans-CN, zh-TW -> zh-Hant-TW\n            switch (result[result.length - 1]) {\n            case 'zh-CN':\n            case 'zh-CHS':\n              result.push('zh-Hans');\n              break;\n            case 'zh-TW':\n            case 'zh-SG':\n            case 'zh-HK':\n            case 'zh-CHT':\n              result.push('zh-Hant');\n              break;\n            default:\n              break;\n            }\n          }\n          parts.pop();\n        }\n      }\n      return result;\n    },\n\n    /**\n     * Get the next fallback locale for the target locale.\n     * \n     * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n     *\n     * ### Examples:\n     *\n     *| Target Locale | Next Fallback |\n     *|:--------------|:--------------|\n     *| ru            | null          |\n     *| en-GB         | en            |\n     *| fr-CA         | fr            |\n     *| zh-Hans-CN    | zh-Hans       |\n     *\n     * @param {string} lang Target locale.\n     * @return {string} Next fallback locale. `null` if there are no fallback languages.\n     */\n    /*\n    _getNextFallbackLanguage: function (lang) {\n      var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n      fallbackLanguageList.shift();\n      var nextFallbackLanguage = fallbackLanguageList.shift();\n      return nextFallbackLanguage ? nextFallbackLanguage : null;\n    },\n    */\n\n    /**\n     * MutationObserver callback of `lang` attribute for Safari 7\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _handleLangAttributeChange: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            //console.log('_handleLangAttributeChange lang = ' + this.lang + ' oldValue = ' + mutation.oldValue +\n            //            ' typeof oldValue = ' + typeof mutation.oldValue);\n            if (!(typeof mutation.oldValue === 'object' && !mutation.oldValue) &&\n                mutation.oldValue !== this.lang) {\n              if (this._lang !== mutation.oldValue) {\n                //console.log('assigning this._lang = ' + mutation.oldValue + ' from old value');\n                this._lang = mutation.oldValue;\n              }\n              //console.log('assigning this._lang = ' + this.lang);\n              this._lang = this.lang;\n            }\n            else if (mutation.oldValue != this.lang && this._lang !== this.lang) {\n              //console.log('assigning this._lang = ' + this.lang);\n              this._lang = this.lang;\n            }\n          }\n          break;\n        default:\n          /* istanbul ignore next: mutation.type is always attributes */\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Observer of `this.lang` changes.\n     *\n     * Update `this.text` object if the text message bundle of the new `lang` is locally available.\n     *\n     * Trigger fetching of the text message bundle of the new `lang` if the bundle is not locally available.\n     *\n     * @param {string} lang New value of `lang`.\n     * @param {string} oldLang Old value of `lang`.\n     */\n    _langChanged: function (lang, oldLang) {\n      //console.log(this.id + ':_langChanged lang = ' + lang + ' oldLang = ' + oldLang);\n      var id = (this.is || this.getAttribute('is')) === 'i18n-dom-bind' ? this.id : this.is;\n      lang = lang || ''; // undefined and null are treated as default ''\n      oldLang = oldLang || '';\n      if (lang !== oldLang &&\n          bundles[oldLang] && bundles[oldLang][id]) {\n        this._fetchStatus.lastLang = oldLang;\n      }\n      if (bundles[lang] && bundles[lang][id]) {\n        // bundle available for the new language\n        if (this._fetchStatus && lang !== this._fetchStatus.ajaxLang) {\n          // reset error status\n          this._fetchStatus.error = null;\n        }\n        this.notifyPath('text', this._getBundle(this.lang));\n        this.fire('lang-updated', { \n          lang: this.lang, \n          oldLang: oldLang, \n          lastLang: this._fetchStatus.lastLang \n        });\n      }\n      else {\n        // fetch the missing bundle\n        this._fetchLanguage(lang);\n      }\n    },\n\n    /**\n     * Called on `lang-updated` events and update `this.effectiveLang` with the value of `this.lang`.\n     */\n    _updateEffectiveLang: function (event) {\n      if (Polymer.dom(event).rootTarget === this) {\n        //console.log('_updateEffectiveLang: lang = ' + this.lang);\n        this.effectiveLang = this.lang;\n      }\n    },\n\n    /**\n     * Trigger fetching of the appropriate text message bundle of the target locale.\n     *\n     * ### Two Layers of Fallbacks:\n     *\n     * 1. Missing bundles fall back to those of their fallback locales.\n     * 1. Missing texts in the non-default bundles fall back to those in the default bundle. \n     *\n     * ### Fallback Examples:\n     *\n     *| Locale      | Bundle Status                    |\n     *|:------------|:---------------------------------|\n     *| fr-CA       | existent with sparse texts       |\n     *| fr          | existent with full texts         |\n     *| ja          | existent with some missing texts |\n     *| zh-Hans-CN  | missing                          |\n     *| zh-Hans     | existent with some missing texts |\n     *| zh          | missing                          |\n     *| en          | existent with full texts         |\n     *| ''(default) | existent with full texts         |\n     *\n     *| Target      | Fallback bundle       | Resolved locale |\n     *|:------------|:----------------------|:----------------|\n     *| en          | en                    | en              |\n     *| ja          | ja + ''(default)      | ja              |\n     *| fr-CA       | fr-CA + fr            | fr-CA           |\n     *| zh-Hans-CN  | zh-Hans + ''(default) | zh-Hans         |\n     *\n     * @param {string} lang Target locale.\n     */\n    _fetchLanguage: function (lang) {\n      if (this._fetchStatus) {\n        this._fetchStatus.fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n        this._fetchStatus.fallbackLanguageList.push('');\n        this._fetchStatus.targetLang = this._fetchStatus.fallbackLanguageList.shift();\n        this._fetchBundle(this._fetchStatus.targetLang);\n      }\n    },\n\n    /**\n     * Fetch the text message bundle of the target locale \n     * cooperatively with other instances.\n     *\n     * @param {string} lang Target locale.\n     */\n    _fetchBundle: function (lang) {\n      //console.log('_fetchBundle lang = ' + lang);\n      if (!lang || lang.length === 0) {\n        // handle empty cases\n        if (defaultLang && defaultLang.length > 0) {\n          lang = defaultLang; // app default language\n        }\n        else if (this.templateDefaultLang && this.templateDefaultLang.length > 0) {\n          lang = this.templateDefaultLang; // element default language\n        }\n        else {\n          lang = ''; // fallback default language\n        }\n      }\n\n      // set up an empty bundle if inexistent\n      bundles[lang] = bundles[lang] || {};\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n\n      if (bundles[lang][id]) {\n        // bundle is available; no need to fetch\n        if (this._fetchStatus.targetLang === lang) {\n          // reset error status\n          this._fetchStatus.error = null;\n          if (this.lang === lang) {\n            this.notifyPath('text', this._getBundle(this.lang));\n            this.fire('lang-updated', { \n              lang: this.lang, \n              lastLang: this._fetchStatus.lastLang\n            });\n          }\n          else {\n            this.lang = lang; // trigger lang-updated event\n          }\n        }\n        else {\n          var nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n          // bundle is available; no need to fetch\n          this._fetchStatus.fetchingInstance = null;\n          if (nextFallbackLanguage) {\n            this._fetchBundle(nextFallbackLanguage);\n          }\n          else {\n            this._constructBundle(this._fetchStatus.targetLang);\n            // reset error status\n            this._fetchStatus.error = null;\n            if (this.lang === this._fetchStatus.targetLang) {\n              this.notifyPath('text', this._getBundle(this.lang));\n              this.fire('lang-updated', { \n                lang: this.lang,\n                lastLang: this._fetchStatus.lastLang\n              });\n            }\n            else {\n              this.lang = this._fetchStatus.targetLang; // trigger lang-updated event\n            }\n          }\n        }\n      }\n      else if (this._fetchStatus.fetchingInstance) {\n        if (this._fetchStatus.fetchingInstance !== this) {\n          // fetching in progress by another instance\n          // TODO: redundant addEventListener multiple times\n          this._forwardLangEventBindThis = this._forwardLangEventBindThis ||\n                                            this._forwardLangEvent.bind(this);\n          this._fetchStatus.fetchingInstance\n              .addEventListener('lang-updated', this._forwardLangEventBindThis);\n        }\n      }\n      else if (bundleFetchingInstances[lang]) {\n        // fetching bundle.lang.json in progress by an instance of another element\n        this._fetchStatus.fetchingInstance = this;\n        this._fetchStatus.ajaxLang = lang;\n        this._handleBundleFetchedBindThis = this._handleBundleFetchedBindThis ||\n                                            this._handleBundleFetched.bind(this);\n        bundleFetchingInstances[lang]\n          .addEventListener('bundle-fetched', this._handleBundleFetchedBindThis);\n        //console.log(this.is + ' addEventListener bundle-fetched');\n      }\n      else {\n        // proceed to fetch\n        this._fetchStatus.fetchingInstance = this;\n        if (!this._fetchStatus.ajax) {\n          // set up ajax client\n          this._fetchStatus.ajax = Polymer.Base.create('iron-ajax');\n          this._fetchStatus.ajax.handleAs = 'json';\n          this._fetchStatus._handleResponseBindFetchingInstance = this._handleResponse.bind(this);\n          this._fetchStatus._handleErrorBindFetchingInstance = this._handleError.bind(this);\n          this._fetchStatus.ajax.addEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          this._fetchStatus.ajax.addEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n        }\n        else {\n          if (this._fetchStatus._handleResponseBindFetchingInstance) {\n            this._fetchStatus.ajax.removeEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          }\n          if (this._fetchStatus._handleErrorBindFetchingInstance) {\n            this._fetchStatus.ajax.removeEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n          }\n          this._fetchStatus._handleResponseBindFetchingInstance = this._handleResponse.bind(this);\n          this._fetchStatus._handleErrorBindFetchingInstance = this._handleError.bind(this);\n          this._fetchStatus.ajax.addEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          this._fetchStatus.ajax.addEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n        }\n        // TODO: app global bundles have to be handled\n        var url;\n        var skipFetching = false;\n\n        if (lang === '') {\n          url = this.resolveUrl(id + '.json');\n        }\n        else {\n          if (bundles[lang] && bundles[lang].bundle) {\n            // missing in the bundle\n            url = this.resolveUrl(localesPath + '/' + id + '.' + lang + '.json');\n            skipFetching = !!this.isI18nController;\n          }\n          else {\n            // fetch the bundle\n            bundleFetchingInstances[lang] = this;\n            url = this.resolveUrl(startUrl + localesPath + '/bundle.' + lang + '.json');\n          }\n        }\n        this._fetchStatus.ajax.url = url;\n        this._fetchStatus.ajaxLang = lang;\n        try {\n          this._fetchStatus.error = null;\n          if (skipFetching) {\n            this._handleError({ detail: { error: 'skip fetching for I18nController' }});\n          }\n          else {\n            this._fetchStatus.ajax.generateRequest();\n          }\n        }\n        catch (e) {\n          // TODO: extract error message from the exception e\n          this._handleError({ detail: { error: 'ajax request failed: ' + e }});\n        }\n      }\n    },\n\n    /**\n     * Handle Ajax success response for a bundle.\n     *\n     * @param {Object} event `iron-ajax` success event.\n     */\n    _handleResponse: function (event) {\n      //console.log('_handleResponse ajaxLang = ' + this._fetchStatus.ajaxLang);\n      if (this._fetchStatus.ajax.url.indexOf('/' + localesPath + '/bundle.') >= 0) {\n        bundles[this._fetchStatus.ajaxLang] = bundles[this._fetchStatus.ajaxLang] || {};\n        this._deepMap(bundles[this._fetchStatus.ajaxLang],\n                      event.detail.response,\n                      function (text) { return text; });\n        bundles[this._fetchStatus.ajaxLang].bundle = true;\n        bundleFetchingInstances[this._fetchStatus.ajaxLang] = null;\n        //console.log('bundle-fetched ' + this.is + ' ' + this._fetchStatus.ajaxLang);\n        this.fire('bundle-fetched', { success: true, lang: this._fetchStatus.ajaxLang });\n        var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n        if (bundles[this._fetchStatus.ajaxLang][id]) {\n          this._fetchStatus.lastResponse = bundles[this._fetchStatus.ajaxLang][id];\n        }\n        else {\n          // bundle does not contain text for this.is\n          this._fetchStatus.fetchingInstance = null;\n          this._fetchBundle(this._fetchStatus.ajaxLang);\n          return;\n        }\n      }\n      else {\n        this._fetchStatus.lastResponse = event.detail.response;\n      }\n      if (this._fetchStatus.lastResponse) {\n        var nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n        // store the raw response\n        this._fetchStatus.rawResponses[this._fetchStatus.ajaxLang] = \n          this._fetchStatus.lastResponse;\n\n        this._fetchStatus.fetchingInstance = null;\n        if (nextFallbackLanguage) {\n          this._fetchBundle(nextFallbackLanguage);        \n        }\n        else {\n          this._fetchBundle('');\n        }\n      }\n      else {\n        event.detail.error = 'empty response for ' + this._fetchStatus.ajax.url;\n        this._handleError(event);\n      }\n    },\n\n    /**\n     * Handle Ajax error response for a bundle.\n     *\n     * @param {Object} event `iron-ajax` error event.\n     */\n    _handleError: function (event) {\n      var nextFallbackLanguage;\n      this._fetchStatus.fetchingInstance = null;\n      if (this._fetchStatus.ajax.url.indexOf('/' + localesPath + '/bundle.') >= 0) {\n        bundles[this._fetchStatus.ajaxLang] = bundles[this._fetchStatus.ajaxLang] || {};\n        bundles[this._fetchStatus.ajaxLang].bundle = true;\n        bundleFetchingInstances[this._fetchStatus.ajaxLang] = null;\n        // falls back to its element-specific bundle\n        this._fetchBundle(this._fetchStatus.ajaxLang);\n        //console.log('bundle-fetched ' + this.is + ' ' + this._fetchStatus.ajaxLang);\n        this.fire('bundle-fetched', { success: false, lang: this._fetchStatus.ajaxLang });\n        return;\n      }\n      nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n      if (this._fetchStatus.ajaxLang === this._fetchStatus.targetLang) {\n        if (nextFallbackLanguage) {\n          //console.log(this.is + ': ' + this._fetchStatus.ajaxLang +\n          //            ' falls back to ' + nextFallbackLanguage);\n          this._fetchStatus.targetLang = nextFallbackLanguage;\n          this._fetchBundle(nextFallbackLanguage);\n        }\n        else {\n          this._fetchStatus.error = event.detail.error;\n          //console.log(this._fetchStatus.error);\n          // falls back to default\n          this.lang = '';\n        }\n      }\n      else {\n        // fetching dependent fallback languages\n        if (nextFallbackLanguage) {\n          //console.log(this.is + ': ' + this._fetchStatus.ajaxLang +\n          //            ' is missing and skipped');\n          //console.log(this.is + ': step to the next dependent fallback ' +\n          //            nextFallbackLanguage);\n          this._fetchBundle(nextFallbackLanguage);\n        }\n        else {\n          this._fetchBundle('');\n        }\n      }\n    },\n\n    /**\n     * Forward `lang-updated` event to other instances of the same element.\n     *\n     * @param {Object} event `lang-updated` event object.\n     */\n    _forwardLangEvent: function (event) {\n      //console.log('_forwardLangEvent ' + this.is + ' ' + event.detail.lang);\n      event.target.removeEventListener(event.type, this._forwardLangEventBindThis);\n      if (this.lang === event.detail.lang) {\n        this.notifyPath('text', this._getBundle(this.lang));\n        this.fire(event.type, event.detail);\n      }\n      else {\n        this.lang = event.detail.lang;\n        this.notifyPath('text', this._getBundle(this.lang));\n      }\n    },\n\n    /**\n     * Handle `bundle-fetched` event.\n     *\n     * @param {Object} event `bundle-fetched` event object.\n     */\n    _handleBundleFetched: function (event) {\n      var detail = event.detail;\n      //console.log('_handleBundleFetched ' + this.is + ' ' + detail.lang);\n      event.target.removeEventListener(event.type, this._handleBundleFetchedBindThis);\n      if (this._fetchStatus.ajaxLang === detail.lang) {\n        this._fetchStatus.fetchingInstance = null;\n        this._fetchBundle(this._fetchStatus.ajaxLang);\n      }\n    },\n\n    /**\n     * Handle changes of `observeHtmlLang` property.\n     *\n     * @param {Boolean} value Value of `observeHtmlLang`\n     */\n    _observeHtmlLangChanged: function (value) {\n      if (value) {\n        this._htmlLangObserver = this._htmlLangObserver || \n          new MutationObserver(this._handleHtmlLangChange.bind(this));\n        this._htmlLangObserver.observe(html, { attributes: true });\n      }\n      else {\n        if (this._htmlLangObserver) {\n          this._htmlLangObserver.disconnect();\n        }\n      }\n    },\n\n    /**\n     * MutationObserver callback of `<html lang>` attribute.\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _handleHtmlLangChange: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            this.lang = html.lang;\n          }\n          break;\n        default:\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Construct the text message bundle of the target locale with fallback of missing texts.\n     *\n     * @param {strings} lang Target locale.\n     */\n    _constructBundle: function (lang) {\n      var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n      var bundle = {};\n      var raw;\n      var baseLang;\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n      var i;\n      fallbackLanguageList.push('');\n      for (i = 0; i < fallbackLanguageList.length; i++) {\n        if (bundles[fallbackLanguageList[i]] &&\n            bundles[fallbackLanguageList[i]][id]) {\n          break;\n        }\n      }\n      fallbackLanguageList.splice(i + 1, fallbackLanguageList.length);\n      while ((baseLang = fallbackLanguageList.pop()) !== undefined) {\n        if (bundles[baseLang][id]) {\n          bundle = deepcopy(bundles[baseLang][id]);\n        }\n        else {\n          raw = this._fetchStatus.rawResponses[baseLang];\n          if (raw) {\n            this._deepMap(bundle, raw, function (text) { return text; });\n          }\n        }\n      }\n      // store the constructed bundle\n      if (!bundles[lang]) {\n        bundles[lang] = {};\n      }\n      bundles[lang][id] = bundle;\n    },\n\n    /**\n     * Construct a pseudo-bundle for the target locale. (Not used for now)\n     *\n     * @param {string} lang Target locale.\n     */\n    /*\n    _constructPseudoBundle: function (lang) {\n      var bundle = {};\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n      this._deepMap(bundle, bundles[''][id], function (value) {\n        return typeof value === 'string' ? lang + ' ' + value : value;\n      });\n      bundles[lang] = bundles[lang] || {};\n      bundles[lang][id] = bundle;\n      return bundle;\n    },\n    */\n\n    /**\n     * Recursively map the source object onto the target object with the specified map function.\n     * \n     * The method is used to merge a bundle into its fallback bundle.\n     *\n     * @param {Object} target Target object.\n     * @param {Object} source Source object.\n     * @param {Function} map Mapping function.\n     */\n    _deepMap: function (target, source, map) {\n      var value;\n      for (var prop in source) {\n        value = source[prop];\n        switch (typeof value) {\n        case 'string':\n        case 'number':\n        case 'boolean':\n          if (typeof target === 'object') {\n            target[prop] = map(value, prop);\n          }\n          break;\n        case 'object':\n          if (typeof target === 'object') {\n            if (Array.isArray(value)) {\n              // TODO: cannot handle deep objects properly\n              target[prop] = target[prop] || [];\n              this._deepMap(target[prop], value, map);\n            }\n            else {\n              target[prop] = target[prop] || {};\n              this._deepMap(target[prop], value, map);\n            }\n          }\n          break;\n        default:\n          if (typeof target === 'object') {\n            target[prop] = value;\n          }\n          break;\n        }\n      }\n    },\n\n    /**\n     * Construct the default bundle from the element's template.\n     *\n     * Extract the default bundle from the template if it is embedded as JSON at build time.\n     *\n     * ### Hard-coded UI text example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template>\n     *       <span id=\"label\">UI Text Label:</span>\n     *       <input id=\"input-el\"\n     *              value=\"{{keyword}}\"\n     *              placeholder=\"Keyword\">\n     *     </template>\n     *   </dom-module>\n     * ```\n     *\n     * ### Constructed default bundle for the above example:\n     * ```\n     *   {\n     *     \"model\" : {\n     *       \"input-el\": {\n     *         \"placeholder\": \"Keyword\"\n     *       }\n     *     },\n     *     \"label\": \"UI Text Label:\"\n     *   }\n     * ```\n     *\n     * ### Processed template with bound annotations for the above example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template localizable-text=\"embedded\">\n     *       <span id=\"label\">{{text.label}}</span>\n     *       <input id=\"input-el\"\n     *         value=\"{{keyword}}\"\n     *         placeholder=\"{{model.input-el.placeholder}}\">\n     *     </template>\n     *   </dom-module>\n     * ```\n     *\n     * ### Embedded JSON bundle format for the above example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template localizable-text=\"embedded\">\n     *       <span id=\"label\">{{text.label}}</span>\n     *       <input id=\"input-el\"\n     *         value=\"{{keyword}}\"\n     *         placeholder=\"{{model.input-el.placeholder}}\">\n     *       <template id=\"localizable-text\">\n     *         <json-data>{\n     *           \"model\" : {\n     *             \"input-el\": {\n     *               \"placeholder\": \"Keyword\"\n     *             }\n     *           },\n     *           \"label\": \"UI Text Label:\"\n     *         }</json-data>\n     *       </template>\n     *     </template>\n     *   </dom-module>\n     * ```\n     */\n    _constructDefaultBundle: function (_template) {\n      var template;\n      var id = this.is;\n      if (this.is === 'i18n-dom-bind') {\n        template = _template || this;\n        id = this.id;\n        /* istanbul ignore if */\n        if (template.content && template.content.childNodes.length === 0) {\n          // Find the real template in Internet Explorer 11 when i18n-dom-bind is concealed in a parent template\n          // This does not happen on Polymer 1.3.1 or later.  So ignore this 'if' statement in code coverage.\n          template = Array.prototype.map.call(document.querySelectorAll('template'), function (parentTemplate) {\n            return parentTemplate.content.querySelector('template#' + id + '[is=\"i18n-dom-bind\"]');\n          }).reduce(function (prev, current) {\n            return prev || current;\n          });\n          // Patch this.content with the real one\n          if (template) {\n            this.content = template.content;\n          }\n        }\n      }\n      else {\n        template = _template || Polymer.DomModule.import(id, 'template');\n      }\n      if (template) {\n        this.templateDefaultLang = template.hasAttribute('lang') ? template.lang : 'en';\n      }\n      else {\n        this.templateDefaultLang = 'en';\n      }\n      var bundle = { model: {} };\n      var path = [];\n      var templateDefaultLang = this.templateDefaultLang;\n      var localizableText, jsonData;\n\n      if (template) {\n        // register localizable attributes of the element itself\n        attributesRepository.registerLocalizableAttributes(id, template);\n        if (template.getAttribute('localizable-text') === 'embedded') {\n          // pick up embedded JSON from the template\n          localizableText = template.content.querySelector('#localizable-text');\n          if (localizableText) {\n            jsonData = localizableText.content.querySelector('json-data');\n            if (jsonData) {\n              bundle = JSON.parse(jsonData.textContent);\n            }\n            else {\n              console.error('<json-data> not found in <template id=\\\"localizable-text\\\">');\n            }\n          }\n          else {\n            console.error('<template id=\\\"localizable-text\\\"> not found');\n          }\n        }\n        else {\n          if (extraWhiteSpaceNode) {\n            template.setAttribute('strip-whitespace', '');\n          }\n          // traverse template to generate bundle\n          this._traverseTemplateTree(template.content, path, bundle, 0);\n        }\n      }\n\n      bundles[''][id] = bundle;\n      bundles[templateDefaultLang] = bundles[templateDefaultLang] || {};\n      bundles[templateDefaultLang][id] = bundle;\n      //console.log('text = ');\n      //console.log(JSON.stringify(bundle, null, 2));\n\n      return true;\n    },\n\n    /**\n     * Traverse localizable attributes of the target element node and \n     * add them to the target bundle under the `model` object.\n     * \n     * The `<i18n-attr-repo>` object is used \n     * to judge if the target attributes are localizable.\n     *\n     * @param {Object} node Target element node.\n     * @param {string} path Path to the target node.\n     * @param {Object} bundle Default bundle.\n     */\n    _traverseAttributes: function (node, path, bundle) {\n      var name = node.nodeName.toLowerCase();\n      var id = node.getAttribute ?\n                 (node.getAttribute('text-id') ||\n                  node.getAttribute('id')) : null;\n      var text;\n      var messageId;\n      var attrId;\n      var isLocalizable;\n      var dummy;\n      // pick up element attributes\n      Array.prototype.forEach.call(node.attributes, function (attribute) {\n        text = attribute.value;\n        switch (attribute.name) {\n        case 'id':\n        case 'text-id':\n        case 'is':\n        case 'lang':\n        case 'class':\n        // verification required before removing these attributes\n        case 'href':\n        case 'src':\n        case 'style':\n        case 'url':\n        case 'selected':\n          break;\n        default:\n          if (!(isLocalizable = attributesRepository.isLocalizableAttribute(node, attribute.name))) {\n            break;\n          }\n          if (text.length === 0) {\n            // skip empty value attribute\n          }\n          else if (text.match(/^{{[^{}]*}}$/) || text.match(/^\\[\\[[^\\[\\]]*\\]\\]$/)) {\n            // skip annotation attribute\n          }\n          else if (text.replace(/\\n/g, ' ').match(/^{.*}|\\[.*\\]$/g) &&\n                  !text.match(/^{{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]/) &&\n                  !text.match(/{{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]$/)) {\n            // generate message id\n            messageId = this._generateMessageId(path, id);\n            try {\n              //console.log(messageId + ' parsing attribute ' + attribute.name + ' = ' + text);\n              var value = JSON.parse(text.replace(/\\n/g, ' '));\n              //console.log('parsed JSON object = ');\n              //console.log(value);\n              switch (typeof value) {\n              case 'string':\n              case 'number':\n              case 'object':\n                // put into model\n                attrId = ['model', messageId, attribute.name].join('.');\n                debuglog(attrId + ' = ' + text);\n                this._setBundleValue(bundle, attrId, value);\n                attribute.value = '{{' + attrId + '}}';\n                break;\n              default: // skip other types\n                break;\n              }\n            }\n            catch (e) {\n              // invalid JSON\n              console.warn(e, 'Invalid JSON at <' + name + ' ' + attribute.name + '> with value = ' + text);\n            }\n          }\n          else if (text.match(/{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]/)) {\n            // compound binding attribute\n            // Parameterized:\n            //   e.g., attr=\"Compound binding attribute has [[bound.value]] {{parameters}} in the value string\"\n            //   replaced as \"{{i18nFormat(attrId.0,bound.value,parameters)}}\"\n            //   extracted as [ \"Compound binding attribute has {1} {2} in the value string\", \"[[bound.value]]\", \"{{parameters}}\" ]\n            // Concatenated: (Parameters with functions cannot be reordered in translation)\n            //   e.g., attr2=\"Compound binding attribute has [[f1(bound.value)]] {{f2(parameters)}} in the value string\"\n            //   replaced as \"{{attrId.0}}[[f1(bound.value)]]{{attrId.2}}{{f2(parameters)}}{{attrId.4}}\"\n            //   extracted as [ \"Compound binding attribute has \", \"[[f1(bound.value)]]\", \" \", \"{{f2(parameters)}}\", \" in the value string\" ]\n            var parsed = text.match(/([^{}\\[\\]]{1,})|({{[^{}]{1,}}})|(\\[\\[[^\\[\\]]{1,}\\]\\])/g);\n            var parameterized;\n            var processed;\n            var n;\n            messageId = this._generateMessageId(path, id);\n            attrId = ['model', messageId, attribute.name.replace(/\\$$/, '')].join('.');\n            if (text.match(/\\)}}|\\)\\]\\]/)) { // check for function parameter\n              // Concatenate\n              debuglog(attrId + ' = ' + JSON.stringify(parsed));\n              this._setBundleValue(bundle, attrId, parsed);\n              processed = '';\n              for (n = 0; n < parsed.length; n++) {\n                if (parsed[n].match(/^{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]$/)) {\n                  processed += parsed[n];\n                }\n                else {\n                  processed += '{{' + attrId + '.' + n + '}}';\n                }\n              }\n              if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n                dummy = document.createElement('span');\n                dummy.innerHTML = '<span ' + attribute.name + '$=\"' + processed + '\"></span>';\n                node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n              }\n              else {\n                attribute.value = processed;\n              }\n            }\n            else {\n              // Parameterize\n              parameterized = [ '' ];\n              while (parsed.length) {\n                if (parsed[0].match(/^{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]$/)) {\n                  parameterized.push(parsed[0]);\n                  parameterized[0] += '{' + (parameterized.length - 1) + '}';\n                }\n                else {\n                  parameterized[0] += parsed[0];\n                }\n                parsed.shift();\n              }\n              debuglog(attrId + ' = ' + JSON.stringify(parameterized));\n              this._setBundleValue(bundle, attrId, parameterized);\n              processed = '{{i18nFormat(' + attrId + '.0';\n              for (n = 1; n < parameterized.length; n++) {\n                processed += ',' + parameterized[n].replace(/^[{\\[][{\\[](.*)[}\\]][}\\]]$/, '$1');\n              }\n              processed += ')}}';\n              if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n                dummy = document.createElement('span');\n                dummy.innerHTML = '<span ' + attribute.name + '$=\"' + processed + '\"></span>';\n                node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n              }\n              else {\n                attribute.value = processed;\n              }\n            }\n          }\n          else {\n            // string attribute\n            messageId = this._generateMessageId(path, id);\n            attrId = ['model', messageId, attribute.name].join('.');\n            debuglog(attrId + ' = ' + text);\n            this._setBundleValue(bundle, attrId, text);\n            if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n              dummy = document.createElement('span');\n              dummy.innerHTML = '<span ' + attribute.name + '$=' + '\"{{' + attrId + '}}\"' + '></span>';\n              node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n            }\n            else {\n              attribute.value = '{{' + attrId + '}}';\n            }\n          }\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Recursively traverse text contents of the target element node\n     * and add them to the target bundle object.\n     *\n     * Traversed text contents are replaced with annotations \n     * for the corresponding text in the bundle.\n     *\n     * - - -\n     *\n     * There are some special treatments in the following cases.\n     *\n     * ### Sentence with parameterized child parameter-like elements:\n     *\n     * As the order of the parameters can change in different languages,\n     * `<i18n-format>` element is used to make the sentence localizable.\n     *\n     * ### Before processing\n     *\n     * ```\n     *   <p id=\"p\"><code>i18n-format</code> is \n     *     used for  \n     *     <a href=\"https://www.google.com\">parameterized</a> \n     *     sentences.</p>\n     * ```\n     *\n     * ### After processing\n     *\n     * ```\n     *   <p id=\"p\">\n     *     <i18n-format lang=\"{{effectiveLang}}\">\n     *       <span>{{text.p.0}}</span>\n     *       <code>{{text.p.1}}</code>\n     *       <a href=\"https://www.google.com\">{{text.p.2}}</a>\n     *     </i18n-format>\n     *   </p>\n     * ```\n     *\n     * ### Constructed bundle data: Texts are stored in an Array of strings.\n     *\n     * ```\n     *   {\n     *     \"p\" : [\n     *       \"{1} is\\n used for\\n {2}\\n sentences.\",\n     *       \"i18n-format\",\n     *       \"parameterized\"\n     *     ]\n     *   }\n     * ```\n     *\n     * - - -\n     *\n     * ### `<i18n-format>` element with compound templates:\n     *\n     * Texts with compound templates for `<i18n-format>` element are\n     * processed as below.\n     *\n     * `lang=\"{{effectiveLang}}\"` attribute is added to `<i18n-format>` node\n     * as well as `<i18n-number>` node.\n     *\n     * ### Before processing\n     *\n     * ```\n     * <i18n-format id=\"sentence\">\n     *   <json-data>{\n     *     \"0\": \"You ({3}) gave no gifts.\",\n     *     \"1\": {\n     *       \"male\": \"You ({3}) gave him ({4}) {5}.\",\n     *       \"female\": \"You ({3}) gave her ({4}) {5}.\",\n     *       \"other\": \"You ({3}) gave them ({4}) {5}.\"\n     *     },\n     *     \"one\": {\n     *       \"male\": \n     *         \"You ({3}) gave him ({4}) and one other {5}.\",\n     *       \"female\": \n     *         \"You ({3}) gave her ({4}) and one other {5}.\",\n     *       \"other\": \n     *         \"You ({3}) gave them ({4}) and one other {5}.\"\n     *     },\n     *     \"other\": \n     *       \"You ({3}) gave them ({4}) and {1} others gifts.\"\n     *   }</json-data>\n     *   <i18n-number \n     *     offset=\"1\"\n     *     >{{recipients.length}}</i18n-number>\n     *   <span>{{recipients.0.gender}}</span>\n     *   <span>{{sender.name}}</span>\n     *   <span>{{recipients.0.name}}</span>\n     *   <span>a gift</span>\n     * </i18n-format>\n     * ```\n     *\n     * ### After processing\n     *\n     * ```\n     * <i18n-format id=\"sentence\" \n     *              lang=\"{{effectiveLang}}\">\n     *   <json-data>{{serialize(text.sentence.0)}}</json-data>\n     *   <i18n-number \n     *     offset=\"1\"\n     *     lang=\"{{effectiveLang}}\"\n     *     >{{recipients.length}}</i18n-number>\n     *   <span>{{recipients.0.gender}}</span>\n     *   <span>{{sender.name}}</span>\n     *   <span>{{recipients.0.name}}</span>\n     *   <span>{{text.sentence.5}}</span>\n     * </i18n-format>\n     * ```\n     *\n     * ### Constructed bundle data:\n     *\n     * ```\n     * {\n     *   \"sentence\" : [\n     *     {\n     *       \"0\": \"You ({3}) gave no gifts.\",\n     *       \"1\": {\n     *         \"male\": \"You ({3}) gave him ({4}) {5}.\",\n     *         \"female\": \"You ({3}) gave her ({4}) {5}.\",\n     *         \"other\": \"You ({3}) gave them ({4}) {5}.\"\n     *       },\n     *       \"one\": {\n     *         \"male\": \n     *         \"You ({3}) gave him ({4}) and one other {5}.\",\n     *         \"female\": \n     *         \"You ({3}) gave her ({4}) and one other {5}.\",\n     *         \"other\": \n     *         \"You ({3}) gave them ({4}) and one other {5}.\"\n     *       },\n     *       \"other\": \n     *       \"You ({3}) gave them ({4}) and {1} others gifts.\"\n     *     },\n     *     \"{{recipients.length - 1}}\",\n     *     \"{{recipients.0.gender}}\",\n     *     \"{{sender.name}}\",\n     *     \"{{recipients.0.name}}\",\n     *     \"a gift\"\n     *   ]\n     * }\n     * ```\n     *\n     * @param {Object} node Target element node.\n     * @param {string} path Path to the target node.\n     * @param {Object} bundle Default bundle.\n     * @param {Number} index Index in the siblings of the target node excluding whitespace nodes.\n     */\n    _traverseTemplateTree: function (node, path, bundle, index) {\n      var i;\n      var whiteSpaceElements = 0;\n      var isWhiteSpace = false;\n      var isCompoundAnnotatedNode = false;\n      var text;\n      var span;\n      var name = node.nodeName.toLowerCase();\n      var id = node.getAttribute ? \n                 (node.getAttribute('text-id') || \n                  node.getAttribute('id')) : null;\n      var messageId;\n      var n;\n      var templateText;\n      var templateTextParams;\n      path.push(id ? '#' + id : name + (index > 0 ? '_' + index : ''));\n      //console.log(path.join(':'));\n      switch (node.nodeType) {\n      case node.ELEMENT_NODE:\n        switch (name) {\n        case 'style':\n        case 'script':\n        case 'meta':\n          // skip\n          break;\n        case 'i18n-format':\n          // pick up element attributes\n          this._traverseAttributes(node, path, bundle);\n          // generate message id\n          messageId = this._generateMessageId(path, id);\n          if (!node.hasAttribute('lang')) {\n            node.setAttribute('lang', '{{effectiveLang}}');\n          }\n          text = Array.prototype.filter.call(node.childNodes, function (child) {\n            return child.nodeType === child.ELEMENT_NODE;\n          }).map(function (param, n) {\n            var value = param.textContent;\n            var parsedValue = value.match(/^({{)(.*)(}})$/) || \n                              value.match(/^(\\[\\[)(.*)(\\]\\])$/);\n            if (n === 0) {\n              // template element\n              if (param.tagName.toLowerCase() === 'json-data') {\n                if (parsedValue) {\n                  var parsedValue2 = value.match(/^({{)(serialize\\(.*\\))(}})$/) || \n                                     value.match(/^(\\[\\[)(serialize\\(.*\\))(\\]\\])$/);\n                  if (!parsedValue2) {\n                    // convert to {{serialize(id)}}\n                    parsedValue.shift();\n                    parsedValue.splice(1, 0, 'serialize(');\n                    parsedValue.splice(3, 0, ')');\n                    param.textContent = parsedValue.join('');\n                  }\n                }\n                else {\n                  value = JSON.parse(value);\n                  param.textContent = '{{serialize(text.' + messageId + '.' + n + ')}}';\n                }\n              }\n              else {\n                if (!parsedValue) {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n            }\n            else {\n              // param element\n              // TODO: handle localization of param nodes and attributes\n              if (!param.hasAttribute(paramAttribute)) {\n                param.setAttribute(paramAttribute, n);\n              }\n              if (param.tagName.toLowerCase() === 'i18n-number') {\n                if (!param.hasAttribute('lang')) {\n                  param.setAttribute('lang', '{{effectiveLang}}');\n                }\n                var offset = param.getAttribute('offset');\n                if (offset) {\n                  offset = ' - ' + offset;\n                }\n                else {\n                  offset = '';\n                }\n                if (parsedValue) {\n                  // convert to {{path - offset}}\n                  parsedValue.shift();\n                  parsedValue.splice(2, 0, offset);\n                  value = parsedValue.join('');\n                }\n                else {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n              else {\n                if (!parsedValue) {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n            }\n            return value;\n          }, this);\n          debuglog(messageId + ' = ' + text);\n          this._setBundleValue(bundle, messageId, text);\n          break;\n        case 'template':\n          // traverse into its content\n          //console.log(path.join(':') + ':' + node.content.nodeName + ':' + 0);\n          if (extraWhiteSpaceNode) {\n            //if (node.hasAttribute('is') && node.getAttribute('is').match(/^(i18n-)?dom-/)) {\n              node.setAttribute('strip-whitespace', '');\n            //}\n          }\n          this._traverseTemplateTree(node.content, path, bundle, 0);\n          break;\n        default:\n          // element node\n          if (name === 'i18n-number' ||\n              name === 'i18n-datetime') {\n            if (!node.hasAttribute('lang')) {\n              node.setAttribute('lang', '{{effectiveLang}}');\n            }\n          }\n          // pick up element attributes\n          this._traverseAttributes(node, path, bundle);\n          // check annonated node\n          isCompoundAnnotatedNode = false;\n          if (node.childElementCount === 0) {\n            if (node.textContent) {\n              isCompoundAnnotatedNode = this._isCompoundAnnotatedText(node.textContent);\n            }\n          }\n          if (node.childElementCount === 0 && !isCompoundAnnotatedNode) {\n            if (node.textContent) { // use textContent for Firefox compatibility\n              text = node.textContent;\n              if (text.length === 0 || text.match(/^\\s*$/g)) {\n                // skip empty or whitespace node\n              }\n              else if (text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n                // skip annotation node\n                // TODO: compound bindings support\n              }\n              else {\n                // a text message found\n                // generate message id\n                messageId = this._generateMessageId(path, id);\n                // store the text message\n                text = text.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n                if (name === 'json-data') {\n                  this._setBundleValue(bundle, messageId, JSON.parse(text));\n                }\n                else {\n                  this._setBundleValue(bundle, messageId, text);\n                }\n                // replace textContent with annotation\n                node.textContent = '{{text.' + messageId + '}}';\n                if (!id) {\n                  //node.id = messageId;\n                  //console.warn('add missing node id as ' + messageId + ' for ' + text);\n                }\n                debuglog(messageId + ' = ' + text);\n              }\n            }\n            else {\n              // skip\n            }\n          } \n          else {\n            // has children or compound annotation\n            // check if i18n-format is applicable\n            var childStatus = Array.prototype.map.call(\n              node.childNodes, function (child) {\n                var result;\n                if (child.nodeType === child.ELEMENT_NODE &&\n                    child.tagName === 'TEMPLATE') {\n                  var templateNonCommentChildNodes =\n                    Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                      switch (templateChild.nodeType) {\n                      case templateChild.COMMENT_NODE:\n                        return false;\n                      case templateChild.TEXT_NODE:\n                        return !templateChild.textContent.match(/^\\s*$/g);\n                      default:\n                      case templateChild.ELEMENT_NODE:\n                        return true;\n                      }\n                    });\n                  var firstChild = templateNonCommentChildNodes.shift();\n                  // Examples:\n                  // hasText: <template>text</template>\n                  // hasCompoundAnnotatedText: <template>{{item.name}} text</template>\n                  // hasTextChild: <template><b>text</b></template> or <template><br></template>\n                  // hasCompoundAnnotatedChildNode: <template><b>{{item.name}} text</b></template>\n                  // hasGrandChildren: <template><span><b>text</b></span></template> or \n                  //                   <template><b>A</b><i>B</i></template> or\n                  //                   hasCompoundAnnotatedText\n                  result = {\n                    hasText: templateNonCommentChildNodes.length === 0 &&\n                             firstChild &&\n                             firstChild.nodeType === firstChild.TEXT_NODE &&\n                             firstChild.textContent.length > 0 &&\n                             !firstChild.textContent.match(/^\\s*$/g),\n                    hasCompoundAnnotatedText: firstChild &&\n                                              firstChild.nodeType === firstChild.TEXT_NODE &&\n                                              this._isCompoundAnnotatedText(firstChild.textContent),\n                    hasTextChild: templateNonCommentChildNodes.length === 0 &&\n                                  firstChild &&\n                                  firstChild.nodeType === child.ELEMENT_NODE &&\n                                  firstChild.childElementCount === 0, // including <br>\n                    hasCompoundAnnotatedChildNode: firstChild &&\n                                                   firstChild.nodeType === firstChild.ELEMENT_NODE &&\n                                                   firstChild.childElementCount === 0 &&\n                                                   this._isCompoundAnnotatedText(firstChild.textContent),\n                    hasGrandChildren: templateNonCommentChildNodes.length > 0 ||\n                                      (firstChild &&\n                                       firstChild.nodeType === firstChild.ELEMENT_NODE &&\n                                        Array.prototype.map.call(\n                                          firstChild.childNodes,\n                                          function (grandChild) {\n                                            return grandChild.nodeType !== grandChild.TEXT_NODE;\n                                          }\n                                        ).reduce(function (prev, current) {\n                                          return prev || current;\n                                        }, false)) ||\n                                      (firstChild &&\n                                       firstChild.nodeType === firstChild.TEXT_NODE &&\n                                       this._isCompoundAnnotatedText(firstChild.textContent))\n                  };\n                }\n                else {\n                  result = {\n                    hasText: child.nodeType === child.TEXT_NODE &&\n                             child.textContent.length > 0 &&\n                             !child.textContent.match(/^\\s*$/g),\n                    hasCompoundAnnotatedText: child.nodeType === child.TEXT_NODE &&\n                                              this._isCompoundAnnotatedText(child.textContent),\n                    hasTextChild: child.nodeType === child.ELEMENT_NODE &&\n                                  child.childElementCount === 0, // including <br>\n                    hasCompoundAnnotatedChildNode: child.nodeType === child.ELEMENT_NODE &&\n                                                   child.childElementCount === 0 &&\n                                                   this._isCompoundAnnotatedText(child.textContent),\n                    hasGrandChildren: child.nodeType === child.ELEMENT_NODE &&\n                                      Array.prototype.map.call(\n                                        child.childNodes,\n                                        function (grandChild) {\n                                          return grandChild.nodeType !== grandChild.TEXT_NODE;\n                                        }\n                                      ).reduce(function (prev, current) {\n                                        return prev || current;\n                                      }, false)\n                  };\n                }\n                return result;\n              }.bind(this)).reduce(function (prev, current) { \n                return {\n                  hasText: prev.hasText || current.hasText,\n                  hasCompoundAnnotatedText: prev.hasCompoundAnnotatedText || current.hasCompoundAnnotatedText,\n                  hasTextChild: prev.hasTextChild || current.hasTextChild,\n                  hasCompoundAnnotatedChildNode: prev.hasCompoundAnnotatedChildNode || current.hasCompoundAnnotatedChildNode,\n                  hasGrandChildren: prev.hasGrandChildren || current.hasGrandChildren\n                };\n              }, { \n                hasText: false, \n                hasCompoundAnnotatedText: false,\n                hasTextChild: false,\n                hasCompoundAnnotatedChildNode: false,\n                hasGrandChildren: false\n              });\n            if ((childStatus.hasText || node.hasAttribute('text-id')) &&\n                (childStatus.hasTextChild || childStatus.hasCompoundAnnotatedText) && \n                !childStatus.hasGrandChildren &&\n                !childStatus.hasCompoundAnnotatedChildNode) {\n              // apply i18n-format\n              /*\n                    <i18n-format>\n                      <span>{{text.simpleChartDesc.0}}</span>\n                      <code param=\"1\">{{text.simpleChartDesc.1}}</code>\n                      <a param=\"2\" href=\"link\">{{text.simpleChartDesc.2}}</a>\n                      <a param=\"3\" href=\"link2\">{{text.simpleChartDesc.3}}</a>\n                    </i18n-format>\n              */\n              n = 0;\n              messageId = this._generateMessageId(path, id);\n              templateTextParams = Array.prototype.map.call(\n                node.childNodes, function (child) {\n                  var firstChild;\n                  if (child.nodeType === child.TEXT_NODE &&\n                      this._hasAnnotatedText(child.textContent)) {\n                    return this._compoundAnnotationToSpan(child)\n                      .map(function (_child) {\n                        return {\n                          node: _child,\n                          templateNode: null,\n                          type: _child.nodeType,\n                          text: _child.nodeType === _child.TEXT_NODE ? \n                                  _child.textContent : null,\n                          childTextNode: _child.nodeType === _child.ELEMENT_NODE &&\n                                         _child.childNodes.length > 0\n                        };\n                      });\n                  }\n                  else if (child.nodeType === child.ELEMENT_NODE &&\n                      child.tagName === 'TEMPLATE') {\n                    firstChild =\n                      Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                        switch (templateChild.nodeType) {\n                        case templateChild.COMMENT_NODE:\n                          return false;\n                        case templateChild.TEXT_NODE:\n                          return !templateChild.textContent.match(/^\\s*$/g);\n                        default:\n                        case templateChild.ELEMENT_NODE:\n                          return true;\n                        }\n                      }).shift();\n                    if (!firstChild) {\n                      firstChild =\n                        Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                          switch (templateChild.nodeType) {\n                          case templateChild.COMMENT_NODE:\n                            return false;\n                          default:\n                            return true;\n                          }\n                        }).shift();\n                    }\n                    if (firstChild) {\n                      return [{\n                        node: firstChild,\n                        templateNode: child,\n                        type: firstChild.nodeType,\n                        text: null,\n                        childTextNode: true\n                      }];\n                    }\n                    else {\n                      return [];\n                    }\n                  }\n                  else {\n                    return [{\n                      node: child,\n                      templateNode: null,\n                      type: child.nodeType,\n                      text: child.nodeType === child.TEXT_NODE ? \n                              child.textContent : null,\n                      childTextNode: child.nodeType === child.ELEMENT_NODE &&\n                                     child.childNodes.length > 0\n                    }];\n                  }\n                }.bind(this)).reduce(function (prev, currentList) {\n                  var current;\n                  var textContent;\n                  for (var i = 0; i < currentList.length; i++) {\n                    current = currentList[i];\n                    if (current.text) {\n                      prev.text[0] += current.text;\n                    }\n                    if (current.type === current.node.ELEMENT_NODE) {\n                      n++;\n                      prev.text[0] += '{' + n + '}';\n                      path.push(n);\n                      this._traverseAttributes(current.node, path, bundle);\n                      path.pop();\n                      if (current.childTextNode) {\n                        textContent = current.node.textContent;\n                        if (textContent.length === 0) {\n                          // tag without textContent\n                          prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                          current.node.textContent = '';\n                        }\n                        else if (textContent.match(/^\\s*$/g)) {\n                          // tag with whitespace textContent\n                          prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                          current.node.textContent = ' ';\n                        }\n                        else if (textContent.match(/^[\\s]*({{.*}}|\\[\\[.*\\]\\])[\\s]*$/)) {\n                          // tag with annotation\n                          prev.text.push(textContent);\n                          // textContent is untouched\n                        }\n                        else {\n                          prev.text.push(current.node.textContent.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' '));\n                          current.node.textContent = '{{text.' + messageId + '.' + n + '}}';\n                        }\n                      }\n                      else {\n                        prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                      }\n                      current.node.setAttribute(paramAttribute, n.toString());\n                      prev.params.push(current.templateNode || current.node);\n                    }\n                    else if (current.type === current.node.TEXT_NODE &&\n                             current.childTextNode) {\n                      // in template node\n                      n++;\n                      prev.text[0] += '{' + n + '}';\n                      textContent = current.node.textContent;\n                      if (textContent.length === 0) {\n                        // template without textContent\n                        prev.text.push('<template>');\n                        current.node.textContent = '';\n                      }\n                      else if (textContent.match(/^\\s*$/g)) {\n                        // template with whitespace textContent\n                        prev.text.push('<template>');\n                        current.node.textContent = ' ';\n                      }\n                      else if (textContent.match(/^[\\s]*({{.*}}|\\[\\[.*\\]\\])[\\s]*$/)) {\n                        // tag with annotation\n                        prev.text.push(textContent);\n                        // textContent is untouched\n                      }\n                      else {\n                        prev.text.push(textContent.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' '));\n                        current.node.textContent = '{{text.' + messageId + '.' + n + '}}';\n                      }\n                      span = document.createElement('span');\n                      span.setAttribute(paramAttribute, n.toString());\n                      current.templateNode.content.removeChild(current.node);\n                      span.appendChild(current.node);\n                      current.templateNode.content.appendChild(span);\n                      prev.params.push(current.templateNode);\n                    }\n                  }\n                  return prev;\n                }.bind(this), { text: [ '' ], params: [ '{{text.' + messageId + '.0}}' ] });\n              templateText = document.createElement('i18n-format');\n              templateText.setAttribute('lang', '{{effectiveLang}}');\n              span = document.createElement('span');\n              // span.innerText does not set an effective value in Firefox\n              span.textContent = templateTextParams.params.shift();\n              templateText.appendChild(span);\n              Array.prototype.forEach.call(templateTextParams.params,\n                function (param) {\n                  templateText.appendChild(param);\n                }\n              );\n              // store the text message\n              templateTextParams.text[0] = templateTextParams.text[0].replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n              this._setBundleValue(bundle, messageId, templateTextParams.text);\n              // insert i18n-format\n              node.innerHTML = '';\n              Polymer.dom(node).appendChild(templateText);\n              if (!id) {\n                //node.id = messageId;\n                //console.warn('add missing node id as ' + messageId + ' for ' + templateTextParams.text[0]);\n              }\n              debuglog(messageId + ' = ' + templateTextParams.text);\n            }\n            else {\n              // traverse childNodes\n              for (i = 0; i < node.childNodes.length; i++) {\n                //console.log(path.join(':') + ':' + node.childNodes[i].nodeName + ':' + (i - whiteSpaceElements) + ' i = ' + i + ' whiteSpaceElements = ' + whiteSpaceElements);\n                if (this._traverseTemplateTree(node.childNodes[i], path, bundle, i - whiteSpaceElements)) {\n                  whiteSpaceElements++;\n                }\n              }\n            }\n          }\n          break;\n        }\n        break;\n      case node.TEXT_NODE:\n        // text node\n        text = node.textContent;\n        if (text.length === 0 || text.match(/^\\s*$/g)) {\n          // skip empty or whitespace node\n          isWhiteSpace = true;\n        }\n        else if (text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n          // skip annotation node\n        }\n        else {\n          var parent = node.parentNode;\n\n          if (this._isCompoundAnnotatedText(text)) {\n            // apply i18n-format\n            n = 0;\n            messageId = this._generateMessageId(path, id);\n            templateTextParams = Array.prototype.map.call(\n              [ node ], function (child) {\n                return this._compoundAnnotationToSpan(child)\n                  .map(function (_child) {\n                    return {\n                      node: _child,\n                      type: _child.nodeType,\n                      text: _child.nodeType === _child.TEXT_NODE ? \n                              _child.textContent : null,\n                      childTextNode: _child.nodeType === _child.ELEMENT_NODE &&\n                                     _child.childNodes.length > 0\n                    };\n                  });\n              }.bind(this)).reduce(function (prev, currentList) {\n                var current;\n                for (var i = 0; i < currentList.length; i++) {\n                  current = currentList[i];\n                  if (current.text) {\n                    prev.text[0] += current.text;\n                  }\n                  if (current.type === current.node.ELEMENT_NODE) {\n                    n++;\n                    prev.text[0] += '{' + n + '}';\n                    path.push(n);\n                    this._traverseAttributes(current.node, path, bundle);\n                    path.pop();\n                    /* current.childTextNode is always true since current.node is <span>{{annotation}}</span> */\n                    prev.text.push(current.node.textContent);\n                    current.node.setAttribute(paramAttribute, n.toString());\n                    prev.params.push(current.node);\n                  }\n                }\n                return prev;\n              }.bind(this), { text: [ '' ], params: [ '{{text.' + messageId + '.0}}' ] });\n            templateText = document.createElement('i18n-format');\n            templateText.setAttribute('lang', '{{effectiveLang}}');\n            span = document.createElement('span');\n            // span.innerText does not set an effective value in Firefox\n            span.textContent = templateTextParams.params.shift();\n            templateText.appendChild(span);\n            Array.prototype.forEach.call(templateTextParams.params,\n              function (param) {\n                templateText.appendChild(param);\n              }\n            );\n            // store the text message\n            templateTextParams.text[0] = templateTextParams.text[0].replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n            this._setBundleValue(bundle, messageId, templateTextParams.text);\n            // insert i18n-format\n            Polymer.dom(parent).insertBefore(templateText, node);\n            Polymer.dom(parent).removeChild(node);\n            debuglog(messageId + ' = ' + templateTextParams.text);\n          }\n          else {\n            // generate message id\n            messageId = this._generateMessageId(path, id);\n            // store the text message\n            text = text.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n            this._setBundleValue(bundle, messageId, text);\n            // replace textContent with annotation\n            node.textContent = '{{text.' + messageId + '}}';\n            if (!id) {\n              //span.id = messageId;\n              //console.warn('add missing span with id as ' + messageId + ' for ' + text);\n            }\n            debuglog(messageId + ' = ' + text);\n          }\n        }\n        break;\n      case node.DOCUMENT_NODE:\n      case node.DOCUMENT_FRAGMENT_NODE:\n        // traverse childNodes\n        for (i = 0; i < node.childNodes.length; i++) {\n          //console.log(path.join(':') + ':' + node.childNodes[i].nodeName + ':' + (i - whiteSpaceElements) + ' i = ' + i + ' whiteSpaceElements = ' + whiteSpaceElements);\n          if (this._traverseTemplateTree(node.childNodes[i], path, bundle, i - whiteSpaceElements)) {\n            whiteSpaceElements++;\n          }\n        }\n        break;\n      default:\n        isWhiteSpace = true;\n        // comment node, etc.\n        break;\n      }\n      path.pop();\n      return isWhiteSpace;\n    },\n\n    /**\n     * Check if the text has compound annotation \n     * \n     * @param {string} text target text to check compound annotation\n     * @return {Boolean} true if the text contains compound annotation\n     */\n    _isCompoundAnnotatedText: function (text) {\n      return !text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/) &&\n             !!text.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/);\n    },\n\n    /**\n     * Check if the text has annotation \n     * \n     * @param {string} text target text to check annotation\n     * @return {Boolean} true if the text contains annotation\n     */\n    _hasAnnotatedText: function (text) {\n      return !!text.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/);\n    },\n\n    /**\n     * Convert compound annotations to span elements\n     * \n     * @param {Text} node target text node to convert compound annotations\n     * @return {Object[]} Array of Text or span elements\n     */\n    _compoundAnnotationToSpan: function (node) {\n      var result;\n      /* istanbul ignore else: node is prechecked to contain annotation(s) */\n      if (node.textContent.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/)) {\n        result = node.textContent\n          .match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]|[^{}\\[\\]]{1,}|[{}\\[\\]]{1,})/g)\n          .reduce(function (prev, current) {\n            if (current.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n              prev.push(current);\n              prev.push('');\n            }\n            else {\n              if (prev.length === 0) {\n                prev.push(current);\n              }\n              else {\n                prev[prev.length - 1] += current;\n              }\n            }\n            return prev;\n          }.bind(this), [])\n          .map(function (item) {\n            var childNode;\n            if (item.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n              childNode = document.createElement('span');\n              childNode.textContent = item;\n            }\n            else if (item) {\n              childNode = document.createTextNode(item);\n            }\n            else {\n              childNode = null;\n            }\n            return childNode;\n          });\n        if (result.length > 0) {\n          if (!result[result.length - 1]) {\n            result.pop(); // pop null node for ''\n          }\n        }\n      }\n      else {\n        // no compound annotation\n        result = [ node ];\n      }\n      return result;\n    },\n\n    /**\n     * Add the value to the target default bundle with the specified message Id \n     * \n     * @param {Object} bundle Default bundle.\n     * @param {string} messageId ID string of the value.\n     * @param {Object} value Value of the text message. Normally a string.\n     */\n    _setBundleValue: function (bundle, messageId, value) {\n      var messageIdPath = messageId.split('.');\n      bundle.model = bundle.model || {};\n      if (messageIdPath.length === 1) {\n        bundle[messageId] = value;\n      }\n      else {\n        var cursor = bundle;\n        for (var i = 0; i < messageIdPath.length; i++) {\n          if (i < messageIdPath.length - 1) {\n            cursor[messageIdPath[i]] = cursor[messageIdPath[i]] || {};\n            cursor = cursor[messageIdPath[i]];\n          }\n          else {\n            cursor[messageIdPath[i]] = value;\n          }\n        }\n      }\n    },\n\n    /**\n     * Generate a message ID from the specified path and id.\n     * \n     * ### TODO: \n     *\n     * - Shorten or optimize ids\n     *\n     * @param {Array} path List of ascestor elements of the current node in traversal.\n     * @param {id} id Value of `id` or `text-id` attribute of the current node.\n     */\n    _generateMessageId: function (path, id) {\n      var messageId;\n      if (!id || id.length === 0) {\n        for (var i = 1; i < path.length; i++) {\n          if (path[i][0] === '#') {\n            if (path[i] !== '#document-fragment') {\n              if (messageId && path[i].substr(0, 5) === '#text') {\n                messageId += ':' + path[i].substr(1);\n              }\n              else {\n                messageId = path[i].substr(1);\n              }\n            }\n          }\n          else {\n            if (messageId) {\n              messageId += ':' + path[i];\n            }\n            else {\n              messageId = path[i];\n            }\n          }\n        }\n      }\n      else {\n        messageId = id;\n      }\n      return messageId;\n    },\n\n    /**\n     * Merge `this.defaultText` into the target default bundle.\n     * \n     * ### TODO: \n     *\n     * - Need more research on the effective usage of this feature.\n     *\n     * @param {Object} bundle Default bundle.\n     */\n    /*\n    _mergeDefaultText: function (bundle) {\n      if (this.defaultText) {\n        this._deepMap(bundle, this.defaultText, function (text) { return text; });\n      }\n    },\n    */\n\n    /**\n     * Return the first non-null argument.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <input is=\"iron-input\" class=\"flex\"\n     *     type=\"search\" id=\"query\" bind-value=\"{{query}}\"\n     *     autocomplete=\"off\"\n     *     placeholder=\"{{or(placeholder,text.search)}}\">\n     * ```\n     *\n     * @param {*} arguments List of arguments.\n     */\n    or: function () {\n      var result = arguments[0];\n      var i = 1;\n      while (!result && i < arguments.length) {\n        result = arguments[i++];\n      }\n      return result;\n    },\n\n\n    /**\n     * Translate a string by a message table.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <span>{{tr(status,text.statusMsgs)}}</span>\n     *   <span>{{tr(errorId,text)}}</span>\n     *   <template>\n     *     <json-data text-id=\"statusMsgs\">{\n     *       \"signed-in\": \"Authenticated\",\n     *       \"signed-out\": \"Not Authenticated\",\n     *       \"error\": \"Error in Authentication\",\n     *       \"default\": \"Unknown Status in Authentication\"\n     *     }</json-data>\n     *     <span text-id=\"http-404\">File Not Found</span>\n     *     <span text-id=\"http-301\">Moved Permanently</span>\n     *   </template>\n     * ```\n     *\n     * Note: The second `table` parameter should always be specified in order\n     * to trigger automatic updates on `this.text` mutations, i.e., updates of `this.effectiveLang`.\n     *\n     * @param {string} key Key of the message.\n     * @param {Object} table The message table object or this.text itself if omitted\n     * @return {string} Translated string, `table.default` if `table[key]` is undefined, or key string if table.default is undefined.\n     */\n    tr: function (key, table) {\n      if (table) {\n        if (typeof table === 'object') {\n          if (typeof table[key] !== 'undefined') {\n            return table[key];\n          }\n          else if (typeof table['default'] !== 'undefined') {\n            return table['default'];\n          }\n          else {\n            return key;\n          }\n        }\n        else {\n          return key;\n        }\n      }\n      else {\n        return (typeof this.text === 'object') &&\n               (typeof key !== 'undefined') &&\n               (typeof this.text[key] !== 'undefined') ? this.text[key] : key;\n      }\n    },\n\n    /**\n     * Format a parameterized string.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <span attr=\"{{i18nFormat(text.param.0,text.textparam1,text.textparam2)}}\"></span>\n     *   <template>\n     *     <json-data text-id=\"param\">[\n     *       \"String with {1} and {2} are formetted\",\n     *       \"[[text.textparam1]]\",\n     *       \"[[text.textparam2]]\"\n     *     ]</json-data>\n     *     <span text-id=\"textparam1\">Parameter 1</span>\n     *     <span text-id=\"textparam2\">Parameter 2</span>\n     *   </template>\n     * ```\n     *\n     * Note: Compound bindings in attributes are automatically converted to {{i18nFormat()}} in preprocessing.\n     *\n     * @param {*} arguments List of arguments.\n     * @return {string} Formatted string\n     */\n    i18nFormat: function () {\n      if (arguments.length > 0) {\n        var formatted = arguments[0] || '';\n        for (var n = 1; n < arguments.length; n++) {\n          formatted = formatted.replace('{' + n + '}', arguments[n]);\n        }\n      }\n      return formatted;\n    },\n\n    // Lifecycle callbacks\n\n    /**\n     * Lifecycle callback before registration of the custom element.\n     *\n     * The default bundle is constructed via traversal of the element's template at this timing per registration.\n     *\n     * ### Notes: \n     *\n     * - For `i18n-dom-bind` elements, bundle construction is put off until `ready` lifecycle callback.\n     * - As called twice per custom element registration, the method skips bundle construction at the second call.\n     */\n    beforeRegister: function () {\n      if (this.is !== 'i18n-dom-bind') {\n        if (!this._templateLocalizable) {\n          this._templateLocalizable = this._constructDefaultBundle();\n        }\n      }\n    },\n\n\n    /**\n     * Lifecycle callback at registration of the custom element.\n     *\n     * this._fetchStatus is initialized per registration.\n     */\n    registered: function () {\n      if (this.is !== 'i18n-dom-bind') {\n        this._fetchStatus = deepcopy({ // per custom element\n          fetchingInstance: null,\n          ajax: null,\n          ajaxLang: null,\n          lastLang: null,\n          fallbackLanguageList: null,\n          targetLang: null,\n          lastResponse: {},\n          rawResponses: {}\n        });\n      }\n    },\n\n    /**\n     * Lifecycle callback on instance creation\n     */\n    created: function () {\n      // Fix #34. [Polymer 1.4.0] _propertyEffects have to be maintained per instance\n      if (this.is === 'i18n-dom-bind') {\n        this._propertyEffects = deepcopy(this._propertyEffects);\n      }\n      if (!isStandardPropertyConfigurable) {\n        // Fix #36. Emulate lang's observer since Safari 7 predefines non-configurable lang property\n        this.observer = new MutationObserver(this._handleLangAttributeChange.bind(this));\n        this.observer.observe(this, {\n          attributes: true,\n          attributeFilter: [ 'lang' ],\n          attributeOldValue: true\n        });\n      }\n    },\n\n    /**\n     * Lifecycle callback when the template children are ready.\n     */\n    ready: function () {\n      if (this.is === 'i18n-dom-bind') {\n        if (!this._templateLocalizable) {\n          this._templateLocalizable = this._constructDefaultBundle();\n        }\n        if (!this._fetchStatus) {\n          this._fetchStatus = deepcopy({ // per instance\n            fetchingInstance: null,\n            ajax: null,\n            ajaxLang: null,\n            lastLang: null,\n            fallbackLanguageList: null,\n            targetLang: null, \n            lastResponse: {},\n            rawResponses: {}\n          });\n        }\n        this._onDomChangeBindThis = this._onDomChange.bind(this);\n        this.addEventListener('dom-change', this._onDomChangeBindThis);\n        // Fix #34. [Polymer 1.4.0] Supply an empty object if this.__data__ is undefined\n        this.__data__ = this.__data__ || Object.create(null);\n      }\n      else {\n        if (!isStandardPropertyConfigurable) {\n          // Fix #36. Patch missing properties except for lang\n          for (var p in this._propertyEffects) {\n            if (this._propertyEffects[p] &&\n                !Object.getOwnPropertyDescriptor(this, p)) {\n              //console.log('ready: creating accessors for ' + p);\n              Polymer.Bind._createAccessors(this, p, this._propertyEffects[p]);\n            }\n          }\n        }\n        this._langChanged(this.getAttribute('lang'), undefined);\n        // model per instance\n        this.model = deepcopy(this.text.model);\n      }\n    },\n\n    /**\n     * attached lifecycle callback.\n     */\n    attached: function () {\n      if (this.is === 'i18n-dom-bind') {\n        if (this._properties) {\n          // Fix #35. [IE10] Restore properties for use in rendering\n          this.properties = this._properties;\n          delete this._properties;\n        }\n      }\n      if (this.observeHtmlLang) {\n        this.lang = html.lang;\n        // TODO: this call is redundant\n        this._observeHtmlLangChanged(true);\n      }\n    },\n\n    /**\n     * Handle `dom-change` event for `i18n-dom-bind`\n     */\n    _onDomChange: function () {\n      // Fix #16: [IE11][Polymer 1.3.0] On IE11, i18n-dom-bind does not work with Polymer 1.3.0\n      // Patch the broken lang property accessors manually if it is missing\n      // Fix #34: [IE11][Polymer 1.4.0] Create missing property accessors including lang\n      for (var p in this._propertyEffects) {\n        if (this._propertyEffects[p] &&\n            !Object.getOwnPropertyDescriptor(this, p)) {\n          Polymer.Bind._createAccessors(this, p, this._propertyEffects[p]);\n        }\n      }\n      this.removeEventListener('dom-change', this._onDomChangeBindThis);\n      if (this.text && this.text.model) {\n        this.model = deepcopy(this.text.model);\n      }\n      // Fix #17: [Polymer 1.3.0] observeHtmlLang is undefined in i18n-dom-bind\n      // Explicitly initialize observeHtmlLang if the value is undefined.\n      if (typeof this.observeHtmlLang === 'undefined' &&\n          !this.hasAttribute('observe-html-lang')) {\n        this.observeHtmlLang = true;\n      }\n      if (this.observeHtmlLang) {\n        this.lang = html.lang;\n        this._observeHtmlLangChanged(true);\n      }\n    },\n\n    /**\n     * detached lifecycle callback\n     */\n    detached: function () {\n      if (this.observeHtmlLang) {\n        this._observeHtmlLangChanged(false);\n      }\n    }\n  };\n\n  // Fix #36. Rename lang property as _lang to avoid conflict with the predefined lang property\n  if (!isStandardPropertyConfigurable) {\n    var _properties = Object.create(null);\n    for (var p in BehaviorsStore.I18nBehavior.properties) {\n      if (p === 'lang') {\n        _properties._lang = BehaviorsStore.I18nBehavior.properties.lang;\n      }\n      else {\n        _properties[p] = BehaviorsStore.I18nBehavior.properties[p];\n      }\n    }\n    BehaviorsStore.I18nBehavior.properties = _properties;\n    BehaviorsStore.I18nBehavior.properties._lang.reflectToAttribute = false;\n    BehaviorsStore.I18nBehavior.properties.text.computed = '_getBundle(_lang)';\n    BehaviorsStore.I18nBehavior._updateEffectiveLang = function (event) {\n      if ((!Polymer.Element && Polymer.dom(event).rootTarget === this) ||\n          (Polymer.Element && event.composedPath()[0] === this)) {\n        //console.log('lang-updated: _updateEffectiveLang: assigning effectiveLang = ' + this._lang);\n        this.effectiveLang = this._lang;\n      }\n    };\n    BehaviorsStore.I18nBehavior.hostAttributes = {\n      'lang': defaultLang\n    };\n  }\n\n  if (Polymer.Element) {\n    // Polymer 2.x\n  }\n  else {\n    // Polymer 1.x\n  /**\n   * `<template is=\"i18n-dom-bind\">` element extends `dom-bind` template element with `I18nBehavior`\n   *\n   * @group I18nBehavior\n   * @element i18n-dom-bind\n   */\n  var i18nBehaviorDomBind = {};\n  Polymer.Base.extend(i18nBehaviorDomBind, BehaviorsStore.I18nBehavior);\n  var i18nDomBind = {};\n  var domBind = document.createElement('template', 'dom-bind');\n  var domBindProto = Object.getPrototypeOf(domBind);\n  if (typeof domBindProto.render !== 'function') {\n    domBindProto = domBind.__proto__; // fallback for IE10\n  }\n  Polymer.Base.extend(i18nDomBind, domBindProto);\n  i18nDomBind.is = 'i18n-dom-bind';\n  if (!navigator.language && navigator.browserLanguage) { // Detect IE10\n    // Fix #35. [IE10] Hide properties until attached phase in IE10\n    // to avoid exceptions in overriding unconfigurable properties in Object.defineProperty\n    i18nBehaviorDomBind._properties = i18nBehaviorDomBind.properties;\n    i18nBehaviorDomBind.properties = Object.create(null);\n  }\n  /* As of Polymer 1.3.1, dom-bind does not have predefined behaviors */\n  /* istanbul ignore if */\n  if (i18nDomBind.behaviors) {\n    i18nDomBind.behaviors.push(i18nBehaviorDomBind);\n  }\n  else {\n    i18nDomBind.behaviors = [ i18nBehaviorDomBind ];\n  }\n  var _Polymer = Polymer;\n  _Polymer(i18nDomBind);\n  }\n})(document);\n/*\n@license\nCopyright (c) 2014 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n// From polymer#2.0-preview src/legacy/class.html\nPolymer.Utils = Polymer.Utils || {};\nPolymer.Utils.MixinBehavior = function(behavior, Base) {\n  var utils = Polymer.Utils;\n  var metaProps = {\n    attached: true,\n    detached: true,\n    ready: true,\n    created: true,\n    beforeRegister: true,\n    registered: true,\n    attributeChanged: true,\n    // meta objects\n    behaviors: true,\n    hostAttributes: true,\n    properties: true,\n    observers: true,\n    listeners: true\n  };\n  var config = {\n    properties: behavior.properties,\n    observers: behavior.observers\n  };\n\n  class PolymerGenerated extends Base {\n\n    static get config() {\n      return config;\n    }\n\n    _invokeFunction(fn, args) {\n      if (fn) {\n        fn.apply(this, args);\n      }\n    }\n\n    constructor() {\n      super();\n      // call `registered` only if it was not called for *this* constructor\n      if (!PolymerGenerated.hasOwnProperty('__registered')) {\n        PolymerGenerated.__registered = true;\n        if (behavior.registered) {\n          behavior.registered.call(Object.getPrototypeOf(this));\n        }\n      }\n    }\n\n    created() {\n      super.created();\n      this._invokeFunction(behavior.created);\n    }\n\n    _applyConfigMetaData() {\n      super._applyConfigMetaData();\n      this._applyConfigMetaDataFrom(behavior);\n    }\n\n    _applyListeners() {\n      super._applyListeners();\n      this._applyConfigListeners(behavior);\n    }\n\n    _ensureAttributes() {\n      // ensure before calling super so that subclasses can override defaults\n      this._ensureConfigAttributes(behavior);\n      super._ensureAttributes();\n    }\n\n    ready() {\n      super.ready();\n      this._invokeFunction(behavior.ready);\n    }\n\n    attached() {\n      super.attached();\n      this._invokeFunction(behavior.attached);\n    }\n\n    detached() {\n      super.detached();\n      this._invokeFunction(behavior.detached);\n    }\n\n    attributeChanged(name, old, value) {\n      super.attributeChanged(name, old, value);\n      this._invokeFunction(behavior.attributeChanged, [name, old, value]);\n    }\n  }\n\n  for (var p in behavior) {\n    if (!(p in metaProps))\n      utils.copyOwnProperty(p, behavior, PolymerGenerated.prototype);\n  }\n\n  return PolymerGenerated;\n};\n// Globally expose base elements and mixins\nwindow.BaseElements = window.BaseElements || {};\nwindow.Mixins = window.Mixins || {};\n\n// Localizable mixin\nMixins.Localizable = function (base) {\n\n  return class Localizable extends Polymer.Utils.MixinBehavior(BehaviorsStore.I18nBehavior, base) {\n    constructor () {\n      Localizable.template;\n      super();\n    }\n    static get _rawTemplate() {\n      let id = this.is;\n      let name = this.name ||\n        (typeof this === 'function' ?\n                this.toString().replace(/^[\\S\\s]*?function\\s*/, \"\").replace(/[\\s\\(\\/][\\S\\s]+$/, \"\") :\n                undefined);\n      if (!id && name && name !== 'Localizable' && name != 'class' && name != '_class') {\n        id = this.is = this._uncamelCase(name);\n      }\n      // TODO: template fetching should be flexible to detect super.template\n      let template = Polymer.DomModule.import(id, 'template');\n      if (id && !template) {\n        let current = (!window.HTMLImports || HTMLImports.useNative) ? document.currentScript\n                                            : document._currentScript;\n        template = (current ? current.ownerDocument\n                    .querySelector('template[id=' + id + ']') : null) || \n                   document.querySelector('template[id=' + id + ']');\n        if (template) {\n          let domModule = document.createElement('dom-module');\n          let assetUrl = new URL(current.baseURI ||\n            (window.currentImport ? window.currentImport.baseURI : null) ||\n            current.ownerDocument.baseURI);\n          domModule.appendChild(template);\n          domModule.setAttribute('assetpath', \n                                  assetUrl.pathname.indexOf('.vulcanized.') < 0 ?\n                                    assetUrl.pathname :\n                                      template.hasAttribute('assetpath') ? \n                                      template.getAttribute('assetpath') : \n                                      assetUrl.pathname);\n          domModule.register(id);\n          this._template = template;\n        }\n      }\n      return template;\n    }\n    static get template() {\n      return this._i18nPreprocess(this._rawTemplate);\n    }\n    static _uncamelCase(name) {\n      return name\n        // insert a hyphen between lower & upper\n        .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n        // space before last upper in a sequence followed by lower\n        .replace(/\\b([A-Z]+)([A-Z])([a-z0-9])/, '$1 $2$3')\n        // replace spaces with hyphens\n        .replace(/ /g, '-')\n        // lowercase\n        .toLowerCase();\n    }\n    static get _templateLocalizable () {\n      return this.hasOwnProperty('__templateLocalizable');\n    }\n    static set _templateLocalizable (value) {\n      this.__templateLocalizable = value;\n    }\n    static _i18nPreprocess(template) {\n      if (this.is && template && !this._templateLocalizable) {\n        this._templateLocalizable = this.prototype._constructDefaultBundle(template);\n      }\n      return template;\n    }\n    get is () {\n      return this.constructor.is;\n    }\n  };\n}\n\nMixins.I18nBehavior = (info) => Mixins.Localizable(Polymer.Class(info));\n\n// Logger mixin\nMixins.Logger = (base) => class extends base {\n  connectedCallback() {\n    super.connectedCallback();\n    console.log('<' + Object.getPrototypeOf(this).constructor.is + '>: ' +\n      'id = ' + this.id + ', ' +\n      'this.text = ' + JSON.stringify(this.text, null, 2));\n    console.log('Preprocessed template = \\n', Object.getPrototypeOf(this).constructor.template);\n  }\n};\n\n// I18N Base Element\nObject.defineProperty(BaseElements, 'I18nElement', {\n  get: function () {\n    return Mixins.I18nBehavior(Polymer.LegacyElement);\n  }\n});\n// i18n-dom-bind based on Polymer/polymer#2.0-preview src/templatizer/dom-bind.html\nclass I18nDomBind extends Mixins.Localizable(Polymer.LegacyElement) {\n  static get is() { return 'i18n-dom-bind'; }\n\n  connectedCallback() {\n    this._fetchStatus = deepcopy({ // per custom element\n      fetchingInstance: null,\n      ajax: null,\n      ajaxLang: null,\n      lastLang: null,\n      fallbackLanguageList: null,\n      targetLang: null,\n      lastResponse: {},\n      rawResponses: {}\n    });\n    this.render();\n  }\n\n  disconnectedCallback() {\n    this._removeChildren();\n  }\n\n  _insertChildren() {\n    if (this._children) {\n      for (var i=0; i<this._children.length; i++) {\n        this.parentNode.insertBefore(this._children[i], this);\n      }\n    }\n  }\n\n  _removeChildren() {\n    if (this._children) {\n      for (var i=0; i<this._children.length; i++) {\n        this.stamped.appendChild(this._children[i]);\n      }\n    }\n  }\n\n  render() {\n    if (!this._children) {\n      var template = this.querySelector('template');\n      if (!template) {\n        throw new Error('i18n-dom-bind requires a <template> child');\n      }\n      this._templateLocalizable = this._constructDefaultBundle(this.querySelector('template'));\n      this._bindTemplate(template);\n      this.root = this._stampTemplate(template);\n      this.stamped = this.root;\n      this._children = [];\n      for (var n=this.root.firstChild; n; n=n.nextSibling) {\n        this._children[this._children.length] = n;\n      }\n      this._flushProperties(this);\n    }\n    this._insertChildren();\n    this.dispatchEvent(new CustomEvent('dom-change'));\n  }\n\n}\ncustomElements.define(I18nDomBind.is, I18nDomBind);\nclass LocalizableElement extends Mixins.Logger(Mixins.Localizable(Polymer.LegacyElement)) {\n  static get is() { return 'localizable-element'; }\n}\ncustomElements.define(LocalizableElement.is, LocalizableElement);\nclass I18nSubclassElement extends Mixins.Logger(BaseElements.I18nElement) {\n  static get is() { return 'i18n-subclass-element'; }\n  static get config() {\n    return {\n      listeners: {\n        'lang-updated': '_langUpdated'\n      }\n    };\n  }\n  _langUpdated() {\n    this.model = deepcopy(this.text.model);\n  }\n}\ncustomElements.define(I18nSubclassElement.is, I18nSubclassElement);\n(function () {\n  function UncamelCase (name) {\n    return name\n      // insert a hyphen between lower & upper\n      .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n      // space before last upper in a sequence followed by lower\n      .replace(/\\b([A-Z]+)([A-Z])([a-z0-9])/, '$1 $2$3')\n      // replace spaces with hyphens\n      .replace(/ /g, '-')\n      // lowercase\n      .toLowerCase();\n  }\n  function functionName (func) {\n    return typeof func === 'function' ? \n            func.toString().replace(/^[\\S\\s]*?function\\s*/, \"\").replace(/[\\s\\(\\/][\\S\\s]+$/, \"\") :\n            undefined;\n  }\n  if (!window.Define) {\n    Object.defineProperty(window, 'Define', {\n      get: function () {\n        return function (id) {\n          return this.PolymerElements ? this.PolymerElements[id] : undefined;\n        };\n      },\n      set: function (proto) {\n        /*\n        Patterns:\n          a) template id {}\n          b) template id {is}\n          c) document.template id {is}\n          d) template {is}\n          e) {is}\n          f) class Is {template}\n          g) {is,template}\n        */\n        var id;\n        var classId;\n        var obj;\n        var name = proto.name || functionName(proto);\n        var current; // currentScript\n        var template = null;\n        var previous; // previousSibling template\n        var cousin; // dom5.serialize output support\n\n        current = (!window.HTMLImports || HTMLImports.useNative) ? document.currentScript\n                                        : document._currentScript;\n\n        previous = current.previousSibling;\n        while (previous && !previous.tagName) {\n          previous = previous.previousSibling;\n        }\n        if (previous && previous.tagName !== 'template'.toUpperCase()) {\n          previous = null;\n        }\n        if (!previous) {\n          // search for cousin template\n          if (current.parentNode.tagName === 'body'.toUpperCase()) {\n            previous = current.parentNode.previousSibling;\n            while (previous && !previous.tagName) {\n              previous = previous.previousSibling;\n            }\n            if (previous && previous.tagName.toLowerCase() === 'head') {\n              for (var i = 0; i < previous.childNodes.length; i++) {\n                if (previous.childNodes[i].tagName === 'template'.toUpperCase()) {\n                  cousin = previous.childNodes[i];\n                  break;\n                }\n              }\n            }\n          }\n          if (cousin) {\n            previous = cousin;\n          }\n          else {\n            previous = null;\n          }\n        }\n\n        if (!proto.is && (!name || name === 'class' || name === 'Define')) {\n          if (previous) {\n            id = previous.id;\n            if (id) {\n              // Pattern a)\n              template = previous;\n              proto.is = id;\n            }\n          }\n        }\n        else {\n          if (proto.is) {\n            id = proto.is;\n          }\n          else if (typeof proto === 'function' && name) {\n            // ES6 class\n            id = UncamelCase(name);\n            classId = name;\n          }\n          var rawTemplate = proto._rawTemplate || proto.template;\n          if (!template && rawTemplate && !name) {\n            // Pattern g)\n            template = rawTemplate;\n          }\n          if (!rawTemplate && !template) {\n            // Pattern b), c)\n            template = current.ownerDocument\n                        .querySelector('template[id=' + id + ']') || \n                       document.querySelector('template[id=' + id + ']');\n          }\n          if (!rawTemplate && !template && previous && !previous.id) {\n            // Pattern d)\n            template = previous;\n            template.id = id;\n          }\n          else {\n            // Pattern e)\n          }\n        }\n\n        if (!id) {\n          throw 'Custom element name is not defined';\n        }\n\n        // register dom-module\n        if (template) {\n          var domModule = document.createElement('dom-module');\n          let assetUrl = new URL(current.baseURI ||\n            (window.currentImport ? window.currentImport.baseURI : null) ||\n            current.ownerDocument.baseURI);\n          domModule.appendChild(template);\n          domModule.setAttribute('assetpath', \n                                  assetUrl.pathname.indexOf('.vulcanized.') < 0 ?\n                                    assetUrl.pathname :\n                                      template.hasAttribute('assetpath') ? \n                                      template.getAttribute('assetpath') : \n                                      assetUrl.pathname);\n          domModule.register(id);\n          proto._template = template;\n          proto.finalize();\n        }\n\n        // register Custom Element\n        this.PolymerElements = this.PolymerElements || {};\n        classId = classId || id.split('-').map(function (word) {\n          return word[0].toUpperCase() + word.substr(1);\n        }).join('');\n        if (this.PolymerElements[id]) {\n          console.warn('Discarding duplicate regitration of custom element ' + id);\n        }\n        else {\n          window[classId] = proto;\n          customElements.define(id, proto);\n          this.PolymerElements[classId] = this.PolymerElements[id];\n        }\n        return this.PolymerElements[id];\n      }\n    });\n  }\n})();\nDefine = class I18nThinElement extends Mixins.Logger(BaseElements.I18nElement) {\n};\nPolymer(Mixins.I18nBehavior({\n  is: 'i18n-legacy-element'\n}));"],"sourceRoot":"/source/"}