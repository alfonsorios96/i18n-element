{"version":3,"sources":["imports.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","_typeof","Symbol","iterator","obj","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","window","Polymer","version","modules","lcModules","findModule","id","toLowerCase","DomModule","_HTMLElement","this","apply","arguments","register","querySelector","console","warn","_styleOutsideTemplateCheck","selector","m","HTMLElement","customElements","define","CaseMap","_caseMap","_rx","dashToCamel","camelToDash","dashToCamelCase","dash","indexOf","replace","toUpperCase","camelToDashCase","camel","p","Element","matchesSelector","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","Utils","mixin","source","extend","api","n","n$","getOwnPropertyNames","copyOwnProperty","name","pd","getRootNode","node","parentNode","cachingMixin","base","__mixinApplications","WeakMap","application","set","dedupingMixin","baseMap","__mixinMap","extended","Map","importHref","href","onload","onerror","optAsync","l","document","createElement","rel","Boolean","setAttribute","e","HTMLImports","whenReady","setTimeout","head","appendChild","createNodeEventHandler","context","eventName","methodName","_rootDataHost","handler","detail","EventListeners","_superClass","_addEventListenerToNode","addEventListener","removeEventListener","resolveCss","cssText","ownerDocument","CSS_URL_RX","pre","url","post","resolve","resolveAttrs","element","URL_ATTRS","a","at","v","a$","localName","attributes","search","BINDING_RX","ABS_URL","test","resolver","getUrlResolver","resolveUrl","baseUri","tempDoc","implementation","createHTMLDocument","tempDocBase","__urlResolver","*","form","ResolveUrl","parseTemplateAnnotations","template","content","_content","_notes","currentTemplate","parseNodeAnnotations","hasAttribute","list","stripWhiteSpace","nodeType","Node","TEXT_NODE","parseTextNodeAnnotation","parseElementAnnotations","parseBindings","text","parts","lastIndex","bindingRegex","exec","index","push","literal","slice","mode","negate","trim","customEvent","notifyEvent","colon","substring","compoundIndex","event","literalFromParts","s","textContent","note","bindings","kind","isCompound","events","insertionPointTag","_hasInsertionPoint","parseChildNodesAnnotations","parseNodeAttributeAnnotations","prepElement","root","firstChild","t","is","getAttribute","removeAttribute","replaceChild","parseTemplate","next","nextSibling","removeChild","childAnnotation","createDocumentFragment","emptyArray","templateContent","annotation","attrs","Array","b","parseNodeAttributeAnnotation","origName","propertyName","IDENT","NUMBER","SQUOTE_STRING","DQUOTE_STRING","STRING","ARGUMENT","ARGUMENTS","ARGUMENT_LIST","BINDING","OPEN_BRACKET","CLOSE_BRACKET","NEGATE","EXPRESSION","RegExp","Annotations","_superClass2","_findTemplateAnnotatedNode","applyIdToMap","inst","map","dom","applyEventListener","host","j","e$","_addMethodEventListenerToNode","applyTemplateContent","TemplateStamp","_Polymer$Annotations","_this4","$","HTMLTemplateElement","decorate","notes","_parseTemplateAnnotations","importNode","__noInsertionPoint","Path","path","dotIndex","isDeep","isAncestor","isDescendant","translate","newBase","normalize","split","isArray","args","toString","join","info","prop","part","last","saveAccessorValue","model","nativeProperties","__data","_setPendingProperty","__dataProto","hasOwnProperty","proto","PropertyAccessors","_superClass3","_this5","_initializeProperties","__dataPending","__dataOld","__dataInvalid","readOnly","_setProperty","_invalidateProperties","old","_shouldPropChange","_this6","Promise","then","_flushProperties","oldProps","changedProps","_propertiesChanged","currentProps","caseMap","Attributes","_superClass4","_this7","__serializing","attribute","_valueToNodeAttribute","type","_deserializeAttribute","str","_serializeAttribute","Date","JSON","stringify","x","Number","parse","String","ensureOwnMappedArray","effects","runEffects","fx","fn","runObserverEffect","runNotifyEffect","_dispatchNotifyingEvent","CustomEvent","runReflectEffect","_propertyToAttribute","attrName","runMultiObserverEffect","runMethodEffect","runComputedEffect","result","computedProp","methodInfo","_setPropertyFromComputation","bindTemplate","TYPES","PROPAGATE","processAnnotations","binding","b$","shouldAddListener","addAnnotatedListener","addAnnotationEffect","signature","addAnnotationMethodEffect","_addPropertyEffect","runAnnotationEffect","_nodes","_hasPropertyEffect","_setPropertyToNodeFromAnnotation","applyAnnotationValue","computeAnnotationValue","storage","__dataCompoundStorage","createMethodEffect","runAnnotationMethodEffect","val","_processed","k","parseMethod","rootProperty","pp","_hostProps","discoverTemplateHostProps","concat","p$","kk","tpp","Base","effect","_bindListeners","setupBindListeners","addNotifyListener","handleNotification","targetPath","_setPropertyFromNotification","sig","effectFn","dynamic","dynamicFn","arg","marshalArgs","expression","match","static","parseArgs","argList","rawArg","parseArg","fc","structured","wildcard","data","values","baseChanged","setupBindings","nodes","__dataHost","setupCompoundBinding","literals","notifySplices","array","splices","change","indexSplices","splicesPath","notifySplice","added","removed","addedCount","upper","ANY","COMPUTE","REFLECT","NOTIFY","OBSERVE","READ_ONLY","PropertyEffects","_Polymer$TemplateStam","_this8","_asyncEffects","__dataInitialized","__dataPendingClients","__dataFromAbove","__dataLinkedPaths","__propertyEffects","_createPropertyAccessor","hasEffect","isPath","fromAbove","ready","_setupBindings","to","from","_hasReadOnlyEffect","_setPathOrUnmanagedProperty","dispatchEvent","len","_len","items","_key","ret","hadLength","pop","start","deleteCount","Math","floor","_len2","_key2","splice","shift","_len3","_key3","unshift","privateSetter","attr","Error","runComputedEffects","PROPERTY_EFFECT_TYPES","inputProps","computedProps","utils","computeLinkedPaths","links","link","notifyProperties","runId","_runId","__dataInterim","__dataInterimOld","notified","notifyEffects","effectUid","runEffectsForProperty","notifyPath","setProperties","options","ran","fxs","lastRun","BatchedEffects","_Polymer$PropertyEffe","_this9","_flushClients","_enqueueClient","queueProperty","client","clients","forEach","StyleGather","MODULE_STYLES_SELECTOR","INCLUDE_ATTR","_importModule","moduleId","cssFromModules","moduleIds","warnIfNotFound","cssFromModule","_cssText","cssFromElement","querySelectorAll","include","__appliedElement","body","StyleUtil","isTargetedBuild","buildType","ShadyDOM","inUse","cssBuildTypeForModule","module","dm","getCssBuildType","flattenProperties","flattenedProps","o","ElementMixin","_Polymer$BatchedEffec","PolymerElement","_this10","telemetry","instanceCount","hostStack","registerHost","properties","finalized","superProto","superCtor","finalize","config","_ownConfig","_finalizeConfig","cloneNode","_finalizeTemplate","_createPropertyFromConfig","observers","_createMethodObserver","style","insertBefore","ShadyCSS","prepareTemplate","_bindTemplate","_template","__ownConfig","__flattenedProperties","_flattenedProperties","_observedAttributes","_addPropertiesToAttributes","_finalized","_isPropertyPending","computed","_createReadOnlyProperty","_hasComputedEffect","_createComputedProperty","reflectToAttribute","_hasReflectEffect","_createReflectedProperty","notify","_hasNotifyEffect","_createNotifyingProperty","observer","_createObservedProperty","isEmpty","updateStyles","beginHosting","_stampTemplate","_attachDom","endHosting","attachShadow","shadowRoot","_attributeToProperty","applyStyle","assetPath","baseURI","stack","stackLen","registrations","_regLog","log","dumpRegistrations","userPolymer","klass","Class","Async","_currVal","_lastVal","_callbacks","_twiddleContent","_twiddle","createTextNode","run","callback","waitTime","cancel","handle","clearTimeout","idx","_atEndOfMicrotask","cb","flush","takeRecords","MutationObserver","observe","characterData","Debouncer","boundFlush","go","wait","h","finish","isActive","debounce","debouncer","setupTeardownMouseCanceller","setup","en","MOUSE_EVENTS","mouseCanceller","ignoreMouse","IS_TOUCH_ONLY","POINTERSTATE","mouse","mouseIgnoreJob","unset","MOUSE_TIMEOUT","hasLeftMouseButton","ev","buttons","MouseEvent","MOUSE_HAS_BUTTONS","MOUSE_WHICH_TO_BUTTONS","which","button","isSyntheticClick","gestures","findOriginalTarget","bcr","getBoundingClientRect","pageX","y","pageY","left","right","top","bottom","firstTouchAction","ta","composedPath","TOUCH_ACTION","trackDocument","stateObj","movefn","upfn","untrackDocument","wrap","HAS_NATIVE_TA","touchAction","GESTURE_KEY","HANDLED_OBJ","TAP_DISTANCE","TRACK_DISTANCE","TRACK_LENGTH","navigator","userAgent","mouseEvent","skip","preventDefault","stopPropagation","touch","scrollDecided","recognizers","deepTargetFind","elementFromPoint","handleNative","handled","currentTarget","gobj","gs","changedTouches","touches","identifier","handleTouchAction","rootTarget","r","flow","reset","clientX","clientY","prevent","dx","abs","dy","cancelable","addListener","evType","add","removeListener","remove","recognizer","deps","dep","gd","_count","setTouchAction","recog","emits","findRecognizerByEvent","evName","fire","Event","bubbles","composed","defaultPrevented","se","sourceEvent","end","mousedown","touchstart","touchend","state","started","moves","addMove","move","hasMovedEnough","ct","touchmove","secondlast","lastmove","ddx","ddy","hover","NaN","save","click","forward","isNaN","Gestures","GestureEventListeners","_Polymer$EventListene","AsyncRender","_scheduled","_beforeRenderQueue","_afterRenderQueue","beforeRender","_schedule","afterRender","requestAnimationFrame","_flushQueue","flushBeforeRender","flushAfterRender","queue","RenderStatus","afterNextRender","newSplice","EDIT_LEAVE","EDIT_UPDATE","EDIT_ADD","EDIT_DELETE","ArraySplice","calcEditDistances","current","currentStart","currentEnd","oldStart","oldEnd","rowCount","columnCount","distances","equals","north","west","spliceOperationsFromEditDistances","edits","northWest","min","reverse","calcSplices","prefixCount","suffixCount","minLength","sharedPrefix","sharedSuffix","ops","oldIndex","searchLength","index1","index2","count","calculateSplices","previous","currentValue","previousValue","isSlot","getEffectiveNodes","assignedNodes","flatten","childNodes","reduce","forwardMethods","methods","_loop","method","forwardReadOnlyProperties","_loop2","forwardProperties","_loop3","effectiveNodesObserverPromise","EffectiveNodesObserver","_this12","effectiveNodes","scheduled","_boundSchedule","schedule","connect","_this13","listenSlots","children","shadyChildrenObserver","observeChildren","mutations","processMutations","nativeChildrenObserver","childList","connected","unlistenSlots","unobserveChildren","disconnect","_this14","processSlotMutations","mutation","addedNodes","removedNodes","newNodes","nodeList","DomApi","patch","observerHandle","contains","doc","ip$","assignedSlot","externalNode","deep","Document","c","c$","getEffectiveChildNodes","ELEMENT_NODE","EventApi","ctor","__domApi","Settings","useShadow","WebComponents","readyState","_warn","warning","LegacyElementMixin","_Polymer$GestureEvent","LegacyElement","_this15","created","_applyConfigListeners","listeners","_ensureConfigAttributes","hostAttributes","_ensureAttribute","_applyListeners","_ensureAttributes","isAttached","attached","detached","attributeChanged","_valueToAttribute","inherited","hbl","__boundListeners","bl","_removeEventListenerFromNode","direction","slctr","forceRender","queryDistributedElements","filter","cn","tc","COMMENT_NODE","getDistributedNodes","getContentChildNodes","container","shouldObserve","getComputedStyleValue","jobName","_debouncers","tag","elt","bool","classList","transformText","webkitTransform","transform","z","arrayOrPath","item","arr","DocumentFragment","metaProps","beforeRegister","registered","behaviors","mixinBehaviors","MixinBehavior","flattenBehaviors","behavior","PolymerGenerated","_Base","_this16","__registered","_invokeFunction","_applyConfigMetaDataFrom","getNativeConstructor","DomBind","_Polymer$BatchedEffec2","render","_removeChildren","_children","_insertChildren","PatchedHTMLTemplateElement","_newInstance","TemplateInstanceBase","_class","DataTemplate","_Polymer$BatchedEffec3","Templatizer","__templatizerClass","baseClass","_createTemplatizerClass","_prepHostProperties","__template","instCount","_this20","templateHost","_configureProperties","_templateInstance","__hideTemplateChildren__","_showHideChildren","hide","__polymerTextContent__","__polymerDisplay__","display","iprop","instanceProps","hprop","_this21","_prepInstanceProperties","fwdHostPropToInstance","upgradeTemplate","hostProps","_createHP2IEffector","hostProp","fwdInstancePropToHost","_createIP2HEffector","_createHP2HEffector","instProp","el","_debouncerQueue","templatizer","DomRepeat","_Polymer$Element","_this22","_instances","_pool","_limit","Infinity","_renderDebouncer","as","indexAs","itemsIndexAs","sort","delay","renderedItemCount","initialCount","targetFramerate","_targetFrameTime","__isDetached","_detachInstance","_attachInstance","_ctor","__domRepeat","templatize","repeater","i$","forwardProperty","dataHost","_getRootDataHost","_sortFn","_needFullRefresh","_debounceRender","_render","_filterFn","rate","ceil","_chunkCount","_lastChunkTime","performance","now","_requestRenderChunk","_this23","_renderChunk","currChunkTime","ratio","round","_observePaths","_forwardItemPath","_initializeChunking","paths","enqueueDebouncer","ensureTemplatized","_applyFullRefresh","_setRenderedItemCount","_tryRenderChunk","_this24","isntIdxToItemsIdx","itemsIdxToInstIdx","_itemsIdxToInstIdx","instIdx","limit","itemIdx","flushProperties","_insertInstance","_detachAndRemoveInstance","_stampInstance","beforeRow","beforeNode","hidden","dot","itemsIdx","_checkObservedPaths","modelForElement","DomIf","_Polymer$Element2","_this25","if","restamp","DOCUMENT_FRAGMENT_NODE","_teardownInstance","_ensureInstance","_instance","_lastIf","__domIf","domif","lastChild","previousSibling","CustomStyle","processHook","_bindingRegex_patch","_bindingRegex_1_2_4","_bindingRegex_1_2_4_patched","_bindingRegex","xhr","XMLHttpRequest","response","status","statusText","completes","reject","resolveCompletes","rejectCompletes","bind","progress","aborted","errored","timedOut","succeeded","send","_setProgress","lengthComputable","loaded","total","error","_setErrored","_updateStatus","_setTimedOut","_setResponse","parseResponse","open","async","acceptType","json","html","xml","arraybuffer","handleAs","headers","newHeaders","keys","requestHeader","_error","setRequestHeader","timeout","jsonPrefix","responseType","_responseType","_jsonPrefix","withCredentials","_encodeBodyObject","preferResponseText","prefixLen","responseText","_","responseXML","message","abort","_setAborted","contentType","bodyObj","_wwwFormUrlEncode","pieces","_wwwFormUrlEncodePiece","encodeURIComponent","_setStatus","_setStatusText","params","sync","auto","verbose","lastRequest","loading","lastResponse","lastError","activeRequests","debounceDuration","_boundHandleResponse","_handleResponse","queryString","param","queryParts","requestUrl","bindingChar","requestHeaders","header","toRequestOptions","generateRequest","request","requestOptions","_handleError","_discardRequest","_setLastRequest","_setLoading","_setLastResponse","_setLastError","requestIndex","_requestOptionsChanged","_setupIntlPolyfill","intlLibraryUrl","Intl","intlLibraryLoadingStatus","IntlPolyfill","intlLibraryScript","intlLibraryLoaded","_setupIntlPolyfillLocale","locale","script","intlScript","supported","NumberFormat","supportedLocalesOf","localeMatcher","fallbackLanguages","_enumerateFallbackLanguages","enSupport","DEFAULT_LANG","anotherIntlLocaleLoadedBindThis","anotherIntlLocaleLoadErrorBindThis","fallbackSupport","intlLocaleLoadedBindThis","intlLocaleLoadErrorBindThis","libraryLoadedBindThis","lang","extLangCode","scriptCode","countryCode","isExtLangCode","isScriptCode","isCountryCode","_setupIntlPolyfillCalled","_lang","raw","offset","rawNumber","number","formatted","_setupObservers","textNode","_textMutated","attributeFilter","nodeObserver","observeNodes","attributeName","_rawChanged","_langChanged","_optionsChanged","_onOptionsPropertyChanged","_offsetChanged","_formatNumber","effectiveLang","format","_cp","ord","v0","plurals","amd","exports","af","ak","am","ar","t0","n100","asa","ast","az","i10","i100","i1000","be","n10","bem","bez","bg","bh","bm","bn","bo","br","n1000000","brx","bs","f","f10","f100","ca","ce","cgg","chr","ckb","cs","cy","da","de","dsb","dv","dz","ee","eo","es","et","eu","fa","ff","fi","fil","fo","fr","fur","fy","ga","gl","gsw","gu","guw","gv","ha","haw","he","hi","hr","hsb","hu","hy","ig","ii","in","it","iu","iw","ja","jbo","jgo","ji","jmc","jv","jw","ka","kab","kaj","kcg","kde","kea","kkj","kl","km","kn","ko","ks","ksb","ksh","ku","kw","ky","lag","lb","lg","lkt","ln","lo","lt","lv","mas","mg","mgo","mk","ml","mn","mo","mr","ms","mt","my","nah","naq","nb","nd","ne","nl","nn","nnh","no","nqo","nr","nso","ny","nyn","om","or","os","pa","pap","pl","prg","ps","pt","pt-PT","rm","ro","rof","ru","rwk","sah","saq","sdh","seh","ses","sg","sh","shi","si","sk","sl","sma","smi","smj","smn","sms","sn","so","sq","sr","ss","ssy","st","sv","sw","syr","te","teo","th","ti","tig","tk","tl","tn","tr","ts","tzm","ug","uk","ur","uz","ve","vi","vo","vun","wa","wae","wo","xh","xog","yi","yo","zh","zu","paramAttribute","paramFormat","observeParams","_setupParams","elements","needParamObservation","tagName","_templateMutated","templateElement","templateTextNode","listen","_paramFormatChanged","oldParamFormat","lastTemplateText","_paramAttributeChanged","oldParamAttribute","_getPluralCategory","category","_selectTemplateText","templateText","templateObject","ex","other","paramPlaceholder","tmpNode","shadowDomV1","shadyDomV1","innerHTML","useRaw","autoSaveDisabled","errorMessage","_loaded","_boundHandleStorage","_handleStorage","_load","_trySaveValue","_doNotSave","_debounceReload","reload","externalChange","localStorage","getItem","removeItem","setItem","defaultLang","hasNative","currentScript","_currentScript","domModule","registerI18nPreference","persist","isReady","_observe","language","browserLanguage","_disconnect","_onLoadEmptyStorage","isInitialized","_onLoadStorage","_onPersistChange","_onStorageValueChange","_htmlLangMutationObserverCallback","_htmlLangMutationObserver","_htmlLangMutationObserverCallbackBindThis","sharedData","BehaviorsStore","_I18nAttrRepo","_created","customAttributes","_traverseTemplateTree","__ready__","standardTemplate","standard","isLocalizableAttribute","_getType","_matchAttribute","_compareSelectors","s1","s2","name1","name2","localeCompare","setLocalizableAttribute","cursor","prev","selectors","","registerLocalizableAttributes","textAttr","nodeName","deepcopy","u","__esModule","Buffer","isBuffer","getOwnPropertySymbols","getKeys","getSymbols","getTime","lastIndexOf","copy","copyValue","copyCollection","d","ShadowDOMPolyfill","isStandardPropertyConfigurable","langPropertyDescriptor","extraWhiteSpaceNode","bundles","bundleFetchingInstances","startUrl","location","pathname","localesPath","attributesRepository","userPreference","debuglog","I18nControllerBehavior","isI18nController","masterBundles","I18nBehavior","templateDefaultLang","observeHtmlLang","lang-updated","_getBundle","resolved","tryLang","fallbackLanguageList","_fetchStatus","lastLang","_handleLangAttributeChange","oldValue","oldLang","ajaxLang","_fetchLanguage","_updateEffectiveLang","targetLang","_fetchBundle","nextFallbackLanguage","fetchingInstance","_constructBundle","_forwardLangEventBindThis","_forwardLangEvent","_handleBundleFetchedBindThis","_handleBundleFetched","ajax","_handleResponseBindFetchingInstance","_handleErrorBindFetchingInstance","skipFetching","bundle","_deepMap","success","rawResponses","_observeHtmlLangChanged","_htmlLangObserver","_handleHtmlLangChange","baseLang","_constructDefaultBundle","_id","parentTemplate","localizableText","jsonData","_traverseAttributes","messageId","attrId","isLocalizable","dummy","parameterized","processed","parsed","_generateMessageId","_setBundleValue","setAttributeNode","span","templateTextParams","whiteSpaceElements","isWhiteSpace","isCompoundAnnotatedNode","child","parsedValue","parsedValue2","childElementCount","_isCompoundAnnotatedText","childStatus","templateNonCommentChildNodes","templateChild","hasText","hasCompoundAnnotatedText","hasTextChild","hasCompoundAnnotatedChildNode","hasGrandChildren","grandChild","_hasAnnotatedText","_compoundAnnotationToSpan","_child","templateNode","childTextNode","currentList","DOCUMENT_NODE","childNode","messageIdPath","substr","table","i18nFormat","_templateLocalizable","useNative","assetUrl","URL","currentImport","_propertyEffects","attributeOldValue","_onDomChangeBindThis","_onDomChange","__data__","Bind","_createAccessors","_properties","_I18nBehavior","i18nAttrRepos","domModules","repo","i18nBehaviorDomBind","i18nDomBind","domBind","domBindProto","_Polymer","_Base2","_this26","BaseElements","Mixins","Localizable","_Polymer$Utils$MixinB","_uncamelCase","_i18nPreprocess","_rawTemplate","__templateLocalizable","Logger","_base","_class2","I18nDomBind","_Mixins$Localizable","stamped","LocalizableElement","_Mixins$Logger","I18nSubclassElement","_Mixins$Logger2","I18nElement","UncamelCase","functionName","func","_Define","Define","classId","cousin","isNoIdPrevious","rawTemplate","word","I18nBehaviorDemo","_Mixins$Localizable2","_updateParameters","recipientsLength","recipientsIndex","rawRecipients","recipients","_getRecipients","markdown","_getMarkDown","langName","_getLangName","langNames","stringifiedUser","_getStringifiedUser","sender","stringifiedRecipients","_getStringifiedRecipients","serializedText","user","_jsonStringify","langIndex","langList"],"mappings":"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","file":"../imports.js","sourcesContent":["window.Polymer = window.Polymer || {};\n  window.Polymer.version = '2.0-preview';\n(function() {\n\n  var modules = {};\n  var lcModules = {};\n  var findModule = function(id) {\n    return modules[id] || lcModules[id.toLowerCase()];\n  };\n\n  /**\n   * The `dom-module` element registers the dom it contains to the name given\n   * by the module's id attribute. It provides a unified database of dom\n   * accessible via any dom-module element. Use the `import(id, selector)`\n   * method to locate dom within this database. For example,\n   *\n   * <dom-module id=\"foo\">\n   *   <img src=\"stuff.png\">\n   * </dom-module>\n   *\n   * Then in code in some other location that cannot access the dom-module above\n   *\n   * var img = document.createElement('dom-module').import('foo', 'img');\n   *\n   */\n  class DomModule extends HTMLElement {\n\n    static get observedAttributes() { return ['id'] }\n\n    attributeChangedCallback() {\n      this.register();\n    }\n\n    _styleOutsideTemplateCheck() {\n      if (this.querySelector('style')) {\n        console.warn('dom-module %s has style outside template', this.id);\n      }\n    }\n\n    /**\n     * Registers the dom-module at a given id. This method should only be called\n     * when a dom-module is imperatively created. For\n     * example, `document.createElement('dom-module').register('foo')`.\n     * @method register\n     * @param {String} id The id at which to register the dom-module.\n     */\n    register(id) {\n      id = id || this.id;\n      if (id) {\n        this.id = id;\n        // store id separate from lowercased id so that\n        // in all cases mixedCase id will stored distinctly\n        // and lowercase version is a fallback\n        modules[id] = this;\n        lcModules[id.toLowerCase()] = this;\n        this._styleOutsideTemplateCheck();\n      }\n    }\n\n    /**\n     * Retrieves the dom specified by `selector` in the module specified by\n     * `id`. For example, this.import('foo', 'img');\n     * @method register\n     * @param {String} id\n     * @param {String} selector\n     * @return {Object} Returns the dom which matches `selector` in the module\n     * at the specified `id`.\n     */\n    import(id, selector) {\n      if (id) {\n        var m = findModule(id);\n        if (m && selector) {\n          return m.querySelector(selector);\n        }\n        return m;\n      }\n    }\n\n  }\n\n  customElements.define('dom-module', DomModule);\n\n  // export\n  Polymer.DomModule = new DomModule();\n\n  Polymer.DomModule.modules = modules;\n\n})();\nPolymer.CaseMap = {\n\n    _caseMap: {},\n    _rx: {\n      dashToCamel: /-[a-z]/g,\n      camelToDash: /([A-Z])/g\n    },\n\n    dashToCamelCase: function(dash) {\n      return this._caseMap[dash] || (\n        this._caseMap[dash] = dash.indexOf('-') < 0 ? dash : dash.replace(this._rx.dashToCamel,\n          function(m) {\n            return m[1].toUpperCase();\n          }\n        )\n      );\n    },\n\n    camelToDashCase: function(camel) {\n      return this._caseMap[camel] || (\n        this._caseMap[camel] = camel.replace(this._rx.camelToDash, '-$1').toLowerCase()\n      );\n    }\n\n  };\n(function() {\n\n  'use strict';\n\n  var p = Element.prototype;\n   var matchesSelector = p.matches || p.matchesSelector ||\n     p.mozMatchesSelector || p.msMatchesSelector ||\n     p.oMatchesSelector || p.webkitMatchesSelector;\n\n  Polymer.Utils = {\n\n    /**\n     * Copies props from a source object to a target object.\n     *\n     * Note, this method uses a simple `for...in` strategy for enumerating\n     * properties.  To ensure only `ownProperties` are copied from source\n     * to target and that accessor implementations are copied, use `extend`.\n     *\n     * @method mixin\n     * @param {Object} target Target object to copy properties to.\n     * @param {Object} source Source object to copy properties from.\n     * @return {Object} Target object that was passed as first argument.\n     */\n    mixin(target, source) {\n      for (var i in source) {\n        target[i] = source[i];\n      }\n      return target;\n    },\n\n    /**\n     * Copies own properties (including accessor descriptors) from a source\n     * object to a target object.\n     *\n     * @method extend\n     * @param {Object} prototype Target object to copy properties to.\n     * @param {Object} api Source object to copy properties from.\n     * @return {Object} prototype object that was passed as first argument.\n     */\n    extend(prototype, api) {\n      if (prototype && api) {\n        var n$ = Object.getOwnPropertyNames(api);\n        for (var i=0, n; (i<n$.length) && (n=n$[i]); i++) {\n          this.copyOwnProperty(n, api, prototype);\n        }\n      }\n      return prototype || api;\n    },\n\n    copyOwnProperty(name, source, target) {\n      var pd = Object.getOwnPropertyDescriptor(source, name);\n      if (pd) {\n        Object.defineProperty(target, name, pd);\n      }\n    },\n\n    // only needed for v0 native ShadowDOM support\n    getRootNode(node) {\n      if (node.getRootNode) {\n        return node.getRootNode();\n      }\n      if (!node) {\n        return null;\n      }\n      while(node && node.parentNode) {\n        node = node.parentNode;\n      }\n      return node;\n    },\n\n    matchesSelector(node, selector) {\n      return matchesSelector.call(node, selector);\n    },\n\n    cachingMixin(mixin) {\n      return function(base) {\n        if (!mixin.__mixinApplications) {\n          mixin.__mixinApplications = new WeakMap();\n        }\n        let application = mixin.__mixinApplications.get(base);\n        if (!application) {\n          application = mixin(base);\n          mixin.__mixinApplications.set(base, application);\n        }\n        return application;\n      }\n    },\n\n    dedupingMixin(mixin) {\n      mixin = this.cachingMixin(mixin);\n      return function(base) {\n        let baseMap = base.__mixinMap;\n        if (baseMap && baseMap.get(mixin)) {\n          return base;\n        } else {\n          let extended = mixin(base);\n          extended.__mixinMap = new Map(baseMap);\n          extended.__mixinMap.set(mixin, true);\n          return extended;\n        }\n      }\n    },\n\n    /**\n     * Convenience method for importing an HTML document imperatively.\n     *\n     * This method creates a new `<link rel=\"import\">` element with\n     * the provided URL and appends it to the document to start loading.\n     * In the `onload` callback, the `import` property of the `link`\n     * element will contain the imported document contents.\n     *\n     * @method importHref\n     * @param {string} href URL to document to load.\n     * @param {Function} onload Callback to notify when an import successfully\n     *   loaded.\n     * @param {Function} onerror Callback to notify when an import\n     *   unsuccessfully loaded.\n     * @param {boolean} optAsync True if the import should be loaded `async`.\n     *   Defaults to `false`.\n     * @return {HTMLLinkElement} The link element for the URL to be loaded.\n     */\n    importHref(href, onload, onerror, optAsync) {\n      var l = document.createElement('link');\n      l.rel = 'import';\n      l.href = href;\n\n      optAsync = Boolean(optAsync);\n      if (optAsync) {\n        l.setAttribute('async', '');\n      }\n\n      var self = this;\n      if (onload) {\n        l.onload = function(e) {\n          // NOTE: Push load handler until after `HTMLImports.whenReady`,\n          // if available, to better coordinate with use of customElements\n          // polyfill's document upgrade ordering guarantees (ensures,\n          // for example, a dom-module for an element in an async import\n          // customizes before any elements matching a define call).\n          if (window.HTMLImports) {\n            // wait until any other pending imports are ready\n            HTMLImports.whenReady(function() {\n              // wait until the CustomElements polyfill has upgraded elements.\n              // (needed because CE's whenReady is installed afer this one)\n              setTimeout(function() {\n                onload.call(self, e);\n              });\n            });\n          } else {\n            onload.call(self, e);\n          }\n        }\n      }\n      if (onerror) {\n        l.onerror = function(e) {\n          onerror.call(self, e);\n        }\n      }\n      document.head.appendChild(l);\n      return l;\n    }\n\n  };\n\n})();\n(function() {\n\n  'use strict';\n\n  function createNodeEventHandler(context, eventName, methodName) {\n    context = context._rootDataHost || context;\n    var handler = function(e) {\n      if (context[methodName]) {\n        context[methodName](e, e.detail);\n      } else {\n        console.warn('listener method `' + methodName + '` not defined');\n      }\n    };\n    return handler;\n  }\n\n  Polymer.EventListeners = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class EventListeners extends superClass {\n\n      _addMethodEventListenerToNode(node, eventName, methodName, context) {\n        context = context || node;\n        var handler = createNodeEventHandler(context, eventName, methodName);\n        this._addEventListenerToNode(node, eventName, handler);\n        return handler;\n      }\n\n      _addEventListenerToNode(node, eventName, handler) {\n        node.addEventListener(eventName, handler);\n      }\n\n      _removeEventListenerFromNode(node, eventName, handler) {\n        node.removeEventListener(eventName, handler);\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n    // path fixup for urls in cssText that's expected to\n    // come from a given ownerDocument\n    function resolveCss(cssText, ownerDocument) {\n      return cssText.replace(CSS_URL_RX, function(m, pre, url, post) {\n        return pre + '\\'' +\n          resolve(url.replace(/[\"']/g, ''), ownerDocument) +\n          '\\'' + post;\n      });\n    }\n\n    // url fixup for urls in an element's attributes made relative to\n    // ownerDoc's base url\n    function resolveAttrs(element, ownerDocument) {\n      for (var name in URL_ATTRS) {\n        var a$ = URL_ATTRS[name];\n        for (var i=0, l=a$.length, a, at, v; (i<l) && (a=a$[i]); i++) {\n          if (name === '*' || element.localName === name) {\n            at = element.attributes[a];\n            v = at && at.value;\n            if (v && (v.search(BINDING_RX) < 0)) {\n              at.value = (a === 'style') ?\n                resolveCss(v, ownerDocument) :\n                resolve(v, ownerDocument);\n            }\n          }\n        }\n      }\n    }\n\n    function resolve(url, ownerDocument) {\n      // do not resolve '#' links, they are used for routing\n      if (url && ABS_URL.test(url)) {\n        return url;\n      }\n      var resolver = getUrlResolver(ownerDocument);\n      resolver.href = url;\n      return resolver.href || url;\n    }\n\n    var tempDoc;\n    var tempDocBase;\n    function resolveUrl(url, baseUri) {\n      if (!tempDoc) {\n        tempDoc = document.implementation.createHTMLDocument('temp');\n        tempDocBase = tempDoc.createElement('base');\n        tempDoc.head.appendChild(tempDocBase);\n      }\n      tempDocBase.href = baseUri;\n      return resolve(url, tempDoc);\n    }\n\n    function getUrlResolver(ownerDocument) {\n      return ownerDocument.__urlResolver ||\n        (ownerDocument.__urlResolver = ownerDocument.createElement('a'));\n    }\n\n    var CSS_URL_RX = /(url\\()([^)]*)(\\))/g;\n    var URL_ATTRS = {\n      '*': ['href', 'src', 'style', 'url'],\n      form: ['action']\n    };\n    var ABS_URL = /(^\\/)|(^#)|(^[\\w-\\d]*:)/;\n    var BINDING_RX = /\\{\\{|\\[\\[/;\n\n    // exports\n    Polymer.ResolveUrl = {\n      resolveCss: resolveCss,\n      resolveAttrs: resolveAttrs,\n      resolveUrl: resolveUrl\n    };\n\n  })();\n/**\n * Scans a template to produce an annotation list that that associates\n * metadata culled from markup with tree locations\n * metadata and information to associate the metadata with nodes in an instance.\n *\n * Supported expressions include:\n *\n * Double-mustache annotations in text content. The annotation must be the only\n * content in the tag, compound expressions are not supported.\n *\n *     <[tag]>{{annotation}}<[tag]>\n *\n * Double-escaped annotations in an attribute, either {{}} or [[]].\n *\n *     <[tag] someAttribute=\"{{annotation}}\" another=\"[[annotation]]\"><[tag]>\n *\n * `on-` style event declarations.\n *\n *     <[tag] on-<event-name>=\"annotation\"><[tag]>\n *\n * Note that the `annotations` feature does not implement any behaviors\n * associated with these expressions, it only captures the data.\n *\n * Generated data-structure:\n *\n *     [\n *       {\n *         id: '<id>',\n *         events: [\n *           {\n *             name: '<name>'\n *             value: '<annotation>'\n *           }, ...\n *         ],\n *         bindings: [\n *           {\n *             kind: ['text'|'attribute'],\n *             mode: ['{'|'['],\n *             name: '<name>'\n *             value: '<annotation>'\n *           }, ...\n *         ],\n *         // TODO(sjmiles): this is annotation-parent, not node-parent\n *         parent: <reference to parent annotation object>,\n *         index: <integer index in parent's childNodes collection>\n *       },\n *       ...\n *     ]\n *\n * @class Annotations feature\n */\n(function() {\n\n  'use strict';\n\n  // null-array (shared empty array to avoid null-checks)\n  const emptyArray = [];\n\n  let bindingRegex = (function() {\n    let IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$\\\\-*]*' + ')';\n    let NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n    let SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n    let DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n    let STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n    let ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n    let ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n    let ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                  '(?:' + ARGUMENTS + '?' + ')' +\n                                '\\\\)\\\\s*' + ')';\n    let BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n    let OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n    let CLOSE_BRACKET = '(?:]]|}})';\n    let NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n    let EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n    return new RegExp(EXPRESSION, \"g\");\n  })();\n\n  let insertionPointTag = 'slot';\n  let currentTemplate;\n\n  function parseTemplateAnnotations(template) {\n    // TODO(kschaaf): File issue and/or remove when fixed\n    // hold a reference to content as _content to prevent odd Chrome gc issue\n    // nested templates also may receive their content as _content\n    let content = (template._content = template._content || template.content);\n    // since a template may be re-used, memo-ize notes.\n    if (!content._notes) {\n      content._notes = [];\n      // TODO(sorvell): whitespace and processAnnotations need to be factored\n      // into plugins\n      // TODO(kschaaf): template should be threaded through rather than implied state\n      currentTemplate = currentTemplate || template;\n      parseNodeAnnotations(content, content._notes,\n        template.hasAttribute('strip-whitespace'));\n    }\n    return content._notes;\n  }\n\n  // add annotations gleaned from subtree at `node` to `list`\n  function parseNodeAnnotations(node, list, stripWhiteSpace) {\n    return node.nodeType === Node.TEXT_NODE ?\n      parseTextNodeAnnotation(node, list) :\n        // TODO(sjmiles): are there other nodes we may encounter\n        // that are not TEXT_NODE but also not ELEMENT?\n        parseElementAnnotations(node, list, stripWhiteSpace);\n  }\n\n  // TODO(kschaaf): We could modify this to allow an escape mechanism by\n  // looking for the escape sequence in each of the matches and converting\n  // the part back to a literal type, and then bailing if only literals\n  // were found\n  function parseBindings(text) {\n    let parts = [];\n    let lastIndex = 0;\n    let m;\n    // Example: \"literal1{{prop}}literal2[[!compute(foo,bar)]]final\"\n    // Regex matches:\n    //        Iteration 1:  Iteration 2:\n    // m[1]: '{{'          '[['\n    // m[2]: ''            '!'\n    // m[3]: 'prop'        'compute(foo,bar)'\n    while ((m = bindingRegex.exec(text)) !== null) {\n      // Add literal part\n      if (m.index > lastIndex) {\n        parts.push({literal: text.slice(lastIndex, m.index)});\n      }\n      // Add binding part\n      // Mode (one-way or two)\n      let mode = m[1][0];\n      let negate = Boolean(m[2]);\n      let value = m[3].trim();\n      let customEvent, notifyEvent, colon;\n      if (mode == '{' && (colon = value.indexOf('::')) > 0) {\n        notifyEvent = value.substring(colon + 2);\n        value = value.substring(0, colon);\n        customEvent = true;\n      }\n      parts.push({\n        compoundIndex: parts.length,\n        value: value,\n        mode: mode,\n        negate: negate,\n        event: notifyEvent,\n        customEvent: customEvent\n      });\n      lastIndex = bindingRegex.lastIndex;\n    }\n    // Add a final literal part\n    if (lastIndex && lastIndex < text.length) {\n      let literal = text.substring(lastIndex);\n      if (literal) {\n        parts.push({\n          literal: literal\n        });\n      }\n    }\n    if (parts.length) {\n      return parts;\n    }\n  }\n\n  function literalFromParts(parts) {\n    let s = '';\n    for (let i=0; i<parts.length; i++) {\n      let literal = parts[i].literal;\n      s += literal || '';\n    }\n    return s;\n  }\n\n  // add annotations gleaned from TextNode `node` to `list`\n  function parseTextNodeAnnotation(node, list) {\n    let parts = parseBindings(node.textContent);\n    if (parts) {\n      // Initialize the textContent with any literal parts\n      // NOTE: default to a space here so the textNode remains; some browsers\n      // (IE) evacipate an empty textNode following cloneNode/importNode.\n      node.textContent = literalFromParts(parts) || ' ';\n      let note = {\n        bindings: [{\n          kind: 'text',\n          name: 'textContent',\n          parts: parts,\n          isCompound: parts.length !== 1\n        }]\n      };\n      list.push(note);\n      return note;\n    }\n  }\n\n  // add annotations gleaned from Element `node` to `list`\n  function parseElementAnnotations(element, list, stripWhiteSpace) {\n    let note = {\n      bindings: [],\n      events: []\n    };\n    if (element.localName === insertionPointTag) {\n      list._hasInsertionPoint = true;\n    }\n    parseChildNodesAnnotations(element, note, list, stripWhiteSpace);\n    // TODO(sjmiles): is this for non-ELEMENT nodes? If so, we should\n    // change the contract of this method, or filter these out above.\n    if (element.attributes) {\n      parseNodeAttributeAnnotations(element, note, list);\n      // TODO(sorvell): ad hoc callback for doing work on elements while\n      // leveraging annotator's tree walk.\n      // Consider adding an node callback registry and moving specific\n      // processing out of this module.\n      prepElement(element);\n    }\n    if (note.bindings.length || note.events.length || note.id) {\n      list.push(note);\n    }\n    return note;\n  }\n\n  // add annotations gleaned from children of `root` to `list`, `root`'s\n  // `note` is supplied as it is the note.parent of added annotations\n  function parseChildNodesAnnotations(root, note, list, stripWhiteSpace) {\n    if (root.firstChild) {\n      let node = root.firstChild;\n      let i = 0;\n      while (node) {\n        // BREAKME(kschaaf): pseudo-bc auto-wrapper for template type extensions\n        if (node.localName === 'template') {\n          let t = node;\n          let is = t.getAttribute('is');\n          // stamp `<dom-*>` elements\n          if (is && is.indexOf('dom-') === 0) {\n            t.removeAttribute('is');\n            node = t.ownerDocument.createElement(is);\n            root.replaceChild(node, t);\n            node.appendChild(t);\n            while(t.attributes.length) {\n              node.setAttribute(t.attributes[0].name, t.attributes[0].value);\n              t.removeAttribute(t.attributes[0].name);\n            }\n          }\n        }\n        if (node.localName === 'template' &&\n          !node.hasAttribute('preserve-content')) {\n          parseTemplate(node, i, list, note);\n        }\n        // collapse adjacent textNodes: fixes an IE issue that can cause\n        // text nodes to be inexplicably split =(\n        // note that root.normalize() should work but does not so we do this\n        // manually.\n        let next = node.nextSibling;\n        if (node.nodeType === Node.TEXT_NODE) {\n          let n = next;\n          while (n && (n.nodeType === Node.TEXT_NODE)) {\n            node.textContent += n.textContent;\n            next = n.nextSibling;\n            root.removeChild(n);\n            n = next;\n          }\n          // optionally strip whitespace\n          if (stripWhiteSpace && !node.textContent.trim()) {\n            root.removeChild(node);\n            // decrement index since node is removed\n            i--;\n          }\n        }\n        // if this node didn't get evacipated, parse it.\n        if (node.parentNode) {\n          let childAnnotation = parseNodeAnnotations(node, list,\n            stripWhiteSpace);\n          if (childAnnotation) {\n            childAnnotation.parent = note;\n            childAnnotation.index = i;\n          }\n        }\n        node = next;\n        i++;\n      }\n    }\n  }\n\n  // 1. Parse annotations from the template and memoize them on\n  //    content._notes (recurses into nested templates)\n  // 2. Remove template.content and store it in annotation list, where it\n  //    will be the responsibility of the host to set it back to the template\n  //    (this is both an optimization to avoid re-stamping nested template\n  //    children and avoids a bug in Chrome where nested template children\n  //    upgrade)\n  function parseTemplate(node, index, list, parent) {\n    let content = document.createDocumentFragment();\n    content._notes = parseTemplateAnnotations(node);\n    content.appendChild(node.content);\n    list.push({\n      bindings: emptyArray,\n      events: emptyArray,\n      templateContent: content,\n      parent: parent,\n      index: index\n    });\n  }\n\n  // add annotation data from attributes to the `annotation` for node `node`\n  // TODO(sjmiles): the distinction between an `annotation` and\n  // `annotation data` is not as clear as it could be\n  function parseNodeAttributeAnnotations(node, annotation) {\n    // Make copy of original attribute list, since the order may change\n    // as attributes are added and removed\n    let attrs = Array.prototype.slice.call(node.attributes);\n    for (let i=attrs.length-1, a; (a=attrs[i]); i--) {\n      let n = a.name;\n      let v = a.value;\n      let b;\n      // events (on-*)\n      if (n.slice(0, 3) === 'on-') {\n        node.removeAttribute(n);\n        annotation.events.push({\n          name: n.slice(3),\n          value: v\n        });\n      }\n      // bindings (other attributes)\n      else if ((b = parseNodeAttributeAnnotation(node, n, v))) {\n        annotation.bindings.push(b);\n      }\n      // static id\n      else if (n === 'id') {\n        annotation.id = v;\n      }\n    }\n  }\n\n  // construct annotation data from a generic attribute, or undefined\n  function parseNodeAttributeAnnotation(node, name, value) {\n    let parts = parseBindings(value);\n    if (parts) {\n      // Attribute or property\n      let origName = name;\n      let kind = 'property';\n      if (name[name.length-1] == '$') {\n        name = name.slice(0, -1);\n        kind = 'attribute';\n      }\n      // Initialize attribute bindings with any literal parts\n      let literal = literalFromParts(parts);\n      if (literal && kind == 'attribute') {\n        node.setAttribute(name, literal);\n      }\n      // Clear attribute before removing, since IE won't allow removing\n      // `value` attribute if it previously had a value (can't\n      // unconditionally set '' before removing since attributes with `$`\n      // can't be set using setAttribute)\n      if (node.localName === 'input' && origName === 'value') {\n        node.setAttribute(origName, '');\n      }\n      // Remove annotation\n      node.removeAttribute(origName);\n      // Case hackery: attributes are lower-case, but bind targets\n      // (properties) are case sensitive. Gambit is to map dash-case to\n      // camel-case: `foo-bar` becomes `fooBar`.\n      // Attribute bindings are excepted.\n      let propertyName = Polymer.CaseMap.dashToCamelCase(name);\n      if (kind === 'property') {\n        name = propertyName;\n      }\n      return {\n        kind: kind,\n        name: name,\n        propertyName: propertyName,\n        parts: parts,\n        literal: literal,\n        isCompound: parts.length !== 1\n      };\n    }\n  }\n\n  // TODO(sorvell): this should be factored into a plugin\n  function prepElement(element) {\n    Polymer.ResolveUrl.resolveAttrs(element, currentTemplate.ownerDocument);\n  }\n\n  Polymer.Annotations = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class Annotations extends superClass {\n\n      // preprocess-time\n\n      // construct and return a list of annotation records\n      // by scanning `template`'s content\n      //\n      // TODO(sorvell): This should just crawl over a template and call\n      // a supplied list of callbacks.\n      _parseTemplateAnnotations(template) {\n        return parseTemplateAnnotations(template);\n      }\n\n      // instance-time\n      // TODO(sorvell): consider trying to use QS instead of this proprietary\n      // search. This would require some unique way to identify a node, a guid.\n      // Is this faster? simpler? Is that worth polluting the node?\n      _findTemplateAnnotatedNode(root, note) {\n        // recursively ascend tree until we hit root\n        let parent = note.parent && this._findTemplateAnnotatedNode(root,\n          note.parent);\n        // unwind the stack, returning the indexed node at each level\n        if (parent) {\n          // note: marginally faster than indexing via childNodes\n          // (http://jsperf.com/childnodes-lookup)\n          for (let n=parent.firstChild, i=0; n; n=n.nextSibling) {\n            if (note.index === i++) {\n              return n;\n            }\n          }\n        } else {\n          return root;\n        }\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  /**\n   * Scans a template to produce an annotation object that stores expression\n   * metadata along with information to associate the metadata with nodes in an\n   * instance.\n   *\n   * Elements with `id` in the template are noted and marshaled into an\n   * the `$` hash in an instance.\n   *\n   * Example\n   *\n   *     &lt;template>\n   *       &lt;div id=\"foo\">&lt;/div>\n   *     &lt;/template>\n   *     &lt;script>\n   *      Polymer({\n   *        task: function() {\n   *          this.$.foo.style.color = 'red';\n   *        }\n   *      });\n   *     &lt;/script>\n   *\n   * Other expressions that are noted include:\n   *\n   * Double-mustache annotations in text content. The annotation must be the only\n   * content in the tag, compound expressions are not (currently) supported.\n   *\n   *     <[tag]>{{path.to.host.property}}<[tag]>\n   *\n   * Double-mustache annotations in an attribute.\n   *\n   *     <[tag] someAttribute=\"{{path.to.host.property}}\"><[tag]>\n   *\n   * Only immediate host properties can automatically trigger side-effects.\n   * Setting `host.path` in the example above triggers the binding, setting\n   * `host.path.to.host.property` does not.\n   *\n   * `on-` style event declarations.\n   *\n   *     <[tag] on-<event-name>=\"{{hostMethodName}}\"><[tag]>\n   *\n   * Note: **the `annotations` feature does not actually implement the behaviors\n   * associated with these expressions, it only captures the data**.\n   *\n   * Other optional features contain actual data implementations.\n   *\n   * @class standard feature: annotations\n   */\n\n  /*\n\n  Scans a template to produce an annotation map that stores expression metadata\n  and information that associates the metadata to nodes in a template instance.\n\n  Supported annotations are:\n\n    * id attributes\n    * binding annotations in text nodes\n      * double-mustache expressions: {{expression}}\n      * double-bracket expressions: [[expression]]\n    * binding annotations in attributes\n      * attribute-bind expressions: name=\"{{expression}} || [[expression]]\"\n      * property-bind expressions: name*=\"{{expression}} || [[expression]]\"\n      * property-bind expressions: name:=\"expression\"\n    * event annotations\n      * event delegation directives: on-<eventName>=\"expression\"\n\n  Generated data-structure:\n\n    [\n      {\n        id: '<id>',\n        events: [\n          {\n            mode: ['auto'|''],\n            name: '<name>'\n            value: '<expression>'\n          }, ...\n        ],\n        bindings: [\n          {\n            kind: ['text'|'attribute'|'property'],\n            mode: ['auto'|''],\n            name: '<name>'\n            value: '<expression>'\n          }, ...\n        ],\n        // TODO(sjmiles): confusingly, this is annotation-parent, not node-parent\n        parent: <reference to parent annotation>,\n        index: <integer index in parent's childNodes collection>\n      },\n      ...\n    ]\n\n  TODO(sjmiles): this module should produce either syntactic metadata\n  (e.g. double-mustache, double-bracket, star-attr), or semantic metadata\n  (e.g. manual-bind, auto-bind, property-bind). Right now it's half and half.\n\n  */\n\n  // construct `$` map (from id annotations)\n  function applyIdToMap(inst, map, dom, note) {\n    if (note.id) {\n      map[note.id] = inst._findTemplateAnnotatedNode(dom, note);\n    }\n  }\n\n  // install event listeners (from event annotations)\n  function applyEventListener(inst, dom, note, host) {\n    if (note.events && note.events.length) {\n      var node = inst._findTemplateAnnotatedNode(dom, note);\n      for (var j=0, e$=note.events, e; (j<e$.length) && (e=e$[j]); j++) {\n        inst._addMethodEventListenerToNode(node, e.name, e.value, host);\n      }\n    }\n  }\n\n  // push configuration references at configure time\n  function applyTemplateContent(inst, dom, note) {\n    if (note.templateContent) {\n      var node = inst._findTemplateAnnotatedNode(dom, note);\n      node._content = note.templateContent;\n    }\n  }\n\n  Polymer.TemplateStamp = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class TemplateStamp extends Polymer.Annotations(Polymer.EventListeners(superClass)) {\n\n      constructor() {\n        super();\n        this.$ = null;\n      }\n\n      _stampTemplate(template) {\n        // Polyfill support: bootstrap the template if it has not already been\n        if (template && !template.content &&\n            window.HTMLTemplateElement && HTMLTemplateElement.decorate) {\n          HTMLTemplateElement.decorate(template);\n        }\n        var notes = this._parseTemplateAnnotations(template);\n        var dom = document.importNode(template._content || template.content, true);\n        // NOTE: ShadyDom optimization indicating there is an insertion point\n        dom.__noInsertionPoint = !notes._hasInsertionPoint;\n        this.$ = {};\n        for (var i=0, l=notes.length, note; (i<l) && (note=notes[i]); i++) {\n          applyIdToMap(this, this.$, dom, note);\n          applyTemplateContent(this, dom, note);\n          applyEventListener(this, dom, note, this);\n        }\n        return dom;\n      }\n\n    }\n\n  });\n\n})();\nPolymer.Path = {\n\n    root: function(path) {\n      var dotIndex = path.indexOf('.');\n      if (dotIndex === -1) {\n        return path;\n      }\n      return path.slice(0, dotIndex);\n    },\n\n    isDeep: function(path) {\n      return path.indexOf('.') !== -1;\n    },\n\n    // Given `base` is `foo.bar`, `foo` is an ancestor, `foo.bar` is not\n    isAncestor: function(base, path) {\n      //     base.startsWith(path + '.');\n      return base.indexOf(path + '.') === 0;\n    },\n\n    // Given `base` is `foo.bar`, `foo.bar.baz` is an descendant\n    isDescendant: function(base, path) {\n      //     path.startsWith(base + '.');\n      return path.indexOf(base + '.') === 0;\n    },\n\n    // can be read as:  from  to       path\n    translate: function(base, newBase, path) {\n      // Defense?\n      return newBase + path.slice(base.length);\n    },\n\n    matches: function(base, path) {\n      return (base === path) ||\n             this.isAncestor(base, path) ||\n             this.isDescendant(base, path);\n    },\n\n    // Converts array-based paths to flattened path, optionally split into array\n    normalize: function(path, split) {\n      if (Array.isArray(path)) {\n        var parts = [];\n        for (var i=0; i<path.length; i++) {\n          var args = path[i].toString().split('.');\n          for (var j=0; j<args.length; j++) {\n            parts.push(args[j]);\n          }\n        }\n        return split ? parts : parts.join('.');\n      } else {\n        return split ? path.toString().split('.') : path;\n      }\n    },\n\n    get: function(root, path, info) {\n      var prop = root;\n      var parts = this.normalize(path, true);\n      // Loop over path parts[0..n-1] and dereference\n      for (var i=0; i<parts.length; i++) {\n        if (!prop) {\n          return;\n        }\n        var part = parts[i];\n        prop = prop[part];\n      }\n      if (info) {\n        info.path = parts.join('.');\n      }\n      return prop;\n    },\n\n    set: function(root, path, value) {\n      var prop = root;\n      var parts = this.normalize(path, true);\n      var last = parts[parts.length-1];\n      if (parts.length > 1) {\n        // Loop over path parts[0..n-2] and dereference\n        for (var i=0; i<parts.length-1; i++) {\n          var part = parts[i];\n          prop = prop[part];\n          if (!prop) {\n            return;\n          }\n        }\n        // Set value to object at end of path\n        prop[last] = value;\n      } else {\n        // Simple property set\n        prop[path] = value;\n      }\n      return parts.join('.');\n    }\n\n  };\n(function() {\n\n  'use strict';\n\n  // Save map of native properties\n  const nativeProperties = {};\n  let proto = HTMLElement.prototype;\n  while (proto) {\n    let props = Object.getOwnPropertyNames(proto);\n    for (let i=0; i<props.length; i++) {\n      nativeProperties[props[i]] = true;\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  function saveAccessorValue(model, property) {\n    // Don't read/store value for any native properties since they could throw\n    if (!nativeProperties[property]) {\n      let value = model[property];\n      if (value !== undefined) {\n        if (model.__data) {\n          // Adding accessor to instance; update the property\n          // It is the user's responsibility to call _flushProperties\n          model._setPendingProperty(property, value);\n        } else {\n          // Adding accessor to proto; save proto's value for instance-time use\n          if (!model.__dataProto) {\n            model.__dataProto = {};\n          } else if (!model.hasOwnProperty('__dataProto')) {\n            model.__dataProto = Object.create(model.__dataProto);\n          }\n          model.__dataProto[property] = value;          \n        }\n      }      \n    }\n  }\n\n  Polymer.PropertyAccessors = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class PropertyAccessors extends superClass {\n\n      constructor() {\n        super();\n        this._initializeProperties();\n      }\n\n      _initializeProperties() {\n        this.__data = {};\n        this.__dataPending = null;\n        this.__dataOld = null;\n        this.__dataInvalid = false;\n      }\n\n      _createPropertyAccessor(property, readOnly) {\n        saveAccessorValue(this, property);\n        Object.defineProperty(this, property, {\n          get: function() {\n            return this.__data && this.__data[property];\n          },\n          set: readOnly ? function() { } : function(value) {\n            this._setProperty(property, value);\n          }\n        });\n      }\n\n      _setProperty(property, value) {\n        if (this._setPendingProperty(property, value)) {\n          this._invalidateProperties();\n        }\n      }\n\n      _setPendingProperty(property, value) {\n        let old = this.__data[property];\n        if (this._shouldPropChange(property, value, old)) {\n          if (!this.__dataPending) {\n            this.__dataPending = {};\n            this.__dataOld = {};\n          }\n          // Ensure old is captured from the last turn\n          if (!(property in this.__dataOld)) {\n            this.__dataOld[property] = old;\n          }\n          this.__data[property] = value;\n          this.__dataPending[property] = value;\n          return true;\n        }\n      }\n\n      _invalidateProperties() {\n        if (!this.__dataInvalid) {\n          this.__dataInvalid = true;\n          Promise.resolve().then(() => {\n            if (this.__dataInvalid) {\n              this.__dataInvalid = false;\n              this._flushProperties();\n            }\n          });\n        }\n      }\n\n      _flushProperties() {\n        let oldProps = this.__dataOld;\n        let changedProps = this.__dataPending;\n        this.__dataPending = null;\n        this._propertiesChanged(this.__data, changedProps, oldProps);\n      }\n\n      _propertiesChanged(inst, currentProps, changedProps, oldProps) { // eslint-disable-line no-unused-vars\n      }\n\n      _shouldPropChange(property, value, old) {\n        return ((old !== value && (old === old || value === value)) ||\n          (typeof value == 'object'));\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  var caseMap = Polymer.CaseMap;\n\n  Polymer.Attributes = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class Attributes extends superClass {\n\n      constructor() {\n        super();\n        this.__serializing = false;\n      }\n\n      /**\n       * Ensures the element has the given attribute. If it does not,\n       * assigns the given value to the attribute.\n       *\n       *\n       * @method _ensureAttribute\n       * @param {string} attribute Name of attribute to ensure is set.\n       * @param {string} value of the attribute.\n       */\n      _ensureAttribute(attribute, value) {\n        if (!this.hasAttribute(attribute)) {\n          this._valueToNodeAttribute(this, value, attribute);\n        }\n      }\n\n      /**\n       * Deserializes an attribute to its associated property.\n       *\n       * This method calls the `_deserializeAttribute` method to convert the string to\n       * a typed value.\n       *\n       * @method _attributeToProperty\n       * @param {string} attribute Name of attribute to deserialize.\n       * @param {string} value of the attribute.\n       * @param {*} type type to deserialize to.\n       */\n      _attributeToProperty(attribute, value, type) {\n        // Don't deserialize back to property if currently reflecting\n        if (!this.__serializing) {\n          var property = caseMap.dashToCamelCase(attribute);\n          this[property] = this._deserializeAttribute(value, type);\n        }\n      }\n\n      /**\n       * Serializes a property to its associated attribute.\n       *\n       * @method _propertyToAttribute\n       * @param {string} property Property name to reflect.\n       * @param {*=} attribute Attribute name to reflect.\n       * @param {*=} value Property value to refect.\n       */\n      _propertyToAttribute(property, attribute, value) {\n        this.__serializing = true;\n        value = (value === undefined) ? this[property] : value;\n        this._valueToNodeAttribute(this, value,\n          attribute || caseMap.camelToDashCase(property));\n        this.__serializing = false;\n      }\n\n      /**\n       * Sets a typed value to an HTML attribute on a node.\n       *\n       * This method calls the `_serializeAttribute` method to convert the typed\n       * value to a string.  If the `_serializeAttribute` method returns `undefined`,\n       * the attribute will be removed (this is the default for boolean\n       * type `false`).\n       *\n       * @method _valueToAttribute\n       * @param {Element=} node Element to set attribute to.\n       * @param {*} value Value to serialize.\n       * @param {string} attribute Attribute name to serialize to.\n\n       */\n      _valueToNodeAttribute(node, value, attribute) {\n        var str = this._serializeAttribute(value);\n        if (str === undefined) {\n          node.removeAttribute(attribute);\n        } else {\n          node.setAttribute(attribute, str);\n        }\n      }\n\n      /**\n       * Converts a typed value to a string.\n       *\n       * This method is called by Polymer when setting JS property values to\n       * HTML attributes.  Users may override this method on Polymer element\n       * prototypes to provide serialization for custom types.\n       *\n       * @method _serializeAttribute\n       * @param {*} value Property value to serialize.\n       * @return {string} String serialized from the provided property value.\n       */\n      _serializeAttribute(value) {\n        /* eslint-disable no-fallthrough */\n        switch (typeof value) {\n          case 'boolean':\n            return value ? '' : undefined;\n\n          case 'object':\n            if (value instanceof Date) {\n              return value;\n            } else if (value) {\n              try {\n                return JSON.stringify(value);\n              } catch(x) {\n                return '';\n              }\n            }\n\n          default:\n            return value != null ? value : undefined;\n        }\n      }\n\n      /**\n       * Converts a string to a typed value.\n       *\n       * This method is called by Polymer when reading HTML attribute values to\n       * JS properties.  Users may override this method on Polymer element\n       * prototypes to provide deserialization for custom `type`s.  Note,\n       * the `type` argument is the value of the `type` field provided in the\n       * `properties` configuration object for a given property, and is\n       * by convention the constructor for the type to deserialize.\n       *\n       * Note: The return value of `undefined` is used as a sentinel value to\n       * indicate the attribute should be removed.\n       *\n       * @method _deserializeAttribute\n       * @param {string} value Attribute value to deserialize.\n       * @param {*} type Type to deserialize the string to.\n       * @return {*} Typed value deserialized from the provided string.\n       */\n      _deserializeAttribute(value, type) {\n        switch (type) {\n          case Number:\n            value = Number(value);\n            break;\n\n          case Boolean:\n            value = (value !== null);\n            break;\n\n          case Object:\n            try {\n              value = JSON.parse(value);\n            } catch(x) {\n              // allow non-JSON literals like Strings and Numbers\n            }\n            break;\n\n          case Array:\n            try {\n              value = JSON.parse(value);\n            } catch(x) {\n              value = null;\n              console.warn('Polymer::Attributes: couldn`t decode Array as JSON');\n            }\n            break;\n\n          case Date:\n            value = new Date(value);\n            break;\n\n          case String:\n          default:\n            break;\n        }\n        return value;\n      }\n      /* eslint-enable no-fallthrough */\n    }\n\n  });\n\n\n})();\n(function() {\n\n  'use strict';\n\n  const CaseMap = Polymer.CaseMap;\n\n  const TYPES = {\n    ANY: '__propertyEffects',\n    COMPUTE: '__computeEffects',\n    REFLECT: '__reflectEffects',\n    NOTIFY: '__notifyEffects',\n    PROPAGATE: '__propagateEffects',\n    OBSERVE: '__observeEffects',\n    READ_ONLY: '__readOnly'\n  }\n\n  function ensureOwnMappedArray(model, type) {\n    let effects = model[type];\n    if (!effects) {\n      effects = model[type] = {};\n    } else if (!model.hasOwnProperty(type)) {\n      effects = model[type] = Object.create(model[type]);\n      for (let p in effects) {\n        // TODO(kschaaf): replace with fast array copy #!%&$!\n        effects[p] = effects[p].slice();\n      }\n    }\n    return effects;\n  }\n\n  // -- effects ----------------------------------------------\n\n  function runEffects(inst, property, value, old, effects) {\n    for (let i=0, l=effects.length, fx; (i<l) && (fx=effects[i]); i++) {\n      if (Polymer.Path.matches(fx.path, property)) {\n        fx.fn(inst, property, inst.__data[property], old, fx.info);\n      }\n    }\n  }\n\n  function runObserverEffect(inst, property, value, old, info) {\n    let fn = (info.context || inst)[info.methodName];\n    if (fn) {\n      fn.call(inst, value, old);\n    } else {\n      console.warn('observer method `' + info.methodName + '` not defined');\n    }\n  }\n\n  function runNotifyEffect(inst, path, value, old, info) {\n    let detail = { value };\n    if (info.property !== path) {\n      detail.path = path;\n    }\n    inst._dispatchNotifyingEvent(new CustomEvent(info.eventName, { detail }))\n  }\n\n  function runReflectEffect(inst, property, value, old, info) {\n    inst._propertyToAttribute(property, info.attrName);\n  }\n\n  function runMultiObserverEffect(inst, property, value, old, info) {\n    runMethodEffect(inst, property, value, old, info);\n  }\n\n  function runComputedEffect(inst, property, value, old, info) {\n    var result = runMethodEffect(inst, property, value, old, info);\n    var computedProp = info.methodInfo;\n    inst._setPropertyFromComputation(computedProp, result);\n  }\n\n  // -- bindings / annotations ----------------------------------------------\n\n  function bindTemplate(inst, template) {\n    // Clear any existing propagation effects inherited from superClass\n    inst[TYPES.PROPAGATE] = {};\n    let notes = inst._parseTemplateAnnotations(template);\n    processAnnotations(notes);\n    for (let i=0, note; (i<notes.length) && (note=notes[i]); i++)  {\n      // where to find the node in the concretized list\n      let b$ = note.bindings;\n      for (let j=0, binding; (j<b$.length) && (binding=b$[j]); j++) {\n        if (shouldAddListener(binding)) {\n          addAnnotatedListener(inst, i, binding.name,\n            binding.parts[0].value,\n            binding.parts[0].event,\n            binding.parts[0].negate);\n        }\n        addAnnotationEffect(inst, binding, i);\n      }\n    }\n  }\n\n  function addAnnotationEffect(inst, note, index) {\n    for (let i=0; i<note.parts.length; i++) {\n      let part = note.parts[i];\n      if (part.signature) {\n        addAnnotationMethodEffect(inst, note, part, index);\n      } else if (!part.literal) {\n        if (note.kind === 'attribute' && note.name[0] === '-') {\n          console.warn('Cannot set attribute ' + note.name +\n            ' because \"-\" is not a valid attribute starting character');\n        } else {\n          inst._addPropertyEffect(part.value, TYPES.PROPAGATE, {\n            fn: runAnnotationEffect,\n            info:  {\n              kind: note.kind,\n              index: index,\n              name: note.name,\n              propertyName: note.propertyName,\n              value: part.value,\n              isCompound: note.isCompound,\n              compoundIndex: part.compoundIndex,\n              event: part.event,\n              customEvent: part.customEvent,\n              negate: part.negate\n            }\n          });\n        }\n      }\n    }\n  }\n\n  function runAnnotationEffect(inst, path, value, old, info) {\n    let node = inst._nodes[info.index];\n    // Subpath notification: transform path and set to client\n    // e.g.: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo.prop'=obj.sub.prop\n    if ((path.length > info.value.length) &&\n        (info.kind == 'property') && !info.isCompound &&\n        node._hasPropertyEffect && node._hasPropertyEffect(info.name)) {\n      path = Polymer.Path.translate(info.value, info.name, path);\n      inst._setPropertyToNodeFromAnnotation(node, path, value);\n    } else {\n      // Root or deeper path was set; extract bound path value\n      // e.g.: foo=\"{{obj.sub}}\", path: 'obj', set 'foo'=obj.sub\n      //   or: foo=\"{{obj.sub}}\", path: 'obj.sub.prop', set 'foo'=obj.sub\n      if (path != info.value) {\n        value = Polymer.Path.get(inst, info.value);\n        inst.__data[info.value] = value;\n      }\n      // Propagate value to child\n      applyAnnotationValue(inst, info, value);\n    }\n  }\n\n  function applyAnnotationValue(inst, info, value) {\n    let node = inst._nodes[info.index];\n    let property = info.name;\n    value = computeAnnotationValue(node, property, value, info);\n    if (info.kind == 'attribute') {\n      inst._valueToNodeAttribute(node, value, property);\n    } else {\n      if (node._hasPropertyEffect && node._hasPropertyEffect(property)) {\n        inst._setPropertyToNodeFromAnnotation(node, property, value);\n      } else if (inst._shouldPropChange(property, node[property], value)) {\n        node[property] = value;\n      }\n    }\n  }\n\n  // Process compound, negate, special case properties\n  function computeAnnotationValue(node, property, value, info) {\n    if (info.negate) {\n      value = !value;\n    }\n    if (info.isCompound) {\n      let storage = node.__dataCompoundStorage[property];\n      storage[info.compoundIndex] = value;\n      value = storage.join('');\n    }\n    if (info.kind !== 'attribute') {\n      // TODO(sorvell): preserve scoping during changes to class\n      // if (property === 'className') {\n      //   value = this._scopeElementClass(node, value);\n      // }\n      // Some browsers serialize `undefined` to `\"undefined\"`\n      if (property === 'textContent' ||\n          (node.localName == 'input' && property == 'value')) {\n        value = value == undefined ? '' : value;\n      }\n    }\n    return value;\n  }\n\n  function addAnnotationMethodEffect(inst, note, part, index) {\n    createMethodEffect(inst, part.signature, TYPES.PROPAGATE,\n      runAnnotationMethodEffect, {\n        index: index,\n        isCompound: note.isCompound,\n        compoundIndex: part.compoundIndex,\n        kind: note.kind,\n        name: note.name,\n        negate: part.negate,\n        part: part\n      }, true\n    );\n  }\n\n  function runAnnotationMethodEffect(inst, property, value, old, info) {\n    let val = runMethodEffect(inst, property, value, old, info);\n    applyAnnotationValue(inst, info.methodInfo, val);\n  }\n\n  function processAnnotations(notes) {\n    if (!notes._processed) {\n      for (let i=0; i<notes.length; i++) {\n        let note = notes[i];\n        // Parse bindings for methods & path roots (models)\n        for (let j=0; j<note.bindings.length; j++) {\n          let b = note.bindings[j];\n          for (let k=0; k<b.parts.length; k++) {\n            let p = b.parts[k];\n            if (!p.literal) {\n              p.signature = parseMethod(p.value);\n              if (!p.signature) {\n                p.rootProperty = Polymer.Path.root(p.value);\n              }\n            }\n          }\n        }\n        // Recurse into nested templates & bind parent props\n        if (note.templateContent) {\n          processAnnotations(note.templateContent._notes);\n          let pp = note.templateContent._hostProps =\n            discoverTemplateHostProps(note.templateContent._notes);\n          let bindings = [];\n          for (let prop in pp) {\n            bindings.push({\n              index: note.index,\n              kind: 'property',\n              name: '_host_' + prop,\n              parts: [{\n                mode: '{',\n                rootProperty: prop,\n                value: prop\n              }]\n            });\n          }\n          note.bindings = note.bindings.concat(bindings);\n        }\n      }\n      notes._processed = true;\n    }\n  }\n\n  // Finds all bindings in template content and stores the path roots in\n  // the path members in content._hostProps. Each outer template merges\n  // inner _hostProps to propagate inner parent property needs to outer\n  // templates.\n  function discoverTemplateHostProps(notes) {\n    let pp = {};\n    for (let i=0, n; (i<notes.length) && (n=notes[i]); i++) {\n      // Find all bindings to parent.* and spread them into _parentPropChain\n      for (let j=0, b$=n.bindings, b; (j<b$.length) && (b=b$[j]); j++) {\n        for (let k=0, p$=b.parts, p; (k<p$.length) && (p=p$[k]); k++) {\n          if (p.signature) {\n            let args = p.signature.args;\n            for (let kk=0; kk<args.length; kk++) {\n              let rootProperty = args[kk].rootProperty;\n              if (rootProperty) {\n                pp[rootProperty] = true;\n              }\n            }\n            pp[p.signature.methodName] = true;\n          } else {\n            if (p.rootProperty) {\n              pp[p.rootProperty] = true;\n            }\n          }\n        }\n      }\n      // Merge child _hostProps into this _hostProps\n      if (n.templateContent) {\n        let tpp = n.templateContent._hostProps;\n        Polymer.Base.mixin(pp, tpp);\n      }\n    }\n    return pp;\n  }\n\n  function shouldAddListener(effect) {\n    return effect.name &&\n           effect.kind != 'attribute' &&\n           effect.kind != 'text' &&\n           !effect.isCompound &&\n           effect.parts[0].mode === '{';\n  }\n\n  function addAnnotatedListener(inst, index, property, path, event, negate) {\n    if (!inst._bindListeners) {\n      inst._bindListeners = [];\n    }\n    let eventName = event ||\n      (CaseMap.camelToDashCase(property) + '-changed');\n    inst._bindListeners.push({\n      index: index,\n      property: property,\n      path: path,\n      event: eventName,\n      negate: negate\n    });\n  }\n\n  function setupBindListeners(inst) {\n    let b$ = inst._bindListeners;\n    for (let i=0, l=b$.length, info; (i<l) && (info=b$[i]); i++) {\n      let node = inst._nodes[info.index];\n      addNotifyListener(node, inst, info);\n    }\n  }\n\n  function addNotifyListener(node, inst, info) {\n    let rootProperty = Polymer.Path.root(info.path);\n    node.addEventListener(info.event, function(e) {\n      handleNotification(e, inst, info.property, info.path,\n        rootProperty, info.negate);\n    });\n  }\n\n  function handleNotification(e, inst, property, path, rootProperty, negate) {\n    let value;\n    let targetPath = e.detail && e.detail.path;\n    if (targetPath) {\n      path = Polymer.Path.translate(property, path, e.detail.path);\n      value = e.detail && e.detail.value;\n    } else {\n      value = e.target[property];\n    }\n    value = negate ? !value : value;\n    inst._setPropertyFromNotification(path, value, e);\n  }\n\n  // -- for method-based effects (complexObserver & computed) --------------\n\n  function createMethodEffect(inst, sig, type, effectFn, methodInfo, dynamic) {\n    let info = {\n      methodName: sig.methodName,\n      args: sig.args,\n      methodInfo: methodInfo,\n      dynamicFn: dynamic\n    };\n    // TODO(sorvell): why still here?\n    if (sig.static) {\n      inst._addPropertyEffect('__static__', type, {\n        fn: effectFn, info: info\n      });\n    } else {\n      for (let i=0, arg; (i<sig.args.length) && (arg=sig.args[i]); i++) {\n        if (!arg.literal) {\n          inst._addPropertyEffect(arg.name, type, {\n            fn: effectFn, info: info\n          });\n        }\n      }\n    }\n    if (dynamic) {\n      inst._addPropertyEffect(sig.methodName, type, {\n        fn: effectFn, info: info\n      });\n    }\n  }\n\n  function runMethodEffect(inst, property, value, old, info) {\n    // TODO(kschaaf): ideally rootDataHost would be a detail of Templatizer only\n    let context = inst._rootDataHost || inst;\n    let fn = context[info.methodName];\n    if (fn) {\n      let args = marshalArgs(inst.__data, info, property, value);\n      return fn.apply(context, args);\n    } else if (!info.dynamicFn) {\n      console.warn('method `' + info.methodName + '` not defined');\n    }\n  }\n\n  const emptyArray = [];\n\n  function parseMethod(expression) {\n    // tries to match valid javascript property names\n    let m = expression.match(/([^\\s]+?)\\(([\\s\\S]*)\\)/);\n    if (m) {\n      let sig = { methodName: m[1], static: true };\n      if (m[2].trim()) {\n        // replace escaped commas with comma entity, split on un-escaped commas\n        let args = m[2].replace(/\\\\,/g, '&comma;').split(',');\n        return parseArgs(args, sig);\n      } else {\n        sig.args = emptyArray;\n        return sig;\n      }\n    }\n  }\n\n  function parseArgs(argList, sig) {\n    sig.args = argList.map(function(rawArg) {\n      let arg = parseArg(rawArg);\n      if (!arg.literal) {\n        sig.static = false;\n      }\n      return arg;\n    }, this);\n    return sig;\n  }\n\n  function parseArg(rawArg) {\n    // clean up whitespace\n    let arg = rawArg.trim()\n      // replace comma entity with comma\n      .replace(/&comma;/g, ',')\n      // repair extra escape sequences; note only commas strictly need\n      // escaping, but we allow any other char to be escaped since its\n      // likely users will do this\n      .replace(/\\\\(.)/g, '\\$1')\n      ;\n    // basic argument descriptor\n    let a = {\n      name: arg\n    };\n    // detect literal value (must be String or Number)\n    let fc = arg[0];\n    if (fc === '-') {\n      fc = arg[1];\n    }\n    if (fc >= '0' && fc <= '9') {\n      fc = '#';\n    }\n    switch(fc) {\n      case \"'\":\n      case '\"':\n        a.value = arg.slice(1, -1);\n        a.literal = true;\n        break;\n      case '#':\n        a.value = Number(arg);\n        a.literal = true;\n        break;\n    }\n    // if not literal, look for structured path\n    if (!a.literal) {\n      a.rootProperty = Polymer.Path.root(arg);\n      // detect structured path (has dots)\n      a.structured = Polymer.Path.isDeep(arg);\n      if (a.structured) {\n        a.wildcard = (arg.slice(-2) == '.*');\n        if (a.wildcard) {\n          a.name = arg.slice(0, -2);\n        }\n      }\n    }\n    return a;\n  }\n\n  // path & value are used to fill in wildcard descriptor when effect is\n  // being called as a result of a path notification\n  function marshalArgs(data, info, path, value) {\n    let values = [];\n    let args = info.args;\n    for (let i=0, l=args.length; i<l; i++) {\n      let arg = args[i];\n      let name = arg.name;\n      let v;\n      if (arg.literal) {\n        v = arg.value;\n      } else if (path == name) {\n        v = value;\n      } else {\n        // TODO(kschaaf): confirm design of this\n        v = data[name];\n        if (v === undefined && arg.structured) {\n          v = Polymer.Path.get(data, name);\n        }\n      }\n      if (arg.wildcard) {\n        // Only send the actual path changed info if the change that\n        // caused the observer to run matched the wildcard\n        let baseChanged = (name.indexOf(path + '.') === 0);\n        let matches = (path.indexOf(name) === 0 && !baseChanged);\n        values[i] = {\n          path: matches ? path : name,\n          value: matches ? value : v,\n          base: v\n        };\n      } else {\n        values[i] = v;\n      }\n    }\n    return values;\n  }\n\n  function setupBindings(inst, dom, notes) {\n    if (notes.length) {\n      let nodes = new Array(notes.length);\n      for (let i=0; i < notes.length; i++) {\n        let note = notes[i];\n        let node = nodes[i] = inst._findTemplateAnnotatedNode(dom, note);\n        node.__dataHost = inst;\n        if (note.bindings) {\n          setupCompoundBinding(note, node);\n        }\n      }\n      inst._nodes = nodes;\n    }\n    if (inst._bindListeners) {\n      setupBindListeners(inst);\n    }\n  }\n\n  function setupCompoundBinding(note, node) {\n    let bindings = note.bindings;\n    for (let i=0; i<bindings.length; i++) {\n      let binding = bindings[i];\n      if (binding.isCompound) {\n        // Create compound storage map\n        let storage = node.__dataCompoundStorage ||\n          (node.__dataCompoundStorage = {});\n        let parts = binding.parts;\n        // Copy literals from parts into storage for this binding\n        let literals = new Array(parts.length);\n        for (let j=0; j<parts.length; j++) {\n          literals[j] = parts[j].literal;\n        }\n        let name = binding.name;\n        storage[name] = literals;\n        // Configure properties with their literal parts\n        if (binding.literal && binding.kind == 'property') {\n          // TODO(kschaaf) config integration\n          // if (node._configValue) {\n          //   node._configValue(name, binding.literal);\n          // } else {\n            node[name] = binding.literal;\n          // }\n        }\n      }\n    }\n  }\n\n  // data api\n\n  // Note: this implemetation only accepts normalized paths\n  function notifySplices(inst, array, path, splices) {\n    let change = {\n      indexSplices: splices\n    };\n    let splicesPath = path + '.splices';\n    inst._setProperty(splicesPath, change);\n    inst._setProperty(path + '.length', array.length);\n    // All path notification values are cached on `this.__data__`.\n    // Null here to allow potentially large splice records to be GC'ed.\n    inst.__data[splicesPath] = {indexSplices: null};\n  }\n\n  function notifySplice(inst, array, path, index, added, removed) {\n    notifySplices(inst, array, path, [{\n      index: index,\n      addedCount: added,\n      removed: removed,\n      object: array,\n      type: 'splice'\n    }]);\n  }\n\n  function upper(name) {\n    return name[0].toUpperCase() + name.substring(1);\n  }\n\n  Polymer.PropertyEffects = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class PropertyEffects extends Polymer.TemplateStamp(\n      Polymer.Attributes(Polymer.PropertyAccessors(superClass))) {\n\n      get PROPERTY_EFFECT_TYPES() {\n        return TYPES;\n      }\n\n      constructor() {\n        super();\n        this._asyncEffects = false;\n        this.__dataInitialized = false;\n        this.__dataPendingClients = null;\n        this.__dataFromAbove = false;\n        this.__dataLinkedPaths = null;\n        this._nodes = null;\n        // May be set on instance prior to upgrade\n        this.__dataCompoundStorage = this.__dataCompoundStorage || null;\n        this.__dataHost = this.__dataHost || null;\n      }\n\n      _initializeProperties() {\n        super._initializeProperties();\n        // initialize data with prototype values saved when creating accessors\n        if (this.__dataProto) {\n          this.__data = Object.create(this.__dataProto);\n          this.__dataPending = Object.create(this.__dataProto);\n          this.__dataOld = {};\n        } else {\n          this.__dataPending = null;\n        }\n        // update instance properties\n        for (let p in this.__propertyEffects) {\n          if (this.hasOwnProperty(p)) {\n            let value = this[p];\n            delete this[p];\n            this[p] = value;\n          }\n        }\n      }\n\n      _isPropertyPending(prop) {\n        return this.__dataPending && (prop in this.__dataPending);\n      }\n\n      _setPendingProperty(prop, value) {\n        // clear cached paths\n        if (typeof value == 'object') {\n          for (var p in this.__data) {\n            if (Polymer.Path.isDescendant(prop, p)) {\n              this.__data[p] = undefined;\n            }\n          }\n        }\n        return super._setPendingProperty(prop, value);\n      }\n\n      // Prototype setup ----------------------------------------\n\n      _addPropertyEffect(path, type, effect) {\n        let property = Polymer.Path.root(path);\n        // __propertyEffects only used to track whether an accessor has been created or not\n        let effects = ensureOwnMappedArray(this, TYPES.ANY)[property];\n        let val;\n        if (!effects) {\n          effects = this.__propertyEffects[property] = [];\n          val = this._createPropertyAccessor(property,\n            type == TYPES.READ_ONLY);\n        }\n        // effects are accumulated into arrays per property based on type\n        if (effect) {\n          effect.path = path;\n          effects.push(effect);\n        }\n        effects = ensureOwnMappedArray(this, type)[property];\n        if (!effects) {\n          effects = this[type][property] = [];\n        }\n        effects.push(effect);\n        return val;\n      }\n\n      _hasPropertyEffect(property, type) {\n        let effects = this[type || TYPES.ANY];\n        return Boolean(effects && effects[property]);\n      }\n\n      _hasReadOnlyEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.READ_ONLY);\n      }\n\n      _hasNotifyEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.NOTIFY);\n      }\n\n      _hasReflectEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.REFLECT);\n      }\n\n      _hasComputedEffect(property) {\n        return this._hasPropertyEffect(property, TYPES.COMPUTE);\n      }\n\n      // Runtime ----------------------------------------\n\n      // This function isolates relatively expensive functionality necessary\n      // for the public API, such that it is only done when paths enter the\n      // system, and not in every step of the hot path.\n      // If `path` is an unmanaged property (property without an accessor)\n      // or a path, sets the value at that path.  If the root of the path\n      // is a managed property, returns a normalized string path\n      // sutable for setting into the system via setProperty/setPendingProperty\n      // `path` can be a user-facing path string or array of path parts.\n      _setPathOrUnmanagedProperty(path, value) {\n        let rootProperty = Polymer.Path.root(Array.isArray(path) ? path[0] : path);\n        let hasEffect = this._hasPropertyEffect(rootProperty);\n        let isPath = (rootProperty !== path);\n        if (!hasEffect || isPath) {\n          path = Polymer.Path.set(this, path, value);\n        }\n        if (hasEffect) {\n          return path;\n        }\n      }\n\n      _invalidateProperties() {\n        if (this.__dataInitialized) {\n          if (this._asyncEffects) {\n            super._invalidateProperties();\n          } else {\n            this._flushProperties();\n          }\n        }\n      }\n\n      _flushProperties(fromAbove) {\n        if (!this.__dataInitialized) {\n          this.ready();\n        }\n        if (this.__dataPending || this.__dataPendingClients) {\n          this.__dataFromAbove = fromAbove;\n          super._flushProperties();\n          this.__dataFromAbove = false;\n        }\n      }\n\n      ready() {\n        this.__dataInitialized = true;\n      }\n\n      _stampTemplate(template) {\n        let dom = super._stampTemplate(template);\n        let notes = (template._content || template.content)._notes;\n        this._setupBindings(dom, notes);\n        return dom;\n      }\n\n      _propertiesChanged(currentProps, changedProps, oldProps) {\n        for (let p in changedProps) {\n          let effects = this.__propertyEffects[p];\n          runEffects(this, p, changedProps[p], oldProps[p], effects);\n        }\n      }\n\n      /**\n       * Aliases one data path as another, such that path notifications from one\n       * are routed to the other.\n       *\n       * @method linkPaths\n       * @param {string} to Target path to link.\n       * @param {string} from Source path to link.\n       */\n      linkPaths(to, from) {\n        to = Polymer.Path.normalize(to);\n        from = Polymer.Path.normalize(from);\n        this.__dataLinkedPaths = this.__dataLinkedPaths || {};\n        if (from) {\n          this.__dataLinkedPaths[to] = from;\n        } else {\n          this.__dataLinkedPaths(to);\n        }\n      }\n\n      /**\n       * Removes a data path alias previously established with `_linkPaths`.\n       *\n       * Note, the path to unlink should be the target (`to`) used when\n       * linking the paths.\n       *\n       * @method unlinkPaths\n       * @param {string} path Target path to unlink.\n       */\n      unlinkPaths(path) {\n        path = Polymer.Path.normalize(path);\n        if (this.__dataLinkedPaths) {\n          delete this.__dataLinkedPaths[path];\n        }\n      }\n\n      /**\n       * Notify that an array has changed.\n       *\n       * Example:\n       *\n       *     this.items = [ {name: 'Jim'}, {name: 'Todd'}, {name: 'Bill'} ];\n       *     ...\n       *     this.items.splice(1, 1, {name: 'Sam'});\n       *     this.items.push({name: 'Bob'});\n       *     this.notifySplices('items', [\n       *       { index: 1, removed: [{name: 'Todd'}], addedCount: 1, obect: this.items, type: 'splice' },\n       *       { index: 3, removed: [], addedCount: 1, object: this.items, type: 'splice'}\n       *     ]);\n       *\n       * @param {string} path Path that should be notified.\n       * @param {Array} splices Array of splice records indicating ordered\n       *   changes that occurred to the array. Each record should have the\n       *   following fields:\n       *    * index: index at which the change occurred\n       *    * removed: array of items that were removed from this index\n       *    * addedCount: number of new items added at this index\n       *    * object: a reference to the array in question\n       *    * type: the string literal 'splice'\n       *\n       *   Note that splice records _must_ be normalized such that they are\n       *   reported in index order (raw results from `Object.observe` are not\n       *   ordered and must be normalized/merged before notifying).\n      */\n      notifySplices(path, splices) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        notifySplices(this, array, info.path, splices);\n      }\n\n      /**\n       * Convienence method for reading a value from a path.\n       *\n       * Note, if any part in the path is undefined, this method returns\n       * `undefined` (this method does not throw when dereferencing undefined\n       * paths).\n       *\n       * @method get\n       * @param {(string|Array<(string|number)>)} path Path to the value\n       *   to read.  The path may be specified as a string (e.g. `foo.bar.baz`)\n       *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n       *   bracketed expressions are not supported; string-based path parts\n       *   *must* be separated by dots.  Note that when dereferencing array\n       *   indices, the index may be used as a dotted part directly\n       *   (e.g. `users.12.name` or `['users', 12, 'name']`).\n       * @param {Object=} root Root object from which the path is evaluated.\n       * @return {*} Value at the path, or `undefined` if any part of the path\n       *   is undefined.\n       */\n      get(path, root) {\n        return Polymer.Path.get(root || this, path);\n      }\n\n      /**\n       * Convienence method for setting a value to a path and notifying any\n       * elements bound to the same path.\n       *\n       * Note, if any part in the path except for the last is undefined,\n       * this method does nothing (this method does not throw when\n       * dereferencing undefined paths).\n       *\n       * @method set\n       * @param {(string|Array<(string|number)>)} path Path to the value\n       *   to write.  The path may be specified as a string (e.g. `'foo.bar.baz'`)\n       *   or an array of path parts (e.g. `['foo.bar', 'baz']`).  Note that\n       *   bracketed expressions are not supported; string-based path parts\n       *   *must* be separated by dots.  Note that when dereferencing array\n       *   indices, the index may be used as a dotted part directly\n       *   (e.g. `'users.12.name'` or `['users', 12, 'name']`).\n       * @param {*} value Value to set at the specified path.\n       * @param {Object=} root Root object from which the path is evaluated.\n       *   When specified, no notification will occur.\n      */\n      set(path, value, root) {\n        if (root) {\n          Polymer.Path.set(root, path, value);\n        } else {\n          if (!this._hasReadOnlyEffect(path)) {\n            if ((path = this._setPathOrUnmanagedProperty(path, value))) {\n              this._setProperty(path, value);\n            }\n          }          \n        }\n      }\n\n      _setPropertyFromNotification(path, value) {\n        this.set(path, value);\n      }\n\n      _dispatchNotifyingEvent(event) {\n        this.dispatchEvent(event);\n      }\n\n      _setPropertyToNodeFromAnnotation(node, prop, value) {\n        // TODO(sorvell): how do we know node has this api?\n        if (!node._hasReadOnlyEffect(prop)) {\n          node._setProperty(prop, value);\n        }\n      }\n\n      _setPropertyFromComputation(prop, value) {\n        this[prop] = value;\n      }\n\n      /**\n       * Adds items onto the end of the array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.push`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method push\n       * @param {String} path Path to array.\n       * @param {...any} var_args Items to push onto array\n       * @return {number} New length of the array.\n       */\n      push(path, ...items) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let len = array.length;\n        let ret = array.push(...items);\n        if (items.length) {\n          notifySplice(this, array, info.path, len, items.length, []);\n        }\n        return ret;\n      }\n\n      /**\n       * Removes an item from the end of array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.pop`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method pop\n       * @param {String} path Path to array.\n       * @return {any} Item that was removed.\n       */\n      pop(path) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let hadLength = Boolean(array.length);\n        let ret = array.pop();\n        if (hadLength) {\n          notifySplice(this, array, info.path, array.length, 0, [ret]);\n        }\n        return ret;\n      }\n\n      /**\n       * Starting from the start index specified, removes 0 or more items\n       * from the array and inserts 0 or more new itms in their place.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.splice`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method splice\n       * @param {String} path Path to array.\n       * @param {number} start Index from which to start removing/inserting.\n       * @param {number} deleteCount Number of items to remove.\n       * @param {...any} var_args Items to insert into array.\n       * @return {Array} Array of removed items.\n       */\n      splice(path, start, deleteCount, ...items) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        // Normalize fancy native splice handling of crazy start values\n        if (start < 0) {\n          start = array.length - Math.floor(-start);\n        } else {\n          start = Math.floor(start);\n        }\n        if (!start) {\n          start = 0;\n        }\n        let ret = array.splice(start, deleteCount, ...items);\n        if (items.length || ret.length) {\n          notifySplice(this, array, info.path, start, items.length, ret);\n        }\n        return ret;\n      }\n\n      /**\n       * Removes an item from the beginning of array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.pop`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method shift\n       * @param {String} path Path to array.\n       * @return {any} Item that was removed.\n       */\n      shift(path) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let hadLength = Boolean(array.length);\n        let ret = array.shift();\n        if (hadLength) {\n          notifySplice(this, array, info.path, 0, 0, [ret]);\n        }\n        return ret;\n      }\n\n      /**\n       * Adds items onto the beginning of the array at the path specified.\n       *\n       * The arguments after `path` and return value match that of\n       * `Array.prototype.push`.\n       *\n       * This method notifies other paths to the same array that a\n       * splice occurred to the array.\n       *\n       * @method unshift\n       * @param {String} path Path to array.\n       * @param {...any} var_args Items to insert info array\n       * @return {number} New length of the array.\n       */\n      unshift(path, ...items) {\n        let info = {};\n        let array = Polymer.Path.get(this, path, info);\n        let ret = array.unshift(...items);\n        if (items.length) {\n          notifySplice(this, array, info.path, 0, items.length, []);\n        }\n        return ret;\n      }\n\n      /**\n       * Notify that a path has changed.\n       *\n       * Example:\n       *\n       *     this.item.user.name = 'Bob';\n       *     this.notifyPath('item.user.name');\n       *\n       * @param {string} path Path that should be notified.\n       * @param {*=} value Value at the path (optional).\n      */\n      notifyPath(path, value) {\n        if (arguments.length == 1) {\n          // Get value if not supplied\n          let info = {};\n          value = Polymer.Path.get(this, path, info);\n          path = info.path;\n        } else if (Array.isArray(path)) {\n          // Normalize path if needed\n          path = Polymer.Path.normalize(path);\n        }\n        this._setProperty(path, value);\n      }\n\n      // -- readOnly ----------------------------------------------\n\n      _createReadOnlyProperty(property, privateSetter) {\n        this._addPropertyEffect(property, TYPES.READ_ONLY);\n        if (privateSetter) {\n          this['_set' + upper(property)] = function(value) {\n            this._setProperty(property, value);\n          }\n        }\n      }\n\n      // -- observer ----------------------------------------------\n\n      _createObservedProperty(property, methodName, context) {\n        this._addPropertyEffect(property, TYPES.OBSERVE, {\n          fn: runObserverEffect,\n          info: {\n            methodName: methodName,\n            context: context ? this : null\n          }\n        });\n      }\n\n      // -- notify ----------------------------------------------\n\n      _createNotifyingProperty(property) {\n        this._addPropertyEffect(property, TYPES.NOTIFY, {\n          fn: runNotifyEffect,\n          info: {\n            eventName: CaseMap.camelToDashCase(property) + '-changed',\n            property: property\n          }\n        });\n      }\n\n      // -- reflect ----------------------------------------------\n\n      _createReflectedProperty(property) {\n        let attr = CaseMap.camelToDashCase(property);\n        if (attr[0] === '-') {\n          console.warn('Property ' + property + ' cannot be reflected to attribute ' +\n            attr + ' because \"-\" is not a valid starting attribute name. Use a lowercase first letter for the property thisead.');\n        } else {\n          this._addPropertyEffect(property, TYPES.REFLECT, {\n            fn: runReflectEffect,\n            info: {\n              attrName: attr\n            }\n          });\n        }\n      }\n\n      // -- complexObserver ----------------------------------------------\n\n      _createMethodObserver(expression) {\n        let sig = parseMethod(expression);\n        if (!sig) {\n          throw new Error(\"Malformed observer expression '\" + expression + \"'\");\n        }\n        createMethodEffect(this, sig, TYPES.OBSERVE, runMultiObserverEffect);\n      }\n\n      // -- computed ----------------------------------------------\n\n      _createComputedProperty(property, expression) {\n        let sig = parseMethod(expression);\n        if (!sig) {\n          throw new Error(\"Malformed computed expression '\" + expression + \"'\");\n        }\n        createMethodEffect(this, sig, TYPES.COMPUTE,\n          runComputedEffect, property);\n      }\n\n      // -- annotation ----------------------------------------------\n\n      _bindTemplate(template) {\n        bindTemplate(this, template);\n      }\n\n      _setupBindings(dom, notes) {\n        setupBindings(this, dom, notes);\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  let utils = Polymer.Utils;\n\n  let effectUid = 0;\n\n  function runComputedEffects(inst, changedProps, oldProps) {\n    const COMPUTE = inst.PROPERTY_EFFECT_TYPES.COMPUTE;\n    if (inst[COMPUTE]) {\n      let inputProps = changedProps;\n      let computedProps;\n      while (runEffects(inst, COMPUTE, inputProps)) {\n        utils.mixin(oldProps, inst.__dataOld);\n        utils.mixin(changedProps, inst.__dataPending);\n        computedProps = utils.mixin(computedProps || {}, inst.__dataPending);\n        inputProps = inst.__dataPending;\n        inst.__dataPending = null;\n      }\n      return computedProps;\n    }\n  }\n\n  function computeLinkedPaths(inst, changedProps, computedProps) {\n    const links = inst.__dataLinkedPaths;\n    if (links) {\n      computedProps = computedProps || {};\n      let link;\n      for (let a in links) {\n        let b = links[a];\n        for (let path in changedProps) {\n          if (Polymer.Path.isDescendant(a, path)) {\n            link = Polymer.Path.translate(a, b, path);\n            changedProps[link] = computedProps[link] =\n              inst.__data[link] = changedProps[path];\n          } else if (Polymer.Path.isDescendant(b, path)) {\n            link = Polymer.Path.translate(b, a, path);\n            changedProps[link] = computedProps[link] =\n              inst.__data[link] = changedProps[path];\n          }\n        }\n      }\n    }\n    return computedProps;\n  }\n\n  function notifyProperties(inst, changedProps, computedProps, oldProps) {\n    // Determine which props to notify\n    let props = inst.__dataFromAbove ? computedProps : changedProps;\n    // Save interim data for potential re-entry\n    let runId = (inst._runId = ((inst._runId || 0) + 1));\n    inst.__dataInterim = inst.__dataInterim ?\n      utils.mixin(inst.__dataInterim, changedProps) : changedProps;\n    inst.__dataInterimOld = inst.__dataInterimOld ?\n      utils.mixin(inst.__dataInterimOld, oldProps) : oldProps;\n    // Notify\n    let notified;\n    let notifyEffects = inst[inst.PROPERTY_EFFECT_TYPES.NOTIFY];\n    let id = effectUid++;\n    // Try normal notify effects; if none, fall back to try path notification\n    for (let prop in props) {\n      if (notifyEffects && runEffectsForProperty(inst, notifyEffects, id,\n        prop, oldProps && oldProps[prop])) {\n        notified = true;\n      } else if (notifyPath(inst, prop)) {\n        notified = true;\n      }\n    }\n    // Flush host if we actually notified and host was batching\n    let host;\n    if (notified && (host = inst.__dataHost) && host.setProperties) {\n      host._flushProperties();\n    }\n    // Combine & return interim data only for last entry\n    if (runId == inst._runId) {\n      changedProps = inst.__dataInterim;\n      oldProps = inst.__dataInterimOld;\n      inst.__dataInterim = null;\n      inst.__dataInterimOld = null;\n      return { changedProps, oldProps };\n    }\n  }\n\n  function notifyPath(inst, prop) {\n    let rootProperty = Polymer.Path.root(prop);\n    if (rootProperty !== prop) {\n      let name = Polymer.CaseMap.camelToDashCase(rootProperty) + '-changed';\n      let options = { detail: {value: inst.__data[prop], path: prop }};\n      inst._dispatchNotifyingEvent(new CustomEvent(name, options));\n      return true;\n    }\n  }\n\n  function runEffects(inst, type, props, oldProps) {\n    let ran;\n    let effects = inst[type];\n    if (effects) {\n      let id = effectUid++;\n      for (let prop in props) {\n        if (runEffectsForProperty(inst, effects, id, prop,\n          oldProps && oldProps[prop])) {\n          ran = true;\n        }\n      }\n    }\n    return ran;\n  }\n\n  function runEffectsForProperty(inst, effects, id, prop, old) {\n    let ran;\n    let rootProperty = Polymer.Path.root(prop);\n    let fxs = effects[rootProperty];\n    if (fxs) {\n      let fromAbove = inst.__dataFromAbove;\n      for (let i=0, l=fxs.length, fx; (i<l) && (fx=fxs[i]); i++) {\n        if (Polymer.Path.matches(fx.path, prop) &&\n          (!fx.info || fx.info.lastRun !== id)) {\n          fx.fn(inst, prop, inst.__data[prop], old, fx.info, fromAbove);\n          if (fx.info) {\n            fx.info.lastRun = id;\n          }\n          ran = true;\n        }\n      }\n    }\n    return ran;\n  }\n\n  Polymer.BatchedEffects = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class BatchedEffects extends Polymer.PropertyEffects(superClass) {\n\n      constructor() {\n        super();\n        this.__dataPendingClients = null;\n      }\n\n      // -- set properties machinery\n\n      _propertiesChanged(currentProps, changedProps, oldProps) {\n        // ----------------------------\n        // let c = Object.getOwnPropertyNames(changedProps || {});\n        // console.group(this.localName + '#' + this.id + ': ' + c);\n        // ----------------------------\n        // Compute\n        let computedProps = runComputedEffects(this, changedProps, oldProps);\n        // Compute linked paths\n        computedProps = computeLinkedPaths(this, changedProps, computedProps);\n        // Notify\n        let props = notifyProperties(this, changedProps, computedProps, oldProps);\n        if (props) {\n          oldProps = props.oldProps;\n          changedProps = props.changedProps;\n          // Propagate\n          runEffects(this, this.PROPERTY_EFFECT_TYPES.PROPAGATE, changedProps);\n          // Flush clients\n          this._flushClients();\n          // Reflect\n          runEffects(this, this.PROPERTY_EFFECT_TYPES.REFLECT,\n            changedProps, oldProps);\n          // Observe\n          runEffects(this, this.PROPERTY_EFFECT_TYPES.OBSERVE,\n            changedProps, oldProps);\n        }\n        // ----------------------------\n        // console.groupEnd(this.localName + '#' + this.id + ': ' + c);\n        // ----------------------------\n      }\n\n      _setPropertyToNodeFromAnnotation(node, prop, value) {\n        // TODO(kschaaf): fix id of BatchedEffects client...\n        if (node.setProperties) {\n          if (!node._hasReadOnlyEffect(prop)) {\n            if (node._setPendingProperty(prop, value)) {\n              this._enqueueClient(node);\n            }\n          }\n        } else {\n          super._setPropertyToNodeFromAnnotation(node, prop, value);\n        }\n      }\n\n      _setPropertyFromNotification(path, value, event) {\n        let detail = event.detail;\n        if (detail && detail.queueProperty) {\n          if (!this._hasReadOnlyEffect(path)) {\n            if ((path = this._setPathOrUnmanagedProperty(path, value))) {\n              this._setPendingProperty(path, value);\n            }\n          }\n        } else {\n          super._setPropertyFromNotification(path, value, event);\n        }\n      }\n\n      _dispatchNotifyingEvent(event) {\n        event.detail.queueProperty = true;\n        super._dispatchNotifyingEvent(event);\n      }\n\n      _setPropertyFromComputation(prop, value) {\n        if (this._hasPropertyEffect(prop)) {\n          this._setPendingProperty(prop, value);\n        } else {\n          this[prop] = value;\n        }\n      }\n\n      _enqueueClient(client) {\n        this.__dataPendingClients = this.__dataPendingClients || new Map();\n        if (client !== this) {\n          this.__dataPendingClients.set(client, true);\n        }\n      }\n\n      _flushClients() {\n        // Flush all clients\n        let clients = this.__dataPendingClients;\n        if (clients) {\n          clients.forEach((v, client) => {\n            // TODO(kschaaf): more explicit check?\n            if (client._flushProperties) {\n              client._flushProperties(true);\n            }\n          });\n          this.__dataPendingClients = null;\n        }\n      }\n\n      setProperties(props) {\n        for (let path in props) {\n          if (!this._hasReadOnlyEffect(path)) {\n            let value = props[path];\n            if ((path = this._setPathOrUnmanagedProperty(path, value))) {\n              this._setPendingProperty(path, value);\n            }\n          }\n        }\n        this._invalidateProperties();\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n  'use strict';\n\n  var StyleGather = {\n    MODULE_STYLES_SELECTOR: 'style, link[rel=import][type~=css], template',\n    INCLUDE_ATTR: 'include',\n    _importModule(moduleId) {\n      if (!Polymer.DomModule) {\n        return null;\n      }\n      return Polymer.DomModule.import(moduleId);\n    },\n    cssFromModules(moduleIds, warnIfNotFound) {\n      var modules = moduleIds.trim().split(' ');\n      var cssText = '';\n      for (var i=0; i < modules.length; i++) {\n        cssText += this.cssFromModule(modules[i], warnIfNotFound);\n      }\n      return cssText;\n    },\n\n    // returns cssText of styles in a given module; also un-applies any\n    // styles that apply to the document.\n    cssFromModule(moduleId, warnIfNotFound) {\n      var m = this._importModule(moduleId);\n      if (m && !m._cssText) {\n        m._cssText = this.cssFromElement(m);\n      }\n      if (!m && warnIfNotFound) {\n        console.warn('Could not find style data in module named', moduleId);\n      }\n      return m && m._cssText || '';\n    },\n\n    // support lots of ways to discover css...\n    cssFromElement(element) {\n      var cssText = '';\n      // if element is a template, get content from its .content\n      var content = element.content || element;\n      var e$ = content.querySelectorAll(this.MODULE_STYLES_SELECTOR);\n      for (var i=0, e; i < e$.length; i++) {\n        e = e$[i];\n        // look inside templates for elements\n        if (e.localName === 'template') {\n          cssText += this.cssFromElement(e);\n        } else {\n          // style elements inside dom-modules will apply to the main document\n          // we don't want this, so we remove them here.\n          if (e.localName === 'style') {\n            var include = e.getAttribute(this.INCLUDE_ATTR);\n            // now support module refs on 'styling' elements\n            if (include) {\n              cssText += this.cssFromModules(include, true);\n            }\n            // get style element applied to main doc via HTMLImports polyfill\n            e = e.__appliedElement || e;\n            e.parentNode.removeChild(e);\n            cssText += Polymer.ResolveUrl.resolveCss(e.textContent, element.ownerDocument);\n            // it's an import, assume this is a text file of css content.\n            // TODO(sorvell): plan is to deprecate this way to get styles;\n            // remember to add deprecation warning when this is done.\n          } else if (e.import && e.import.body) {\n            cssText += Polymer.ResolveUrl.resolveCss(e.import.body.textContent, e.import);\n          }\n        }\n      }\n      return cssText;\n    }\n  };\n\n  Polymer.StyleGather = StyleGather;\n})();\n(function() {\n    'use strict';\n\n    var StyleUtil = {\n\n      isTargetedBuild: function(buildType) {\n        return (!window.ShadyDOM || !ShadyDOM.inUse) ?\n          buildType === 'shadow' : buildType === 'shady';\n      },\n\n      cssBuildTypeForModule: function (module) {\n        var dm = Polymer.DomModule.import(module);\n        if (dm) {\n          return this.getCssBuildType(dm);\n        }\n      },\n\n      getCssBuildType: function(element) {\n        return element.getAttribute('css-build');\n      }\n\n    };\n\n    Polymer.StyleUtil = StyleUtil;\n\n  })();\n(function() {\n\n  'use strict';\n\n  let caseMap = Polymer.CaseMap;\n\n  // Same as Polymer.Utils.mixin, but upgrades shorthand type\n  // syntax to { type: Type }\n  function flattenProperties(flattenedProps, props) {\n    for (let p in props) {\n      let o = props[p];\n      if (typeof o == 'function') {\n        o = { type: o };\n      }\n      flattenedProps[p] = o;\n    }\n    return flattenedProps;\n  }\n\n  Polymer.ElementMixin = Polymer.Utils.cachingMixin(function(base) {\n\n    return class PolymerElement extends Polymer.BatchedEffects(base) {\n\n      // returns the config object on specifically on `this` class (not super)\n      // config is used for:\n      // (1) super chain mixes togther to make `flattenedProperties` which is\n      // then used to make observedAttributes and set property defaults\n      // (2) properties effects and observers are created from it at `finalize` time.\n      static get _ownConfig() {\n        if (!this.hasOwnProperty('__ownConfig')) {\n          this.__ownConfig = this.hasOwnProperty('config') ? this.config : {};\n        }\n        return this.__ownConfig;\n      }\n\n      // a flattened list of properties mixed together from the chain of all\n      // constructor's `config.properties`\n      // This list is used to create\n      // (1) observedAttributes,\n      // (2) element default values\n      static get _flattenedProperties() {\n        if (!this.hasOwnProperty('__flattenedProperties')) {\n          // TODO(sorvell): consider optimizing; shorthand type support requires\n          // an extra loop to upgrade shorthand property info to longhand\n          this.__flattenedProperties = flattenProperties({}, this._ownConfig.properties);\n          let superCtor = Object.getPrototypeOf(this.prototype).constructor;\n          if (superCtor.prototype instanceof PolymerElement) {\n            this.__flattenedProperties = flattenProperties(\n              Object.create(superCtor._flattenedProperties),\n              this.__flattenedProperties);\n          }\n        }\n        return this.__flattenedProperties;\n      }\n\n      static get observedAttributes() {\n        if (!this.hasOwnProperty('_observedAttributes')) {\n          // observedAttributes must be finalized at registration time\n          this._observedAttributes = this._addPropertiesToAttributes(\n            this._flattenedProperties, []);\n        }\n        return this._observedAttributes;\n      }\n\n      static _addPropertiesToAttributes(properties, list) {\n        for (let prop in properties) {\n          list.push(Polymer.CaseMap.camelToDashCase(prop));\n        }\n        return list;\n      }\n\n      static get finalized() {\n        return this.hasOwnProperty('_finalized');\n      }\n\n      static set finalized(value) {\n        this._finalized = value;\n      }\n\n      // TODO(sorvell): need to work on public api surrouding `finalize`.\n      // Due to meta-programming, it's awkward to make a subclass impl of this.\n      // However, a user might want to call `finalize` prior to define to do\n      // this work eagerly. Need to also decide on `finalizeConfig(config)` and\n      // `finalizeTemplate(template)`. Both are public but have simiarly\n      // awkward subclassing characteristics.\n      static finalize() {\n        let proto = this.prototype;\n        if (!this.finalized) {\n\n          let superProto = Object.getPrototypeOf(proto);\n          let superCtor = superProto && superProto.constructor;\n          if (superCtor.prototype instanceof PolymerElement) {\n            superCtor.finalize();\n          }\n          this.finalized = true;\n          if (this.hasOwnProperty('is') && this.is) {\n            Polymer.telemetry.register(proto);\n          }\n          let config = this._ownConfig;\n          if (config) {\n            this._finalizeConfig(config);\n          }\n          if (this.template) {\n            let template = this.template.cloneNode(true);\n            this._finalizeTemplate(template);\n          }\n        }\n      }\n\n      static _finalizeConfig(config) {\n        if (config.properties) {\n          // process properties\n          for (let p in config.properties) {\n            this.prototype._createPropertyFromConfig(p, config.properties[p]);\n          }\n        }\n        if (config.observers) {\n          for (let i=0; i < config.observers.length; i++) {\n            this.prototype._createMethodObserver(config.observers[i]);\n          }\n        }\n      }\n\n      static get template() {\n        if (!this.hasOwnProperty('_template')) {\n          // TODO(sorvell): support more ways to acquire template.\n          // this requires `is` on constructor...\n          this._template = Polymer.DomModule.import(this.is, 'template') ||\n            // note: implemented so a subclass can retrieve the super\n            // template; call the super impl this way so that `this` points\n            // to the superclass.\n            Object.getPrototypeOf(this.prototype).constructor.template;\n        }\n        return this._template;\n      }\n\n      static _finalizeTemplate(template) {\n        // support `include=\"module-name\"`\n        let cssText = Polymer.StyleGather.cssFromElement(template);\n        if (cssText) {\n          let style = document.createElement('style');\n          style.textContent = cssText;\n          template.content.insertBefore(style, template.content.firstChild);\n        }\n        if (window.ShadyCSS) {\n          window.ShadyCSS.prepareTemplate(template, this.is, this.extends);\n        }\n        var proto = this.prototype;\n        this.prototype._bindTemplate(template);\n        proto._template = template;\n      }\n\n      constructor() {\n        super();\n        // note: `this.constructor.prototype` is wrong in Safari so make sure to\n        // use `__proto__`\n        Polymer.telemetry.instanceCount++;\n        // add self to host's pending client list\n        hostStack.registerHost(this);\n      }\n\n      _initializeProperties() {\n        if (!this.constructor.finalized) {\n          this.constructor.finalize();\n        }\n        super._initializeProperties();\n        // apply property defaults...\n        let p$ = this.constructor._flattenedProperties;\n        for (let p in p$) {\n          let info = p$[p];\n          if (('value' in info) && !this._isPropertyPending(p)) {\n            var value = typeof info.value == 'function' ?\n              info.value.call(this) :\n              info.value;\n            if (this._hasReadOnlyEffect(p)) {\n              this._setProperty(p, value)\n            } else {\n              this[p] = value;\n            }\n          }\n        }\n      }\n\n      // create a property using the metadata in the `config` object\n      _createPropertyFromConfig(name, info) {\n        // computed forces readOnly...\n        if (info.computed) {\n          info.readOnly = true;\n        }\n        // readOnly, computed, reflect, notify only if not already doing so...\n        if (info.readOnly && !this._hasReadOnlyEffect(name)) {\n          this._createReadOnlyProperty(name, !info.computed);\n        }\n        if (info.computed && !this._hasComputedEffect(name)) {\n          this._createComputedProperty(name, info.computed);\n        }\n        if (info.reflectToAttribute && !this._hasReflectEffect(name)) {\n          this._createReflectedProperty(name);\n        }\n        if (info.notify && !this._hasNotifyEffect(name)) {\n          this._createNotifyingProperty(name);\n        }\n        // always add observer\n        if (info.observer) {\n          this._createObservedProperty(name, info.observer);\n        }\n      }\n\n      // reserved for canonical behavior\n      connectedCallback() {\n        if (hostStack.isEmpty()) {\n          this._flushProperties();\n          this.updateStyles();\n        }\n      }\n\n      disconnectedCallback() {}\n\n      ready() {\n        super.ready();\n        if (this._template) {\n          hostStack.beginHosting(this);\n          this.root = this._stampTemplate(this._template);\n          this._flushProperties();\n          this.root = this._attachDom(this.root);\n          hostStack.endHosting(this);\n        } else {\n          this.root = this;\n          this._flushProperties();\n        }\n      }\n\n      /**\n       * Attach an element's stamped dom to itself. By default,\n       * this method creates a `shadowRoot` and adds the dom to it.\n       * However, this method may be overridden to allow an element\n       * to put its dom in another location.\n       *\n       * @method _attachDom\n       * @param {NodeList} dom to attach to the element.\n       * @returns {Node} node to which the dom has been attached.\n       */\n      _attachDom(dom) {\n        if (this.attachShadow) {\n          if (dom) {\n            if (!this.shadowRoot) {\n              this.attachShadow({mode: 'open'});\n            }\n            this.shadowRoot.appendChild(dom);\n            return this.shadowRoot;\n          }\n        } else {\n          throw new Error(`ShadowDOM not available. ` +\n            // BREAKME(sorvell): move to developer conditional when supported.\n           `Polymer.Element can\n              create dom as children instead of in ShadowDOM by setting\n              \\`this.root = this;\\` before \\`ready\\`.`);\n        }\n      }\n\n      attributeChangedCallback(name, old, value) {\n        let property = caseMap.dashToCamelCase(name);\n        let type = this.constructor._flattenedProperties[property].type;\n        if (!this._hasReadOnlyEffect(property)) {\n          this._attributeToProperty(name, value, type);\n        }\n      }\n\n      updateStyles(properties) {\n        if (window.ShadyCSS) {\n          ShadyCSS.applyStyle(this, properties);\n        }\n      }\n\n      /**\n       * Rewrites a given URL relative to the original location of the document\n       * containing the `dom-module` for this element.  This method will return\n       * the same URL before and after vulcanization.\n       *\n       * @method resolveUrl\n       * @param {string} url URL to resolve.\n       * @return {string} Rewritten URL relative to the import\n       */\n      resolveUrl(url) {\n        var module = Polymer.DomModule.import(this.constructor.is);\n        var root = '';\n        if (module) {\n          var assetPath = module.getAttribute('assetpath') || '';\n          root = Polymer.ResolveUrl.resolveUrl(\n            assetPath, module.ownerDocument.baseURI);\n        }\n        return Polymer.ResolveUrl.resolveUrl(url, root);\n      }\n\n    }\n\n  });\n\n  let hostStack = {\n\n    stack: [],\n\n    isEmpty() {\n      return !this.stack.length;\n    },\n\n    registerHost(inst) {\n      if (this.stack.length) {\n        let host = this.stack[this.stack.length-1];\n        host._enqueueClient(inst);\n      }\n    },\n\n    beginHosting(inst) {\n      this.stack.push(inst);\n    },\n\n    endHosting(inst) {\n      let stackLen = this.stack.length;\n      if (stackLen && this.stack[stackLen-1] == inst) {\n        this.stack.pop();\n      }\n    }\n\n  }\n\n  // telemetry\n  Polymer.telemetry = {\n    instanceCount: 0,\n    registrations: [],\n    _regLog: function(prototype) {\n      console.log('[' + prototype.is + ']: registered')\n    },\n    register: function(prototype) {\n      this.registrations.push(prototype);\n      Polymer.log && this._regLog(prototype);\n    },\n    dumpRegistrations: function() {\n      this.registrations.forEach(this._regLog);\n    }\n  };\n\n  Polymer.Element = Polymer.ElementMixin(HTMLElement);\n\n  Polymer.updateStyles = function(props) {\n    if (window.ShadyCSS) {\n      ShadyCSS.updateStyles(props);\n    }\n  };\n\n})();\n(function() {\n\n    // TODO(sorvell): There is an implicit depency on `Polymer.Class` here\n    // that would be good to resolve. It's because (elements/class.html)\n    // because this file specially handles `Polymer`.\n\n    // Polymer is a Function, but of course this is also an Object, so we\n    // hang various other objects off of Polymer.*\n\n    var userPolymer = window.Polymer;\n\n    window.Polymer = function(info) {\n      // if input is a `class` (aka a function with a prototype), use the prototype\n      // remember that the `constructor` will never be called\n      var klass;\n      if (typeof info === 'function') {\n        klass = info;\n      } else {\n        klass = Polymer.Class(info);\n      }\n      var options = {};\n      if (klass.extends) {\n        options.extends = klass.extends;\n      }\n      customElements.define(klass.is, klass, options);\n      return klass;\n    };\n\n    if (userPolymer) {\n      for (var i in userPolymer) {\n        Polymer[i] = userPolymer[i];\n      }\n    }\n\n  })();\n(function() {\n\n  'use strict';\n\n  Polymer.Async = {\n\n    _currVal: 0,\n    _lastVal: 0,\n    _callbacks: [],\n    _twiddleContent: 0,\n    _twiddle: document.createTextNode(''),\n\n    run: function (callback, waitTime) {\n      if (waitTime > 0) {\n        return ~setTimeout(callback, waitTime);\n      } else {\n        this._twiddle.textContent = this._twiddleContent++;\n        this._callbacks.push(callback);\n        return this._currVal++;\n      }\n    },\n\n    cancel: function(handle) {\n      if (handle < 0) {\n        clearTimeout(~handle);\n      } else {\n        var idx = handle - this._lastVal;\n        if (idx >= 0) {\n          if (!this._callbacks[idx]) {\n            throw 'invalid async handle: ' + handle;\n          }\n          this._callbacks[idx] = null;\n        }\n      }\n    },\n\n    _atEndOfMicrotask: function() {\n      var len = this._callbacks.length;\n      for (var i=0; i<len; i++) {\n        var cb = this._callbacks[i];\n        if (cb) {\n          try {\n            cb();\n          } catch(e) {\n            // Clear queue up to this point & start over after throwing\n            i++;\n            this._callbacks.splice(0, i);\n            this._lastVal += i;\n            this._twiddle.textContent = this._twiddleContent++;\n            throw e;\n          }\n        }\n      }\n      this._callbacks.splice(0, len);\n      this._lastVal += len;\n    },\n\n    flush: function() {\n      this.observer.takeRecords();\n      this._atEndOfMicrotask();\n    }\n  };\n\n  Polymer.Async.observer = new window.MutationObserver(function() {\n    Polymer.Async._atEndOfMicrotask();\n  });\n  Polymer.Async.observer.observe(Polymer.Async._twiddle, {characterData: true});\n\n})();\nPolymer.Debouncer = function Debouncer(context) {\n  this.context = context;\n  var self = this;\n  this.boundFlush = function() {\n    self.flush();\n  };\n};\n\nPolymer.Utils.mixin(Polymer.Debouncer.prototype, {\n\n  go: function(callback, wait) {\n    var h;\n    this.finish = function() {\n      Polymer.Async.cancel(h);\n    };\n    h = Polymer.Async.run(this.boundFlush, wait);\n    this.callback = callback;\n  },\n\n  cancel: function() {\n    if (this.finish) {\n      this.finish();\n      this.finish = null;\n    }\n  },\n\n  flush: function() {\n    if (this.finish) {\n      this.cancel();\n      this.callback.call(this.context);\n    }\n  },\n\n  isActive: function() {\n    return Boolean(this.finish);\n  }\n\n});\n\nPolymer.Debouncer.debounce = function(debouncer, callback, wait, context) {\n  context = context || this;\n  if (debouncer) {\n    debouncer.cancel();\n  } else {\n    debouncer = new Polymer.Debouncer(context);\n  }\n  debouncer.go(callback, wait);\n  return debouncer;\n};\n(function() {\n\n  'use strict';\n\n  // let DIRECTION_MAP = {\n  //   x: 'pan-x',\n  //   y: 'pan-y',\n  //   none: 'none',\n  //   all: 'auto'\n  // };\n\n  let wrap = function(n) { return n; };\n\n  // detect native touch action support\n  let HAS_NATIVE_TA = typeof document.head.style.touchAction === 'string';\n  let GESTURE_KEY = '__polymerGestures';\n  let HANDLED_OBJ = '__polymerGesturesHandled';\n  let TOUCH_ACTION = '__polymerGesturesTouchAction';\n  // radius for tap and track\n  let TAP_DISTANCE = 25;\n  let TRACK_DISTANCE = 5;\n  // number of last N track positions to keep\n  let TRACK_LENGTH = 2;\n\n  // Disabling \"mouse\" handlers for 2500ms is enough\n  let MOUSE_TIMEOUT = 2500;\n  let MOUSE_EVENTS = ['mousedown', 'mousemove', 'mouseup', 'click'];\n  // an array of bitmask values for mapping MouseEvent.which to MouseEvent.buttons\n  let MOUSE_WHICH_TO_BUTTONS = [0, 1, 4, 2];\n  let MOUSE_HAS_BUTTONS = (function() {\n    try {\n      return new MouseEvent('test', {buttons: 1}).buttons === 1;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  // Check for touch-only devices\n  let IS_TOUCH_ONLY = navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);\n\n  // touch will make synthetic mouse events\n  // `preventDefault` on touchend will cancel them,\n  // but this breaks `<input>` focus and link clicks\n  // disable mouse handlers for MOUSE_TIMEOUT ms after\n  // a touchend to ignore synthetic mouse events\n  let mouseCanceller = function(mouseEvent) {\n    // skip synthetic mouse events\n    mouseEvent[HANDLED_OBJ] = {skip: true};\n    // disable \"ghost clicks\"\n    if (mouseEvent.type === 'click') {\n      let path = mouseEvent.composedPath && mouseEvent.composedPath();\n      if (path) {\n        for (let i = 0; i < path.length; i++) {\n          if (path[i] === POINTERSTATE.mouse.target) {\n            return;\n          }\n        }\n      }\n      mouseEvent.preventDefault();\n      mouseEvent.stopPropagation();\n    }\n  };\n\n  function setupTeardownMouseCanceller(setup) {\n    for (let i = 0, en; i < MOUSE_EVENTS.length; i++) {\n      en = MOUSE_EVENTS[i];\n      if (setup) {\n        document.addEventListener(en, mouseCanceller, true);\n      } else {\n        document.removeEventListener(en, mouseCanceller, true);\n      }\n    }\n  }\n\n  function ignoreMouse() {\n    if (IS_TOUCH_ONLY) {\n      return;\n    }\n    if (!POINTERSTATE.mouse.mouseIgnoreJob) {\n      setupTeardownMouseCanceller(true);\n    }\n    let unset = function() {\n      setupTeardownMouseCanceller();\n      POINTERSTATE.mouse.target = null;\n      POINTERSTATE.mouse.mouseIgnoreJob = null;\n    };\n    POINTERSTATE.mouse.mouseIgnoreJob = Polymer.Debouncer.debounce(\n      POINTERSTATE.mouse.mouseIgnoreJob, unset, MOUSE_TIMEOUT);\n  }\n\n  function hasLeftMouseButton(ev) {\n    let type = ev.type;\n    // exit early if the event is not a mouse event\n    if (MOUSE_EVENTS.indexOf(type) === -1) {\n      return false;\n    }\n    // ev.button is not reliable for mousemove (0 is overloaded as both left button and no buttons)\n    // instead we use ev.buttons (bitmask of buttons) or fall back to ev.which (deprecated, 0 for no buttons, 1 for left button)\n    if (type === 'mousemove') {\n      // allow undefined for testing events\n      let buttons = ev.buttons === undefined ? 1 : ev.buttons;\n      if ((ev instanceof window.MouseEvent) && !MOUSE_HAS_BUTTONS) {\n        buttons = MOUSE_WHICH_TO_BUTTONS[ev.which] || 0;\n      }\n      // buttons is a bitmask, check that the left button bit is set (1)\n      return Boolean(buttons & 1);\n    } else {\n      // allow undefined for testing events\n      let button = ev.button === undefined ? 0 : ev.button;\n      // ev.button is 0 in mousedown/mouseup/click for left button activation\n      return button === 0;\n    }\n  }\n\n  function isSyntheticClick(ev) {\n    if (ev.type === 'click') {\n      // ev.detail is 0 for HTMLElement.click in most browsers\n      if (ev.detail === 0) {\n        return true;\n      }\n      // in the worst case, check that the x/y position of the click is within\n      // the bounding box of the target of the event\n      // Thanks IE 10 >:(\n      let t = gestures.findOriginalTarget(ev);\n      let bcr = t.getBoundingClientRect();\n      // use page x/y to account for scrolling\n      let x = ev.pageX, y = ev.pageY;\n      // ev is a synthetic click if the position is outside the bounding box of the target\n      return !((x >= bcr.left && x <= bcr.right) && (y >= bcr.top && y <= bcr.bottom));\n    }\n    return false;\n  }\n\n  let POINTERSTATE = {\n    mouse: {\n      target: null,\n      mouseIgnoreJob: null\n    },\n    touch: {\n      x: 0,\n      y: 0,\n      id: -1,\n      scrollDecided: false\n    }\n  };\n\n  function firstTouchAction(ev) {\n    let ta = 'auto';\n    let path = ev.composedPath && ev.composedPath();\n    if (path) {\n      for (let i = 0, n; i < path.length; i++) {\n        n = path[i];\n        if (n[TOUCH_ACTION]) {\n          ta = n[TOUCH_ACTION];\n          break;\n        }\n      }\n    }\n    return ta;\n  }\n\n  function trackDocument(stateObj, movefn, upfn) {\n    stateObj.movefn = movefn;\n    stateObj.upfn = upfn;\n    document.addEventListener('mousemove', movefn);\n    document.addEventListener('mouseup', upfn);\n  }\n\n  function untrackDocument(stateObj) {\n    document.removeEventListener('mousemove', stateObj.movefn);\n    document.removeEventListener('mouseup', stateObj.upfn);\n    stateObj.movefn = null;\n    stateObj.upfn = null;\n  }\n\n  let gestures = {\n    gestures: {},\n    recognizers: [],\n\n    deepTargetFind: function(x, y) {\n      let node = document.elementFromPoint(x, y);\n      let next = node;\n      // this code path is only taken when native ShadowDOM is used\n      // if there is a shadowroot, it may have a node at x/y\n      // if there is not a shadowroot, exit the loop\n      while (next && next.shadowRoot) {\n        // if there is a node at x/y in the shadowroot, look deeper\n        next = next.shadowRoot.elementFromPoint(x, y);\n        if (next) {\n          node = next;\n        }\n      }\n      return node;\n    },\n    // a cheaper check than ev.composedPath()[0];\n    findOriginalTarget: function(ev) {\n      // shadowdom\n      if (ev.composedPath) {\n        return ev.composedPath()[0];\n      }\n      // shadydom\n      return ev.target;\n    },\n    handleNative: function(ev) {\n      let handled;\n      let type = ev.type;\n      let node = wrap(ev.currentTarget);\n      let gobj = node[GESTURE_KEY];\n      if (!gobj) {\n        return;\n      }\n      let gs = gobj[type];\n      if (!gs) {\n        return;\n      }\n      if (!ev[HANDLED_OBJ]) {\n        ev[HANDLED_OBJ] = {};\n        if (type.slice(0, 5) === 'touch') {\n          let t = ev.changedTouches[0];\n          if (type === 'touchstart') {\n            // only handle the first finger\n            if (ev.touches.length === 1) {\n              POINTERSTATE.touch.id = t.identifier;\n            }\n          }\n          if (POINTERSTATE.touch.id !== t.identifier) {\n            return;\n          }\n          if (!HAS_NATIVE_TA) {\n            if (type === 'touchstart' || type === 'touchmove') {\n              gestures.handleTouchAction(ev);\n            }\n          }\n          if (type === 'touchend') {\n            let rootTarget = ev.composedPath ? ev.composedPath()[0] : ev.target;\n            POINTERSTATE.mouse.target = rootTarget;\n            // ignore syntethic mouse events after a touch\n            ignoreMouse(true);\n          }\n        }\n      }\n      handled = ev[HANDLED_OBJ];\n      // used to ignore synthetic mouse events\n      if (handled.skip) {\n        return;\n      }\n      let recognizers = gestures.recognizers;\n      // reset recognizer state\n      for (let i = 0, r; i < recognizers.length; i++) {\n        r = recognizers[i];\n        if (gs[r.name] && !handled[r.name]) {\n          if (r.flow && r.flow.start.indexOf(ev.type) > -1) {\n            if (r.reset) {\n              r.reset();\n            }\n          }\n        }\n      }\n      // enforce gesture recognizer order\n      for (let i = 0, r; i < recognizers.length; i++) {\n        r = recognizers[i];\n        if (gs[r.name] && !handled[r.name]) {\n          handled[r.name] = true;\n          r[type](ev);\n        }\n      }\n    },\n\n    handleTouchAction: function(ev) {\n      let t = ev.changedTouches[0];\n      let type = ev.type;\n      if (type === 'touchstart') {\n        POINTERSTATE.touch.x = t.clientX;\n        POINTERSTATE.touch.y = t.clientY;\n        POINTERSTATE.touch.scrollDecided = false;\n      } else if (type === 'touchmove') {\n        if (POINTERSTATE.touch.scrollDecided) {\n          return;\n        }\n        POINTERSTATE.touch.scrollDecided = true;\n        let ta = firstTouchAction(ev);\n        let prevent = false;\n        let dx = Math.abs(POINTERSTATE.touch.x - t.clientX);\n        let dy = Math.abs(POINTERSTATE.touch.y - t.clientY);\n        if (!ev.cancelable) {\n          // scrolling is happening\n        } else if (ta === 'none') {\n          prevent = true;\n        } else if (ta === 'pan-x') {\n          prevent = dy > dx;\n        } else if (ta === 'pan-y') {\n          prevent = dx > dy;\n        }\n        if (prevent) {\n          ev.preventDefault();\n        } else {\n          gestures.prevent('track');\n        }\n      }\n    },\n\n    addListener: function(node, evType, handler) {\n      if (this.gestures[evType]) {\n        this.add(node, evType, handler);\n        return true;\n      }\n    },\n\n    removeListener: function(node, evType, handler) {\n      if (this.gestures[evType]) {\n        this.remove(node, evType, handler);\n        return true;\n      }\n    },\n\n    // automate the event listeners for the native events\n    add: function(node, evType, handler) {\n      // SD polyfill: handle case where `node` is unwrapped, like `document`\n      node = wrap(node);\n      let recognizer = this.gestures[evType];\n      let deps = recognizer.deps;\n      let name = recognizer.name;\n      let gobj = node[GESTURE_KEY];\n      if (!gobj) {\n        node[GESTURE_KEY] = gobj = {};\n      }\n      for (let i = 0, dep, gd; i < deps.length; i++) {\n        dep = deps[i];\n        // don't add mouse handlers on iOS because they cause gray selection overlays\n        if (IS_TOUCH_ONLY && MOUSE_EVENTS.indexOf(dep) > -1) {\n          continue;\n        }\n        gd = gobj[dep];\n        if (!gd) {\n          gobj[dep] = gd = {_count: 0};\n        }\n        if (gd._count === 0) {\n          node.addEventListener(dep, this.handleNative);\n        }\n        gd[name] = (gd[name] || 0) + 1;\n        gd._count = (gd._count || 0) + 1;\n      }\n      node.addEventListener(evType, handler);\n      if (recognizer.touchAction) {\n        this.setTouchAction(node, recognizer.touchAction);\n      }\n    },\n\n    // automate event listener removal for native events\n    remove: function(node, evType, handler) {\n      // SD polyfill: handle case where `node` is unwrapped, like `document`\n      node = wrap(node);\n      let recognizer = this.gestures[evType];\n      let deps = recognizer.deps;\n      let name = recognizer.name;\n      let gobj = node[GESTURE_KEY];\n      if (gobj) {\n        for (let i = 0, dep, gd; i < deps.length; i++) {\n          dep = deps[i];\n          gd = gobj[dep];\n          if (gd && gd[name]) {\n            gd[name] = (gd[name] || 1) - 1;\n            gd._count = (gd._count || 1) - 1;\n            if (gd._count === 0) {\n              node.removeEventListener(dep, this.handleNative);\n            }\n          }\n        }\n      }\n      node.removeEventListener(evType, handler);\n    },\n\n    register: function(recog) {\n      this.recognizers.push(recog);\n      for (let i = 0; i < recog.emits.length; i++) {\n        this.gestures[recog.emits[i]] = recog;\n      }\n    },\n\n    findRecognizerByEvent: function(evName) {\n      for (let i = 0, r; i < this.recognizers.length; i++) {\n        r = this.recognizers[i];\n        for (let j = 0, n; j < r.emits.length; j++) {\n          n = r.emits[j];\n          if (n === evName) {\n            return r;\n          }\n        }\n      }\n      return null;\n    },\n\n    // set scrolling direction on node to check later on first move\n    // must call this before adding event listeners!\n    setTouchAction: function(node, value) {\n      if (HAS_NATIVE_TA) {\n        node.style.touchAction = value;\n      }\n      node[TOUCH_ACTION] = value;\n    },\n\n    fire: function(target, type, detail) {\n      let ev = new Event(type, { bubbles: true, cancelable: true, composed: true });\n      ev.detail = detail;\n      target.dispatchEvent(ev);\n      // forward `preventDefault` in a clean way\n      if (ev.defaultPrevented) {\n        let se = detail.sourceEvent;\n        // sourceEvent may be a touch, which is not preventable this way\n        if (se && se.preventDefault) {\n          se.preventDefault();\n        }\n      }\n    },\n\n    prevent: function(evName) {\n      let recognizer = this.findRecognizerByEvent(evName);\n      if (recognizer.info) {\n        recognizer.info.prevent = true;\n      }\n    }\n  };\n\n  gestures.register({\n    name: 'downup',\n    deps: ['mousedown', 'touchstart', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['mouseup', 'touchend']\n    },\n    emits: ['down', 'up'],\n\n    info: {\n      movefn: null,\n      upfn: null\n    },\n\n    reset: function() {\n      untrackDocument(this.info);\n    },\n\n    mousedown: function(e) {\n      if (!hasLeftMouseButton(e)) {\n        return;\n      }\n      let t = gestures.findOriginalTarget(e);\n      let self = this;\n      let movefn = function movefn(e) {\n        if (!hasLeftMouseButton(e)) {\n          self.fire('up', t, e);\n          untrackDocument(self.info);\n        }\n      };\n      let upfn = function upfn(e) {\n        if (hasLeftMouseButton(e)) {\n          self.fire('up', t, e);\n        }\n        untrackDocument(self.info);\n      };\n      trackDocument(this.info, movefn, upfn);\n      this.fire('down', t, e);\n    },\n    touchstart: function(e) {\n      this.fire('down', gestures.findOriginalTarget(e), e.changedTouches[0]);\n    },\n    touchend: function(e) {\n      this.fire('up', gestures.findOriginalTarget(e), e.changedTouches[0]);\n    },\n    fire: function(type, target, event) {\n      gestures.fire(target, type, {\n        x: event.clientX,\n        y: event.clientY,\n        sourceEvent: event,\n        prevent: function(e) {\n          return gestures.prevent(e);\n        }\n      });\n    }\n  });\n\n  gestures.register({\n    name: 'track',\n    touchAction: 'none',\n    deps: ['mousedown', 'touchstart', 'touchmove', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['mouseup', 'touchend']\n    },\n    emits: ['track'],\n\n    info: {\n      x: 0,\n      y: 0,\n      state: 'start',\n      started: false,\n      moves: [],\n      addMove: function(move) {\n        if (this.moves.length > TRACK_LENGTH) {\n          this.moves.shift();\n        }\n        this.moves.push(move);\n      },\n      movefn: null,\n      upfn: null,\n      prevent: false\n    },\n\n    reset: function() {\n      this.info.state = 'start';\n      this.info.started = false;\n      this.info.moves = [];\n      this.info.x = 0;\n      this.info.y = 0;\n      this.info.prevent = false;\n      untrackDocument(this.info);\n    },\n\n    hasMovedEnough: function(x, y) {\n      if (this.info.prevent) {\n        return false;\n      }\n      if (this.info.started) {\n        return true;\n      }\n      let dx = Math.abs(this.info.x - x);\n      let dy = Math.abs(this.info.y - y);\n      return (dx >= TRACK_DISTANCE || dy >= TRACK_DISTANCE);\n    },\n\n    mousedown: function(e) {\n      if (!hasLeftMouseButton(e)) {\n        return;\n      }\n      let t = gestures.findOriginalTarget(e);\n      let self = this;\n      let movefn = function movefn(e) {\n        let x = e.clientX, y = e.clientY;\n        if (self.hasMovedEnough(x, y)) {\n          // first move is 'start', subsequent moves are 'move', mouseup is 'end'\n          self.info.state = self.info.started ? (e.type === 'mouseup' ? 'end' : 'track') : 'start';\n          self.info.addMove({x: x, y: y});\n          if (!hasLeftMouseButton(e)) {\n            // always fire \"end\"\n            self.info.state = 'end';\n            untrackDocument(self.info);\n          }\n          self.fire(t, e);\n          self.info.started = true;\n        }\n      };\n      let upfn = function upfn(e) {\n        if (self.info.started) {\n          gestures.prevent('tap');\n          movefn(e);\n        }\n\n        // remove the temporary listeners\n        untrackDocument(self.info);\n      };\n      // add temporary document listeners as mouse retargets\n      trackDocument(this.info, movefn, upfn);\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    },\n\n    touchstart: function(e) {\n      let ct = e.changedTouches[0];\n      this.info.x = ct.clientX;\n      this.info.y = ct.clientY;\n    },\n\n    touchmove: function(e) {\n      let t = gestures.findOriginalTarget(e);\n      let ct = e.changedTouches[0];\n      let x = ct.clientX, y = ct.clientY;\n      if (this.hasMovedEnough(x, y)) {\n        this.info.addMove({x: x, y: y});\n        this.fire(t, ct);\n        this.info.state = 'track';\n        this.info.started = true;\n      }\n    },\n\n    touchend: function(e) {\n      let t = gestures.findOriginalTarget(e);\n      let ct = e.changedTouches[0];\n      // only trackend if track was started and not aborted\n      if (this.info.started) {\n        // iff tracking, always prevent tap\n        gestures.prevent('tap');\n        // reset started state on up\n        this.info.state = 'end';\n        this.info.addMove({x: ct.clientX, y: ct.clientY});\n        this.fire(t, ct);\n      }\n    },\n\n    fire: function(target, touch) {\n      let secondlast = this.info.moves[this.info.moves.length - 2];\n      let lastmove = this.info.moves[this.info.moves.length - 1];\n      let dx = lastmove.x - this.info.x;\n      let dy = lastmove.y - this.info.y;\n      let ddx, ddy = 0;\n      if (secondlast) {\n        ddx = lastmove.x - secondlast.x;\n        ddy = lastmove.y - secondlast.y;\n      }\n      return gestures.fire(target, 'track', {\n        state: this.info.state,\n        x: touch.clientX,\n        y: touch.clientY,\n        dx: dx,\n        dy: dy,\n        ddx: ddx,\n        ddy: ddy,\n        sourceEvent: touch,\n        hover: function() {\n          return gestures.deepTargetFind(touch.clientX, touch.clientY);\n        }\n      });\n    }\n\n  });\n\n  gestures.register({\n    name: 'tap',\n    deps: ['mousedown', 'click', 'touchstart', 'touchend'],\n    flow: {\n      start: ['mousedown', 'touchstart'],\n      end: ['click', 'touchend']\n    },\n    emits: ['tap'],\n    info: {\n      x: NaN,\n      y: NaN,\n      prevent: false\n    },\n    reset: function() {\n      this.info.x = NaN;\n      this.info.y = NaN;\n      this.info.prevent = false;\n    },\n    save: function(e) {\n      this.info.x = e.clientX;\n      this.info.y = e.clientY;\n    },\n\n    mousedown: function(e) {\n      if (hasLeftMouseButton(e)) {\n        this.save(e);\n      }\n    },\n    click: function(e) {\n      if (hasLeftMouseButton(e)) {\n        this.forward(e);\n      }\n    },\n\n    touchstart: function(e) {\n      this.save(e.changedTouches[0]);\n    },\n    touchend: function(e) {\n      this.forward(e.changedTouches[0]);\n    },\n\n    forward: function(e) {\n      let dx = Math.abs(e.clientX - this.info.x);\n      let dy = Math.abs(e.clientY - this.info.y);\n      let t = gestures.findOriginalTarget(e);\n      // dx,dy can be NaN if `click` has been simulated and there was no `down` for `start`\n      if (isNaN(dx) || isNaN(dy) || (dx <= TAP_DISTANCE && dy <= TAP_DISTANCE) || isSyntheticClick(e)) {\n        // prevent taps from being generated if an event has canceled them\n        if (!this.info.prevent) {\n          gestures.fire(t, 'tap', {\n            x: e.clientX,\n            y: e.clientY,\n            sourceEvent: e\n          });\n        }\n      }\n    }\n  });\n\n  // expose for bc with Polymer 1.0 (e.g. add `tap` listener to document)\n  Polymer.Gestures = gestures;\n\n  Polymer.GestureEventListeners = Polymer.Utils.dedupingMixin(function(superClass) {\n\n    return class GestureEventListeners extends Polymer.EventListeners(superClass) {\n\n      _addEventListenerToNode(node, eventName, handler) {\n        if (!gestures.addListener(node, eventName, handler)) {\n          super._addEventListenerToNode(node, eventName, handler);\n        }\n      }\n\n      _removeEventListenerToNode(node, eventName, handler) {\n        if (!gestures.removeListener(node, eventName, handler)) {\n          super._addEventListenerToNode(node, eventName, handler);\n        }\n      }\n\n    }\n\n  });\n\n})();\n(function() {\n\n  'use strict';\n\n  Polymer.AsyncRender = {\n\n    _scheduled: false,\n\n    _beforeRenderQueue: [],\n\n    _afterRenderQueue: [],\n\n    beforeRender: function(cb) {\n      if (!this._scheduled) {\n        this._schedule();\n      }\n      this._beforeRenderQueue.push(cb);\n    },\n\n    afterRender: function(cb) {\n      if (!this._scheduled) {\n        this._schedule();\n      }\n      this._afterRenderQueue.push(cb);\n    },\n\n    _schedule: function() {\n      this._scheduled = true;\n      var self = this;\n      // before next render\n      requestAnimationFrame(function() {\n        self._scheduled = false;\n        self._flushQueue(self._beforeRenderQueue);\n        // after the render\n        setTimeout(function() {\n          self._flushQueue(self._afterRenderQueue);\n        });\n      });\n    },\n\n    flush: function() {\n      this.flushBeforeRender();\n      this.flushAfterRender();\n    },\n\n    flushBeforeRender: function() {\n      this._flushQueue(this._beforeRenderQueue);\n    },\n\n    flushAfterRender: function() {\n      this._flushQueue(this._afterRenderQueue);\n    },\n\n    _flushQueue: function(queue) {\n      for (var i=0; i<queue.length; i++) {\n        // TODO(sorvell): include exception handling from Async.\n        try {\n          queue[i]();\n        } catch(e) {\n          console.warn(e);\n        }\n      }\n      queue.splice(0, queue.length);\n    }\n\n  };\n\n  // bc\n  Polymer.RenderStatus = {\n    afterNextRender: function(context, fn, args) {\n      Polymer.AsyncRender.afterRender(function() {\n        fn.apply(context, args);\n      });\n    }\n  }\n\n})();\n(function() {\n\n  'use strict';\n\n  function newSplice(index, removed, addedCount) {\n    return {\n      index: index,\n      removed: removed,\n      addedCount: addedCount\n    };\n  }\n\n  const EDIT_LEAVE = 0;\n  const EDIT_UPDATE = 1;\n  const EDIT_ADD = 2;\n  const EDIT_DELETE = 3;\n\n  let ArraySplice = {\n\n    // Note: This function is *based* on the computation of the Levenshtein\n    // \"edit\" distance. The one change is that \"updates\" are treated as two\n    // edits - not one. With Array splices, an update is really a delete\n    // followed by an add. By retaining this, we optimize for \"keeping\" the\n    // maximum array items in the original array. For example:\n    //\n    //   'xxxx123' -> '123yyyy'\n    //\n    // With 1-edit updates, the shortest path would be just to update all seven\n    // characters. With 2-edit updates, we delete 4, leave 3, and add 4. This\n    // leaves the substring '123' intact.\n    calcEditDistances(current, currentStart, currentEnd,\n                                old, oldStart, oldEnd) {\n      // \"Deletion\" columns\n      let rowCount = oldEnd - oldStart + 1;\n      let columnCount = currentEnd - currentStart + 1;\n      let distances = new Array(rowCount);\n\n      // \"Addition\" rows. Initialize null column.\n      for (let i = 0; i < rowCount; i++) {\n        distances[i] = new Array(columnCount);\n        distances[i][0] = i;\n      }\n\n      // Initialize null row\n      for (let j = 0; j < columnCount; j++)\n        distances[0][j] = j;\n\n      for (let i = 1; i < rowCount; i++) {\n        for (let j = 1; j < columnCount; j++) {\n          if (this.equals(current[currentStart + j - 1], old[oldStart + i - 1]))\n            distances[i][j] = distances[i - 1][j - 1];\n          else {\n            let north = distances[i - 1][j] + 1;\n            let west = distances[i][j - 1] + 1;\n            distances[i][j] = north < west ? north : west;\n          }\n        }\n      }\n\n      return distances;\n    },\n\n    // This starts at the final weight, and walks \"backward\" by finding\n    // the minimum previous weight recursively until the origin of the weight\n    // matrix.\n    spliceOperationsFromEditDistances(distances) {\n      let i = distances.length - 1;\n      let j = distances[0].length - 1;\n      let current = distances[i][j];\n      let edits = [];\n      while (i > 0 || j > 0) {\n        if (i == 0) {\n          edits.push(EDIT_ADD);\n          j--;\n          continue;\n        }\n        if (j == 0) {\n          edits.push(EDIT_DELETE);\n          i--;\n          continue;\n        }\n        let northWest = distances[i - 1][j - 1];\n        let west = distances[i - 1][j];\n        let north = distances[i][j - 1];\n\n        let min;\n        if (west < north)\n          min = west < northWest ? west : northWest;\n        else\n          min = north < northWest ? north : northWest;\n\n        if (min == northWest) {\n          if (northWest == current) {\n            edits.push(EDIT_LEAVE);\n          } else {\n            edits.push(EDIT_UPDATE);\n            current = northWest;\n          }\n          i--;\n          j--;\n        } else if (min == west) {\n          edits.push(EDIT_DELETE);\n          i--;\n          current = west;\n        } else {\n          edits.push(EDIT_ADD);\n          j--;\n          current = north;\n        }\n      }\n\n      edits.reverse();\n      return edits;\n    },\n\n    /**\n     * Splice Projection functions:\n     *\n     * A splice map is a representation of how a previous array of items\n     * was transformed into a new array of items. Conceptually it is a list of\n     * tuples of\n     *\n     *   <index, removed, addedCount>\n     *\n     * which are kept in ascending index order of. The tuple represents that at\n     * the |index|, |removed| sequence of items were removed, and counting forward\n     * from |index|, |addedCount| items were added.\n     */\n\n    /**\n     * Lacking individual splice mutation information, the minimal set of\n     * splices can be synthesized given the previous state and final state of an\n     * array. The basic approach is to calculate the edit distance matrix and\n     * choose the shortest path through it.\n     *\n     * Complexity: O(l * p)\n     *   l: The length of the current array\n     *   p: The length of the old array\n     */\n    calcSplices(current, currentStart, currentEnd,\n                          old, oldStart, oldEnd) {\n      let prefixCount = 0;\n      let suffixCount = 0;\n      let splice;\n\n      let minLength = Math.min(currentEnd - currentStart, oldEnd - oldStart);\n      if (currentStart == 0 && oldStart == 0)\n        prefixCount = this.sharedPrefix(current, old, minLength);\n\n      if (currentEnd == current.length && oldEnd == old.length)\n        suffixCount = this.sharedSuffix(current, old, minLength - prefixCount);\n\n      currentStart += prefixCount;\n      oldStart += prefixCount;\n      currentEnd -= suffixCount;\n      oldEnd -= suffixCount;\n\n      if (currentEnd - currentStart == 0 && oldEnd - oldStart == 0)\n        return [];\n\n      if (currentStart == currentEnd) {\n        splice = newSplice(currentStart, [], 0);\n        while (oldStart < oldEnd)\n          splice.removed.push(old[oldStart++]);\n\n        return [ splice ];\n      } else if (oldStart == oldEnd)\n        return [ newSplice(currentStart, [], currentEnd - currentStart) ];\n\n      let ops = this.spliceOperationsFromEditDistances(\n          this.calcEditDistances(current, currentStart, currentEnd,\n                                 old, oldStart, oldEnd));\n\n      splice = undefined;\n      let splices = [];\n      let index = currentStart;\n      let oldIndex = oldStart;\n      for (let i = 0; i < ops.length; i++) {\n        switch(ops[i]) {\n          case EDIT_LEAVE:\n            if (splice) {\n              splices.push(splice);\n              splice = undefined;\n            }\n\n            index++;\n            oldIndex++;\n            break;\n          case EDIT_UPDATE:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.addedCount++;\n            index++;\n\n            splice.removed.push(old[oldIndex]);\n            oldIndex++;\n            break;\n          case EDIT_ADD:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.addedCount++;\n            index++;\n            break;\n          case EDIT_DELETE:\n            if (!splice)\n              splice = newSplice(index, [], 0);\n\n            splice.removed.push(old[oldIndex]);\n            oldIndex++;\n            break;\n        }\n      }\n\n      if (splice) {\n        splices.push(splice);\n      }\n      return splices;\n    },\n\n    sharedPrefix(current, old, searchLength) {\n      for (let i = 0; i < searchLength; i++)\n        if (!this.equals(current[i], old[i]))\n          return i;\n      return searchLength;\n    },\n\n    sharedSuffix(current, old, searchLength) {\n      let index1 = current.length;\n      let index2 = old.length;\n      let count = 0;\n      while (count < searchLength && this.equals(current[--index1], old[--index2]))\n        count++;\n\n      return count;\n    },\n\n    calculateSplices(current, previous) {\n      return this.calcSplices(current, 0, current.length, previous, 0,\n                              previous.length);\n    },\n\n    equals(currentValue, previousValue) {\n      return currentValue === previousValue;\n    }\n\n  };\n\n  Polymer.ArraySplice = {\n    calculateSplices(current, previous) {\n      return ArraySplice.calculateSplices(current, previous);\n    }\n  }\n\n})();\n(function() {\n\n  function isSlot(node) {\n    return (node.localName === 'slot');\n  }\n\n  function getEffectiveNodes(node) {\n    if (isSlot(node)) {\n      return node.assignedNodes({flatten: true});\n    } else {\n      return Array.from(node.childNodes).map(node => {\n        if (isSlot(node)) {\n          return node.assignedNodes({flatten: true});\n        } else {\n          return [node];\n        }\n      }).reduce((a, b) => a.concat(b), []);\n    }\n  }\n\n  let effectiveNodesObserverPromise = Promise.resolve();\n\n  class EffectiveNodesObserver {\n\n    constructor(target, callback) {\n      this.target = target;\n      this.callback = callback;\n      this.effectiveNodes = [];\n      this.observer = null;\n      this.scheduled = false;\n      this._boundSchedule = () => {\n        this.schedule();\n      }\n      this.connect();\n      this.schedule();\n    }\n\n    connect() {\n      if (isSlot(this.target)) {\n        this.listenSlots([this.target]);\n      } else {\n        this.listenSlots(this.target.children);\n        if (window.ShadyDOM) {\n          this.shadyChildrenObserver =\n            ShadyDOM.observeChildren(this.target, (mutations) => {\n              this.processMutations(mutations);\n            });\n        } else {\n          this.nativeChildrenObserver =\n            new MutationObserver((mutations) => {\n              this.processMutations(mutations);\n            });\n          this.nativeChildrenObserver.observe(this.target, {childList: true});\n        }\n      }\n      this.connected = true;\n    }\n\n    disconnect() {\n      if (isSlot(this.target)) {\n        this.unlistenSlots([this.target]);\n      } else {\n        this.unlistenSlots(this.target.children);\n        if (window.ShadyDOM && this.shadyChildrenObserver) {\n          ShadyDOM.unobserveChildren(this.shadyChildrenObserver);\n          this.shadyChildrenObserver = null;\n        } else if (this.nativeChildrenObserver) {\n          this.nativeChildrenObserver.disconnect();\n          this.nativeChildrenObserver = null;\n        }\n      }\n      this.connected = false;\n    }\n\n    schedule() {\n      if (!this.scheduled) {\n        this.scheduled = true;\n        effectiveNodesObserverPromise.then(() => {\n          this.flush();\n        });\n      }\n    }\n\n    processMutations(mutations) {\n      this.processSlotMutations(mutations);\n      this.flush();\n    }\n\n    processSlotMutations(mutations) {\n      if (mutations) {\n        for (let i=0; i < mutations.length; i++) {\n          let mutation = mutations[i];\n          if (mutation.addedNodes) {\n            this.listenSlots(mutation.addedNodes);\n          }\n          if (mutation.removedNodes) {\n            this.unlistenSlots(mutation.removedNodes);\n          }\n        }\n      }\n    }\n\n    flush() {\n      if (!this.connected) {\n        return;\n      }\n      if (window.ShadyDOM) {\n        ShadyDOM.flush();\n      }\n      if (this.nativeChildrenObserver) {\n        this.processSlotMutations(this.nativeChildrenObserver.takeRecords());\n      } else if (this.shadyChildrenObserver) {\n        this.processSlotMutations(this.shadyChildrenObserver.takeRecords());\n      }\n      this.scheduled = false;\n      let info = {\n        target: this.target,\n        addedNodes: [],\n        removedNodes: []\n      };\n      let newNodes = getEffectiveNodes(this.target);\n      let splices = Polymer.ArraySplice.calculateSplices(newNodes,\n        this.effectiveNodes);\n      // process removals\n      for (let i=0, s; (i<splices.length) && (s=splices[i]); i++) {\n        for (let j=0, n; (j < s.removed.length) && (n=s.removed[j]); j++) {\n          info.removedNodes.push(n);\n        }\n      }\n      // process adds\n      for (let i=0, s; (i<splices.length) && (s=splices[i]); i++) {\n        for (let j=s.index; j < s.index + s.addedCount; j++) {\n          info.addedNodes.push(newNodes[j]);\n        }\n      }\n      // update cache\n      this.effectiveNodes = newNodes;\n      if (info.addedNodes.length || info.removedNodes.length) {\n        this.callback.call(this.target, info);\n      }\n    }\n\n    listenSlots(nodeList) {\n      for (let i=0; i < nodeList.length; i++) {\n        let n = nodeList[i];\n        if (isSlot(n)) {\n          n.addEventListener('slotchange', this._boundSchedule);\n        }\n      }\n    }\n\n    unlistenSlots(nodeList) {\n      for (let i=0; i < nodeList.length; i++) {\n        let n = nodeList[i];\n        if (isSlot(n)) {\n          n.removeEventListener('slotchange', this._boundSchedule);\n        }\n      }\n    }\n\n  }\n\n  class DomApi {\n\n    constructor(node) {\n      if (window.ShadyDOM) {\n        ShadyDOM.patch(node);\n      }\n      this.node = node;\n    }\n\n    observeNodes(callback) {\n      return new EffectiveNodesObserver(this.node, callback);\n    }\n\n    unobserveNodes(observerHandle) {\n      observerHandle.disconnect();\n    }\n\n    notifyObserver() {}\n\n    deepContains(node) {\n      if (this.node.contains(node)) {\n        return true;\n      }\n      let n = node;\n      let doc = node.ownerDocument;\n      // walk from node to `this` or `document`\n      while (n && n !== doc && n !== this.node) {\n        // use logical parentnode, or native ShadowRoot host\n        n = Polymer.dom(n).parentNode || n.host;\n      }\n      return n === this.node;\n    }\n\n    getOwnerRoot() {\n      return this.node.getRootNode();\n    }\n\n    getDistributedNodes() {\n      return (this.node.localName === 'slot') ?\n        this.node.assignedNodes({flatten: true}) :\n        [];\n    }\n\n    getDestinationInsertionPoints() {\n      let ip$ = [];\n      let n = this.node.assignedSlot;\n      while (n) {\n        ip$.push(n);\n        n = n.assignedSlot;\n      }\n      return ip$;\n    }\n\n    importNode(externalNode, deep) {\n      let doc = this.node instanceof Document ? this.node :\n        this.node.ownerDocument;\n      return doc.importNode(externalNode, deep);\n    }\n\n    getEffectiveChildNodes() {\n      return getEffectiveNodes(this.node);\n    }\n\n    queryDistributedElements(selector) {\n      let c$ = this.getEffectiveChildNodes();\n      let list = [];\n      for (let i=0, l=c$.length, c; (i<l) && (c=c$[i]); i++) {\n        if ((c.nodeType === Node.ELEMENT_NODE) &&\n            Polymer.Utils.matchesSelector(c, selector)) {\n          list.push(c);\n        }\n      }\n      return list;\n    }\n\n  }\n\n  function forwardMethods(proto, methods) {\n    for (let i=0; i < methods.length; i++) {\n      let method = methods[i];\n      proto[method] = function() {\n        return this.node[method].apply(this.node, arguments);\n      }\n    }\n  }\n\n  function forwardReadOnlyProperties(proto, properties) {\n    for (let i=0; i < properties.length; i++) {\n      let name = properties[i];\n      Object.defineProperty(proto, name, {\n        get: function() {\n          return this.node[name];\n        },\n        configurable: true\n      });\n    }\n  }\n\n  function forwardProperties(proto, properties) {\n    for (let i=0; i < properties.length; i++) {\n      let name = properties[i];\n      Object.defineProperty(proto, name, {\n        get: function() {\n          return this.node[name];\n        },\n        set: function(value) {\n          this.node[name] = value;\n        },\n        configurable: true\n      });\n    }\n  }\n\n  forwardMethods(DomApi.prototype, [\n    'cloneNode', 'appendChild', 'insertBefore', 'removeChild',\n    'replaceChild', 'setAttribute', 'removeAttribute',\n    'querySelector', 'querySelectorAll'\n  ]);\n\n  forwardReadOnlyProperties(DomApi.prototype, [\n    'activeElement',\n    'parentNode', 'firstChild', 'lastChild',\n    'nextSibling', 'previousSibling', 'firstElementChild',\n    'lastElementChild', 'nextElementSibling', 'previousElementSibling',\n    'childNodes', 'children'\n  ]);\n\n  forwardProperties(DomApi.prototype, [\n    'textContent', 'innerHTML'\n  ]);\n\n\n  class EventApi {\n    constructor(event) {\n      this.event = event;\n    }\n\n    get rootTarget() {\n      return this.event.composedPath()[0];\n    }\n\n    get localTarget() {\n      return this.event.target;\n    }\n\n    get path() {\n      return this.event.composedPath();\n    }\n  }\n\n  Polymer.dom = function(obj) {\n    obj = obj || document;\n    let ctor = obj instanceof Event ? EventApi : DomApi;\n    if (!obj.__domApi) {\n      obj.__domApi = new ctor(obj);\n    }\n    return obj.__domApi;\n  };\n\n  Polymer.dom.flush = function() {\n    if (window.ShadyDOM) {\n      ShadyDOM.flush();\n    }\n    if (customElements.flush) {\n      customElements.flush();\n    }\n  }\n\n  Polymer.Settings = {\n    useShadow: true\n  };\n\n})();\n(function() {\n\n  // unresolved\n\n  function resolve() {\n    document.body.removeAttribute('unresolved');\n  }\n\n  if (window.WebComponents) {\n    addEventListener('WebComponentsReady', resolve);\n  } else {\n    if (document.readyState === 'interactive' || document.readyState === 'complete') {\n      resolve();\n    } else {\n      addEventListener('DOMContentLoaded', resolve);\n    }\n  }\n\n})();\n(function() {\n\n  'use strict';\n\n  var utils = Polymer.Utils;\n\n  // TODO(sorvell): same api as before.\n  Polymer._warn = function(warning) {\n    console.warn(warning);\n  }\n\n  Polymer.LegacyElementMixin = Polymer.Utils.cachingMixin(function(base) {\n\n    return class LegacyElement extends Polymer.GestureEventListeners(\n      Polymer.ElementMixin(base)) {\n\n      constructor() {\n        super();\n        this.created();\n      }\n\n      _applyListeners() {\n        this._applyConfigListeners(this.constructor._ownConfig);\n      }\n\n      _applyConfigListeners(config) {\n        if (config.listeners) {\n          for (let l in config.listeners) {\n            this._addMethodEventListenerToNode(this, l, config.listeners[l]);\n          }\n        }\n      }\n\n      _ensureAttributes() {\n        this._ensureConfigAttributes(this.constructor._ownConfig);\n      }\n\n      _ensureConfigAttributes(config) {\n        if (config.hostAttributes) {\n          for (let a in config.hostAttributes) {\n            this._ensureAttribute(a, config.hostAttributes[a]);\n          }\n        }\n      }\n\n      ready() {\n        this._applyListeners();\n        this._ensureAttributes();\n        super.ready();\n      }\n\n      connectedCallback() {\n        super.connectedCallback();\n        this.isAttached = true;\n        this.attached();\n      }\n\n      disconnectedCallback() {\n        this.isAttached = false;\n        super.disconnectedCallback();\n        this.detached();\n      }\n\n      attributeChangedCallback(name, old, value) {\n        super.attributeChangedCallback(name, old, value);\n        this.attributeChanged(name, old, value);\n      }\n\n      created() {}\n\n      attached() {}\n\n      detached() {}\n\n      attributeChanged() {}\n\n      serialize(value) {\n        return this._serializeAttribute(value);\n      }\n\n      deserialize(value, type) {\n        return this._deserializeAttribute(value, type);\n      }\n\n      reflectPropertyToAttribute(property, attribute, value) {\n        this._propertyToAttribute(this, property, attribute, value);\n      }\n\n      serializeValueToAttribute(value, attribute, node) {\n        this._valueToAttribute(node || this, value, attribute);\n      }\n\n      /**\n       * Copies own properties (including accessor descriptors) from a source\n       * object to a target object.\n       *\n       * @method extend\n       * @param {Object} prototype Target object to copy properties to.\n       * @param {Object} api Source object to copy properties from.\n       * @return {Object} prototype object that was passed as first argument.\n       */\n      extend(prototype, api) {\n        return utils.extend(prototype, api);\n      }\n\n      /**\n       * Copies props from a source object to a target object.\n       *\n       * Note, this method uses a simple `for...in` strategy for enumerating\n       * properties.  To ensure only `ownProperties` are copied from source\n       * to target and that accessor implementations are copied, use `extend`.\n       *\n       * @method mixin\n       * @param {Object} target Target object to copy properties to.\n       * @param {Object} source Source object to copy properties from.\n       * @return {Object} Target object that was passed as first argument.\n       */\n      mixin(target, source) {\n        return utils.mixin(target, source);\n      }\n\n      chainObject(object, inherited) {\n        if (object && inherited && object !== inherited) {\n          if (!Object.__proto__) {\n            object = this.extend(Object.create(inherited), object);\n          }\n          object.__proto__ = inherited;\n        }\n        return object;\n      }\n\n      /* **** Begin Template **** */\n      /**\n       * Calls `importNode` on the `content` of the `template` specified and\n       * returns a document fragment containing the imported content.\n       *\n       * @method instanceTemplate\n       * @param {HTMLTemplateElement} template HTML template element to instance.\n       * @return {DocumentFragment} Document fragment containing the imported\n       *   template content.\n      */\n      instanceTemplate(template) {\n        var dom =\n          document.importNode(template._content || template.content, true);\n        return dom;\n      }\n\n      /* **** Begin Events **** */\n      /**\n       * Dispatches a custom event with an optional detail value.\n       *\n       * @method fire\n       * @param {String} type Name of event type.\n       * @param {*=} detail Detail value containing event-specific\n       *   payload.\n       * @param {Object=} options Object specifying options.  These may include:\n       *  `bubbles` (boolean, defaults to `true`),\n       *  `cancelable` (boolean, defaults to false), and\n       *  `node` on which to fire the event (HTMLElement, defaults to `this`).\n       * @return {CustomEvent} The new event that was fired.\n       */\n      fire(type, detail, options) {\n        options = options || {};\n        detail = (detail === null || detail === undefined) ? {} : detail;\n        var event = new Event(type, {\n          bubbles: options.bubbles === undefined ? true : options.bubbles,\n          cancelable: Boolean(options.cancelable),\n          composed: options.composed === undefined ? true: options.composed\n        });\n        event.detail = detail;\n        var node = options.node || this;\n        node.dispatchEvent(event)\n        return event;\n      }\n\n      /**\n       * Convenience method to add an event listener on a given element,\n       * late bound to a named method on this element.\n       *\n       * @method listen\n       * @param {Element} node Element to add event listener to.\n       * @param {string} eventName Name of event to listen for.\n       * @param {string} methodName Name of handler method on `this` to call.\n       */\n      listen(node, eventName, methodName) {\n        node = node || this;\n        var hbl = this.__boundListeners ||\n          (this.__boundListeners = new WeakMap());\n        var bl = hbl.get(node);\n        if (!bl) {\n          bl = {};\n          hbl.set(node, bl);\n        }\n        var key = eventName + methodName;\n        if (!bl[key]) {\n          bl[key] = this._addMethodEventListenerToNode(\n            node, eventName, methodName, this);\n        }\n      }\n\n      /**\n       * Convenience method to remove an event listener from a given element,\n       * late bound to a named method on this element.\n       *\n       * @method unlisten\n       * @param {Element} node Element to remove event listener from.\n       * @param {string} eventName Name of event to stop listening to.\n       * @param {string} methodName Name of handler method on `this` to not call\n       anymore.\n       */\n      unlisten(node, eventName, methodName) {\n        node = node || this;\n        var bl = this.__boundListeners && this.__boundListeners.get(node);\n        var key = eventName + methodName;\n        var handler = bl && bl[key];\n        if (handler) {\n          this._removeEventListenerFromNode(node, eventName, handler);\n          bl[key] = null;\n        }\n      }\n\n      /**\n       * Override scrolling behavior to all direction, one direction, or none.\n       *\n       * Valid scroll directions:\n       *   - 'all': scroll in any direction\n       *   - 'x': scroll only in the 'x' direction\n       *   - 'y': scroll only in the 'y' direction\n       *   - 'none': disable scrolling for this node\n       *\n       * @method setScrollDirection\n       * @param {String=} direction Direction to allow scrolling\n       * Defaults to `all`.\n       * @param {HTMLElement=} node Element to apply scroll direction setting.\n       * Defaults to `this`.\n       */\n      setScrollDirection(direction, node) {\n        Polymer.Gestures.setTouchAction(node || this, direction || 'auto');\n      }\n      /* **** End Events **** */\n\n      /**\n       * Convenience method to run `querySelector` on this local DOM scope.\n       *\n       * This function calls `Polymer.dom(this.root).querySelector(slctr)`.\n       *\n       * @method $$\n       * @param {string} slctr Selector to run on this local DOM scope\n       * @return {Element} Element found by the selector, or null if not found.\n       */\n      $$(slctr) {\n        return this.root.querySelector(slctr);\n      }\n\n      /**\n       * Return the element whose local dom within which this element\n       * is contained. This is a shorthand for\n       * `this.getRootNode().host`.\n       */\n      get domHost() {\n        var root = this.getRootNode();\n        return (root instanceof DocumentFragment) ? root.host : root;\n      }\n\n      /**\n       * Force this element to distribute its children to its local dom.\n       * This is necessary only when ShadyDOM is used and only in cases that\n       * are not automatically handled. For example,\n       * a user should call `distributeContent` if distribution has been\n       * invalidated due to an element being added or removed from the shadowRoot\n       * that contains an insertion point (<slot>) inside its subtree.\n       * @method distributeContent\n       */\n      distributeContent() {\n        if (window.ShadyDOM && this.shadowRoot) {\n          this.shadowRoot.forceRender();\n        }\n      }\n\n      /**\n       * Returns a list of nodes that are the effective childNodes. The effective\n       * childNodes list is the same as the element's childNodes except that\n       * any `<content>` elements are replaced with the list of nodes distributed\n       * to the `<content>`, the result of its `getDistributedNodes` method.\n       *\n       * @method getEffectiveChildNodes\n       * @return {Array<Node>} List of effctive child nodes.\n       */\n      getEffectiveChildNodes() {\n        return Polymer.dom(this).getEffectiveChildNodes();\n      }\n\n      /**\n       * Returns a list of nodes distributed within this element that match\n       * `selector`. These can be dom children or elements distributed to\n       * children that are insertion points.\n       * @method queryDistributedElements\n       * @param {string} selector Selector to run.\n       * @return {Array<Node>} List of distributed elements that match selector.\n       */\n      queryDistributedElements(selector) {\n        return Polymer.dom(this).queryDistributedElements(selector);\n      }\n\n      /**\n       * Returns a list of elements that are the effective children. The effective\n       * children list is the same as the element's children except that\n       * any `<content>` elements are replaced with the list of elements\n       * distributed to the `<content>`.\n       *\n       * @method getEffectiveChildren\n       * @return {Array<Node>} List of effctive children.\n       */\n      getEffectiveChildren() {\n        var list = this.getEffectiveChildNodes();\n        return list.filter(function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      }\n\n      /**\n       * Returns a string of text content that is the concatenation of the\n       * text content's of the element's effective childNodes (the elements\n       * returned by <a href=\"#getEffectiveChildNodes>getEffectiveChildNodes</a>.\n       *\n       * @method getEffectiveTextContent\n       * @return {Array<Node>} List of effctive children.\n       */\n      getEffectiveTextContent() {\n        var cn = this.getEffectiveChildNodes();\n        var tc = [];\n        for (var i=0, c; (c = cn[i]); i++) {\n          if (c.nodeType !== Node.COMMENT_NODE) {\n            tc.push(c.textContent);\n          }\n        }\n        return tc.join('');\n      }\n\n      /**\n       * Returns the first effective childNode within this element that\n       * match `selector`. These can be dom child nodes or elements distributed\n       * to children that are insertion points.\n       * @method queryEffectiveChildren\n       * @param {string} selector Selector to run.\n       * @return {Object<Node>} First effective child node that matches selector.\n       */\n      queryEffectiveChildren(selector) {\n        var e$ = this.queryDistributedElements(selector);\n        return e$ && e$[0];\n      }\n\n      /**\n       * Returns a list of effective childNodes within this element that\n       * match `selector`. These can be dom child nodes or elements distributed\n       * to children that are insertion points.\n       * @method queryEffectiveChildren\n       * @param {string} selector Selector to run.\n       * @return {Array<Node>} List of effective child nodes that match selector.\n       */\n      queryAllEffectiveChildren(selector) {\n        return this.queryDistributedElements(selector);\n      }\n\n      /**\n       * Returns a list of nodes distributed to this element's `<content>`.\n       *\n       * If this element contains more than one `<content>` in its local DOM,\n       * an optional selector may be passed to choose the desired content.\n       *\n       * @method getContentChildNodes\n       * @param {String=} slctr CSS selector to choose the desired\n       *   `<content>`.  Defaults to `content`.\n       * @return {Array<Node>} List of distributed nodes for the `<content>`.\n       */\n      getContentChildNodes(slctr) {\n        var content = this.root.querySelector(slctr || 'content');\n        return content ? content.getDistributedNodes() : [];\n      }\n\n      /**\n       * Returns a list of element children distributed to this element's\n       * `<content>`.\n       *\n       * If this element contains more than one `<content>` in its\n       * local DOM, an optional selector may be passed to choose the desired\n       * content.  This method differs from `getContentChildNodes` in that only\n       * elements are returned.\n       *\n       * @method getContentChildNodes\n       * @param {String=} slctr CSS selector to choose the desired\n       *   `<content>`.  Defaults to `content`.\n       * @return {Array<HTMLElement>} List of distributed nodes for the\n       *   `<content>`.\n       */\n      getContentChildren(slctr) {\n        return this.getContentChildNodes(slctr).filter(function(n) {\n          return (n.nodeType === Node.ELEMENT_NODE);\n        });\n      }\n\n      /**\n       * Checks whether an element is in this element's light DOM tree.\n       *\n       * @method isLightDescendant\n       * @param {?Node} node The element to be checked.\n       * @return {Boolean} true if node is in this element's light DOM tree.\n       */\n      isLightDescendant(node) {\n        return this !== node && this.contains(node) &&\n            this.getRootNode() === node.getRootNode();\n      }\n\n      /**\n       * Checks whether an element is in this element's local DOM tree.\n       *\n       * @method isLocalDescendant\n       * @param {HTMLElement=} node The element to be checked.\n       * @return {Boolean} true if node is in this element's local DOM tree.\n       */\n      isLocalDescendant(node) {\n        return this.root === node.getRootNode();\n      }\n\n      // NOTE: should now be handled by ShadyCss library.\n      scopeSubtree(container, shouldObserve) { // eslint-disable-line no-unused-vars\n      }\n\n      /**\n       * Returns the computed style value for the given property.\n       * @param {String} property\n       * @return {String} the computed value\n       */\n      getComputedStyleValue(property) {\n        return ShadyCSS.getComputedStyleValue(this, property);\n      }\n\n      // debounce\n\n      /**\n       * Call `debounce` to collapse multiple requests for a named task into\n       * one invocation which is made after the wait time has elapsed with\n       * no new request.  If no wait time is given, the callback will be called\n       * at microtask timing (guaranteed before paint).\n       *\n       *     debouncedClickAction(e) {\n       *       // will not call `processClick` more than once per 100ms\n       *       this.debounce('click', function() {\n       *        this.processClick();\n       *       } 100);\n       *     }\n       *\n       * @method debounce\n       * @param {String} jobName String to indentify the debounce job.\n       * @param {Function} callback Function that is called (with `this`\n       *   context) when the wait time elapses.\n       * @param {number} wait Optional wait time in milliseconds (ms) after the\n       *   last signal that must elapse before invoking `callback`\n       */\n      debounce(jobName, callback, wait) {\n        this._debouncers = this._debouncers || {};\n        return this._debouncers[jobName] = Polymer.Debouncer.debounce(\n          this._debouncers[jobName], callback, wait, this);\n      }\n\n      /**\n       * Returns whether a named debouncer is active.\n       *\n       * @method isDebouncerActive\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       * @return {boolean} Whether the debouncer is active (has not yet fired).\n       */\n      isDebouncerActive(jobName) {\n        this._debouncers = this._debouncers || {};\n        var debouncer = this._debouncers[jobName];\n        return !!(debouncer && debouncer.isActive());\n      }\n\n      /**\n       * Immediately calls the debouncer `callback` and inactivates it.\n       *\n       * @method flushDebouncer\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       */\n      flushDebouncer(jobName) {\n        this._debouncers = this._debouncers || {};\n        var debouncer = this._debouncers[jobName];\n        if (debouncer) {\n          debouncer.flush();\n        }\n      }\n\n      /**\n       * Cancels an active debouncer.  The `callback` will not be called.\n       *\n       * @method cancelDebouncer\n       * @param {String} jobName The name of the debouncer started with `debounce`\n       */\n      cancelDebouncer(jobName) {\n        this._debouncers = this._debouncers || {}\n        var debouncer = this._debouncers[jobName];\n        if (debouncer) {\n          debouncer.cancel();\n        }\n      }\n\n      /**\n       * Runs a callback function asyncronously.\n       *\n       * By default (if no waitTime is specified), async callbacks are run at\n       * microtask timing, which will occur before paint.\n       *\n       * @method async\n       * @param {Function} callback The callback function to run, bound to `this`.\n       * @param {number=} waitTime Time to wait before calling the\n       *   `callback`.  If unspecified or 0, the callback will be run at microtask\n       *   timing (before paint).\n       * @return {number} Handle that may be used to cancel the async job.\n       */\n      async(callback, waitTime) {\n        var self = this;\n        return Polymer.Async.run(function() {\n          callback.call(self);\n        }, waitTime);\n      }\n\n      /**\n       * Cancels an async operation started with `async`.\n       *\n       * @method cancelAsync\n       * @param {number} handle Handle returned from original `async` call to\n       *   cancel.\n       */\n      cancelAsync(handle) {\n        Polymer.Async.cancel(handle);\n      }\n\n      // other\n\n      /**\n       * Convenience method for creating an element and configuring it.\n       *\n       * @method create\n       * @param {string} tag HTML element tag to create.\n       * @param {Object} props Object of properties to configure on the\n       *    instance.\n       * @return {Element} Newly created and configured element.\n       */\n      create(tag, props) {\n        var elt = document.createElement(tag);\n        if (props) {\n          if (elt.setProperties) {\n            elt.setProperties(props);\n          } else {\n            for (var n in props) {\n              elt[n] = props[n];\n            }\n          }\n        }\n        return elt;\n      }\n\n      /**\n       * Convenience method for importing an HTML document imperatively.\n       *\n       * This method creates a new `<link rel=\"import\">` element with\n       * the provided URL and appends it to the document to start loading.\n       * In the `onload` callback, the `import` property of the `link`\n       * element will contain the imported document contents.\n       *\n       * @method importHref\n       * @param {string} href URL to document to load.\n       * @param {Function} onload Callback to notify when an import successfully\n       *   loaded.\n       * @param {Function} onerror Callback to notify when an import\n       *   unsuccessfully loaded.\n       * @param {boolean} optAsync True if the import should be loaded `async`.\n       *   Defaults to `false`.\n       * @return {HTMLLinkElement} The link element for the URL to be loaded.\n       */\n      importHref(href, onload, onerror, optAsync) { // eslint-disable-line no-unused-vars\n        return Polymer.Utils.importHref.apply(this, arguments);\n      }\n\n      /**\n       * Polyfill for Element.prototype.matches, which is sometimes still\n       * prefixed.\n       *\n       * @method elementMatches\n       * @param {string} selector Selector to test.\n       * @param {Element=} node Element to test the selector against.\n       * @return {boolean} Whether the element matches the selector.\n       */\n      elementMatches(selector, node) {\n        return Polymer.Utils.matchesSelector(node || this, selector);\n      }\n\n      /**\n       * Toggles an HTML attribute on or off.\n       *\n       * @method toggleAttribute\n       * @param {String} name HTML attribute name\n       * @param {boolean=} bool Boolean to force the attribute on or off.\n       *    When unspecified, the state of the attribute will be reversed.\n       * @param {HTMLElement=} node Node to target.  Defaults to `this`.\n       */\n      toggleAttribute(name, bool, node) {\n        node = node || this;\n        if (arguments.length == 1) {\n          bool = !node.hasAttribute(name);\n        }\n        if (bool) {\n          node.setAttribute(name, '');\n        } else {\n          node.removeAttribute(name);\n        }\n      }\n\n\n      /**\n       * Toggles a CSS class on or off.\n       *\n       * @method toggleClass\n       * @param {String} name CSS class name\n       * @param {boolean=} bool Boolean to force the class on or off.\n       *    When unspecified, the state of the class will be reversed.\n       * @param {HTMLElement=} node Node to target.  Defaults to `this`.\n       */\n      toggleClass(name, bool, node) {\n        node = node || this;\n        if (arguments.length == 1) {\n          bool = !node.classList.contains(name);\n        }\n        if (bool) {\n          node.classList.add(name);\n        } else {\n          node.classList.remove(name);\n        }\n      }\n\n      /**\n       * Cross-platform helper for setting an element's CSS `transform` property.\n       *\n       * @method transformText\n       * @param {String} transform Transform setting.\n       * @param {HTMLElement=} node Element to apply the transform to.\n       * Defaults to `this`\n       */\n      transform(transformText, node) {\n        node = node || this;\n        node.style.webkitTransform = transformText;\n        node.style.transform = transformText;\n      }\n\n      /**\n       * Cross-platform helper for setting an element's CSS `translate3d`\n       * property.\n       *\n       * @method translate3d\n       * @param {number} x X offset.\n       * @param {number} y Y offset.\n       * @param {number} z Z offset.\n       * @param {HTMLElement=} node Element to apply the transform to.\n       * Defaults to `this`.\n       */\n      translate3d(x, y, z, node) {\n        node = node || this;\n        this.transform('translate3d(' + x + ',' + y + ',' + z + ')', node);\n      }\n\n      /**\n       * Removes an item from an array, if it exists.\n       *\n       * If the array is specified by path, a change notification is\n       * generated, so that observers, data bindings and computed\n       * properties watching that path can update.\n       *\n       * If the array is passed directly, **no change\n       * notification is generated**.\n       *\n       * @method arrayDelete\n       * @param {String|Array} path Path to array from which to remove the item\n       *   (or the array itself).\n       * @param {any} item Item to remove.\n       * @return {Array} Array containing item removed.\n       */\n      arrayDelete(arrayOrPath, item) {\n        var index;\n        if (Array.isArray(arrayOrPath)) {\n          index = arrayOrPath.indexOf(item);\n          if (index >= 0) {\n            return arrayOrPath.splice(index, 1);\n          }\n        } else {\n          var arr = Polymer.Path.get(this, arrayOrPath);\n          index = arr.indexOf(item);\n          if (index >= 0) {\n            return this.splice(arrayOrPath, index, 1);\n          }\n        }\n      }\n\n    }\n\n  });\n\n  // bc\n  Polymer.LegacyElement = Polymer.LegacyElementMixin(HTMLElement);\n  Polymer.Base = Polymer.LegacyElement.prototype;\n\n})();\n(function() {\n\n    'use strict';\n\n    var utils = Polymer.Utils;\n    var LegacyElementMixin = Polymer.LegacyElementMixin;\n\n    var metaProps = {\n      attached: true,\n      detached: true,\n      ready: true,\n      created: true,\n      beforeRegister: true,\n      registered: true,\n      attributeChanged: true,\n      // meta objects\n      behaviors: true,\n      hostAttributes: true,\n      properties: true,\n      observers: true,\n      listeners: true\n    }\n\n    var mixinBehaviors = function(behaviors, klass) {\n      for (var i=0; i<behaviors.length; i++) {\n        var b = behaviors[i];\n        if (b) {\n          klass = Array.isArray(b) ? mixinBehaviors(b, klass) :\n            MixinBehavior(b, klass);\n        }\n      }\n      return klass;\n    }\n\n    var flattenBehaviors = function(behaviors, list) {\n      list = list || [];\n      if (behaviors) {\n        for (var i=0; i < behaviors.length; i++) {\n          var b = behaviors[i];\n          if (b) {\n            if (Array.isArray(b)) {\n              flattenBehaviors(b, list);\n            } else {\n              if (list.indexOf(b) < 0) {\n                list.push(b);\n              }\n            }\n          } else {\n            Polymer._warn('behavior is null, check for missing or 404 import');\n          }\n        }\n      }\n      return list;\n    }\n\n    var MixinBehavior = function(behavior, Base) {\n\n      var config = {\n        properties: behavior.properties,\n        observers: behavior.observers\n      };\n\n      class PolymerGenerated extends Base {\n\n        static get config() {\n          return config;\n        }\n\n        static get template() {\n          return behavior._template || super.template;\n        }\n\n        _invokeFunction(fn, args) {\n          if (fn) {\n            fn.apply(this, args);\n          }\n        }\n\n        constructor() {\n          super();\n          // call `registered` only if it was not called for *this* constructor\n          if (!PolymerGenerated.hasOwnProperty('__registered')) {\n            PolymerGenerated.__registered = true;\n            if (behavior.registered) {\n              behavior.registered.call(Object.getPrototypeOf(this));\n            }\n          }\n        }\n\n        created() {\n          super.created();\n          this._invokeFunction(behavior.created);\n        }\n\n        _applyConfigMetaData() {\n          super._applyConfigMetaData();\n          this._applyConfigMetaDataFrom(behavior);\n        }\n\n        _applyListeners() {\n          super._applyListeners();\n          this._applyConfigListeners(behavior);\n        }\n\n        _ensureAttributes() {\n          // ensure before calling super so that subclasses can override defaults\n          this._ensureConfigAttributes(behavior);\n          super._ensureAttributes();\n        }\n\n        ready() {\n          super.ready();\n          this._invokeFunction(behavior.ready);\n        }\n\n        attached() {\n          super.attached();\n          this._invokeFunction(behavior.attached);\n        }\n\n        detached() {\n          super.detached();\n          this._invokeFunction(behavior.detached);\n        }\n\n        attributeChanged(name, old, value) {\n          super.attributeChanged(name, old, value);\n          this._invokeFunction(behavior.attributeChanged, [name, old, value]);\n        }\n      }\n\n      for (var p in behavior) {\n        if (!(p in metaProps))\n          utils.copyOwnProperty(p, behavior, PolymerGenerated.prototype);\n      }\n\n      return PolymerGenerated;\n    }\n\n    //var nativeConstructors = {};\n\n    /**\n     * Returns the native element constructor for the tag specified.\n     *\n     * @method getNativeConstructor\n     * @param {string} tag  HTML tag name.\n     * @return {Object} Native constructor for specified tag.\n    */\n    var getNativeConstructor = function(tag) {\n      if (tag) {\n        // TODO(kschaaf): hack, for now, needs to be removed; needed to allow\n        // subclassing from overwridden constructors in CEv1 polyfill\n        return window['HTML' + tag[0].toUpperCase() + tag.slice(1) + 'Element'];\n        // var c = nativeConstructors[tag];\n        // if (!c) {\n        //   c = document.createElement(tag).constructor;\n        //   nativeConstructors[tag] = c;\n        // }\n        // return c;\n      } else {\n        return HTMLElement;\n      }\n    }\n\n    Polymer.Class = function(info) {\n      if (!info) {\n        Polymer._warn('Polymer.Class requires `info` argument');\n      }\n      var klass = LegacyElementMixin(getNativeConstructor(info.extends));\n      var behaviors = flattenBehaviors(info.behaviors);\n      if (behaviors.length) {\n        klass = mixinBehaviors(behaviors, klass);\n      }\n      klass = MixinBehavior(info, klass);\n      // decorate klass with registration info\n      klass.is = info.is;\n      klass.extends = info.extends;\n      // behaviors on prototype for BC...\n      behaviors.reverse();\n      klass.prototype.behaviors = behaviors;\n      // NOTE: while we could call `beforeRegister` here to maintain\n      // some BC, the state of the element at this point is not as it was in 1.0\n      // In 1.0, the method was called *after* mixing prototypes together\n      // but before processing of meta-objects. Since this is now done\n      // in 1 step via `MixinBehavior`, this is no longer possible.\n      // However, *most* work (not setting `is`) that was previously done in\n      // `beforeRegister` should be possible in `registered`.\n      return klass;\n    }\n\n  })();\n(function() {\n\n    class DomBind extends Polymer.BatchedEffects(HTMLElement) {\n\n      connectedCallback() {\n        this.render();\n      }\n\n      disconnectedCallback() {\n        this._removeChildren();\n      }\n\n      _insertChildren() {\n        this.parentNode.insertBefore(this.root, this);\n      }\n\n      _removeChildren() {\n        if (this._children) {\n          for (var i=0; i<this._children.length; i++) {\n            this.root.appendChild(this._children[i]);\n          }\n        }\n      }\n\n      /**\n       * Forces the element to render its content. This is typically only\n       * necessary to call if HTMLImports with the async attribute are used.\n       */\n      render() {\n        if (!this._children) {\n          var template = this.querySelector('template');\n          if (!template) {\n            throw new Error('dom-bind requires a <template> child');\n          }\n          this._bindTemplate(template);\n          this.root = this._stampTemplate(template);\n          this._children = [];\n          for (var n=this.root.firstChild; n; n=n.nextSibling) {\n            this._children[this._children.length] = n;\n          }\n          this._flushProperties(this);\n        }\n        this._insertChildren();\n        this.dispatchEvent(new CustomEvent('dom-change'));\n      }\n\n    }\n\n    customElements.define('dom-bind', DomBind);\n\n  })();\n(function() {\n    'use strict';\n\n    let TemplateInstanceBase = Polymer.BatchedEffects(class{});\n\n    function PatchedHTMLTemplateElement() {\n      return PatchedHTMLTemplateElement._newInstance;\n    }\n    PatchedHTMLTemplateElement.prototype = Object.create(HTMLTemplateElement.prototype, {\n      constructor: {\n        value: PatchedHTMLTemplateElement\n      }\n    });\n    PatchedHTMLTemplateElement._newInstance = null;\n\n    class DataTemplate extends Polymer.BatchedEffects(PatchedHTMLTemplateElement) {\n      static upgradeTemplate(template) {\n        PatchedHTMLTemplateElement._newInstance = template;\n        Object.setPrototypeOf(template, DataTemplate.prototype);\n        new DataTemplate();\n        PatchedHTMLTemplateElement._newInstance = null;\n      }\n    }\n\n    class Templatizer {\n\n      static enqueueDebouncer(debouncer) {\n        this._debouncerQueue = this._debouncerQueue || [];\n        this._debouncerQueue.push(debouncer);\n      }\n\n      static flush() {\n        if (this._debouncerQueue) {\n          while (this._debouncerQueue.length) {\n            this._debouncerQueue.shift().flush();\n          }\n        }\n      }\n\n      templatize(template, options) {\n        let klass = template.__templatizerClass;\n        // Return memoized class if already templatized (allows calling\n        // templatize on same template more than once)\n        if (klass) {\n          return klass;\n        }\n        // Ensure template has _content\n        template._content = template._content || template.content;\n        // Get memoized base class for the prototypical template\n        let baseClass = template._content.__templatizerClass;\n        if (!baseClass) {\n          baseClass = template._content.__templatizerClass =\n            this._createTemplatizerClass(template, options);\n        }\n        // Host property forwarding must be installed onto template instance\n        this._prepHostProperties(template, options);\n        // Subclass base class to add template reference for this specific\n        // template\n        klass = class TemplateInstance extends baseClass {};\n        klass.prototype.__template = template;\n        klass.instCount = 0;   \n        template.__templatizerClass = klass;         \n        return klass;\n      }\n\n      _createTemplatizerClass(template, options) {\n        // Anonymous class created by the templatizer\n        var klass = class extends TemplateInstanceBase {\n          //TODO(kschaaf): for debugging; remove?\n          get localName() { return 'template#' + this.__template.id + '/TemplateInstance' }\n          constructor(host, props) {\n            super();\n            //TODO(kschaaf): for debugging; remove?\n            this.id = this.constructor.instCount;\n            this.constructor.instCount++;\n            this.__dataHost = this.__template;\n            // Root data host is always calculated based on the template, which\n            // is guaranteed to have a dataHost (due to being in _nodes for\n            // purposes of getting templateContent)\n            let templateHost = this.__template.__dataHost;\n            this._rootDataHost = \n              templateHost && templateHost._rootDataHost || templateHost;\n            this._hostProps = template._content._hostProps;\n            this._configureProperties(props);\n            //TODO(kschaaf): id marshalling unnecessary\n            this.root = this._stampTemplate(template);\n            // Save list of stamped children\n            var children = this.children = [];\n            for (var n = this.root.firstChild; n; n=n.nextSibling) {\n              children.push(n);\n              n._templateInstance = this;\n            }\n            if (host.__hideTemplateChildren__) {\n              this._showHideChildren(true);\n            }\n            this._flushProperties(true);\n          }\n          _showHideChildren(hide) {\n            var c = this.children;\n            for (var i=0; i<c.length; i++) {\n              var n = c[i];\n              // Ignore non-changes\n              if (Boolean(hide) != Boolean(n.__hideTemplateChildren__)) {\n                if (n.nodeType === Node.TEXT_NODE) {\n                  if (hide) {\n                    n.__polymerTextContent__ = n.textContent;\n                    n.textContent = '';\n                  } else {\n                    n.textContent = n.__polymerTextContent__;\n                  }\n                } else if (n.style) {\n                  if (hide) {\n                    n.__polymerDisplay__ = n.style.display;\n                    n.style.display = 'none';\n                  } else {\n                    n.style.display = n.__polymerDisplay__;\n                  }\n                }\n              }\n              n.__hideTemplateChildren__ = hide;\n              if (n._showHideChildren) {\n                n._showHideChildren(hide);\n              }\n            }\n          }\n          _configureProperties(props) {\n            if (props) {\n              for (var iprop in options.instanceProps) {\n                if (iprop in props) {\n                  this[iprop] = props[iprop];\n                }\n              }\n            }\n            for (var hprop in this._hostProps) {\n              this[hprop] = this.__template['_host_' + hprop];\n            }\n          }\n          forwardProperty(prop, value, host) {\n            this._setPendingProperty(prop, value);\n            if (host) {\n              host._enqueueClient(this);\n            }\n          }\n          flushProperties() {\n            this._flushProperties(true);\n          }\n          dispatchEvent() { }\n          _addEventListenerToNode(node, eventName, handler) {\n            if (this._rootDataHost) {\n              this._rootDataHost._addEventListenerToNode(node, eventName, (e) => {\n                e.model = this;\n                handler(e);\n              });              \n            }\n          }\n        }\n        klass.prototype._bindTemplate(template);\n        this._prepInstanceProperties(klass, template, options);\n        return klass;\n      }\n\n      _prepHostProperties(template, options) {\n        if (options.fwdHostPropToInstance) {\n          // Provide data API\n          // TODO(kschaaf): memoize template proto\n          DataTemplate.upgradeTemplate(template);\n          // Add template - >instances effects\n          // and host <- template effects\n          var hostProps = template._content._hostProps;\n          for (var prop in hostProps) {\n            template._addPropertyEffect('_host_' + prop,\n              template.PROPERTY_EFFECT_TYPES.PROPAGATE,\n              {fn: this._createHP2IEffector(prop, options)});\n            template._createNotifyingProperty('_host_' + prop);\n          }\n          // Mix any pre-bound data into __data; no need to flush this to\n          // instances since they pull from the template at instance-time\n          if (template.__dataProto) {\n            Polymer.Utils.mixin(template.__data, template.__dataProto);\n          }\n        }\n      }\n\n      _createHP2IEffector(hostProp, options) {\n        return function(template, prop, value) {\n          options.fwdHostPropToInstance.call(template, template,\n            prop.substring('_host_'.length), value);\n        }\n      }\n\n      _prepInstanceProperties(klass, template, options) {\n        var hostProps = template._content._hostProps || {};\n        for (var iprop in options.instanceProps) {\n          delete hostProps[iprop];\n          if (options.fwdInstancePropToHost) {\n            klass.prototype._addPropertyEffect(iprop,\n              klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,\n              {fn: this._createIP2HEffector(iprop, options)});\n          }\n        }\n        if (options.fwdHostPropToInstance && template.__dataHost) {\n          for (var hprop in hostProps) {\n            klass.prototype._addPropertyEffect(hprop,\n              klass.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,\n              {fn: this._createHP2HEffector()})\n          }\n        }\n      }\n\n      _createIP2HEffector(instProp, options) {\n        return function fwdInstPropToHost(inst, prop, value, old, info, fromAbove) {\n          if (!fromAbove) {\n            options.fwdInstancePropToHost.call(inst, inst, prop, value);\n          }\n        }\n      }\n\n      _createHP2HEffector() {\n        return function fwdHostPropToHost(inst, prop, value, old, info, fromAbove) {\n          if (!fromAbove) {\n            // TODO(kschaaf) This does not take advantage of the efficient\n            // upward flow in batched effects\n            inst.__template._setProperty('_host_' + prop, value);\n          }\n        }\n      }\n\n      /**\n       * Returns the template \"model\" associated with a given element, which\n       * serves as the binding scope for the template instance the element is\n       * contained in. A template model is an instance of `Polymer.Base`, and\n       * should be used to manipulate data associated with this template instance.\n       *\n       * Example:\n       *\n       *   var model = modelForElement(el);\n       *   if (model.index < 10) {\n       *     model.set('item.checked', true);\n       *   }\n       *\n       * @method modelForElement\n       * @param {HTMLElement} el Element for which to return a template model.\n       * @return {Object<Polymer.Base>} Model representing the binding scope for\n       *   the element.\n       */\n      modelForElement(host, el) {\n        var model;\n        while (el) {\n          // An element with a _templateInstance marks the top boundary\n          // of a scope; walk up until we find one, and then ensure that\n          // its __dataHost matches `this`, meaning this dom-repeat stamped it\n          if ((model = el._templateInstance)) {\n            // Found an element stamped by another template; keep walking up\n            // from its __dataHost\n            if (model.__dataHost != host) {\n              el = model.__dataHost;\n            } else {\n              return model;\n            }\n          } else {\n            // Still in a template scope, keep going up until\n            // a _templateInstance is found\n            el = el.parentNode;\n          }\n        }\n      }\n    }\n\n    Polymer.Templatizer = Templatizer;\n\n  })();\n(function() {\n  'use strict';\n\n  var templatizer = new Polymer.Templatizer();\n\n  class DomRepeat extends Polymer.Element {\n\n    static get template() { return null; }\n\n    static get config() { \n\n      return {\n\n        /**\n         * Fired whenever DOM is added or removed by this template (by\n         * default, rendering occurs lazily).  To force immediate rendering, call\n         * `render`.\n         *\n         * @event dom-change\n         */\n\n        properties: {\n\n          /**\n           * An array containing items determining how many instances of the template\n           * to stamp and that that each template instance should bind to.\n           */\n          items: {\n            type: Array\n          },\n\n          /**\n           * The name of the variable to add to the binding scope for the array\n           * element associated with a given template instance.\n           */\n          as: {\n            type: String,\n            value: 'item'\n          },\n\n          /**\n           * The name of the variable to add to the binding scope with the index\n           * for the inst.  If `sort` is provided, the index will reflect the\n           * sorted order (rather than the original array order).\n           */\n          indexAs: {\n            type: String,\n            value: 'index'\n          },\n\n          /**\n           * The name of the variable to add to the binding scope with the index\n           * for the inst.  If `sort` is provided, the index will reflect the\n           * sorted order (rather than the original array order).\n           */\n          itemsIndexAs: {\n            type: String,\n            value: 'itemsIndex'\n          },\n\n          /**\n           * A function that should determine the sort order of the items.  This\n           * property should either be provided as a string, indicating a method\n           * name on the element's host, or else be an actual function.  The\n           * function should match the sort function passed to `Array.sort`.\n           * Using a sort function has no effect on the underlying `items` array.\n           */\n          sort: {\n            type: Function,\n            observer: '_sortChanged'\n          },\n\n          /**\n           * A function that can be used to filter items out of the view.  This\n           * property should either be provided as a string, indicating a method\n           * name on the element's host, or else be an actual function.  The\n           * function should match the sort function passed to `Array.filter`.\n           * Using a filter function has no effect on the underlying `items` array.\n           */\n          filter: {\n            type: Function,\n            observer: '_filterChanged'\n          },\n\n          /**\n           * When using a `filter` or `sort` function, the `observe` property\n           * should be set to a space-separated list of the names of item\n           * sub-fields that should trigger a re-sort or re-filter when changed.\n           * These should generally be fields of `item` that the sort or filter\n           * function depends on.\n           */\n          observe: {\n            type: String,\n            observer: '_observeChanged'\n          },\n\n          /**\n           * When using a `filter` or `sort` function, the `delay` property\n           * determines a debounce time after a change to observed item\n           * properties that must pass before the filter or sort is re-run.\n           * This is useful in rate-limiting shuffing of the view when\n           * item changes may be frequent.\n           */\n          delay: Number,\n\n          /**\n           * Count of currently rendered items after `filter` (if any) has been applied.\n           * If \"chunking mode\" is enabled, `renderedItemCount` is updated each time a\n           * set of template instances is rendered.\n           *\n           */\n          renderedItemCount: {\n            type: Number,\n            notify: true,\n            readOnly: true\n          },\n\n          /**\n           * Defines an initial count of template instances to render after setting\n           * the `items` array, before the next paint, and puts the `dom-repeat`\n           * into \"chunking mode\".  The remaining items will be created and rendered\n           * incrementally at each animation frame therof until all instances have\n           * been rendered.\n           */\n          initialCount: {\n            type: Number,\n            observer: '_initializeChunking'\n          },\n\n          /**\n           * When `initialCount` is used, this property defines a frame rate to\n           * target by throttling the number of instances rendered each frame to\n           * not exceed the budget for the target frame rate.  Setting this to a\n           * higher number will allow lower latency and higher throughput for\n           * things like event handlers, but will result in a longer time for the\n           * remaining items to complete rendering.\n           */\n          targetFramerate: {\n            type: Number,\n            value: 20\n          },\n\n          _targetFrameTime: {\n            type: Number,\n            computed: '_computeFrameTime(targetFramerate)'\n          }\n\n        },\n\n        observers: [\n          '_itemsChanged(items.*)'\n        ]\n\n      }\n\n    }\n\n\n    constructor() {\n      super();\n      this._instances = [];\n      this._pool = [];\n      this._limit = Infinity;\n      this._renderDebouncer = null;\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      this.__isDetached = true;\n      for (var i=0; i<this._instances.length; i++) {\n        this._detachInstance(i);\n      }\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      // only perform attachment if the element was previously detached.\n      if (this.__isDetached) {\n        this.__isDetached = false;\n        var parent = this.parentNode;\n        for (var i=0; i<this._instances.length; i++) {\n          this._attachInstance(i, parent);\n        }\n      }\n    }\n\n    ensureTemplatized() {\n      // Templatizing (generating the instance constructor) needs to wait\n      // until ready, since won't have its template content handed back to\n      // it until then\n      if (!this._ctor) {\n        var template = this.template = this.querySelector('template');\n        template.__domRepeat = this;\n        if (!template) {\n          throw new Error('dom-repeat requires a <template> child');\n        }\n        // Template instance props that should be excluded from forwarding\n        var instanceProps = {};\n        instanceProps[this.as] = true;\n        instanceProps[this.indexAs] = true;\n        instanceProps[this.itemsIndexAs] = true;\n        this._ctor = templatizer.templatize(template, {\n          instanceProps: instanceProps,\n          fwdHostPropToInstance: function(template, prop, value) {\n            let repeater = template.__domRepeat;\n            var i$ = repeater._instances;\n            for (var i=0, inst; (i<i$.length) && (inst=i$[i]); i++) {\n              inst.forwardProperty(prop, value, template);\n            }\n          },\n          fwdInstancePropToHost: function(inst, prop, value) {\n            let repeater = inst.__template.__domRepeat;\n            if (Polymer.Path.matches(repeater.as, prop)) {\n              let idx = inst[repeater.itemsIndexAs];\n              if (prop == repeater.as) {\n                repeater.items[idx] = value;\n              }\n              let path = Polymer.Path.translate(repeater.as, 'items.' + idx, prop);\n              repeater.notifyPath(path, value);\n            }\n          }\n        });\n      }\n    }\n\n    _getRootDataHost() {\n      return this.__dataHost._rootDataHost || this.__dataHost;\n    }\n\n    _sortChanged(sort) {\n      var dataHost = this._getRootDataHost();\n      this._sortFn = sort && (typeof sort == 'function' ? sort :\n        function() { return dataHost[sort].apply(dataHost, arguments); });\n      this._needFullRefresh = true;\n      if (this.items) {\n        this._debounceRender(this._render);\n      }\n    }\n\n    _filterChanged(filter) {\n      var dataHost = this._getRootDataHost();\n      this._filterFn = filter && (typeof filter == 'function' ? filter :\n        function() { return dataHost[filter].apply(dataHost, arguments); });\n      this._needFullRefresh = true;\n      if (this.items) {\n        this._debounceRender(this._render);\n      }\n    }\n\n    _computeFrameTime(rate) {\n      return Math.ceil(1000/rate);\n    }\n\n    _initializeChunking() {\n      if (this.initialCount) {\n        this._limit = this.initialCount;\n        this._chunkCount = this.initialCount;\n        this._lastChunkTime = performance.now();\n      }\n    }\n\n    _tryRenderChunk() {\n      // Debounced so that multiple calls through `_render` between animation\n      // frames only queue one new rAF (e.g. array mutation & chunked render)\n      if (this.items && this._limit < this.items.length) {\n        this._debounceRender(this._requestRenderChunk);\n      }\n    }\n\n    _requestRenderChunk() {\n      requestAnimationFrame(()=>this._renderChunk());\n    }\n\n    _renderChunk() {\n      // Simple auto chunkSize throttling algorithm based on feedback loop:\n      // measure actual time between frames and scale chunk count by ratio\n      // of target/actual frame time\n      var currChunkTime = performance.now();\n      var ratio = this._targetFrameTime / (currChunkTime - this._lastChunkTime);\n      this._chunkCount = Math.round(this._chunkCount * ratio) || 1;\n      this._limit += this._chunkCount;\n      this._lastChunkTime = currChunkTime;\n      this._debounceRender(this._render);\n    }\n\n    _observeChanged() {\n      this._observePaths = this.observe &&\n        this.observe.replace('.*', '.').split(' ');\n    }\n\n    _itemsChanged(change) {\n      if (this.items && !Array.isArray(this.items)) {\n        console.warn('dom-repeat expected array for `items`, found', this.items);\n      }\n      // If path was to an item (e.g. 'items.3' or 'items.3.foo'), forward the\n      // path to that instance synchronously (retuns false for non-item paths)\n      if (!this._forwardItemPath(change.path, change.value)) {\n        // Otherwise, the array was reset ('items') or spliced ('items.splices'),\n        // so queue a full refresh\n        this._needFullRefresh = true;\n        this._initializeChunking();\n        this._debounceRender(this._render);\n      }\n    }\n\n    _checkObservedPaths(path) {\n      if (this._observePaths) {\n        path = path.substring(path.indexOf('.') + 1);\n        var paths = this._observePaths;\n        for (var i=0; i<paths.length; i++) {\n          if (path.indexOf(paths[i]) === 0) {\n            this._needFullRefresh = true;\n            this._debounceRender(this._render, this.delay);\n            return true;\n          }\n        }\n      }\n    }\n\n    _debounceRender(fn, delay) {\n      this._renderDebouncer =\n        Polymer.Debouncer.debounce(this._renderDebouncer, fn, delay, this);\n      Polymer.Templatizer.enqueueDebouncer(this._renderDebouncer);\n    }\n\n    /**\n     * Forces the element to render its content. Normally rendering is\n     * asynchronous to a provoking change. This is done for efficiency so\n     * that multiple changes trigger only a single render. The render method\n     * should be called if, for example, template rendering is required to\n     * validate application state.\n     */\n    render() {\n      // Queue this repeater, then flush all in order\n      this._needFullRefresh = true;\n      this._debounceRender(this._render);\n      Polymer.Templatizer.flush();\n    }\n\n    _render() {\n      this.ensureTemplatized();\n      this._applyFullRefresh();\n      // Reset the pool\n      // TODO(kschaaf): Reuse pool across turns and nested templates\n      // Requires updating hostProps and dealing with the fact that path\n      // notifications won't reach instances sitting in the pool, which\n      // could result in out-of-sync instances since simply re-setting\n      // `item` may not be sufficient if the pooled instance happens to be\n      // the same item.\n      this._pool.length = 0;\n      // Set rendered item count\n      this._setRenderedItemCount(this._instances.length);\n      // Notify users\n      this.dispatchEvent(new CustomEvent('dom-change', {bubbles: true}));\n      // Check to see if we need to render more items\n      this._tryRenderChunk();\n    }\n\n    _applyFullRefresh() {\n      const items = this.items || [];\n      let isntIdxToItemsIdx = new Array(items.length);\n      for (let i=0; i<items.length; i++) {\n        isntIdxToItemsIdx[i] = i;\n      }\n      // Apply user filter\n      if (this._filterFn) {\n        isntIdxToItemsIdx = isntIdxToItemsIdx.filter((i, idx, array) =>\n          this._filterFn(items[i], idx, array));\n      }\n      // Apply user sort\n      if (this._sortFn) {\n        isntIdxToItemsIdx.sort((a, b) => this._sortFn(items[a], items[b]));\n      }\n      // items->inst map kept for item path forwarding\n      const itemsIdxToInstIdx = this._itemsIdxToInstIdx = {};\n      let instIdx = 0;\n      // Generate instances and assign items\n      const limit = Math.min(isntIdxToItemsIdx.length, this._limit);\n      for (; instIdx<limit; instIdx++) {\n        let inst = this._instances[instIdx];\n        let itemIdx = isntIdxToItemsIdx[instIdx];\n        let item = items[itemIdx];\n        itemsIdxToInstIdx[itemIdx] = instIdx;\n        if (inst && instIdx < this._limit) {\n          inst.forwardProperty(this.as, item);\n          inst.forwardProperty(this.indexAs, instIdx);\n          inst.forwardProperty(this.itemsIndexAs, itemIdx);\n          inst.flushProperties();\n        } else {\n          this._insertInstance(item, instIdx, itemIdx);\n        }\n      }\n      // Remove any extra instances from previous state\n      for (let i=this._instances.length-1; i>=instIdx; i--) {\n        this._detachAndRemoveInstance(i);\n      }\n    }\n\n    _detachInstance(idx) {\n      var inst = this._instances[idx];\n      //TODO(sorvell): why is this necessary?\n      if (inst.children) {\n        for (var i=0; i<inst.children.length; i++) {\n          var el = inst.children[i];\n          inst.root.appendChild(el);\n        }\n      }\n      return inst;\n    }\n\n    _attachInstance(idx, parent) {\n      var inst = this._instances[idx];\n      parent.insertBefore(inst.root, this);\n    }\n\n    _detachAndRemoveInstance(idx) {\n      var inst = this._detachInstance(idx);\n      if (inst) {\n        this._pool.push(inst);\n      }\n      this._instances.splice(idx, 1);\n    }\n\n    _stampInstance(item, instIdx, itemIdx) {\n      var model = {};\n      model[this.as] = item;\n      model[this.indexAs] = instIdx;\n      model[this.itemsIndexAs] = itemIdx;\n      return new this._ctor(this, model);\n    }\n\n    _insertInstance(item, instIdx, itemIdx) {\n      var inst = this._pool.pop();\n      if (inst) {\n        // TODO(kschaaf): If the pool is shared across turns, hostProps\n        // need to be re-set to reused instances in addition to item\n        inst.forwardProperty(this.as, item);\n        inst.forwardProperty(this.indexAs, instIdx);\n        inst.forwardProperty(this.itemsIndexAs, itemIdx);\n      } else {\n        inst = this._stampInstance(item, instIdx, itemIdx);\n      }\n      var beforeRow = this._instances[instIdx + 1];\n      var beforeNode = beforeRow ? beforeRow.children[0] : this;\n      // TODO(sorvell): remove when fragment patching is auto-magic.\n      if (window.ShadyDOM) {\n        ShadyDOM.patch(inst.root);\n      }\n      this.parentNode.insertBefore(inst.root, beforeNode);\n      this._instances[instIdx] = inst;\n      return inst;\n    }\n\n    // Implements extension point from Templatizer mixin\n    _showHideChildren(hidden) {\n      for (var i=0; i<this._instances.length; i++) {\n        this._instances[i]._showHideChildren(hidden);\n      }\n    }\n\n    // Called as a side effect of a host items.<key>.<path> path change,\n    // responsible for notifying item.<path> changes to inst for key\n    _forwardItemPath(path, value) {\n      if (this._itemsIdxToInstIdx) {\n        path = path.slice(6); // 'items.'.length == 6\n        var dot = path.indexOf('.');\n        var itemsIdx = dot < 0 ? path : path.substring(0, dot);\n        var instIdx = this._itemsIdxToInstIdx[itemsIdx];\n        var inst = this._instances[instIdx];\n        if (inst) {\n          path = dot < 0 ? '' : path.substring(dot+1);\n          if (!this._checkObservedPaths(path)) {\n            inst.forwardProperty(this.as + (path ? '.' + path : ''), value);\n            inst.flushProperties();\n            return true;\n          }        \n        }\n      }\n    }\n\n    /**\n     * Returns the item associated with a given element stamped by\n     * this `dom-repeat`.\n     *\n     * Note, to modify sub-properties of the item,\n     * `modelForElement(el).set('item.<sub-prop>', value)`\n     * should be used.\n     *\n     * @method itemForElement\n     * @param {HTMLElement} el Element for which to return the item.\n     * @return {any} Item associated with the element.\n     */\n    itemForElement(el) {\n      var instance = this.modelForElement(el);\n      return instance && instance[this.as];\n    }\n\n    /**\n     * Returns the inst index for a given element stamped by this `dom-repeat`.\n     * If `sort` is provided, the index will reflect the sorted order (rather\n     * than the original array order).\n     *\n     * @method indexForElement\n     * @param {HTMLElement} el Element for which to return the index.\n     * @return {any} Row index associated with the element (note this may\n     *   not correspond to the array index if a user `sort` is applied).\n     */\n    indexForElement(el) {\n      var instance = this.modelForElement(el);\n      return instance && instance[this.indexAs];\n    }\n\n    /**\n     * Returns the template \"model\" associated with a given element, which\n     * serves as the binding scope for the template instance the element is\n     * contained in. A template model is an instance of `Polymer.Base`, and\n     * should be used to manipulate data associated with this template instance.\n     *\n     * Example:\n     *\n     *   var model = modelForElement(el);\n     *   if (model.index < 10) {\n     *     model.set('item.checked', true);\n     *   }\n     *\n     * @method modelForElement\n     * @param {HTMLElement} el Element for which to return a template model.\n     * @return {Object<Polymer.Base>} Model representing the binding scope for\n     *   the element.\n     */\n    modelForElement(el) {\n      return templatizer.modelForElement(this.template, el);\n    }\n\n  }\n\n  customElements.define('dom-repeat', DomRepeat);\n\n  Polymer.DomRepeat = DomRepeat;\n\n})();\n(function() {\n\n  var templatizer = new Polymer.Templatizer();\n\n  /**\n   * Stamps the template iff the `if` property is truthy.\n   *\n   * When `if` becomes falsey, the stamped content is hidden but not\n   * removed from dom. When `if` subsequently becomes truthy again, the content\n   * is simply re-shown. This approach is used due to its favorable performance\n   * characteristics: the expense of creating template content is paid only\n   * once and lazily.\n   *\n   * Set the `restamp` property to true to force the stamped content to be\n   * created / destroyed when the `if` condition changes.\n   */\n  class DomIf extends Polymer.Element {\n\n    static get template() { return null; }\n\n    static get config() { \n\n      return {\n\n        /**\n         * Fired whenever DOM is added or removed/hidden by this template (by\n         * default, rendering occurs lazily).  To force immediate rendering, call\n         * `render`.\n         *\n         * @event dom-change\n         */\n\n        properties: {\n\n          /**\n           * A boolean indicating whether this template should stamp.\n           */\n          'if': {\n            type: Boolean,\n            observer: '_debounceRender'\n          },\n\n          /**\n           * When true, elements will be removed from DOM and discarded when `if`\n           * becomes false and re-created and added back to the DOM when `if`\n           * becomes true.  By default, stamped elements will be hidden but left\n           * in the DOM when `if` becomes false, which is generally results\n           * in better performance.\n           */\n          restamp: {\n            type: Boolean,\n            observer: '_debounceRender'\n          }\n\n        }\n\n      };\n\n    }\n\n    constructor() {\n      super();\n      this._renderDebouncer = null;\n    }\n\n    _debounceRender() {\n      this._renderDebouncer =\n        Polymer.Debouncer.debounce(this._renderDebouncer, this._render, null, this);\n      Polymer.Templatizer.enqueueDebouncer(this._renderDebouncer);\n    }\n\n    disconnectedCallback() {\n      super.disconnectedCallback();\n      if (!this.parentNode ||\n          (this.parentNode.nodeType == Node.DOCUMENT_FRAGMENT_NODE &&\n           !this.parentNode.host)) {\n        this._teardownInstance();\n      }\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      if (this.if) {\n        this._debounceRender();\n      }\n    }\n\n    /**\n     * Forces the element to render its content. Normally rendering is\n     * asynchronous to a provoking change. This is done for efficiency so\n     * that multiple changes trigger only a single render. The render method\n     * should be called if, for example, template rendering is required to\n     * validate application state.\n     */\n    render() {\n      Polymer.Templatizer.flush();\n    }\n\n    _render() {\n      if (this.if) {\n        this._ensureInstance();\n        this._showHideChildren();\n      } else if (this.restamp) {\n        this._teardownInstance();\n      }\n      if (!this.restamp && this._instance) {\n        this._showHideChildren();\n      }\n      if (this.if != this._lastIf) {\n        this.dispatchEvent(new CustomEvent('dom-change', {bubbles: true}));\n        this._lastIf = this.if;\n      }\n    }\n\n    _ensureInstance() {\n      var parentNode = this.parentNode;\n      // Guard against element being detached while render was queued\n      if (parentNode) {\n        if (!this._ctor) {\n          var template = this.querySelector('template');\n          template.__domIf = this;\n          if (!template) {\n            throw new Error('dom-if requires a <template> child');\n          }\n          this._ctor = templatizer.templatize(template, {\n            fwdHostPropToInstance: function(host, prop, value) {\n              let domif = template.__domIf;\n              if (domif._instance) {\n                domif._instance.forwardProperty(prop, value, host);\n              }\n            }\n          });\n        }\n        if (!this._instance) {\n          this._instance = new this._ctor(this);\n          var root = this._instance.root;\n          parentNode.insertBefore(root, this);\n        } else {\n          var c$ = this._instance.children;\n          if (c$ && c$.length) {\n            // Detect case where dom-if was re-attached in new position\n            var lastChild = this.previousSibling;\n            if (lastChild !== c$[c$.length-1]) {\n              for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n                parentNode.insertBefore(n, this);\n              }\n            }\n          }\n        }\n      }\n    }\n\n    _teardownInstance() {\n      if (this._instance) {\n        var c$ = this._instance.children;\n        if (c$ && c$.length) {\n          // use first child parent, for case when dom-if may have been detached\n          var parent = c$[0].parentNode;\n          for (var i=0, n; (i<c$.length) && (n=c$[i]); i++) {\n            parent.removeChild(n);\n          }\n        }\n        this._instance = null;\n      }\n    }\n\n    _showHideChildren() {\n      var hidden = this.__hideTemplateChildren__ || !this.if;\n      if (this._instance) {\n        this._instance._showHideChildren(hidden);\n      }\n    }\n\n  }\n\n  customElements.define('dom-if', DomIf);\n\n  Polymer.DomIf = DomIf;\n\n})();\n(function() {\n  'use strict';\n  // NOTE: CustomStyle must be loaded prior to loading Polymer.\n  // To support asynchronous loading of custom-style, an async import\n  // can be made that loads custom-style and then polymer.\n  if (window.CustomStyle) {\n    var attr = 'include';\n    window.CustomStyle.processHook = function(style) {\n      var include = style.getAttribute(attr);\n      if (!include) {\n        return;\n      }\n      style.removeAttribute(attr);\n      style.textContent = Polymer.StyleGather.cssFromModules(include) + style.textContent;\n    };\n  }\n\n})();\n(function () {\n  var _bindingRegex_patch = {\n    // Issue with https://github.com/Polymer/polymer/issues/3349 \n    _bindingRegex_1_2_4: (function() {\n      var IDENT  = '(?:' + '[a-zA-Z_$][\\\\w.:$-*]*' + ')';\n      var NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n      var SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n      var DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n      var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n      var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n      var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n      var ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                    '(?:' + ARGUMENTS + '?' + ')' +\n                                  '\\\\)\\\\s*' + ')';\n      var BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n      var OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n      var CLOSE_BRACKET = '(?:]]|}})';\n      var NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n      var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n      return new RegExp(EXPRESSION, \"g\");\n    })(),\n\n    // Fix from https://github.com/TimvdLippe/polymer/blob/fix-binding-with-dash/src/lib/annotations/annotations.html\n    _bindingRegex_1_2_4_patched: (function() {\n      var IDENT  = '(?:' + '[a-zA-Z_\\\\$][\\\\w\\\\.:\\\\$\\\\-\\\\*]*' + ')';\n      var NUMBER = '(?:' + '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?' + ')';\n      var SQUOTE_STRING = '(?:' + '\\'(?:[^\\'\\\\\\\\]|\\\\\\\\.)*\\'' + ')';\n      var DQUOTE_STRING = '(?:' + '\"(?:[^\"\\\\\\\\]|\\\\\\\\.)*\"' + ')';\n      var STRING = '(?:' + SQUOTE_STRING + '|' + DQUOTE_STRING + ')';\n      var ARGUMENT = '(?:' + IDENT + '|' + NUMBER + '|' +  STRING + '\\\\s*' + ')';\n      var ARGUMENTS = '(?:' + ARGUMENT + '(?:,\\\\s*' + ARGUMENT + ')*' + ')';\n      var ARGUMENT_LIST = '(?:' + '\\\\(\\\\s*' +\n                                    '(?:' + ARGUMENTS + '?' + ')' +\n                                  '\\\\)\\\\s*' + ')';\n      var BINDING = '(' + IDENT + '\\\\s*' + ARGUMENT_LIST + '?' + ')'; // Group 3\n      var OPEN_BRACKET = '(\\\\[\\\\[|{{)' + '\\\\s*';\n      var CLOSE_BRACKET = '(?:]]|}})';\n      var NEGATE = '(?:(!)\\\\s*)?'; // Group 2\n      var EXPRESSION = OPEN_BRACKET + NEGATE + BINDING + CLOSE_BRACKET;\n      return new RegExp(EXPRESSION, \"g\");\n    })()\n  };\n    \n  if (!Polymer.ElementMixin && Polymer.Annotations._bindingRegex.toString() === \n      _bindingRegex_patch._bindingRegex_1_2_4.toString()) {\n    console.log('Fixing Polymer issue#3349 by patching Polymer.Annotations._bindingRegex for Polymer 1.2.4');\n    Polymer.Annotations._bindingRegex = _bindingRegex_patch._bindingRegex_1_2_4_patched;\n  }\n})();\n'use strict';\n\n  Polymer({\n    is: 'iron-request',\n\n    hostAttributes: {\n      hidden: true\n    },\n\n    properties: {\n\n      /**\n       * A reference to the XMLHttpRequest instance used to generate the\n       * network request.\n       *\n       * @type {XMLHttpRequest}\n       */\n      xhr: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return new XMLHttpRequest();\n        }\n      },\n\n      /**\n       * A reference to the parsed response body, if the `xhr` has completely\n       * resolved.\n       *\n       * @type {*}\n       * @default null\n       */\n      response: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return null;\n        }\n      },\n\n      /**\n       * A reference to the status code, if the `xhr` has completely resolved.\n       */\n      status: {\n        type: Number,\n        notify: true,\n        readOnly: true,\n        value: 0\n      },\n\n      /**\n       * A reference to the status text, if the `xhr` has completely resolved.\n       */\n      statusText: {\n        type: String,\n        notify: true,\n        readOnly: true,\n        value: ''\n      },\n\n      /**\n       * A promise that resolves when the `xhr` response comes back, or rejects\n       * if there is an error before the `xhr` completes.\n       *\n       * @type {Promise}\n       */\n      completes: {\n        type: Object,\n        readOnly: true,\n        notify: true,\n        value: function() {\n          return new Promise(function (resolve, reject) {\n            this.resolveCompletes = resolve;\n            this.rejectCompletes = reject;\n          }.bind(this));\n        }\n      },\n\n      /**\n       * An object that contains progress information emitted by the XHR if\n       * available.\n       *\n       * @default {}\n       */\n      progress: {\n        type: Object,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Aborted will be true if an abort of the request is attempted.\n       */\n      aborted: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false,\n      },\n\n      /**\n       * Errored will be true if the browser fired an error event from the\n       * XHR object (mainly network errors).\n       */\n      errored: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false\n      },\n\n      /**\n       * TimedOut will be true if the XHR threw a timeout event.\n       */\n      timedOut: {\n        type: Boolean,\n        notify: true,\n        readOnly: true,\n        value: false\n      }\n    },\n\n    /**\n     * Succeeded is true if the request succeeded. The request succeeded if it\n     * loaded without error, wasn't aborted, and the status code is ≥ 200, and\n     * < 300, or if the status code is 0.\n     *\n     * The status code 0 is accepted as a success because some schemes - e.g.\n     * file:// - don't provide status codes.\n     *\n     * @return {boolean}\n     */\n    get succeeded() {\n      if (this.errored || this.aborted || this.timedOut) {\n        return false;\n      }\n      var status = this.xhr.status || 0;\n\n      // Note: if we are using the file:// protocol, the status code will be 0\n      // for all outcomes (successful or otherwise).\n      return status === 0 ||\n        (status >= 200 && status < 300);\n    },\n\n    /**\n     * Sends an HTTP request to the server and returns the XHR object.\n     *\n     * The handling of the `body` parameter will vary based on the Content-Type\n     * header. See the docs for iron-ajax's `body` param for details.\n     *\n     * @param {{\n     *   url: string,\n     *   method: (string|undefined),\n     *   async: (boolean|undefined),\n     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n     *   headers: (Object|undefined),\n     *   handleAs: (string|undefined),\n     *   jsonPrefix: (string|undefined),\n     *   withCredentials: (boolean|undefined)}} options -\n     *     url The url to which the request is sent.\n     *     method The HTTP method to use, default is GET.\n     *     async By default, all requests are sent asynchronously. To send synchronous requests,\n     *         set to false.\n     *     body The content for the request body for POST method.\n     *     headers HTTP request headers.\n     *     handleAs The response type. Default is 'text'.\n     *     withCredentials Whether or not to send credentials on the request. Default is false.\n     *   timeout: (Number|undefined)\n     * @return {Promise}\n     */\n    send: function (options) {\n      var xhr = this.xhr;\n\n      if (xhr.readyState > 0) {\n        return null;\n      }\n\n      xhr.addEventListener('progress', function (progress) {\n        this._setProgress({\n          lengthComputable: progress.lengthComputable,\n          loaded: progress.loaded,\n          total: progress.total\n        });\n      }.bind(this))\n\n      xhr.addEventListener('error', function (error) {\n        this._setErrored(true);\n        this._updateStatus();\n        this.rejectCompletes(error);\n      }.bind(this));\n\n      xhr.addEventListener('timeout', function (error) {\n        this._setTimedOut(true);\n        this._updateStatus();\n        this.rejectCompletes(error);\n      }.bind(this));\n\n      xhr.addEventListener('abort', function () {\n        this._updateStatus();\n        this.rejectCompletes(new Error('Request aborted.'));\n      }.bind(this));\n\n      // Called after all of the above.\n      xhr.addEventListener('loadend', function () {\n        this._updateStatus();\n        this._setResponse(this.parseResponse());\n\n        if (!this.succeeded) {\n          this.rejectCompletes(new Error('The request failed with status code: ' + this.xhr.status));\n          return;\n        }\n\n        this.resolveCompletes(this);\n      }.bind(this));\n\n      this.url = options.url;\n      xhr.open(\n        options.method || 'GET',\n        options.url,\n        options.async !== false\n      );\n\n      var acceptType = {\n        'json': 'application/json',\n        'text': 'text/plain',\n        'html': 'text/html',\n        'xml': 'application/xml',\n        'arraybuffer': 'application/octet-stream'\n      }[options.handleAs];\n      var headers = options.headers || Object.create(null);\n      var newHeaders = Object.create(null);\n      for (var key in headers) {\n        newHeaders[key.toLowerCase()] = headers[key];\n      }\n      headers = newHeaders;\n\n      if (acceptType && !headers['accept']) {\n        headers['accept'] = acceptType;\n      }\n      Object.keys(headers).forEach(function (requestHeader) {\n        if (/[A-Z]/.test(requestHeader)) {\n          Polymer.Base._error('Headers must be lower case, got', requestHeader);\n        }\n        xhr.setRequestHeader(\n          requestHeader,\n          headers[requestHeader]\n        );\n      }, this);\n\n      if (options.async !== false) {\n        if (options.async) {\n          xhr.timeout = options.timeout;\n        }\n\n        var handleAs = options.handleAs;\n\n        // If a JSON prefix is present, the responseType must be 'text' or the\n        // browser won’t be able to parse the response.\n        if (!!options.jsonPrefix || !handleAs) {\n          handleAs = 'text';\n        }\n\n        // In IE, `xhr.responseType` is an empty string when the response\n        // returns. Hence, caching it as `xhr._responseType`.\n        xhr.responseType = xhr._responseType = handleAs;\n\n        // Cache the JSON prefix, if it exists.\n        if (!!options.jsonPrefix) {\n          xhr._jsonPrefix = options.jsonPrefix;\n        }\n      }\n\n      xhr.withCredentials = !!options.withCredentials;\n\n\n      var body = this._encodeBodyObject(options.body, headers['content-type']);\n\n      xhr.send(\n        /** @type {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|\n                   null|string|undefined} */\n        (body));\n\n      return this.completes;\n    },\n\n    /**\n     * Attempts to parse the response body of the XHR. If parsing succeeds,\n     * the value returned will be deserialized based on the `responseType`\n     * set on the XHR.\n     *\n     * @return {*} The parsed response,\n     * or undefined if there was an empty response or parsing failed.\n     */\n    parseResponse: function () {\n      var xhr = this.xhr;\n      var responseType = xhr.responseType || xhr._responseType;\n      var preferResponseText = !this.xhr.responseType;\n      var prefixLen = (xhr._jsonPrefix && xhr._jsonPrefix.length) || 0;\n\n      try {\n        switch (responseType) {\n          case 'json':\n            // If the xhr object doesn't have a natural `xhr.responseType`,\n            // we can assume that the browser hasn't parsed the response for us,\n            // and so parsing is our responsibility. Likewise if response is\n            // undefined, as there's no way to encode undefined in JSON.\n            if (preferResponseText || xhr.response === undefined) {\n              // Try to emulate the JSON section of the response body section of\n              // the spec: https://xhr.spec.whatwg.org/#response-body\n              // That is to say, we try to parse as JSON, but if anything goes\n              // wrong return null.\n              try {\n                return JSON.parse(xhr.responseText);\n              } catch (_) {\n                return null;\n              }\n            }\n\n            return xhr.response;\n          case 'xml':\n            return xhr.responseXML;\n          case 'blob':\n          case 'document':\n          case 'arraybuffer':\n            return xhr.response;\n          case 'text':\n          default: {\n            // If `prefixLen` is set, it implies the response should be parsed\n            // as JSON once the prefix of length `prefixLen` is stripped from\n            // it. Emulate the behavior above where null is returned on failure\n            // to parse.\n            if (prefixLen) {\n              try {\n                return JSON.parse(xhr.responseText.substring(prefixLen));\n              } catch (_) {\n                return null;\n              }\n            }\n            return xhr.responseText;\n          }\n        }\n      } catch (e) {\n        this.rejectCompletes(new Error('Could not parse response. ' + e.message));\n      }\n    },\n\n    /**\n     * Aborts the request.\n     */\n    abort: function () {\n      this._setAborted(true);\n      this.xhr.abort();\n    },\n\n    /**\n     * @param {*} body The given body of the request to try and encode.\n     * @param {?string} contentType The given content type, to infer an encoding\n     *     from.\n     * @return {*} Either the encoded body as a string, if successful,\n     *     or the unaltered body object if no encoding could be inferred.\n     */\n    _encodeBodyObject: function(body, contentType) {\n      if (typeof body == 'string') {\n        return body;  // Already encoded.\n      }\n      var bodyObj = /** @type {Object} */ (body);\n      switch(contentType) {\n        case('application/json'):\n          return JSON.stringify(bodyObj);\n        case('application/x-www-form-urlencoded'):\n          return this._wwwFormUrlEncode(bodyObj);\n      }\n      return body;\n    },\n\n    /**\n     * @param {Object} object The object to encode as x-www-form-urlencoded.\n     * @return {string} .\n     */\n    _wwwFormUrlEncode: function(object) {\n      if (!object) {\n        return '';\n      }\n      var pieces = [];\n      Object.keys(object).forEach(function(key) {\n        // TODO(rictic): handle array values here, in a consistent way with\n        //   iron-ajax params.\n        pieces.push(\n            this._wwwFormUrlEncodePiece(key) + '=' +\n            this._wwwFormUrlEncodePiece(object[key]));\n      }, this);\n      return pieces.join('&');\n    },\n\n    /**\n     * @param {*} str A key or value to encode as x-www-form-urlencoded.\n     * @return {string} .\n     */\n    _wwwFormUrlEncodePiece: function(str) {\n      // Spec says to normalize newlines to \\r\\n and replace %20 spaces with +.\n      // jQuery does this as well, so this is likely to be widely compatible.\n      if (str === null) {\n        return '';\n      }\n      return encodeURIComponent(str.toString().replace(/\\r?\\n/g, '\\r\\n'))\n          .replace(/%20/g, '+');\n    },\n\n    /**\n     * Updates the status code and status text.\n     */\n    _updateStatus: function() {\n      this._setStatus(this.xhr.status);\n      this._setStatusText((this.xhr.statusText === undefined) ? '' : this.xhr.statusText);\n    }\n  });\n'use strict';\n\n  Polymer({\n\n    is: 'iron-ajax',\n\n    /**\n     * Fired when a request is sent.\n     *\n     * @event request\n     * @event iron-ajax-request\n     */\n\n    /**\n     * Fired when a response is received.\n     *\n     * @event response\n     * @event iron-ajax-response\n     */\n\n    /**\n     * Fired when an error is received.\n     *\n     * @event error\n     * @event iron-ajax-error\n     */\n\n    hostAttributes: {\n      hidden: true\n    },\n\n    properties: {\n      /**\n       * The URL target of the request.\n       */\n      url: {\n        type: String\n      },\n\n      /**\n       * An object that contains query parameters to be appended to the\n       * specified `url` when generating a request. If you wish to set the body\n       * content when making a POST request, you should use the `body` property\n       * instead.\n       */\n      params: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * The HTTP method to use such as 'GET', 'POST', 'PUT', or 'DELETE'.\n       * Default is 'GET'.\n       */\n      method: {\n        type: String,\n        value: 'GET'\n      },\n\n      /**\n       * HTTP request headers to send.\n       *\n       * Example:\n       *\n       *     <iron-ajax\n       *         auto\n       *         url=\"http://somesite.com\"\n       *         headers='{\"X-Requested-With\": \"XMLHttpRequest\"}'\n       *         handle-as=\"json\"></iron-ajax>\n       *\n       * Note: setting a `Content-Type` header here will override the value\n       * specified by the `contentType` property of this element.\n       */\n      headers: {\n        type: Object,\n        value: function() {\n          return {};\n        }\n      },\n\n      /**\n       * Content type to use when sending data. If the `contentType` property\n       * is set and a `Content-Type` header is specified in the `headers`\n       * property, the `headers` property value will take precedence.\n       *\n       * Varies the handling of the `body` param.\n       */\n      contentType: {\n        type: String,\n        value: null\n      },\n\n      /**\n       * Body content to send with the request, typically used with \"POST\"\n       * requests.\n       *\n       * If body is a string it will be sent unmodified.\n       *\n       * If Content-Type is set to a value listed below, then\n       * the body will be encoded accordingly.\n       *\n       *    * `content-type=\"application/json\"`\n       *      * body is encoded like `{\"foo\":\"bar baz\",\"x\":1}`\n       *    * `content-type=\"application/x-www-form-urlencoded\"`\n       *      * body is encoded like `foo=bar+baz&x=1`\n       *\n       * Otherwise the body will be passed to the browser unmodified, and it\n       * will handle any encoding (e.g. for FormData, Blob, ArrayBuffer).\n       *\n       * @type (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object)\n       */\n      body: {\n        type: Object,\n        value: null\n      },\n\n      /**\n       * Toggle whether XHR is synchronous or asynchronous. Don't change this\n       * to true unless You Know What You Are Doing™.\n       */\n      sync: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Specifies what data to store in the `response` property, and\n       * to deliver as `event.detail.response` in `response` events.\n       *\n       * One of:\n       *\n       *    `text`: uses `XHR.responseText`.\n       *\n       *    `xml`: uses `XHR.responseXML`.\n       *\n       *    `json`: uses `XHR.responseText` parsed as JSON.\n       *\n       *    `arraybuffer`: uses `XHR.response`.\n       *\n       *    `blob`: uses `XHR.response`.\n       *\n       *    `document`: uses `XHR.response`.\n       */\n      handleAs: {\n        type: String,\n        value: 'json'\n      },\n\n      /**\n       * Set the withCredentials flag on the request.\n       */\n      withCredentials: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Set the timeout flag on the request.\n       */\n      timeout: {\n        type: Number,\n        value: 0\n      },\n\n      /**\n       * If true, automatically performs an Ajax request when either `url` or\n       * `params` changes.\n       */\n      auto: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * If true, error messages will automatically be logged to the console.\n       */\n      verbose: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * The most recent request made by this iron-ajax element.\n       */\n      lastRequest: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * True while lastRequest is in flight.\n       */\n      loading: {\n        type: Boolean,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * lastRequest's response.\n       *\n       * Note that lastResponse and lastError are set when lastRequest finishes,\n       * so if loading is true, then lastResponse and lastError will correspond\n       * to the result of the previous request.\n       *\n       * The type of the response is determined by the value of `handleAs` at\n       * the time that the request was generated.\n       *\n       * @type {Object}\n       */\n      lastResponse: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * lastRequest's error, if any.\n       *\n       * @type {Object}\n       */\n      lastError: {\n        type: Object,\n        notify: true,\n        readOnly: true\n      },\n\n      /**\n       * An Array of all in-flight requests originating from this iron-ajax\n       * element.\n       */\n      activeRequests: {\n        type: Array,\n        notify: true,\n        readOnly: true,\n        value: function() {\n          return [];\n        }\n      },\n\n      /**\n       * Length of time in milliseconds to debounce multiple automatically generated requests.\n       */\n      debounceDuration: {\n        type: Number,\n        value: 0,\n        notify: true\n      },\n\n      /**\n       * Prefix to be stripped from a JSON response before parsing it.\n       *\n       * In order to prevent an attack using CSRF with Array responses\n       * (http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx/)\n       * many backends will mitigate this by prefixing all JSON response bodies\n       * with a string that would be nonsensical to a JavaScript parser.\n       *\n       */\n      jsonPrefix: {\n        type: String,\n        value: ''\n      },\n\n      /**\n       * By default, iron-ajax's events do not bubble. Setting this attribute will cause its\n       * request and response events as well as its iron-ajax-request, -response,  and -error\n       * events to bubble to the window object. The vanilla error event never bubbles when\n       * using shadow dom even if this.bubbles is true because a scoped flag is not passed with\n       * it (first link) and because the shadow dom spec did not used to allow certain events,\n       * including events named error, to leak outside of shadow trees (second link).\n       * https://www.w3.org/TR/shadow-dom/#scoped-flag\n       * https://www.w3.org/TR/2015/WD-shadow-dom-20151215/#events-that-are-not-leaked-into-ancestor-trees\n       */\n      bubbles: {\n        type: Boolean,\n        value: false\n      },\n\n      _boundHandleResponse: {\n        type: Function,\n        value: function() {\n          return this._handleResponse.bind(this);\n        }\n      }\n    },\n\n    observers: [\n      '_requestOptionsChanged(url, method, params.*, headers, contentType, ' +\n          'body, sync, handleAs, jsonPrefix, withCredentials, timeout, auto)'\n    ],\n\n    /**\n     * The query string that should be appended to the `url`, serialized from\n     * the current value of `params`.\n     *\n     * @return {string}\n     */\n    get queryString () {\n      var queryParts = [];\n      var param;\n      var value;\n\n      for (param in this.params) {\n        value = this.params[param];\n        param = window.encodeURIComponent(param);\n\n        if (Array.isArray(value)) {\n          for (var i = 0; i < value.length; i++) {\n            queryParts.push(param + '=' + window.encodeURIComponent(value[i]));\n          }\n        } else if (value !== null) {\n          queryParts.push(param + '=' + window.encodeURIComponent(value));\n        } else {\n          queryParts.push(param);\n        }\n      }\n\n      return queryParts.join('&');\n    },\n\n    /**\n     * The `url` with query string (if `params` are specified), suitable for\n     * providing to an `iron-request` instance.\n     *\n     * @return {string}\n     */\n    get requestUrl() {\n      var queryString = this.queryString;\n      var url = this.url || '';\n\n      if (queryString) {\n        var bindingChar = url.indexOf('?') >= 0 ? '&' : '?';\n        return url + bindingChar + queryString;\n      }\n\n      return url;\n    },\n\n    /**\n     * An object that maps header names to header values, first applying the\n     * the value of `Content-Type` and then overlaying the headers specified\n     * in the `headers` property.\n     *\n     * @return {Object}\n     */\n    get requestHeaders() {\n      var headers = {};\n      var contentType = this.contentType;\n      if (contentType == null && (typeof this.body === 'string')) {\n        contentType = 'application/x-www-form-urlencoded';\n      }\n      if (contentType) {\n        headers['content-type'] = contentType;\n      }\n      var header;\n\n      if (this.headers instanceof Object) {\n        for (header in this.headers) {\n          headers[header] = this.headers[header].toString();\n        }\n      }\n\n      return headers;\n    },\n\n    /**\n     * Request options suitable for generating an `iron-request` instance based\n     * on the current state of the `iron-ajax` instance's properties.\n     *\n     * @return {{\n     *   url: string,\n     *   method: (string|undefined),\n     *   async: (boolean|undefined),\n     *   body: (ArrayBuffer|ArrayBufferView|Blob|Document|FormData|null|string|undefined|Object),\n     *   headers: (Object|undefined),\n     *   handleAs: (string|undefined),\n     *   jsonPrefix: (string|undefined),\n     *   withCredentials: (boolean|undefined)}}\n     */\n    toRequestOptions: function() {\n      return {\n        url: this.requestUrl || '',\n        method: this.method,\n        headers: this.requestHeaders,\n        body: this.body,\n        async: !this.sync,\n        handleAs: this.handleAs,\n        jsonPrefix: this.jsonPrefix,\n        withCredentials: this.withCredentials,\n        timeout: this.timeout\n      };\n    },\n\n    /**\n     * Performs an AJAX request to the specified URL.\n     *\n     * @return {!IronRequestElement}\n     */\n    generateRequest: function() {\n      var request = /** @type {!IronRequestElement} */ (document.createElement('iron-request'));\n      var requestOptions = this.toRequestOptions();\n\n      this.push('activeRequests', request);\n\n      request.completes.then(\n        this._boundHandleResponse\n      ).catch(\n        this._handleError.bind(this, request)\n      ).then(\n        this._discardRequest.bind(this, request)\n      );\n\n      request.send(requestOptions);\n\n      this._setLastRequest(request);\n      this._setLoading(true);\n\n      this.fire('request', {\n        request: request,\n        options: requestOptions\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n\n      this.fire('iron-ajax-request', {\n        request: request,\n        options: requestOptions\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n\n      return request;\n    },\n\n    _handleResponse: function(request) {\n      if (request === this.lastRequest) {\n        this._setLastResponse(request.response);\n        this._setLastError(null);\n        this._setLoading(false);\n      }\n      this.fire('response', request, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n      this.fire('iron-ajax-response', request, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n    },\n\n    _handleError: function(request, error) {\n      if (this.verbose) {\n        Polymer.Base._error(error);\n      }\n\n      if (request === this.lastRequest) {\n        this._setLastError({\n          request: request,\n          error: error,\n          status: request.xhr.status,\n          statusText: request.xhr.statusText,\n          response: request.xhr.response\n        });\n        this._setLastResponse(null);\n        this._setLoading(false);\n      }\n\n      // Tests fail if this goes after the normal this.fire('error', ...)\n      this.fire('iron-ajax-error', {\n        request: request,\n        error: error\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n\n      this.fire('error', {\n        request: request,\n        error: error\n      }, {\n        bubbles: this.bubbles,\n        composed: true\n      });\n    },\n\n    _discardRequest: function(request) {\n      var requestIndex = this.activeRequests.indexOf(request);\n\n      if (requestIndex > -1) {\n        this.splice('activeRequests', requestIndex, 1);\n      }\n    },\n\n    _requestOptionsChanged: function() {\n      this.debounce('generate-request', function() {\n        if (this.url == null) {\n          return;\n        }\n\n        if (this.auto) {\n          this.generateRequest();\n        }\n      }, this.debounceDuration);\n    },\n\n  });\n(function () {\n  var intlLibraryScript;\n  var intlLibraryLoadingStatus = 'initializing';\n  var _setupIntlPolyfillCalled = false;\n\n  /**\n   * Set up Intl polyfill if required\n   */\n  function _setupIntlPolyfill () {\n    // Polyfill Intl if required\n    var intlLibraryUrl = this.resolveUrl('../intl/dist/Intl.min.js');\n    if (window.Intl) {\n      if (window.IntlPolyfill && window.Intl === window.IntlPolyfill) {\n        intlLibraryLoadingStatus = 'loaded';\n      }\n      else {\n        intlLibraryLoadingStatus = 'native';\n      }\n    }\n    else {\n      intlLibraryLoadingStatus = 'loading';\n      intlLibraryScript = document.createElement('script');\n      intlLibraryScript.setAttribute('src', intlLibraryUrl);\n      intlLibraryScript.setAttribute('id', 'intl-js-library');\n      intlLibraryScript.addEventListener('load', function intlLibraryLoaded (e) {\n        intlLibraryLoadingStatus = 'loaded';\n        e.target.removeEventListener('load', intlLibraryLoaded);\n        return false;\n      });\n      var s = document.querySelector('script') || document.body;\n      s.parentNode.insertBefore(intlLibraryScript, s);\n    }\n  }\n\n  /**\n   * Set up polyfill locale of Intl if required\n   *\n   * @param {String} locale Target locale to polyfill\n   * @param {Function} callback Callback function to handle locale load\n   * @return {Boolean} true if supported; false if callback will be called\n   */\n  function _setupIntlPolyfillLocale (locale, callback) {\n    if (!window.IntlPolyfill) {\n      switch (intlLibraryLoadingStatus) {\n      case 'loading':\n        if (intlLibraryScript) {\n          var libraryLoadedBindThis = function (e) {\n            _setupIntlPolyfillLocale.call(this, locale, callback);\n            e.target.removeEventListener('load', libraryLoadedBindThis);\n          }.bind(this);\n          intlLibraryScript.addEventListener('load', libraryLoadedBindThis);\n          return false;\n        }\n        else {\n          console.error('Intl.js is not being loaded');\n        }\n        break;\n      // impossible cases\n      case 'initializing':\n      case 'loaded':\n      case 'native':\n      default:\n        /* istanbul ignore next: these cases are impossible */\n        break;\n      }\n    }\n    else {\n      if (intlLibraryLoadingStatus !== 'native') {\n        var supported = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup' });\n        var script;\n        var intlScript;\n        if (supported.length === 0) {\n          // load the locale\n          var fallbackLanguages = _enumerateFallbackLanguages(locale);\n          locale = fallbackLanguages.shift();\n          script = document.querySelector('script#intl-js-locale-' + locale);\n          if (!script) {\n            script = document.createElement('script');\n            script.setAttribute('id', 'intl-js-locale-' + locale);\n            script.setAttribute('src', this.resolveUrl('../intl/locale-data/jsonp/' + locale + '.js'));\n            var intlLocaleLoadedBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('load', intlLocaleLoadedBindThis);\n                callback.call(this, locale);\n              }\n              return false;\n            }.bind(this);\n            var intlLocaleLoadErrorBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('error', intlLocaleLoadErrorBindThis);\n                script.setAttribute('loaderror','');\n                locale = fallbackLanguages.shift();\n                if (!locale) {\n                  locale = this.DEFAULT_LANG;\n                }\n                var fallbackSupport = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup'});\n                if (fallbackSupport.length > 0) {\n                  callback.call(this, locale);\n                }\n                else {\n                  _setupIntlPolyfillLocale.call(this, locale, callback);\n                }\n                return false;\n              }\n            }.bind(this);\n            script.addEventListener('load', intlLocaleLoadedBindThis);\n            script.addEventListener('error', intlLocaleLoadErrorBindThis);\n            intlScript = document.querySelector('script#intl-js-library') || document.body;\n            intlScript.parentNode.insertBefore(script, intlScript.nextSibling);\n          }\n          else if (!script.hasAttribute('loaderror')) {\n            // already loading\n            var anotherIntlLocaleLoadedBindThis = function (e) {\n              if (e.target === script) {\n                callback.call(this, locale);\n                e.target.removeEventListener('load', anotherIntlLocaleLoadedBindThis);\n                return false;\n              }\n            }.bind(this);\n            var anotherIntlLocaleLoadErrorBindThis = function (e) {\n              if (e.target === script) {\n                e.target.removeEventListener('error', anotherIntlLocaleLoadErrorBindThis);\n                locale = fallbackLanguages.shift();\n                if (!locale) {\n                  locale = this.DEFAULT_LANG;\n                }\n                var fallbackSupport = Intl.NumberFormat.supportedLocalesOf(locale, { localeMatcher: 'lookup'});\n                if (fallbackSupport.length > 0) {\n                  callback.call(this, locale);\n                }\n                else {\n                  _setupIntlPolyfillLocale.call(this, locale, callback);\n                }\n                return false;\n              }\n            }.bind(this);\n            script.addEventListener('load', anotherIntlLocaleLoadedBindThis);\n            script.addEventListener('error', anotherIntlLocaleLoadErrorBindThis);\n          }\n          else {\n            var enSupport = Intl.NumberFormat.supportedLocalesOf(this.DEFAULT_LANG, { localeMatcher: 'lookup'});\n            if (enSupport.length > 0) {\n              callback.call(this, this.DEFAULT_LANG);\n            }\n            else {\n              _setupIntlPolyfillLocale.call(this, this.DEFAULT_LANG, callback);\n            }\n          }\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Enumerate fallback locales for the target locale.\n   * \n   * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n   *\n   * ### Examples:\n   *\n   *| Target Locale | Fallback 1 | Fallback 2 | Fallback 3 |\n   *|:--------------|:-----------|:-----------|:-----------|\n   *| ru            | N/A        | N/A        | N/A        |\n   *| en-GB         | en         | N/A        | N/A        |\n   *| en-Latn-GB    | en-GB      | en-Latn    | en         |\n   *| fr-CA         | fr         | N/A        | N/A        |\n   *| zh-Hans-CN    | zh-Hans    | zh         | N/A        |\n   *| zh-CN         | zh-Hans    | zh         | N/A        |\n   *| zh-TW         | zh-Hant    | zh         | N/A        |\n   *\n   * #### Note:\n   *\n   * For zh language, the script Hans or Hant is supplied as its default script when a country/region code is supplied.\n   *\n   * @param {string} lang Target locale.\n   * @return {Array} List of fallback locales including the target locale at the index 0.\n   */\n  function _enumerateFallbackLanguages (lang) {\n    var result = [];\n    var parts;\n    var match;\n    var isExtLangCode = 0;\n    var extLangCode;\n    var isScriptCode = 0;\n    var scriptCode;\n    var isCountryCode = 0;\n    var countryCode;\n    var n;\n    if (!lang || lang.length === 0) {\n      result.push('');\n    }\n    else {\n      parts = lang.split(/[-_]/);\n      // normalize ISO-639-1 language codes\n      if (parts.length > 0 &&\n          parts[0].match(/^[A-Za-z]{2,3}$/)) {\n        // language codes have to be lowercased\n        // e.g. JA -> ja, FR -> fr\n        // TODO: normalize 3-letter codes to 2-letter codes\n        parts[0] = parts[0].toLowerCase();\n      }\n      // normalize ISO-639-3 extension language codes\n      if (parts.length >= 2 &&\n          parts[1].match(/^[A-Za-z]{3}$/) &&\n          !parts[1].match(/^[Cc][Hh][SsTt]$/)) { // exclude CHS,CHT\n        // extension language codes have to be lowercased\n        // e.g. YUE -> yue\n        isExtLangCode = 1;\n        extLangCode = parts[1] = parts[1].toLowerCase();\n      }\n      // normalize ISO-15924 script codes\n      if (parts.length >= isExtLangCode + 2 &&\n          (match = parts[isExtLangCode + 1].match(/^([A-Za-z])([A-Za-z]{3})$/))) {\n        // script codes have to be capitalized only at the first character\n        // e.g. HANs -> Hans, lAtN -> Latn\n        isScriptCode = 1;\n        scriptCode = parts[isExtLangCode + 1] = match[1].toUpperCase() + match[2].toLowerCase();\n      }\n      // normalize ISO-3166-1 country/region codes\n      if (parts.length >= isExtLangCode + isScriptCode + 2 &&\n          (match = parts[isExtLangCode + isScriptCode + 1].match(/^[A-Za-z0-9]{2,3}$/))) {\n        // country/region codes have to be capitalized\n        // e.g. cn -> CN, jP -> JP\n        isCountryCode = 1;\n        countryCode = parts[isExtLangCode + isScriptCode + 1] = match[0].toUpperCase();\n      }\n      // extensions have to be in lowercases\n      // e.g. U-cA-Buddhist -> u-ca-buddhist, X-LiNux -> x-linux\n      if (parts.length >= isExtLangCode + isScriptCode + isCountryCode + 2) {\n        for (n = isExtLangCode + isScriptCode + isCountryCode + 1; n < parts.length; n++) {\n          parts[n] = parts[n].toLowerCase();\n        }\n      }\n      // enumerate fallback languages\n      while (parts.length > 0) {\n        // normalize delimiters as -\n        // e.g. ja_JP -> ja-JP\n        result.push(parts.join('-'));\n        if (isScriptCode &&\n            isCountryCode &&\n            parts.length == isExtLangCode + isScriptCode + 2) {\n          // script code can be omitted to default\n          // e.g. en-Latn-GB -> en-GB, zh-Hans-CN -> zh-CN\n          parts.splice(isExtLangCode + isScriptCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode + isScriptCode, 0, scriptCode);\n        }\n        if (isExtLangCode &&\n            isCountryCode &&\n            parts.length == isExtLangCode + isScriptCode + 2) {\n          // ext lang code can be omitted to default\n          // e.g. zh-yue-Hans-CN -> zh-Hans-CN\n          parts.splice(isExtLangCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode, 0, extLangCode);\n        }\n        if (isExtLangCode &&\n            isScriptCode &&\n            parts.length == isExtLangCode + isScriptCode + 1) {\n          // ext lang code can be omitted to default\n          // e.g. zh-yue-Hans -> zh-Hans\n          parts.splice(isExtLangCode, 1);\n          result.push(parts.join('-'));\n          parts.splice(isExtLangCode, 0, extLangCode);\n        }\n        if (!isScriptCode &&\n            !isExtLangCode &&\n            isCountryCode &&\n            parts.length == 2) {\n          // default script code can be added in certain cases with country codes\n          // e.g. zh-CN -> zh-Hans-CN, zh-TW -> zh-Hant-TW\n          switch (result[result.length - 1]) {\n          case 'zh-CN':\n          case 'zh-CHS':\n            result.push('zh-Hans');\n            break;\n          case 'zh-TW':\n          case 'zh-SG':\n          case 'zh-HK':\n          case 'zh-CHT':\n            result.push('zh-Hant');\n            break;\n          default:\n            break;\n          }\n        }\n        parts.pop();\n      }\n    }\n    return result;\n  }\n\n  Polymer({\n    is: 'i18n-number',\n\n    /**\n     * Fired whenever the formatted text is rendered.\n     *\n     * @event rendered\n     */\n    \n    properties: {\n      /**\n       * The locale for the formatted number.\n       * The typical value is bound to `{{effectiveLang}}` when the containing element has\n       * `BehaviorsStore.I18nBehavior`.\n       */\n      _lang: {\n        type: String,\n        value: 'en',\n        observer: '_langChanged',\n        reflectToAttribute: false\n      },\n\n      /**\n       * Options object for Intl.NumberFormat \n       * (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat)\n       */\n      options: {\n        type: Object,\n        observer: '_optionsChanged',\n        notify: true\n      },\n\n      /**\n       * Raw string synchronized with textContent\n       */\n      raw: {\n        type: String,\n        observer: '_rawChanged'\n      },\n\n      /**\n       * Offset for number\n       *\n       * Note: number = rawNumber - offset \n       */\n      offset: {\n        type: Number,\n        value: 0,\n        observer: '_offsetChanged'\n      },\n\n      /**\n       * Raw number parsed from raw\n       */\n      rawNumber: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * Number calculated from rawNumber and offset\n       */\n      number: {\n        type: Number,\n        notify: true\n      },\n\n      /**\n       * Formatted string rendered for UI\n       *\n       * Note:\n       *   - While Intl.js Polyfill locale module is being loaded, the value is set as `undefined` until load completion.\n       */\n      formatted: {\n        type: String,\n        notify: true\n      }\n    },\n\n    observers: [\n      '_onOptionsPropertyChanged(options.*)'\n    ],\n\n    /**\n     * Default locale constant 'en'\n     */\n    DEFAULT_LANG: 'en',\n\n    /**\n     * Start loading Intl polyfill only once\n     */\n    registered: function () {\n      if (!_setupIntlPolyfillCalled) {\n        _setupIntlPolyfillCalled = true;\n        _setupIntlPolyfill.call(this);\n      }\n    },\n\n    ready: function () {\n      this._setupObservers();\n      this.raw = this.textNode.data;\n      if (!this.lang) {\n        // Polyfill non-functional default value for lang property in Safari 7\n        this.lang = this.DEFAULT_LANG;\n      }\n    },\n\n    attached: function () {\n      this.raw = this.textNode.data;\n    },\n\n    /**\n     * Set up observers of textContent mutations\n     */\n    _setupObservers: function () {\n      this.textNode = Polymer.dom(this).childNodes[0];\n      if (!this.textNode) {\n        Polymer.dom(this).appendChild(document.createTextNode(''));\n        this.textNode = Polymer.dom(this).childNodes[0];\n      }\n      this.observer = new MutationObserver(this._textMutated.bind(this));\n      this.observer.observe(this.textNode, { characterData: true });\n      this.observer.observe(this, { attributes: true, attributeFilter: [ 'lang' ] });\n      this.nodeObserver = Polymer.dom(this).observeNodes(function (info) {\n        if (info.addedNodes[0] && \n            info.addedNodes[0].nodeType === info.addedNodes[0].TEXT_NODE) {\n          this.textNode = info.addedNodes[0];\n          this.raw = this.textNode.data;\n          //console.log('i18n-number: text node added with ' + this.raw);\n          this.observer.observe(this.textNode, { characterData: true });\n        }\n      }.bind(this));\n    },\n\n    /**\n     * MutationObserver callback of the child text node to re-render on text mutations.\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _textMutated: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'characterData':\n          //console.log('i18n-number: _textMutated: raw = ' + mutation.target.data);\n          if (this.raw !== mutation.target.data) {\n            this.raw = mutation.target.data;\n          }\n          break;\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            this._lang = this.lang;\n          }\n          break;\n        default:\n          /* istanbul ignore next: mutation.type is characterData or attributes */\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Observer of `raw` property to re-render the formatted number.\n     *\n     * @param {string} raw New raw number string.\n     */\n    _rawChanged: function (raw) {\n      if (this.textNode) {\n        if (raw !== this.textNode.data) {\n          this.textNode.data = raw;\n        }\n        //console.log('i18n-number: _rawChanged: raw = ' + raw);\n        this._render(this.lang, this.options, raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `lang` property to re-render the formatted number.\n     *\n     * @param {string} lang New locale.\n     */\n    _langChanged: function (lang) {\n      if (!lang) {\n        this.lang = this.DEFAULT_LANG;\n        lang = this.lang;\n      }\n      if (this.textNode) {\n        //console.log('i18n-number: _langChanged: lang = ' + lang);\n        this._render(lang, this.options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `options` property to re-render the formatted number.\n     *\n     * @param {Object} options New options for Intl.NumberFormat.\n     */\n    _optionsChanged: function (options) {\n      if (this.textNode) {\n        //console.log('i18n-number: _optionsChanged: options = ' + JSON.stringify(options));\n        this._render(this.lang, options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `options` sub-properties to re-render the formatted number.\n     */\n    _onOptionsPropertyChanged: function (/* changeRecord */) {\n      if (this.textNode) {\n        //console.log('_onOptionsPropertyChanged: path = ' + changeRecord.path + ' value = ' + JSON.stringify(changeRecord.value));\n        this._render(this.lang, this.options, this.raw, this.offset);\n      }\n    },\n\n    /**\n     * Observer of `offset` property to re-render the formatted number.\n     *\n     * @param {number} offset New offset.\n     */\n    _offsetChanged: function (offset) {\n      if (this.textNode) {\n        //console.log('i18n-number: _offsetChanged: offset = ' + offset);\n        this._render(this.lang, this.options, this.raw, offset);\n      }\n    },\n\n    /**\n     * Formats the number\n     *\n     * @param {string} lang Locale for formatting.\n     * @param {Object} options Options for Intl.NumberFormat.\n     * @param {number} number Number to format.\n     * @return {string} Formatted number string.\n     */\n    _formatNumber: function (lang, options, number) {\n      if (!lang) {\n        lang = this.DEFAULT_LANG;\n      }\n      switch (intlLibraryLoadingStatus) {\n      case 'loaded':\n      case 'loading':\n      default:\n        try {\n          if (_setupIntlPolyfillLocale.call(this, lang, function (locale) {\n            this.effectiveLang = locale;\n            this._render.call(this, locale, this.options, this.raw, this.offset);\n          }.bind(this))) {\n            return new Intl.NumberFormat(lang, options).format(number);\n          }\n          else {\n            // waiting for callback\n            return undefined;\n          }\n        }\n        catch (e) {\n          return number.toString();\n        }\n        /* istanbul ignore next: unreachable code due to returns in the same case */\n        break;\n      case 'native':\n        // native\n        try {\n          return new Intl.NumberFormat(lang, options).format(number);\n        }\n        catch (e) {\n          return number.toString();\n        }\n        /* istanbul ignore next: unreachable code due to returns in the same case */\n        break;\n      }\n    },\n\n    /**\n     * Renders the formatted number\n     *\n     * @param {string} lang Locale for formatting.\n     * @param {Object} options Options for Intl.NumberFormat.\n     * @param {string} raw Raw number string.\n     * @param {number} offset Offset for number.\n     */\n    _render: function (lang, options, raw, offset) {\n      // TODO: rendering may be done redundantly on property initializations\n      raw = raw.trim();\n      if (!raw && !this.formatted) {\n        //console.log('i18n-number: skipping _render as raw is null');\n        return;\n      }\n      if (raw) {\n        this.rawNumber = Number(raw);\n        this.number = this.rawNumber - offset;\n        this.formatted = this._formatNumber(lang, options, this.number);\n      }\n      else {\n        this.rawNumber = undefined;\n        this.number = undefined;\n        this.formatted = '';\n      }\n      this.$.number.textContent = this.formatted ? this.formatted : '';\n      //console.log('i18n-number: _render ' + this.formatted);\n      if (typeof this.formatted !== 'undefined') {\n        this.fire('rendered');\n      }\n    },\n\n    /**\n     * Renders the formatted number with the current parameters\n     *\n     * Note: (As of Polymer 1.2.3)\n     *   Explicit render() call is needed whenever the observer \n     *   `_onOptionsPropertyChanged(options.*)` is NOT invoked \n     *   after a property of `options` is changed.  An explicit call \n     *   `this.notifyPath('options', this.options, true)` can also \n     *   trigger re-rendering.\n     *\n     *   If the changed property of `options` is bound in an annotation\n     *   like `{{options.currency}}`, the observer `_onOptionsPropertyChanged(options.*)`\n     *   is automatically called whenever the property value is changed\n     *   and thus no explicit call of `render()` or `notifyPath()` is\n     *   required.\n     */\n    render: function () {\n      this._render(this.lang, this.options, this.raw, this.offset);\n    }\n  });\n  })();\nvar _cp = [\nfunction(n, ord) {\n  if (ord) return 'other';\n  return 'other';\n},\nfunction(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one' : 'other';\n},\nfunction(n, ord) {\n  if (ord) return 'other';\n  return ((n == 0\n          || n == 1)) ? 'one' : 'other';\n},\nfunction(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n}\n];\n\n(function (root, plurals) {\n  if (typeof define === 'function' && define.amd) {\n    define(plurals);\n  } else if (typeof exports === 'object') {\n    module.exports = plurals;\n  } else {\n    root.plurals = plurals;\n  }\n}(this, {\naf: _cp[1],\n\nak: _cp[2],\n\nam: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nar: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((n100 >= 3 && n100 <= 10)) ? 'few'\n      : ((n100 >= 11 && n100 <= 99)) ? 'many'\n      : 'other';\n},\n\nas: function(n, ord) {\n  if (ord) return ((n == 1 || n == 5 || n == 7 || n == 8 || n == 9\n          || n == 10)) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nasa: _cp[1],\n\nast: _cp[3],\n\naz: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], i10 = i.slice(-1),\n      i100 = i.slice(-2), i1000 = i.slice(-3);\n  if (ord) return ((i10 == 1 || i10 == 2 || i10 == 5 || i10 == 7 || i10 == 8)\n          || (i100 == 20 || i100 == 50 || i100 == 70\n          || i100 == 80)) ? 'one'\n      : ((i10 == 3 || i10 == 4) || (i1000 == 100 || i1000 == 200\n          || i1000 == 300 || i1000 == 400 || i1000 == 500 || i1000 == 600 || i1000 == 700\n          || i1000 == 800\n          || i1000 == 900)) ? 'few'\n      : (i == 0 || i10 == 6 || (i100 == 40 || i100 == 60\n          || i100 == 90)) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nbe: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return ((n10 == 2\n          || n10 == 3) && n100 != 12 && n100 != 13) ? 'few' : 'other';\n  return (n10 == 1 && n100 != 11) ? 'one'\n      : ((n10 >= 2 && n10 <= 4) && (n100 < 12\n          || n100 > 14)) ? 'few'\n      : (t0 && n10 == 0 || (n10 >= 5 && n10 <= 9)\n          || (n100 >= 11 && n100 <= 14)) ? 'many'\n      : 'other';\n},\n\nbem: _cp[1],\n\nbez: _cp[1],\n\nbg: _cp[1],\n\nbh: _cp[2],\n\nbm: _cp[0],\n\nbn: function(n, ord) {\n  if (ord) return ((n == 1 || n == 5 || n == 7 || n == 8 || n == 9\n          || n == 10)) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nbo: _cp[0],\n\nbr: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2),\n      n1000000 = t0 && s[0].slice(-6);\n  if (ord) return 'other';\n  return (n10 == 1 && n100 != 11 && n100 != 71 && n100 != 91) ? 'one'\n      : (n10 == 2 && n100 != 12 && n100 != 72 && n100 != 92) ? 'two'\n      : (((n10 == 3 || n10 == 4) || n10 == 9) && (n100 < 10\n          || n100 > 19) && (n100 < 70 || n100 > 79) && (n100 < 90\n          || n100 > 99)) ? 'few'\n      : (n != 0 && t0 && n1000000 == 0) ? 'many'\n      : 'other';\n},\n\nbrx: _cp[1],\n\nbs: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nca: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return ((n == 1\n          || n == 3)) ? 'one'\n      : (n == 2) ? 'two'\n      : (n == 4) ? 'few'\n      : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\nce: _cp[1],\n\ncgg: _cp[1],\n\nchr: _cp[1],\n\nckb: _cp[1],\n\ncs: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : ((i >= 2 && i <= 4) && v0) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\ncy: function(n, ord) {\n  if (ord) return ((n == 0 || n == 7 || n == 8\n          || n == 9)) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((n == 3\n          || n == 4)) ? 'few'\n      : ((n == 5\n          || n == 6)) ? 'many'\n      : 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : (n == 3) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n},\n\nda: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return (n == 1 || !t0 && (i == 0\n          || i == 1)) ? 'one' : 'other';\n},\n\nde: _cp[3],\n\ndsb: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i100 = i.slice(-2), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1\n          || f100 == 1) ? 'one'\n      : (v0 && i100 == 2\n          || f100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4) || (f100 == 3\n          || f100 == 4)) ? 'few'\n      : 'other';\n},\n\ndv: _cp[1],\n\ndz: _cp[0],\n\nee: _cp[1],\n\nel: _cp[1],\n\nen: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return (n10 == 1 && n100 != 11) ? 'one'\n      : (n10 == 2 && n100 != 12) ? 'two'\n      : (n10 == 3 && n100 != 13) ? 'few'\n      : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\neo: _cp[1],\n\nes: _cp[1],\n\net: _cp[3],\n\neu: _cp[1],\n\nfa: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nff: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nfi: _cp[3],\n\nfil: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), f10 = f.slice(-1);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (v0 && (i == 1 || i == 2 || i == 3)\n          || v0 && i10 != 4 && i10 != 6 && i10 != 9\n          || !v0 && f10 != 4 && f10 != 6 && f10 != 9) ? 'one' : 'other';\n},\n\nfo: _cp[1],\n\nfr: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nfur: _cp[1],\n\nfy: _cp[3],\n\nga: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : ((t0 && n >= 3 && n <= 6)) ? 'few'\n      : ((t0 && n >= 7 && n <= 10)) ? 'many'\n      : 'other';\n},\n\ngd: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((n == 1\n          || n == 11)) ? 'one'\n      : ((n == 2\n          || n == 12)) ? 'two'\n      : (((t0 && n >= 3 && n <= 10)\n          || (t0 && n >= 13 && n <= 19))) ? 'few'\n      : 'other';\n},\n\ngl: _cp[3],\n\ngsw: _cp[1],\n\ngu: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nguw: _cp[2],\n\ngv: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1) ? 'one'\n      : (v0 && i10 == 2) ? 'two'\n      : (v0 && (i100 == 0 || i100 == 20 || i100 == 40 || i100 == 60\n          || i100 == 80)) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\nha: _cp[1],\n\nhaw: _cp[1],\n\nhe: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (i == 2 && v0) ? 'two'\n      : (v0 && (n < 0\n          || n > 10) && t0 && n10 == 0) ? 'many'\n      : 'other';\n},\n\nhi: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : (n == 6) ? 'many'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nhr: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nhsb: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i100 = i.slice(-2), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1\n          || f100 == 1) ? 'one'\n      : (v0 && i100 == 2\n          || f100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4) || (f100 == 3\n          || f100 == 4)) ? 'few'\n      : 'other';\n},\n\nhu: function(n, ord) {\n  if (ord) return ((n == 1\n          || n == 5)) ? 'one' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nhy: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nid: _cp[0],\n\nig: _cp[0],\n\nii: _cp[0],\n\n\"in\": _cp[0],\n\nis: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], t0 = Number(s[0]) == n,\n      i10 = i.slice(-1), i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (t0 && i10 == 1 && i100 != 11\n          || !t0) ? 'one' : 'other';\n},\n\nit: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1];\n  if (ord) return ((n == 11 || n == 8 || n == 80\n          || n == 800)) ? 'many' : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\niu: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\niw: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (i == 2 && v0) ? 'two'\n      : (v0 && (n < 0\n          || n > 10) && t0 && n10 == 0) ? 'many'\n      : 'other';\n},\n\nja: _cp[0],\n\njbo: _cp[0],\n\njgo: _cp[1],\n\nji: _cp[3],\n\njmc: _cp[1],\n\njv: _cp[0],\n\njw: _cp[0],\n\nka: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], i100 = i.slice(-2);\n  if (ord) return (i == 1) ? 'one'\n      : (i == 0 || ((i100 >= 2 && i100 <= 20) || i100 == 40 || i100 == 60\n          || i100 == 80)) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nkab: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n < 2) ? 'one' : 'other';\n},\n\nkaj: _cp[1],\n\nkcg: _cp[1],\n\nkde: _cp[0],\n\nkea: _cp[0],\n\nkk: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1);\n  if (ord) return (n10 == 6 || n10 == 9\n          || t0 && n10 == 0 && n != 0) ? 'many' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nkkj: _cp[1],\n\nkl: _cp[1],\n\nkm: _cp[0],\n\nkn: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nko: _cp[0],\n\nks: _cp[1],\n\nksb: _cp[1],\n\nksh: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : (n == 1) ? 'one'\n      : 'other';\n},\n\nku: _cp[1],\n\nkw: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nky: _cp[1],\n\nlag: function(n, ord) {\n  var s = String(n).split('.'), i = s[0];\n  if (ord) return 'other';\n  return (n == 0) ? 'zero'\n      : ((i == 0\n          || i == 1) && n != 0) ? 'one'\n      : 'other';\n},\n\nlb: _cp[1],\n\nlg: _cp[1],\n\nlkt: _cp[0],\n\nln: _cp[2],\n\nlo: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nlt: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n10 == 1 && (n100 < 11\n          || n100 > 19)) ? 'one'\n      : ((n10 >= 2 && n10 <= 9) && (n100 < 11\n          || n100 > 19)) ? 'few'\n      : (f != 0) ? 'many'\n      : 'other';\n},\n\nlv: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', v = f.length,\n      t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1),\n      n100 = t0 && s[0].slice(-2), f100 = f.slice(-2), f10 = f.slice(-1);\n  if (ord) return 'other';\n  return (t0 && n10 == 0 || (n100 >= 11 && n100 <= 19)\n          || v == 2 && (f100 >= 11 && f100 <= 19)) ? 'zero'\n      : (n10 == 1 && n100 != 11 || v == 2 && f10 == 1 && f100 != 11\n          || v != 2 && f10 == 1) ? 'one'\n      : 'other';\n},\n\nmas: _cp[1],\n\nmg: _cp[2],\n\nmgo: _cp[1],\n\nmk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1);\n  if (ord) return (i10 == 1 && i100 != 11) ? 'one'\n      : (i10 == 2 && i100 != 12) ? 'two'\n      : ((i10 == 7\n          || i10 == 8) && i100 != 17 && i100 != 18) ? 'many'\n      : 'other';\n  return (v0 && i10 == 1\n          || f10 == 1) ? 'one' : 'other';\n},\n\nml: _cp[1],\n\nmn: _cp[1],\n\nmo: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one'\n      : (!v0 || n == 0\n          || n != 1 && (n100 >= 1 && n100 <= 19)) ? 'few'\n      : 'other';\n},\n\nmr: function(n, ord) {\n  if (ord) return (n == 1) ? 'one'\n      : ((n == 2\n          || n == 3)) ? 'two'\n      : (n == 4) ? 'few'\n      : 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n},\n\nms: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nmt: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 0\n          || (n100 >= 2 && n100 <= 10)) ? 'few'\n      : ((n100 >= 11 && n100 <= 19)) ? 'many'\n      : 'other';\n},\n\nmy: _cp[0],\n\nnah: _cp[1],\n\nnaq: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nnb: _cp[1],\n\nnd: _cp[1],\n\nne: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return ((t0 && n >= 1 && n <= 4)) ? 'one' : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nnl: _cp[3],\n\nnn: _cp[1],\n\nnnh: _cp[1],\n\nno: _cp[1],\n\nnqo: _cp[0],\n\nnr: _cp[1],\n\nnso: _cp[2],\n\nny: _cp[1],\n\nnyn: _cp[1],\n\nom: _cp[1],\n\nor: _cp[1],\n\nos: _cp[1],\n\npa: _cp[2],\n\npap: _cp[1],\n\npl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i != 1 && (i10 == 0 || i10 == 1)\n          || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 12 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nprg: function(n, ord) {\n  var s = String(n).split('.'), f = s[1] || '', v = f.length,\n      t0 = Number(s[0]) == n, n10 = t0 && s[0].slice(-1),\n      n100 = t0 && s[0].slice(-2), f100 = f.slice(-2), f10 = f.slice(-1);\n  if (ord) return 'other';\n  return (t0 && n10 == 0 || (n100 >= 11 && n100 <= 19)\n          || v == 2 && (f100 >= 11 && f100 <= 19)) ? 'zero'\n      : (n10 == 1 && n100 != 11 || v == 2 && f10 == 1 && f100 != 11\n          || v != 2 && f10 == 1) ? 'one'\n      : 'other';\n},\n\nps: _cp[1],\n\npt: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((t0 && n >= 0 && n <= 2) && n != 2) ? 'one' : 'other';\n},\n\n\"pt-PT\": _cp[3],\n\nrm: _cp[1],\n\nro: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one'\n      : (!v0 || n == 0\n          || n != 1 && (n100 >= 1 && n100 <= 19)) ? 'few'\n      : 'other';\n},\n\nrof: _cp[1],\n\nroot: _cp[0],\n\nru: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i10 == 0 || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 11 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nrwk: _cp[1],\n\nsah: _cp[0],\n\nsaq: _cp[1],\n\nsdh: _cp[1],\n\nse: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nseh: _cp[1],\n\nses: _cp[0],\n\nsg: _cp[0],\n\nsh: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nshi: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one'\n      : ((t0 && n >= 2 && n <= 10)) ? 'few'\n      : 'other';\n},\n\nsi: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '';\n  if (ord) return 'other';\n  return ((n == 0 || n == 1)\n          || i == 0 && f == 1) ? 'one' : 'other';\n},\n\nsk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1];\n  if (ord) return 'other';\n  return (n == 1 && v0) ? 'one'\n      : ((i >= 2 && i <= 4) && v0) ? 'few'\n      : (!v0) ? 'many'\n      : 'other';\n},\n\nsl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], i100 = i.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i100 == 1) ? 'one'\n      : (v0 && i100 == 2) ? 'two'\n      : (v0 && (i100 == 3 || i100 == 4)\n          || !v0) ? 'few'\n      : 'other';\n},\n\nsma: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmi: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmj: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsmn: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsms: function(n, ord) {\n  if (ord) return 'other';\n  return (n == 1) ? 'one'\n      : (n == 2) ? 'two'\n      : 'other';\n},\n\nsn: _cp[1],\n\nso: _cp[1],\n\nsq: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return (n == 1) ? 'one'\n      : (n10 == 4 && n100 != 14) ? 'many'\n      : 'other';\n  return (n == 1) ? 'one' : 'other';\n},\n\nsr: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), i100 = i.slice(-2), f10 = f.slice(-1), f100 = f.slice(-2);\n  if (ord) return 'other';\n  return (v0 && i10 == 1 && i100 != 11\n          || f10 == 1 && f100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12 || i100 > 14)\n          || (f10 >= 2 && f10 <= 4) && (f100 < 12\n          || f100 > 14)) ? 'few'\n      : 'other';\n},\n\nss: _cp[1],\n\nssy: _cp[1],\n\nst: _cp[1],\n\nsv: function(n, ord) {\n  var s = String(n).split('.'), v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2);\n  if (ord) return ((n10 == 1\n          || n10 == 2) && n100 != 11 && n100 != 12) ? 'one' : 'other';\n  return (n == 1 && v0) ? 'one' : 'other';\n},\n\nsw: _cp[3],\n\nsyr: _cp[1],\n\nta: _cp[1],\n\nte: _cp[1],\n\nteo: _cp[1],\n\nth: _cp[0],\n\nti: _cp[2],\n\ntig: _cp[1],\n\ntk: _cp[1],\n\ntl: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], f = s[1] || '', v0 = !s[1],\n      i10 = i.slice(-1), f10 = f.slice(-1);\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return (v0 && (i == 1 || i == 2 || i == 3)\n          || v0 && i10 != 4 && i10 != 6 && i10 != 9\n          || !v0 && f10 != 4 && f10 != 6 && f10 != 9) ? 'one' : 'other';\n},\n\ntn: _cp[1],\n\nto: _cp[0],\n\ntr: _cp[1],\n\nts: _cp[1],\n\ntzm: function(n, ord) {\n  var s = String(n).split('.'), t0 = Number(s[0]) == n;\n  if (ord) return 'other';\n  return ((n == 0 || n == 1)\n          || (t0 && n >= 11 && n <= 99)) ? 'one' : 'other';\n},\n\nug: _cp[1],\n\nuk: function(n, ord) {\n  var s = String(n).split('.'), i = s[0], v0 = !s[1], t0 = Number(s[0]) == n,\n      n10 = t0 && s[0].slice(-1), n100 = t0 && s[0].slice(-2), i10 = i.slice(-1),\n      i100 = i.slice(-2);\n  if (ord) return (n10 == 3 && n100 != 13) ? 'few' : 'other';\n  return (v0 && i10 == 1 && i100 != 11) ? 'one'\n      : (v0 && (i10 >= 2 && i10 <= 4) && (i100 < 12\n          || i100 > 14)) ? 'few'\n      : (v0 && i10 == 0 || v0 && (i10 >= 5 && i10 <= 9)\n          || v0 && (i100 >= 11 && i100 <= 14)) ? 'many'\n      : 'other';\n},\n\nur: _cp[3],\n\nuz: _cp[1],\n\nve: _cp[1],\n\nvi: function(n, ord) {\n  if (ord) return (n == 1) ? 'one' : 'other';\n  return 'other';\n},\n\nvo: _cp[1],\n\nvun: _cp[1],\n\nwa: _cp[2],\n\nwae: _cp[1],\n\nwo: _cp[0],\n\nxh: _cp[1],\n\nxog: _cp[1],\n\nyi: _cp[3],\n\nyo: _cp[0],\n\nzh: _cp[0],\n\nzu: function(n, ord) {\n  if (ord) return 'other';\n  return (n >= 0 && n <= 1) ? 'one' : 'other';\n}\n}));\nPolymer({\n  is: 'i18n-format',\n\n  /**\n   * Fired whenever the formatted text is rendered.\n   *\n   * @event rendered\n   */\n\n  properties: {\n    /**\n     * The locale for the template text.\n     * The typical value is bound to `{{effectiveLang}}` when the containing element has\n     * `BehaviorsStore.I18nBehavior`.\n     */\n    _lang: {\n      type: String,\n      value: 'en',\n      reflectToAttribute: false,\n      observer: '_langChanged'\n    },\n\n    /**\n     * The parameter attribute name to identify parameters.\n     * No need to change in a normal usage.\n     */\n    paramAttribute: {\n      type: String,\n      value: (function () { return Polymer.Element ? 'slot' : 'param'; })(),\n      observer: '_paramAttributeChanged'\n    },\n\n    /**\n     * The parameter format in the template text.\n     * The `'n'` in the format means n-th parameter.\n     * No need to change in a normal usage.\n     */\n    paramFormat: {\n      type: String,\n      value: '{n}',\n      observer: '_paramFormatChanged'\n    },\n\n    /**\n     * When the boolean attribute `observe-params` is specified, \n     * the template is re-rendered on every parameter mutation.\n     * If not specified, the template is re-rendered only on `lang` changes and template text changes.\n     *\n     * Note: If true, re-rendering may be performed muiltiple times redundantly on a locale change.\n     */\n    observeParams: {\n      type: Boolean,\n      value: true // TODO: optimize re-rendering\n    }\n  },\n\n  /**\n   * Default locale constant 'en'\n   */\n  DEFAULT_LANG: 'en',\n\n  ready: function () {\n    this._setupParams();\n    if (this.root === this) {\n      this.attachShadow({ mode: 'open' });\n      this.root = this.shadowRoot;\n      this.render();\n    }\n    if (!this.lang) {\n      // Polyfill non-functional default value for lang property in Safari 7\n      this.lang = this.DEFAULT_LANG;\n    }\n  },\n\n  attached: function () {\n    this.render();\n  },\n\n  /**\n   * Traverse the local DOM and set up parameters and observers.\n   */\n  _setupParams: function () {\n    var n;\n    this.elements = Array.prototype.filter.call(\n      Polymer.dom(this).childNodes,\n      function (node) {\n        return node.nodeType === node.ELEMENT_NODE;\n      }\n    );\n    var needParamObservation = this.observeParams &&\n                               this.elements.length > 0 && \n                               this.elements[0].tagName.toLowerCase() === 'json-data';\n    this.observer = new MutationObserver(this._templateMutated.bind(this));\n    this.observer.observe(this, { attributes: true, attributeFilter: [ 'lang' ] });\n    for (n = 0; n < this.elements.length; n++) {\n      if (n === 0) {\n        this.templateElement = this.elements[n];\n        this.templateTextNode = Polymer.dom(this.templateElement).childNodes[0];\n        this.observer.observe(this.templateTextNode, { characterData: true });\n      }\n      else {\n        if (!this.elements[n].hasAttribute(this.paramAttribute)) {\n          this.elements[n].setAttribute(this.paramAttribute, '' + n);\n        }\n        if (needParamObservation) {\n          // TODO: childNodes[0] may not be a text node\n          this.observer.observe(Polymer.dom(this.elements[n]).childNodes[0], { characterData: true });\n          if (this.elements[n].tagName.toLowerCase() === 'i18n-number') {\n            this.listen(this.elements[n], 'rendered', 'render');\n          }\n        }\n      }\n    }\n    //console.log('i18n-format: _setupParams: elements = ' + this.elements);\n  },\n\n  /**\n   * MutationObserver callback of child text nodes to re-render on template text or parameter mutations.\n   *\n   * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n   */\n  _templateMutated: function (mutations) {\n    mutations.forEach(function(mutation) {\n      switch (mutation.type) {\n      case 'characterData':\n        //console.log('i18n-format: ' + this.id + '._templateMutated(): characterData: tag = ' + \n        //            Polymer.dom(mutation.target).parentNode.tagName.toLowerCase() + \n        //            ' data = ' + mutation.target.data);\n        if ((Polymer.Element ? mutation.target : Polymer.dom(mutation.target)).parentNode.tagName.toLowerCase() !== 'i18n-number' ||\n            typeof (Polymer.Element ? mutation.target : Polymer.dom(mutation.target)).parentNode.formatted !== 'undefined') {\n          this.render();\n        }\n        break;\n      case 'attributes':\n        if (mutation.attributeName === 'lang') {\n          this._lang = this.lang;\n        }\n        break;\n      default:\n        /* istanbul ignore next: mutation.type is always characterData or attributes */\n        break;\n      }\n    }, this);\n  },\n\n  /**\n   * Observer of `lang` property to re-render the template text.\n   *\n   * @param {string} lang New locale.\n   */\n  _langChanged: function (lang /*, oldLang */) {\n    //console.log('i18n-format: ' + this.id + '._langChanged() lang = ' + lang + ' oldLang = ' + oldLang);\n    if (this.elements &&\n        lang !== undefined &&\n        lang !== null &&\n        !lang.match(/^{{.*}}$/) &&\n        !lang.match(/^\\[\\[.*\\]\\]$/)) {\n      this.render();\n    }\n    //else {\n    //  console.log('i18n-format: skipping render()');\n    //}\n  },\n\n  /**\n   * Observer of `paramFormat` property to re-render the template text.\n   *\n   * @param {string} paramFormat New paramFormat.\n   * @param {string} oldParamFormat Old paramFormat.\n   */\n  _paramFormatChanged: function (paramFormat, oldParamFormat) {\n    //console.log('i18n-format: ' + this.id + '._paramFormatChanged() new = ' + paramFormat + ' old = ' + oldParamFormat);\n    if (this.elements &&\n        oldParamFormat !== undefined &&\n        paramFormat &&\n        this.lang !== undefined &&\n        this.lang !== null &&\n        !this.lang.match(/^{{.*}}$/) &&\n        !this.lang.match(/^\\[\\[.*\\]\\]$/)) {\n      this.lastTemplateText = undefined;\n      this.render();\n    }\n  },\n\n  /**\n   * Observer of `paramAttribute` property to reset parameter attributes.\n   *\n   * @param {string} paramAttribute New paramAttribute.\n   * @param {string} oldParamAttribute Old paramAttribute.\n   */\n  _paramAttributeChanged: function (paramAttribute, oldParamAttribute) {\n    //console.log('i18n-format: ' + this.id + '._paramAttributeChanged() new = ' + paramAttribute + ' old = ' + oldParamAttribute);\n    var n;\n    if (this.elements &&\n        oldParamAttribute !== undefined &&\n        paramAttribute &&\n        this.lang !== undefined &&\n        this.lang !== null &&\n        !this.lang.match(/^{{.*}}$/) &&\n        !this.lang.match(/^\\[\\[.*\\]\\]$/)) {\n      for (n = 1; n < this.elements.length; n++) {\n        this.elements[n].removeAttribute(oldParamAttribute);\n        if (!this.elements[n].hasAttribute(paramAttribute)) {\n          this.elements[n].setAttribute(paramAttribute, '' + n);\n        }\n      }\n      this.lastTemplateText = undefined;\n      this.render();\n    }\n  },\n\n  /**\n   * Detect the CLDR plural category of a number \n   * with [`make-plural` library](https://github.com/eemeli/make-plural.js).\n   *\n   * @param {number} n The number to get the plural category for.\n   * @return {string} Plural category of the number. \n   */\n  _getPluralCategory: function (n) {\n    var category = 'other';\n    var lang = this.lang || this.DEFAULT_LANG;\n    lang = lang.split(/[-_]/)[0];\n    if (window.plurals[lang]) {\n      category = window.plurals[lang](n);\n    }\n    else {\n      category = window.plurals.en(n);\n    }\n    //console.log('i18n-format: _getPluralCategory(' + n + ') = ' + category);\n    return category;\n  },\n\n  /**\n   * Select a template text by parameters.\n   *\n   * @return {string} Selected template text. \n   */\n  _selectTemplateText: function () {\n    var templateText = '';\n    if (!this.templateElement) {\n      return templateText;\n    }\n    else if (this.templateElement.tagName.toLowerCase() === 'json-data') {\n      var templateObject;\n      try {\n        templateObject = JSON.parse(this.templateTextNode.data);\n      }\n      catch (ex) {\n        if (this.templateTextNode.data) {\n          console.warn('i18n-format: parse error in json-data');\n        }\n        return templateText;\n      }\n      var n;\n      for (n = 1;\n           typeof templateObject === 'object' && n < this.elements.length;\n           n++) {\n        var param = this.elements[n];\n        if (param.tagName.toLowerCase() === 'i18n-number') {\n          // plural selector\n          var category = this._getPluralCategory(param.number);\n          if (typeof param.number === 'undefined' ||\n              typeof param.formatted === 'undefined') {\n            // i18n-number is not ready\n            //console.log('i18n-format: i18n-number is not ready');\n            templateObject = undefined;\n          }\n          else if (templateObject[param.rawNumber]) {\n            templateObject = templateObject[param.rawNumber];\n          }\n          else if (templateObject[category]) {\n            // plural category matched\n            templateObject = templateObject[category];\n          }\n          else if (templateObject.other) {\n            // other\n            templateObject = templateObject.other;\n          }\n          else {\n            // default\n            templateObject = '';\n            console.warn('i18n-format: cannot find a template');\n          }\n        }\n        else {\n          // string selector\n          if (templateObject[param.textContent]) {\n            // template found\n            templateObject = templateObject[param.textContent];\n          }\n          else if (templateObject.other) {\n            // other\n            templateObject = templateObject.other;\n          }\n          else {\n            // default\n            templateObject = '';\n            console.warn('i18n-format: cannot find a template');\n          }\n        }\n      }\n      if (typeof templateObject === 'string') {\n        templateText = templateObject;\n      }\n      else if (typeof templateObject === 'undefined') {\n        templateText = undefined;\n      }\n      else {\n        templateText = '';\n        console.warn('i18n-format: cannot find a template');\n      }\n    }\n    else {\n      templateText = this.templateTextNode.data;\n    }\n    return templateText;\n  },\n\n  /**\n   * Render the template text.\n   */\n  render: function () {\n    var templateText = this._selectTemplateText();\n    var tmpNode = document.createElement('span');\n    var paramPlaceholder;\n    var childNodes = [];\n    var i;\n    var shadowDomV1 = !!Polymer.Element;\n    var shadyDomV1 = !!window.ShadyDOM;\n\n    if (templateText === this.lastTemplateText) {\n      //console.log('i18n-format: skipping rendering as the templateText has not changed');\n      return;\n    }\n    else if (typeof templateText === 'undefined') {\n      return;\n    }\n    else {\n      this.lastTemplateText = templateText;\n      //console.log('i18n-format: ' + this.id + '.render() templateText = ' + templateText);\n    }\n\n    i = 1;\n    while (i < this.elements.length) {\n      paramPlaceholder = this.paramFormat.replace('n', i);\n      templateText = templateText.replace(paramPlaceholder, \n                      shadowDomV1 ? '<slot name=\"' + i + '\"></slot>' :\n                      '<content select=\"[' + this.paramAttribute + '=\\'' + i + '\\']\"></content>');\n      i++;\n    }\n    \n    tmpNode.innerHTML = templateText;\n\n    if (Polymer.Element) {\n      if (this.root === this) {\n        this.attachShadow({ mode: 'open' });\n        this.root = this.shadowRoot;\n      }\n      this.root.innerHTML = ''; // Polymer 2.x\n    }\n    else {\n      Polymer.dom(this.root).innerHTML = '';\n    }\n\n    // References of childNodes have to be copied for Shady DOM compatibility\n    for (i = 0; i < tmpNode.childNodes.length; i++) {\n      childNodes[i] = tmpNode.childNodes[i];\n    }\n\n    for (i = 0; i < childNodes.length; i++) {\n      // each node has to be appended via Polymer.dom()\n      Polymer.dom(this.root).appendChild(childNodes[i]);\n    }\n\n    if (shadyDomV1) {\n      ShadyDOM.flush();\n    }\n    this.fire('rendered');\n  }\n});\nPolymer({\n    is: 'iron-localstorage',\n\n    properties: {\n      /**\n       * localStorage item key\n       */\n      name: {\n        type: String,\n        value: ''\n      },\n      /**\n       * The data associated with this storage.\n       * If set to null item will be deleted.\n       * @type {*}\n       */\n      value: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * If true: do not convert value to JSON on save/load\n       */\n      useRaw: {\n        type: Boolean,\n        value: false\n      },\n\n      /**\n       * Value will not be saved automatically if true. You'll have to do it manually with `save()`\n       */\n      autoSaveDisabled: {\n        type: Boolean,\n        value: false\n      },\n      /**\n       * Last error encountered while saving/loading items\n       */\n      errorMessage: {\n        type: String,\n        notify: true\n      },\n\n      /** True if value has been loaded */\n      _loaded: {\n        type: Boolean,\n        value: false\n      }\n    },\n\n    observers: [\n      '_debounceReload(name,useRaw)',\n      '_trySaveValue(autoSaveDisabled)',\n      '_trySaveValue(value.*)'\n    ],\n\n    ready: function() {\n      this._boundHandleStorage = this._handleStorage.bind(this);\n    },\n\n    attached: function() {\n      window.addEventListener('storage', this._boundHandleStorage);\n    },\n\n    detached: function() {\n      window.removeEventListener('storage', this._boundHandleStorage);\n    },\n\n    _handleStorage: function(ev) {\n      if (ev.key == this.name) {\n        this._load(true);\n      }\n    },\n\n    _trySaveValue: function() {\n      if (this._doNotSave) {\n        return;\n      }\n      if (this._loaded && !this.autoSaveDisabled) {\n        this.debounce('save', this.save);\n      }\n    },\n\n    _debounceReload: function() {\n      this.debounce('reload', this.reload);\n    },\n\n    /**\n     * Loads the value again. Use if you modify\n     * localStorage using DOM calls, and want to\n     * keep this element in sync.\n     */\n    reload: function() {\n      this._loaded = false;\n      this._load();\n    },\n\n    /**\n     * loads value from local storage\n     * @param {boolean=} externalChange true if loading changes from a different window\n     */\n    _load: function(externalChange) {\n      try {\n        var v = window.localStorage.getItem(this.name);\n      } catch (ex) {\n        this.errorMessage = ex.message;\n\n        this._error(\"Could not save to localStorage.  Try enabling cookies for this page.\", ex);\n      };\n\n      if (v === null) {\n        this._loaded = true;\n        this._doNotSave = true;  // guard for save watchers\n        this.value = null;\n        this._doNotSave = false;\n        this.fire('iron-localstorage-load-empty', { externalChange: externalChange});\n      } else {\n        if (!this.useRaw) {\n          try { // parse value as JSON\n            v = JSON.parse(v);\n          } catch(x) {\n            this.errorMessage = \"Could not parse local storage value\";\n            Polymer.Base._error(\"could not parse local storage value\", v);\n            v = null;\n          }\n        }\n        this._loaded = true;\n        this._doNotSave = true;\n        this.value = v;\n        this._doNotSave = false;\n        this.fire('iron-localstorage-load', { externalChange: externalChange});\n      }\n    },\n\n    /**\n     * Saves the value to localStorage. Call to save if autoSaveDisabled is set.\n     * If `value` is null or undefined, deletes localStorage.\n     */\n    save: function() {\n      var v = this.useRaw ? this.value : JSON.stringify(this.value);\n      try {\n        if (this.value === null || this.value === undefined) {\n          window.localStorage.removeItem(this.name);\n        } else {\n          window.localStorage.setItem(this.name, /** @type {string} */ (v));\n        }\n      }\n      catch(ex) {\n        // Happens in Safari incognito mode,\n        this.errorMessage = ex.message;\n        Polymer.Base._error(\"Could not save to localStorage. Incognito mode may be blocking this action\", ex);\n      }\n    }\n\n    /**\n     * Fired when value loads from localStorage.\n     *\n     * @event iron-localstorage-load\n     * @param {{externalChange:boolean}} detail -\n     *     externalChange: true if change occured in different window.\n     */\n\n    /**\n     * Fired when loaded value does not exist.\n     * Event handler can be used to initialize default value.\n     *\n     * @event iron-localstorage-load-empty\n     * @param {{externalChange:boolean}} detail -\n     *     externalChange: true if change occured in different window.\n     */\n  });\n(function(document) {\n  'use strict';\n\n  // html element of this document\n  var html = document.querySelector('html');\n  // app global default language\n  var defaultLang = html.hasAttribute('lang') ? html.getAttribute('lang') : '';\n\n  // imperative synchronous registration of the template for Polymer 2.x\n  var template = ((!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript)\n    .ownerDocument.querySelector('template#i18n-preference');\n  var domModule = document.createElement('dom-module');\n  var currentScript = (!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript;\n  var registerI18nPreference = function () {\n\n  currentScript.ownerDocument.querySelector('div#dom-module-placeholder').appendChild(domModule);\n  domModule.appendChild(template);\n  domModule.register('i18n-preference');\n\n  Polymer({\n    is: 'i18n-preference',\n\n    properties: {\n      /**\n       * Persistence of preference \n       */\n      persist: {\n        type: Boolean,\n        value: false,\n        reflectToAttribute: true,\n        notify: true,\n        observer: '_onPersistChange'\n      }\n    },\n\n    /**\n     * Ready callback to initialize this.lang\n     */\n    ready: function () {\n      if (this.persist) {\n        // delay this.lang update\n      }\n      else {\n        //this.$.storage.value = undefined;\n      }\n      this.isReady = true;\n    },\n\n    /**\n     * Attached callback to initialize html.lang and its observation\n     */\n    attached: function () {\n      this._observe();\n      if (this.persist) {\n        // delay html.lang update\n      }\n      else {\n        if (!html.hasAttribute('preferred')) {\n          html.setAttribute('lang', navigator.language || navigator.browserLanguage);\n        }\n      }\n    },\n\n    /**\n     * Detached callback to diconnect html.lang observation\n     */\n    detached: function () {\n      this._disconnect();\n    },\n\n    /**\n     * Initialize an empty localstorage\n     */\n    _onLoadEmptyStorage: function () {\n      if (this.isReady) {\n        if (this.persist) {\n          if (this.isInitialized) {\n            // store html.lang value\n            this.$.storage.value = html.getAttribute('lang');\n          }\n          else {\n            if (html.hasAttribute('preferred')) {\n              this.$.storage.value = html.getAttribute('lang');\n            }\n            else {\n              this.$.storage.value = navigator.language || navigator.browserLanguage;\n              if (html.getAttribute('lang') !== this.$.storage.value) {\n                html.setAttribute('lang', this.$.storage.value);\n              }\n            }\n            this.isInitialized = true;\n          }\n        }\n        else {\n          // leave the empty storage as it is\n        }\n      }\n    },\n\n\n    /**\n     * Handle the loaded storage value\n     */\n    _onLoadStorage: function () {\n      if (this.isReady) {\n        if (this.persist) {\n          // preferred attribute in html to put higher priority\n          // in the default html language than navigator.language\n          if (html.hasAttribute('preferred')) {\n            if (this.$.storage.value !== defaultLang) {\n              // overwrite the storage by the app default language\n              this.$.storage.value = defaultLang;\n            }\n          }\n          else {\n            // load the value from the storage\n            html.setAttribute('lang', this.$.storage.value);\n          }\n        }\n        else {\n          // empty the storage\n          this.$.storage.value = undefined;\n        }\n      }\n    },\n\n    /**\n     * Handle persist changes\n     *\n     * @param {Boolean} value new this.persist value\n     */\n    _onPersistChange: function (value) {\n      if (this.isReady) {\n        if (value) {\n          if (this.$.storage.value !== html.getAttribute('lang')) {\n            // save to the storage\n            this.$.storage.value = html.getAttribute('lang');\n          }\n        }\n        else {\n          // empty the storage\n          this.$.storage.value = undefined;\n        }\n      }\n    },\n\n    /**\n     * Handle storage value changes\n     *\n     * @param {Event} e value-changed event on the storage\n     */\n    _onStorageValueChange: function (e) {\n      var value = e.detail.value;\n      if (this.isReady) {\n        if (this.persist) {\n          if (value) {\n            if (value !== html.getAttribute('lang')) {\n              // save to the lang\n              html.setAttribute('lang', value);\n            }\n          }\n          else {\n            // update the storage\n            this.$.storage.value = html.getAttribute('lang');\n          }\n        }\n        else {\n          if (value) {\n            // empty the storage\n            this.$.storage.value = undefined;\n          }\n        }\n      }\n    },\n\n    /**\n     * Handle value changes on localstorage\n     *\n     * @param {MutationRecord[]} mutations Array of MutationRecords for html.lang\n     *\n     * Note: \n     *   - Bound to this element\n     */\n    _htmlLangMutationObserverCallback: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            if (this.$.storage.value !== mutation.target.getAttribute('lang')) {\n              this.$.storage.value = mutation.target.getAttribute('lang');\n            }\n          }\n          break;\n        default:\n          break;\n        }\n      }.bind(this));\n    },\n\n    /**\n     * Set up html.lang mutation observer\n     */\n    _observe: function () {\n      // observe html lang mutations\n      if (!this._htmlLangMutationObserver) {\n        this._htmlLangMutationObserverCallbackBindThis = \n          this._htmlLangMutationObserverCallback.bind(this);\n        this._htmlLangMutationObserver =\n          new MutationObserver(this._htmlLangMutationObserverCallbackBindThis);\n      }\n      this._htmlLangMutationObserver.observe(html, { attributes: true });\n    },\n\n    /**\n     * Disconnect html.lang mutation observer\n     */\n    _disconnect: function () {\n      if (this._htmlLangMutationObserver) {\n        this._htmlLangMutationObserver.disconnect();\n      }\n    }\n  });\n  }\n  if ((!window.HTMLImports || HTMLImports.hasNative)) {\n    registerI18nPreference();\n  }\n  else {\n    HTMLImports.whenReady(registerI18nPreference);\n  }\n})(document);\n(function () {\n  // shared data\n  var sharedData = {};\n\n  // imperative synchronous registration of the template for Polymer 2.x\n  var template = ((!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript)\n    .ownerDocument.querySelector('template#i18n-attr-repo');\n  var domModule = document.createElement('dom-module');\n  domModule.appendChild(template);\n  domModule.register('i18n-attr-repo');\n  window.BehaviorsStore = window.BehaviorsStore || {};\n  // Polymer function for iron-component-page documentation\n  var Polymer = function (proto) {\n    BehaviorsStore._I18nAttrRepo = proto;\n    BehaviorsStore._I18nAttrRepo._created();\n    return window.Polymer(proto);\n  };\n\n/*\n`<i18n-attr-repo>` maintains a list of attributes targeted for UI localization.  \nIt judges whether a specific attribute of an element requires localization or not. \n\n    var attrRepository = \n      document.createElement('i18n-attr-repo');\n\n    attrRepository.registerLocalizableAttributes(\n      'custom-element',\n      Polymer.DomModule.import('custom-element', 'template')\n    );\n    attrRepository.isLocalizableAttribute(inputElement, 'placeholder');\n\n### Interactions with `BehaviorsStore.I18nBehavior`\n\nThe element is not meant for DOM attachment. The object is\na singleton object dedicated for `BehaviorsStore.I18nBehavior`.\n`I18nBehavior` interacts with the localizable attributes repository in these 3 ways.\n\n### 1) Construct the repository for the standard elements from its own static template at the object creation.\n\n```\n    // i18n-behavior.html\n    var attrRepository = \n      document.createElement('i18n-attr-repo');\n```\n\nPre-defined I18N-target attributes in the static template of `i18n-attr-repo`:\n\n```\n    <dom-module id=\"i18n-attr-repo\">\n      <template>\n        <template id=\"standard\">\n          <input placeholder>\n          <any-elements title aria-label=\"$\" aria-valuetext=\"$\"></any-elements>\n\n          <paper-input label error-message placeholder></paper-input>\n          <paper-textarea label error-message placeholder></paper-textarea>\n          <paper-dropdown-menu label></paper-dropdown-menu>\n          <paper-toast text></paper-toast>\n          <google-chart options cols rows data></google-chart>\n          <google-signin label-signin label-signout label-additional></google-signin>\n          <platinum-push-messaging title message></platinum-push-messaging>\n\n          <json-data any-attributes></json-data>\n        </template>\n      </template>\n    </dom-module>\n```\n\nThis static list is also referenced by [`gulp-i18n-preprocess`](https://github.com/t2ym/gulp-i18n-preprocess) filter for\nbuild-time automatic I18N of hard-coded string attributes.\n\n### 2) Register I18N-target attributes of custom elements from a template with id=\"custom\" in its light DOM.\n\nI18N-target attributes for custom elements without I18nBehavior can be registered to the respository by this method. \n\nExample I18N-target attributes in a static template in the light DOM of `i18n-attr-repo`:\n\n```\n    <i18n-attr-repo>\n      <template id=\"custom\">\n        <shop-md-decorator error-message=\"$\"></shop-md-decorator>\n        <input value=\"type=submit|button\">\n        <my-element i18n-target-attr=\"attr=value,boolean-attr,!boolean-attr\"></my-element>\n        <my-element i18n-target-attr=\"attr1=value1,attr2=value2,type-name\"></my-element>\n        <my-element i18n-target-attr=\"boolean-attr=\"></my-element>\n        <my-element i18n-target-attr=\"type-name2\"></my-element>\n      </template>\n    </i18n-attr-repo>\n```\n\nThis list is also referenced by [`gulp-i18n-preprocess`](https://github.com/t2ym/gulp-i18n-preprocess) filter for\nbuild-time automatic I18N of hard-coded string attributes.\n\nNote: Type name feature is currently ineffective and reserved for further expansion of the attribute I18N features.\n\n### 3) Register localizable attributes of the newly registered elements from the `text-attr` attribute of the element's template.\n\n```\n    // i18n-behavior.html, scanning custom-element template\n    var id = 'custom-element';\n    attrRepository.registerLocalizableAttributes(\n      id, \n      Polymer.DomModule.import(id, 'template')\n    );\n```\n```\n    // custom-element.html\n    <dom-module id=\"custom-element\">\n      <template text-attr=\"localizable-attr1 localizable-attr2\">\n        <span>{{localizableAttr1}}</span>\n        <span>{{localizableAttr2}}</span>\n      </template>\n      <script>\n        Polymer({\n          is: 'custom-element',\n          behaviors: [ BehaviorsStore.I18nBehavior ],\n          properties: {\n            localizableAttr1: {\n              type: String\n            },\n            localizableAttr2: {\n              type: String\n            }\n          }\n        });\n      </ script>\n    </dom-module>\n```\n\n`text-attr` attributes are also traversed for build-time automatic I18N of \nhard-coded UI string attributes by [`gulp-i18n-preprocess`](https://github.com/t2ym/gulp-i18n-preprocess) filter.\n\n### 4) Judge localizability of attributes for the local DOM elements of the newly registered element.\n\n```\n    // i18n-behavior.html, scanning custom-element-user template\n    var element; // target element\n    var attr;\n    if (attrRepository.isLocalizableAttribute(element, attr.name)) {\n      // make localizalbe-attr1 localizable\n    }\n```\n```\n    // custom-element-user.html\n    <dom-module id=\"custom-element-user\">\n      <template>\n        <custom-element id=\"custom\"\n                        localizable-attr1=\"UI Text Label 1\"\n                        localizable-attr2=\"UI Text Label 2\">\n        </custom-element>\n      </template>\n      <script>\n        Polymer({\n          is: 'custom-element-user',\n          behaviors: [ BehaviorsStore.I18nBehavior ]\n        });\n      </ script>\n    </dom-module>\n```\n```\n    // template for custom-element-user after localization binding\n    <template>\n      <custom-element id=\"custom\"\n                      localizable-attr1=\"{{model.custom.localizable-attr1}}\"\n                      localizable-attr2=\"{{model.custom.localizable-attr2}}\">\n      </custom-element>\n    </template>\n```\n```\n    // extracted localizable texts in custom-element-user element\n    this.model = {\n      \"custom\": {\n        \"localizable-attr1\": \"UI Text Label 1\",\n        \"localizable-attr2\": \"UI Text Label 2\"\n      }\n    }\n```\n\nSince dependent elements should be registered prior to a custom element being registered,\nthe repository can always maintain the complete list of localizable attributes for registered custom elements.\n\n- - -\n\n### Note\n\nThe described processes above are for debug builds with runtime localization traversal of templates\nby `I18nBehavior`.\n\nFor production builds, the build system can perform the same processes at build time so that \n`I18nBehavior` at clients can skip runtime traversal of templates.\n\n- - -\n\n### TODO\n\nHandle and judge JSON object attributes.\n\n@group I18nBehavior\n@element i18n-attr-repo\n@hero hero.svg\n@demo demo/index.html\n*/\n  Polymer({\n    is: 'i18n-attr-repo',\n\n    created: function () {\n      this.data = sharedData;\n\n      var customAttributes = window.Polymer.dom(this).querySelector('template#custom');\n      // traverse custom attributes repository\n      if (customAttributes && !this.hasAttribute('processed')) {\n        this._traverseTemplateTree(customAttributes._content || customAttributes.content);\n        this.setAttribute('processed', '');\n      }\n\n      this._created();\n    },\n\n    _created: function () {\n      this.data = sharedData;\n\n      if (this.data.__ready__) {\n        return; // traverse standard attributes only once\n      }\n      this.data.__ready__ = true;\n      var standardTemplate;\n      if (!this.$) {\n        var t = window.Polymer.DomModule.import(this.is, 'template');\n        standardTemplate = (t._content || t.content).querySelector('template#standard');\n      }\n      else {\n        standardTemplate = this.$.standard;\n      }\n      this._traverseTemplateTree(standardTemplate._content || standardTemplate.content);\n    },\n\n    /**\n     * Judge if a specific attribute of an element requires localization.\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {string} attr Target attribute name.\n     * @return {string or boolean} true - property, '$' - attribute, false - not targeted, 'type-name' - type name\n     */\n    isLocalizableAttribute: function (element, attr) {\n      var tagName = element.tagName.toLowerCase();\n      if (!this.data) {\n        this._created();\n        this.data = sharedData;\n      }\n      attr = attr.replace(/\\$$/, '');\n      if (this.data['any-elements'] &&\n          this.data['any-elements'][attr]) {\n        return this.data['any-elements'][attr];\n      }\n      else if (this.data[tagName]) {\n        return this.data[tagName]['any-attributes'] ||\n               this._getType(element, this.data[tagName][attr]);\n      }\n      else {\n        return false;\n      }\n    },\n\n    /**\n     * Get the type name or '$' for a specific attribute of an element from the attributes repository\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {object} value this.data[tagName][attr]\n     * @return {string or boolean} true - property, '$' - attribute, false - not targeted, 'type-name' - type name\n     */\n    _getType: function (element, value) {\n      var selector;\n      var result;\n      if (typeof value === 'object') {\n        for (selector in value) {\n          if (selector) {\n            if (this._matchAttribute(element, selector)) {\n              result = this._getType(element, value[selector]);\n              if (result) {\n                return result;\n              }\n            }\n          }\n        }\n        if (value['']) {\n          if (this._matchAttribute(element, '')) {\n            result = this._getType(element, value['']);\n            if (result) {\n              return result;\n            }\n          }\n        }\n        return false;\n      }\n      else {\n        return value;\n      }\n    },\n\n    /**\n     * Get the type name or '$' for a specific attribute of an element from the attributes repository\n     *\n     * Format for selectors:\n     *  - `attr=value` - Value of `attr` matches Regex `^value$`\n     *  - `!boolean-attr` - Boolean attribute does not exist\n     *  - `boolean-attr` - Boolean attribute exists with empty value\n     *  - empty string `''` - Always matches\n     *\n     * @param {HTMLElement} element Target element.\n     * @param {string} selector Matching condition for target attribute.\n     * @return {boolean} true - matching, false - not matching\n     */\n    _matchAttribute: function (element, selector) {\n      var value;\n      var match;\n      // default ''\n      if (selector === '') {\n        return true;\n      }\n      // attr=value Regex ^value$\n      match = selector.match(/^([^!=]*)=(.*)$/);\n      if (match) {\n        if (element.hasAttribute(match[1])) {\n          value = element.getAttribute(match[1]);\n          return !!value.match(new RegExp('^' + match[2] + '$'));\n        }\n        else {\n          return false;\n        }\n      }\n      // !boolean-attr\n      match = selector.match(/^!([^!=]*)$/);\n      if (match) {\n        return !element.hasAttribute(match[1]);\n      }\n      // boolean-attr or empty-attr\n      match = selector.match(/^([^!=]*)$/);\n      if (match) {\n        if (element.hasAttribute(match[1])) {\n          value = element.getAttribute(match[1]);\n          return !value;\n        }\n        else {\n          return false;\n        }\n      }\n      // no matching\n      return false;\n    },\n\n    /**\n     * Comparator for attribute selectors\n     *\n     * @param {string} s1 selector 1\n     * @param {string} s2 selector 2\n     * @return {number} comparison result as -1, 0, or 1\n     */\n    _compareSelectors: function (s1, s2) {\n      var name1 = s1.replace(/^!/, '').replace(/=.*$/, '').toLowerCase();\n      var name2 = s2.replace(/^!/, '').replace(/=.*$/, '').toLowerCase();\n      return name1.localeCompare(name2);\n    },\n\n    /**\n     * Add a new localizable attribute of an element to the repository.\n     *\n     * Format for selector values for defining I18N-target attributes:\n     *   - `attr1=value1,attr2=value2,boolean-attr,!boolean-attr` - Attribute value matching condition for property\n     *   - `attr1=value1,attr2=value2,$` - Attribute value matching condition for attribute\n     *   - `boolean-attr=` - Boolean attribute condition\n     *   - `attr1=value1,type` - Attribute value condition with type name (type is currently ineffective)\n     *\n     * @param {string} element Target element name.\n     * @param {string} attr Target attribute name.\n     * @param {?*} value Selector value\n     */\n    setLocalizableAttribute: function (element, attr, value) {\n      this.data[element] = this.data[element] || {};\n      var cursor = this.data[element];\n      var prev = attr;\n      var type = true;\n      var selectors = [];\n\n      if (typeof value === 'string' && value) {\n        selectors = value.split(',');\n        if (selectors[selectors.length - 1].match(/^[^!=][^=]*$/)) {\n          type = selectors.pop();\n        }\n        selectors = selectors.map(function (selector) {\n          return selector.replace(/=$/, '');\n        });\n        selectors.sort(this._compareSelectors);\n        while (selectors[0] === '') {\n          selectors.shift();\n        }\n      }\n\n      selectors.forEach(function (selector, index) {\n        if (typeof cursor[prev] !== 'object') {\n          cursor[prev] = cursor[prev] ? { '': cursor[prev] } : {};\n        }\n        cursor[prev][selector] = cursor[prev][selector] || {};\n        cursor = cursor[prev];\n        prev = selector;\n      });\n\n      if (typeof cursor[prev] === 'object' &&\n          cursor[prev] &&\n          Object.keys(cursor[prev]).length) {\n        cursor = cursor[prev];\n        prev = '';\n      }\n      cursor[prev] = type;\n    },\n\n    /**\n     * Pick up localizable attributes description for a custom element \n     * from `text-attr` attribute and register them to the repository.\n     * The `text-attr` attribute is used in the template of a custom\n     * element to declare localizable attributes of its own element.\n     *\n     * Format:\n     *\n     *  Type 1: `<template text-attr=\"localizable-attr1 attr2\">`\n     *\n     *  Type 2: `<template text-attr localizable-attr1 attr2=\"value2\">`\n     *\n     * @param {string} element Target element name.\n     * @param {HTMLTemplateElement} template Template of the element.\n     */\n    registerLocalizableAttributes: function (element, template) {\n      if (!this.data) {\n        this._created();\n        this.data = sharedData;\n      }\n      if (!element) {\n        element = template.getAttribute('id');\n      }\n      if (element) {\n        var attrs = (template.getAttribute('text-attr') || '').split(' ');\n        var textAttr = false;\n        attrs.forEach(function (attr) {\n          if (attr) {\n            this.setLocalizableAttribute(element, attr, true);\n          }\n        }, this);\n        Array.prototype.forEach.call(template.attributes, function (attr) {\n          switch (attr.name) {\n          case 'id':\n          case 'lang':\n          case 'localizable-text':\n          case 'assetpath':\n            break;\n          case 'text-attr':\n            textAttr = true;\n            break;\n          default:\n            if (textAttr) {\n              this.setLocalizableAttribute(element, attr.name, attr.value);\n            }\n            break;\n          }\n        }.bind(this));\n      }\n    },\n\n    /**\n     * Traverse the template of `i18n-attr-repo` in the ready() callback\n     * and construct the localizable attributes repository object. The method calls itself\n     * recursively for traversal.\n     *\n     * @param {HTMLElement} node The target HTML node for traversing.\n     */    \n    _traverseTemplateTree: function (node) {\n      var name;\n      if (node.nodeType === node.ELEMENT_NODE) {\n        name = node.nodeName.toLowerCase();\n        Array.prototype.forEach.call(node.attributes, function (attribute) {\n          this.data[name] = this.data[name] || {};\n          this.setLocalizableAttribute(name, attribute.name, attribute.value);\n        }, this);\n      }\n      if (node.childNodes.length > 0) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          this._traverseTemplateTree(node.childNodes[i]);\n        }\n      }\n    }\n  });\n})();\n/*!\n * @license deepcopy.js Copyright(c) 2013 sasa+1\n * https://github.com/sasaplus1/deepcopy.js\n * Released under the MIT license.\n */\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.deepcopy=e():t.deepcopy=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";t.exports=n(3)},function(t,e){\"use strict\";function n(t,e){if(\"[object Array]\"!==o.call(t))throw new TypeError(\"array must be an Array\");var n=void 0,r=void 0,u=void 0;for(n=0,r=t.length;r>n;++n)if(u=t[n],u===e||u!==u&&e!==e)return n;return-1}e.__esModule=!0;var o=Object.prototype.toString,r=\"undefined\"!=typeof Buffer?function(t){return Buffer.isBuffer(t)}:function(){return!1},u=\"function\"==typeof Object.keys?function(t){return Object.keys(t)}:function(t){var e=typeof t;if(null===t||\"function\"!==e&&\"object\"!==e)throw new TypeError(\"obj must be an Object\");var n=[],o=void 0;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&n.push(o);return n},i=\"function\"==typeof Symbol?function(t){return Object.getOwnPropertySymbols(t)}:function(){return[]};e.getKeys=u,e.getSymbols=i,e.indexOf=n,e.isBuffer=r},function(t,e,n){\"use strict\";function o(t,e){var n=u(t);return null!==n?n:r(t,e)}function r(t,e){if(\"function\"!=typeof e)throw new TypeError(\"customizer is must be a Function\");if(\"function\"==typeof t){var n=String(t);return/^\\s*function\\s*\\S*\\([^\\)]*\\)\\s*{\\s*\\[native code\\]\\s*}/.test(n)?t:new Function(\"return \"+String(n))()}var o=c.call(t);if(\"[object Array]\"===o)return[];if(\"[object Object]\"===o&&t.constructor===Object)return{};if(\"[object Date]\"===o)return new Date(t.getTime());if(\"[object RegExp]\"===o){var r=String(t),u=r.lastIndexOf(\"/\");return new RegExp(r.slice(1,u),r.slice(u+1))}if((0,i.isBuffer)(t)){var f=new Buffer(t.length);return t.copy(f),f}var l=e(t);return void 0!==l?l:null}function u(t){var e=typeof t;return null!==t&&\"object\"!==e&&\"function\"!==e?t:null}e.__esModule=!0,e.copyValue=e.copyCollection=e.copy=void 0;var i=n(1),c=Object.prototype.toString;e.copy=o,e.copyCollection=r,e.copyValue=u},function(t,e,n){\"use strict\";function o(t){}function r(t){var e=arguments.length<=1||void 0===arguments[1]?o:arguments[1];if(null===t)return null;var n=(0,i.copyValue)(t);if(null!==n)return n;var r=(0,i.copyCollection)(t,e),c=null!==r?r:t,f=[t],l=[c];return u(t,e,c,f,l)}function u(t,e,n,o,r){if(null===t)return null;var f=(0,i.copyValue)(t);if(null!==f)return f;var l=(0,c.getKeys)(t).concat((0,c.getSymbols)(t)),p=void 0,s=void 0,a=void 0,y=void 0,d=void 0,v=void 0,b=void 0,j=void 0;for(p=0,s=l.length;s>p;++p)a=l[p],y=t[a],d=(0,c.indexOf)(o,y),v=void 0,b=void 0,j=void 0,-1===d?(v=(0,i.copy)(y,e),b=null!==v?v:y,null!==y&&/^(?:function|object)$/.test(typeof y)&&(o.push(y),r.push(b))):j=r[d],n[a]=j||u(y,e,b,o,r);return n}e.__esModule=!0;var i=n(2),c=n(1);e[\"default\"]=r,t.exports=e[\"default\"]}])});\n/* jshint -W100 */\n(function(document) {\n  'use strict';\n\n  var html = document.querySelector('html');\n  if (window.ShadowDOMPolyfill) {\n    // Fix #38. Add reflectToAttribute effect on html.lang property\n    // for supplementing Shadow DOM MutationObserver polyfill\n    Object.defineProperty(html, 'lang', {\n      get: function () {\n        return this.getAttribute('lang');\n      },\n      set: function (value) {\n        this.setAttribute('lang', value);\n      }\n    });\n  }\n\n  // Safari 7 predefines non-configurable standard properties\n  // Note: They become configurable with ShadowDOMPolyfill, which wraps them.\n  var isStandardPropertyConfigurable = (function () {\n    var langPropertyDescriptor = Object.getOwnPropertyDescriptor(document.createElement('span'), 'lang');\n    return !langPropertyDescriptor || langPropertyDescriptor.configurable;\n  })();\n  // Polymer 1.4.0 on Safari 7 inserts extra unexpected whitepace node at the beginning of template\n  var extraWhiteSpaceNode = !isStandardPropertyConfigurable;\n  if (Polymer.ElementMixin) {\n    isStandardPropertyConfigurable = false;\n  }\n\n  // app global bundle storage\n  var bundles = { '': {} }; // with an empty default bundle\n  // app global default language\n  var defaultLang = html.hasAttribute('lang') ? html.getAttribute('lang') : '';\n  // shared fetching instances for bundles\n  var bundleFetchingInstances = {};\n\n  // path for start URL\n  var startUrl = (function () {\n    var path = window.location.pathname;\n    if (document.querySelector('meta[name=app-root]') &&\n        document.querySelector('meta[name=app-root]').getAttribute('content')) {\n      // <meta name=\"app-root\" content=\"/\"> to customize application root\n      path = document.querySelector('meta[name=app-root]').getAttribute('content');\n    }\n    else if (document.querySelector('link[rel=manifest]') &&\n             document.querySelector('link[rel=manifest]').getAttribute('href') &&\n             document.querySelector('link[rel=manifest]').getAttribute('href').match(/^\\//)) {\n      // assume manifest is located at the application root folder\n      path = document.querySelector('link[rel=manifest]').getAttribute('href');\n    }\n    return path.replace(/\\/[^\\/]*$/,'/');\n  })();\n\n  // path for locales from <html locales-path=\"locales\">\n  var localesPath = html.hasAttribute('locales-path') ? \n                      html.getAttribute('locales-path') : 'locales';\n\n  // Support ShadowDOM V1 on Polymer 2.x\n  var paramAttribute = Polymer.ElementMixin ? 'slot' : 'param';\n\n  var attributesRepository = ((!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript)\n    .ownerDocument.querySelector('i18n-attr-repo');\n\n  // set up userPreference\n  var userPreference = document.querySelector('i18n-preference');\n  if (!userPreference) {\n    userPreference = document.createElement('i18n-preference');\n    // append to body\n    document.querySelector('body').appendChild(userPreference);\n  }\n\n  // debug log when <html debug> attribute exists\n  var debuglog = html.hasAttribute('debug') ?\n    function (arg) {\n      console.log(arg);\n    } :\n    function () {};\n\n  window.BehaviorsStore = window.BehaviorsStore || {};\n  /**\n   * Apply `BehaviorsStore.I18nControllerBehavior` to manipulate internal variables for I18N\n   *\n   * Note: This behavior is not for normal custom elements to apply I18N. UI is not expected.\n   */\n  BehaviorsStore.I18nControllerBehavior = {\n    properties: {\n\n      /**\n       * Flag for detection of `I18nControllerBehavior`\n       *\n       * `true` if I18nControllerBehavior is applied\n       *\n       * Note: Module-specific JSON resources are NOT fetched for `I18nControllerBehavior`\n       */\n      isI18nController: {\n        type: Boolean,\n        value: true,\n        readOnly: true\n      },\n\n      /**\n       * HTML element object for the current document\n       */\n      html: {\n        type: Object,\n        value: html\n      },\n\n      /**\n       * Master bundles object for storing all the localized and default resources\n       */\n      masterBundles: {\n        type: Object,\n        value: bundles\n      },\n\n      /**\n       * Default lang for the document, i.e., the initial value of `<html lang>` attribute\n       */\n      defaultLang: {\n        type: String,\n        value: defaultLang,\n        readOnly: true\n      },\n\n      /**\n       * List of elements which are fetching bundles\n       */\n      bundleFetchingInstances: {\n        type: Object,\n        value: bundleFetchingInstances\n      },\n\n      /**\n       * Root URL path of the application ends with '/' to fetch bundles\n       */\n      startUrl: {\n        type: String,\n        value: startUrl,\n        readOnly: true\n      },\n\n      /**\n       * Path for locales\n       *\n       * Default value is `'locales'`\n       */\n      localesPath: {\n        type: String,\n        value: localesPath,\n        readOnly: true\n      },\n\n      /**\n       * <i18n-attr-repo> element to store attributes repository\n       */\n      attributesRepository: {\n        type: Object,\n        value: attributesRepository,\n        readOnly: true\n      },\n\n      /**\n       * <i18n-preference> element\n       */\n      userPreference: {\n        type: Object,\n        value: userPreference,\n        readOnly: true\n      }\n    }\n  };\n  /**\n   * Apply `BehaviorsStore.I18nBehavior` to implement localizable elements.\n   *\n   *     <dom-module id=\"custom-element\">\n   *       <template>\n   *         <span>Hard-coded UI texts are automatically made localizable</span>\n   *       </template>\n   *       <﻿﻿script﻿﻿>\n   *         Polymer({\n   *           is: 'custom-element',\n   *           behaviors: [ \n   *             BehaviorsStore.I18nBehavior  // Add this behavior\n   *           ]\n   *         });\n   *       <﻿﻿/script﻿﻿>\n   *     </dom-module>\n   *\n   * `I18nBehavior` automatically extracts UI texts from `template` and \n   * binds them to localizable variables in `this.text` object.\n   *\n   * According to the `lang` attribute value, `this.text`, and thus the bound UI texts,\n   * dynamically mutates by loading localized values from a JSON file in the `locales` directory.\n   * By default, `lang` attribute values of all the localizable elements with `I18nBehavior` are\n   * automatically updated according to `<html lang>` attribute value.\n   *\n   * The UI text externalization can be processed at build time as well by `gulp-*` task\n   * so that `I18nBehavior` can immediately recognize the extracted texts in JSON and \n   * skip run-time externalization.\n   *\n   * Run-time externalization is suitable for development and debugging \n   * since the code changes are immediately reflected at reloading without build-time preprocesses.\n   * In contrast, build-time externalization is suitable for production builds \n   * since it eliminates run-time externalization overheads.\n   * \n   * ### Steps to localize a custom element\n   *\n   * 1. [JavaScript] Add `BehaviorsStore.I18nBehavior` to `behaviors`\n   * 1. [gulp] Add `gulp-*` filter for `custom-element.html` and generate `custom-element.json`\n   * 1. [locales] Put `custom-element.lang.json` in `locales` directory\n   * 1. [translation] Translate `locales/custom-element.lang.json`\n   *\n   * - - -\n   *\n   * ### Directory structure of bundle files\n   *\n   * Normal bundles (`/element-root/locales/element-name.*.json`) for elements\n   * are stored under their root directories.\n   *\n   * Shared bundles (`/locales/bundle.*.json`) are generated at build time \n   * by merging all the targeted bundles of the localizable elements. \n   *\n   * Once the shared bundles are loaded, there should be no need to search for \n   * normal bundles per element unless the element is intentionally excluded \n   * from the shared bundles.\n   *\n   * ```\n   *      /bundle.json \n   *      /locales/bundle.ja.json\n   *              /bundle.fr.json\n   *              /bundle.zh-Hans.json\n   *\n   *      /elements/my-list/my-list.json\n   *                       /locales/my-list.ja.json\n   *                               /my-list.zh-Hans.json\n   *\n   *               /google-chart-demo/google-chart-demo.json\n   *                                 /locales/google-chart-demo.ja.json\n   *                                         /google-chart-demo.fr.json\n   * ```\n   *\n   * - - -\n   *\n   * ### Localizable `<template is=\"i18n-dom-bind\" id=\"app\">` element\n   *\n   * `<template is=\"i18n-dom-bind\">` template element extends \n   * `<template is=\"dom-bind\">` template element with all the capabilities of \n   * `I18nBehavior`.  \n   *\n   * The `id` attribute value is used for naming bundle files instead of the element name.\n   * \n   * The bundle files are stored at the locales directory under the application root. \n   *\n   * ```\n   *      /app.json\n   *      /locales/app.ja.json\n   *              /app.fr.json\n   *              /app.zh-Hans.json\n   * ```\n   *\n   * - - -\n   *\n   * ### TODOs\n   *\n   * - Support user locale preference per user\n   *\n   * @polymerBehavior BehaviorsStore.I18nBehavior\n   * @group I18nBehavior\n   * @hero hero.svg\n   * @demo demo/index.html\n   */\n  BehaviorsStore.I18nBehavior = {\n\n    /**\n     * Fired when the text message bundle object (`this.text`) is updated after `this.lang` is changed.\n     *\n     * @event lang-updated\n     */\n\n    /**\n     * Fired when a shared bundle is fetched.\n     *\n     * @event bundle-fetched\n     */\n\n    properties: {\n      /**\n       * The locale of the element.\n       * The default value is copied from `<html lang>` attribute of the current page.\n       * If `<html lang>` is not specified, `''` is set to use the template default language.\n       *\n       * The value is synchronized with `<html lang>` attribute of the current page by default.\n       *\n       * ### Note:\n       *  - The value may not reflect the current UI locale until the localized texts are loaded.\n       */\n      lang: {\n        type: String,\n        value: defaultLang,\n        reflectToAttribute: true,\n        observer: '_langChanged'\n      },\n\n      /**\n       * Text message bundle object for the current locale.\n       * The object is shared among all the instances of the same element.\n       * The value is updated when `lang-updated` event is fired.\n       */\n      text: {\n        type: Object,\n        computed: '_getBundle(lang)'\n      },\n\n      /**\n       * Data model bundle object for the current locale.\n       * The data are bound to localizable attribute values in the element template.\n       * The object is cloned from `this.text.model` per instance.\n       * The value is NOT automatically updated in sync with `this.text`.\n       * \n       * How to manually update the model object when `lang-updated` event is fired:\n       * ```\n       *     this.model = deepcopy(this.text.model);\n       * ```\n       */\n      model: {\n        type: Object,\n        notify: true\n      },\n\n      /**\n       * The locale of the hard-coded texts in the element's template.\n       * The read-only value can be specified by the `lang` attribute of the element's `template`.\n       * The default value is 'en' if not specified in the `template` element.\n       *\n       * ```\n       *  <dom-module id=\"custom-element\">\n       *    <template lang=\"en\">\n       *      <span>Hard-coded text in English</span>\n       *    </template>\n       *  <dom-module>\n       * ```\n       */\n      templateDefaultLang: {\n        type: String,\n        value: 'en'\n      },\n\n      /**\n       * The effective locale of the element.\n       * The value is updated when the localized texts are loaded and `lang-updated` event is fired.\n       */\n      effectiveLang: {\n        type: String\n      },\n\n      /**\n       * Boolean flag to synchronize with the value of  `<html lang>` attribute.\n       */\n      observeHtmlLang: {\n        type: Boolean,\n        value: true,\n        observer: '_observeHtmlLangChanged'\n      }\n    },\n\n    listeners: {\n      'lang-updated': '_updateEffectiveLang'\n    },\n\n    /* \n       bundles = \n       {\n        \"\": {},\n        \"en\": {\n          \"my-list\": {\n            \"p_2\": \"You now have:\",\n            \"model\": {\n              \"list\": {\n                \"items\": [\n                  \"item 1\", \"item 2\"\n                ]\n              }\n            }\n          },\n          \"google-chart-demo\": {\n            \"simple-chart-desc\": [\n              \"template {1} string\", \"param 1\"\n            ]\n            \"model\": {\n              \"simple-chart\": {\n                \"options\": { \"title\": \"Simple Chart\" },\n                \"rows\": []\n              }\n            }\n          }\n        },\n        \"ja\": {\n          \"my-list\": {},\n          \"google-chart-demo\": {}\n        }\n      }\n\n      bundles[lang]\n      /bundle.json - fallback\n      /locales/bundle.en.json\n              /bundle.ja.json\n              /bundle.fr.json\n              /bundle.zh-Hans.json\n\n      bundles[lang][is]\n      /elements/my-list/my-list.json - fallback\n                       /locales/my-list.en.json\n                               /my-list.ja.json\n                               /my-list.zh-Hans.json\n\n               /google-chart-demo/google-chart-demo.json - fallback\n                                 /locales/google-chart-demo.en.json\n                                         /google-chart-demo.ja.json\n                                         /google-chart-demo.zh-Hans.json\n\n      app/elements/my-list/my-list.json\n                          /locales/my-list.fr.json\n                                  /my-list.ja.json\n                                  /my-list.zh-Hans.json\n\n      dist/elements/my-list/my-list.json\n                           /locales/my-list.fr.json\n                                   /my-list.ja.json\n                                   /my-list.zh-Hans.json\n\n    */\n\n\n    /**\n     * The backend logic for `this.text` object.\n     *\n     * @param {string} lang Locale for the text message bundle.\n     * @return {Object} Text message bundle for the locale.\n     */\n    _getBundle: function (lang) {\n      //console.log('_getBundle called for ' + this.is + ' with lang = ' + lang);\n\n      var resolved;\n      var id = this.is === 'i18n-dom-bind' || (Polymer.ElementMixin && this.constructor.is === 'i18n-dom-bind') ? this.id : this.is;\n\n      if (lang && lang.length > 0) {\n        var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n        var tryLang;\n        while ((tryLang = fallbackLanguageList.shift())) {\n          if (!bundles[tryLang]) {\n            // set up an empty bundle for the language if missing\n            bundles[tryLang] = {};\n          }\n          if (bundles[tryLang][id]) {\n            // bundle found\n            resolved = bundles[tryLang][id];\n            break;\n          }\n        }\n      }\n      else {\n        // lang is not specified\n        lang = '';\n        resolved = bundles[lang][id];\n      }\n\n      // Fallback priorities: last > app default > element default > fallback > {}\n      // TODO: need more research on fallback priorities\n      if (!resolved) { \n        if (this._fetchStatus && bundles[this._fetchStatus.lastLang] && bundles[this._fetchStatus.lastLang][id]) {\n          // old bundle for now (no changes should be shown)\n          resolved = bundles[this._fetchStatus.lastLang][id]; \n        }\n        else if (defaultLang && defaultLang.length > 0 &&\n                 bundles[defaultLang] && bundles[defaultLang][id]) {\n          // app default language for now\n          resolved = bundles[defaultLang][id]; \n        }\n        else if (this.templateDefaultLang && this.templateDefaultLang.length > 0 &&\n                 bundles[this.templateDefaultLang] && bundles[this.templateDefaultLang][id]) {\n          // element default language for now\n          resolved = bundles[this.templateDefaultLang][id]; \n        }\n        /* no more fallback should happen */\n        /* istanbul ignore else */\n        else if (bundles[''][id]) {\n          // fallback language for now (this should be the same as element default)\n          resolved = bundles[''][id];\n        }\n        else {\n          // give up providing a bundle (this should not happen)\n          resolved = {};\n        }\n      }\n\n      return resolved;\n    },\n\n    /**\n     * Enumerate fallback locales for the target locale.\n     * \n     * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n     *\n     * ### Examples:\n     *\n     *| Target Locale | Fallback 1 | Fallback 2 | Fallback 3 |\n     *|:--------------|:-----------|:-----------|:-----------|\n     *| ru            | N/A        | N/A        | N/A        |\n     *| en-GB         | en         | N/A        | N/A        |\n     *| en-Latn-GB    | en-GB      | en-Latn    | en         |\n     *| fr-CA         | fr         | N/A        | N/A        |\n     *| zh-Hans-CN    | zh-Hans    | zh         | N/A        |\n     *| zh-CN         | zh-Hans    | zh         | N/A        |\n     *| zh-TW         | zh-Hant    | zh         | N/A        |\n     *\n     * #### Note:\n     *\n     * For zh language, the script Hans or Hant is supplied as its default script when a country/region code is supplied.\n     *\n     * @param {string} lang Target locale.\n     * @return {Array} List of fallback locales including the target locale at the index 0.\n     */\n    _enumerateFallbackLanguages: function (lang) {\n      var result = [];\n      var parts;\n      var match;\n      var isExtLangCode = 0;\n      var extLangCode;\n      var isScriptCode = 0;\n      var scriptCode;\n      var isCountryCode = 0;\n      var countryCode;\n      var n;\n      if (!lang || lang.length === 0) {\n        result.push('');\n      }\n      else {\n        parts = lang.split(/[-_]/);\n        // normalize ISO-639-1 language codes\n        if (parts.length > 0 &&\n            parts[0].match(/^[A-Za-z]{2,3}$/)) {\n          // language codes have to be lowercased\n          // e.g. JA -> ja, FR -> fr\n          // TODO: normalize 3-letter codes to 2-letter codes\n          parts[0] = parts[0].toLowerCase();\n        }\n        // normalize ISO-639-3 extension language codes\n        if (parts.length >= 2 &&\n            parts[1].match(/^[A-Za-z]{3}$/) &&\n            !parts[1].match(/^[Cc][Hh][SsTt]$/)) { // exclude CHS,CHT\n          // extension language codes have to be lowercased\n          // e.g. YUE -> yue\n          isExtLangCode = 1;\n          extLangCode = parts[1] = parts[1].toLowerCase();\n        }\n        // normalize ISO-15924 script codes\n        if (parts.length >= isExtLangCode + 2 &&\n            (match = parts[isExtLangCode + 1].match(/^([A-Za-z])([A-Za-z]{3})$/))) {\n          // script codes have to be capitalized only at the first character\n          // e.g. HANs -> Hans, lAtN -> Latn\n          isScriptCode = 1;\n          scriptCode = parts[isExtLangCode + 1] = match[1].toUpperCase() + match[2].toLowerCase();\n        }\n        // normalize ISO-3166-1 country/region codes\n        if (parts.length >= isExtLangCode + isScriptCode + 2 &&\n            (match = parts[isExtLangCode + isScriptCode + 1].match(/^[A-Za-z0-9]{2,3}$/))) {\n          // country/region codes have to be capitalized\n          // e.g. cn -> CN, jP -> JP\n          isCountryCode = 1;\n          countryCode = parts[isExtLangCode + isScriptCode + 1] = match[0].toUpperCase();\n        }\n        // extensions have to be in lowercases\n        // e.g. U-cA-Buddhist -> u-ca-buddhist, X-LiNux -> x-linux\n        if (parts.length >= isExtLangCode + isScriptCode + isCountryCode + 2) {\n          for (n = isExtLangCode + isScriptCode + isCountryCode + 1; n < parts.length; n++) {\n            parts[n] = parts[n].toLowerCase();\n          }\n        }\n        // enumerate fallback languages\n        while (parts.length > 0) {\n          // normalize delimiters as -\n          // e.g. ja_JP -> ja-JP\n          result.push(parts.join('-'));\n          if (isScriptCode &&\n              isCountryCode &&\n              parts.length == isExtLangCode + isScriptCode + 2) {\n            // script code can be omitted to default\n            // e.g. en-Latn-GB -> en-GB, zh-Hans-CN -> zh-CN\n            parts.splice(isExtLangCode + isScriptCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode + isScriptCode, 0, scriptCode);\n          }\n          if (isExtLangCode &&\n              isCountryCode &&\n              parts.length == isExtLangCode + isScriptCode + 2) {\n            // ext lang code can be omitted to default\n            // e.g. zh-yue-Hans-CN -> zh-Hans-CN\n            parts.splice(isExtLangCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode, 0, extLangCode);\n          }\n          if (isExtLangCode &&\n              isScriptCode &&\n              parts.length == isExtLangCode + isScriptCode + 1) {\n            // ext lang code can be omitted to default\n            // e.g. zh-yue-Hans -> zh-Hans\n            parts.splice(isExtLangCode, 1);\n            result.push(parts.join('-'));\n            parts.splice(isExtLangCode, 0, extLangCode);\n          }\n          if (!isScriptCode &&\n              !isExtLangCode &&\n              isCountryCode &&\n              parts.length == 2) {\n            // default script code can be added in certain cases with country codes\n            // e.g. zh-CN -> zh-Hans-CN, zh-TW -> zh-Hant-TW\n            switch (result[result.length - 1]) {\n            case 'zh-CN':\n            case 'zh-CHS':\n              result.push('zh-Hans');\n              break;\n            case 'zh-TW':\n            case 'zh-SG':\n            case 'zh-HK':\n            case 'zh-CHT':\n              result.push('zh-Hant');\n              break;\n            default:\n              break;\n            }\n          }\n          parts.pop();\n        }\n      }\n      return result;\n    },\n\n    /**\n     * Get the next fallback locale for the target locale.\n     * \n     * Subset implementation of BCP47 (https://tools.ietf.org/html/bcp47).\n     *\n     * ### Examples:\n     *\n     *| Target Locale | Next Fallback |\n     *|:--------------|:--------------|\n     *| ru            | null          |\n     *| en-GB         | en            |\n     *| fr-CA         | fr            |\n     *| zh-Hans-CN    | zh-Hans       |\n     *\n     * @param {string} lang Target locale.\n     * @return {string} Next fallback locale. `null` if there are no fallback languages.\n     */\n    /*\n    _getNextFallbackLanguage: function (lang) {\n      var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n      fallbackLanguageList.shift();\n      var nextFallbackLanguage = fallbackLanguageList.shift();\n      return nextFallbackLanguage ? nextFallbackLanguage : null;\n    },\n    */\n\n    /**\n     * MutationObserver callback of `lang` attribute for Safari 7\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _handleLangAttributeChange: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            //console.log('_handleLangAttributeChange lang = ' + this.lang + ' oldValue = ' + mutation.oldValue +\n            //            ' typeof oldValue = ' + typeof mutation.oldValue);\n            if (!(typeof mutation.oldValue === 'object' && !mutation.oldValue) &&\n                mutation.oldValue !== this.lang) {\n              if (this._lang !== mutation.oldValue) {\n                //console.log('assigning this._lang = ' + mutation.oldValue + ' from old value');\n                this._lang = mutation.oldValue;\n              }\n              //console.log('assigning this._lang = ' + this.lang);\n              this._lang = this.lang;\n            }\n            else if (mutation.oldValue != this.lang && this._lang !== this.lang) {\n              //console.log('assigning this._lang = ' + this.lang);\n              this._lang = this.lang;\n            }\n          }\n          break;\n        default:\n          /* istanbul ignore next: mutation.type is always attributes */\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Observer of `this.lang` changes.\n     *\n     * Update `this.text` object if the text message bundle of the new `lang` is locally available.\n     *\n     * Trigger fetching of the text message bundle of the new `lang` if the bundle is not locally available.\n     *\n     * @param {string} lang New value of `lang`.\n     * @param {string} oldLang Old value of `lang`.\n     */\n    _langChanged: function (lang, oldLang) {\n      //console.log(this.id + ':_langChanged lang = ' + lang + ' oldLang = ' + oldLang);\n      var id = (this.is || this.getAttribute('is')) === 'i18n-dom-bind' ? this.id : this.is;\n      lang = lang || ''; // undefined and null are treated as default ''\n      oldLang = oldLang || '';\n      if (lang !== oldLang &&\n          bundles[oldLang] && bundles[oldLang][id]) {\n        this._fetchStatus.lastLang = oldLang;\n      }\n      if (bundles[lang] && bundles[lang][id]) {\n        // bundle available for the new language\n        if (this._fetchStatus && lang !== this._fetchStatus.ajaxLang) {\n          // reset error status\n          this._fetchStatus.error = null;\n        }\n        if (!Polymer.ElementMixin || (Polymer.ElementMixin && this.__data)) {\n          this.notifyPath('text', this._getBundle(this.lang));\n        }\n        this.effectiveLang = lang;\n        this.fire('lang-updated', { \n          lang: this.lang, \n          oldLang: oldLang, \n          lastLang: this._fetchStatus.lastLang \n        });\n      }\n      else {\n        // fetch the missing bundle\n        this._fetchLanguage(lang);\n      }\n    },\n\n    /**\n     * Called on `lang-updated` events and update `this.effectiveLang` with the value of `this.lang`.\n     */\n    _updateEffectiveLang: function (event) {\n      if (Polymer.dom(event).rootTarget === this) {\n        //console.log('_updateEffectiveLang: lang = ' + this.lang);\n        this.effectiveLang = this.lang;\n      }\n    },\n\n    /**\n     * Trigger fetching of the appropriate text message bundle of the target locale.\n     *\n     * ### Two Layers of Fallbacks:\n     *\n     * 1. Missing bundles fall back to those of their fallback locales.\n     * 1. Missing texts in the non-default bundles fall back to those in the default bundle. \n     *\n     * ### Fallback Examples:\n     *\n     *| Locale      | Bundle Status                    |\n     *|:------------|:---------------------------------|\n     *| fr-CA       | existent with sparse texts       |\n     *| fr          | existent with full texts         |\n     *| ja          | existent with some missing texts |\n     *| zh-Hans-CN  | missing                          |\n     *| zh-Hans     | existent with some missing texts |\n     *| zh          | missing                          |\n     *| en          | existent with full texts         |\n     *| ''(default) | existent with full texts         |\n     *\n     *| Target      | Fallback bundle       | Resolved locale |\n     *|:------------|:----------------------|:----------------|\n     *| en          | en                    | en              |\n     *| ja          | ja + ''(default)      | ja              |\n     *| fr-CA       | fr-CA + fr            | fr-CA           |\n     *| zh-Hans-CN  | zh-Hans + ''(default) | zh-Hans         |\n     *\n     * @param {string} lang Target locale.\n     */\n    _fetchLanguage: function (lang) {\n      if (this._fetchStatus) {\n        this._fetchStatus.fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n        this._fetchStatus.fallbackLanguageList.push('');\n        this._fetchStatus.targetLang = this._fetchStatus.fallbackLanguageList.shift();\n        this._fetchBundle(this._fetchStatus.targetLang);\n      }\n    },\n\n    /**\n     * Fetch the text message bundle of the target locale \n     * cooperatively with other instances.\n     *\n     * @param {string} lang Target locale.\n     */\n    _fetchBundle: function (lang) {\n      //console.log('_fetchBundle lang = ' + lang);\n      if (!lang || lang.length === 0) {\n        // handle empty cases\n        if (defaultLang && defaultLang.length > 0) {\n          lang = defaultLang; // app default language\n        }\n        else if (this.templateDefaultLang && this.templateDefaultLang.length > 0) {\n          lang = this.templateDefaultLang; // element default language\n        }\n        else {\n          lang = ''; // fallback default language\n        }\n      }\n\n      // set up an empty bundle if inexistent\n      bundles[lang] = bundles[lang] || {};\n      var id = this.is === 'i18n-dom-bind' || (Polymer.ElementMixin && this.constructor.is === 'i18n-dom-bind') ? this.id : this.is;\n\n      if (bundles[lang][id]) {\n        // bundle is available; no need to fetch\n        if (this._fetchStatus.targetLang === lang) {\n          // reset error status\n          this._fetchStatus.error = null;\n          if (this.lang === lang) {\n            this.notifyPath('text', this._getBundle(this.lang));\n            this.fire('lang-updated', { \n              lang: this.lang, \n              lastLang: this._fetchStatus.lastLang\n            });\n          }\n          else {\n            this.lang = lang; // trigger lang-updated event\n          }\n        }\n        else {\n          var nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n          // bundle is available; no need to fetch\n          this._fetchStatus.fetchingInstance = null;\n          if (nextFallbackLanguage) {\n            this._fetchBundle(nextFallbackLanguage);\n          }\n          else {\n            this._constructBundle(this._fetchStatus.targetLang);\n            // reset error status\n            this._fetchStatus.error = null;\n            if (this.lang === this._fetchStatus.targetLang) {\n              this.notifyPath('text', this._getBundle(this.lang));\n              this.fire('lang-updated', { \n                lang: this.lang,\n                lastLang: this._fetchStatus.lastLang\n              });\n            }\n            else {\n              this.lang = this._fetchStatus.targetLang; // trigger lang-updated event\n            }\n          }\n        }\n      }\n      else if (this._fetchStatus.fetchingInstance) {\n        if (this._fetchStatus.fetchingInstance !== this) {\n          // fetching in progress by another instance\n          // TODO: redundant addEventListener multiple times\n          this._forwardLangEventBindThis = this._forwardLangEventBindThis ||\n                                            this._forwardLangEvent.bind(this);\n          this._fetchStatus.fetchingInstance\n              .addEventListener('lang-updated', this._forwardLangEventBindThis);\n        }\n      }\n      else if (bundleFetchingInstances[lang]) {\n        // fetching bundle.lang.json in progress by an instance of another element\n        this._fetchStatus.fetchingInstance = this;\n        this._fetchStatus.ajaxLang = lang;\n        this._handleBundleFetchedBindThis = this._handleBundleFetchedBindThis ||\n                                            this._handleBundleFetched.bind(this);\n        bundleFetchingInstances[lang]\n          .addEventListener('bundle-fetched', this._handleBundleFetchedBindThis);\n        //console.log(this.is + ' addEventListener bundle-fetched');\n      }\n      else {\n        // proceed to fetch\n        this._fetchStatus.fetchingInstance = this;\n        if (!this._fetchStatus.ajax) {\n          // set up ajax client\n          this._fetchStatus.ajax = Polymer.Base.create('iron-ajax');\n          this._fetchStatus.ajax.handleAs = 'json';\n          this._fetchStatus._handleResponseBindFetchingInstance = this._handleResponse.bind(this);\n          this._fetchStatus._handleErrorBindFetchingInstance = this._handleError.bind(this);\n          this._fetchStatus.ajax.addEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          this._fetchStatus.ajax.addEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n        }\n        else {\n          if (this._fetchStatus._handleResponseBindFetchingInstance) {\n            this._fetchStatus.ajax.removeEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          }\n          if (this._fetchStatus._handleErrorBindFetchingInstance) {\n            this._fetchStatus.ajax.removeEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n          }\n          this._fetchStatus._handleResponseBindFetchingInstance = this._handleResponse.bind(this);\n          this._fetchStatus._handleErrorBindFetchingInstance = this._handleError.bind(this);\n          this._fetchStatus.ajax.addEventListener('response', this._fetchStatus._handleResponseBindFetchingInstance);\n          this._fetchStatus.ajax.addEventListener('error', this._fetchStatus._handleErrorBindFetchingInstance);\n        }\n        // TODO: app global bundles have to be handled\n        var url;\n        var skipFetching = false;\n\n        if (lang === '') {\n          url = this.resolveUrl(id + '.json');\n        }\n        else {\n          if (bundles[lang] && bundles[lang].bundle) {\n            // missing in the bundle\n            url = this.resolveUrl(localesPath + '/' + id + '.' + lang + '.json');\n            skipFetching = !!this.isI18nController;\n          }\n          else {\n            // fetch the bundle\n            bundleFetchingInstances[lang] = this;\n            url = this.resolveUrl(startUrl + localesPath + '/bundle.' + lang + '.json');\n          }\n        }\n        this._fetchStatus.ajax.url = url;\n        this._fetchStatus.ajaxLang = lang;\n        try {\n          this._fetchStatus.error = null;\n          if (skipFetching) {\n            this._handleError({ detail: { error: 'skip fetching for I18nController' }});\n          }\n          else {\n            this._fetchStatus.ajax.generateRequest();\n          }\n        }\n        catch (e) {\n          // TODO: extract error message from the exception e\n          this._handleError({ detail: { error: 'ajax request failed: ' + e }});\n        }\n      }\n    },\n\n    /**\n     * Handle Ajax success response for a bundle.\n     *\n     * @param {Object} event `iron-ajax` success event.\n     */\n    _handleResponse: function (event) {\n      //console.log('_handleResponse ajaxLang = ' + this._fetchStatus.ajaxLang);\n      if (this._fetchStatus.ajax.url.indexOf('/' + localesPath + '/bundle.') >= 0) {\n        bundles[this._fetchStatus.ajaxLang] = bundles[this._fetchStatus.ajaxLang] || {};\n        this._deepMap(bundles[this._fetchStatus.ajaxLang],\n                      event.detail.response,\n                      function (text) { return text; });\n        bundles[this._fetchStatus.ajaxLang].bundle = true;\n        bundleFetchingInstances[this._fetchStatus.ajaxLang] = null;\n        //console.log('bundle-fetched ' + this.is + ' ' + this._fetchStatus.ajaxLang);\n        this.fire('bundle-fetched', { success: true, lang: this._fetchStatus.ajaxLang });\n        var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n        if (bundles[this._fetchStatus.ajaxLang][id]) {\n          this._fetchStatus.lastResponse = bundles[this._fetchStatus.ajaxLang][id];\n        }\n        else {\n          // bundle does not contain text for this.is\n          this._fetchStatus.fetchingInstance = null;\n          this._fetchBundle(this._fetchStatus.ajaxLang);\n          return;\n        }\n      }\n      else {\n        this._fetchStatus.lastResponse = event.detail.response;\n      }\n      if (this._fetchStatus.lastResponse) {\n        var nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n        // store the raw response\n        this._fetchStatus.rawResponses[this._fetchStatus.ajaxLang] = \n          this._fetchStatus.lastResponse;\n\n        this._fetchStatus.fetchingInstance = null;\n        if (nextFallbackLanguage) {\n          this._fetchBundle(nextFallbackLanguage);        \n        }\n        else {\n          this._fetchBundle('');\n        }\n      }\n      else {\n        event.detail.error = 'empty response for ' + this._fetchStatus.ajax.url;\n        this._handleError(event);\n      }\n    },\n\n    /**\n     * Handle Ajax error response for a bundle.\n     *\n     * @param {Object} event `iron-ajax` error event.\n     */\n    _handleError: function (event) {\n      var nextFallbackLanguage;\n      this._fetchStatus.fetchingInstance = null;\n      if (this._fetchStatus.ajax.url.indexOf('/' + localesPath + '/bundle.') >= 0) {\n        bundles[this._fetchStatus.ajaxLang] = bundles[this._fetchStatus.ajaxLang] || {};\n        bundles[this._fetchStatus.ajaxLang].bundle = true;\n        bundleFetchingInstances[this._fetchStatus.ajaxLang] = null;\n        // falls back to its element-specific bundle\n        this._fetchBundle(this._fetchStatus.ajaxLang);\n        //console.log('bundle-fetched ' + this.is + ' ' + this._fetchStatus.ajaxLang);\n        this.fire('bundle-fetched', { success: false, lang: this._fetchStatus.ajaxLang });\n        return;\n      }\n      nextFallbackLanguage = this._fetchStatus.fallbackLanguageList.shift();\n      if (this._fetchStatus.ajaxLang === this._fetchStatus.targetLang) {\n        if (nextFallbackLanguage) {\n          //console.log(this.is + ': ' + this._fetchStatus.ajaxLang +\n          //            ' falls back to ' + nextFallbackLanguage);\n          this._fetchStatus.targetLang = nextFallbackLanguage;\n          this._fetchBundle(nextFallbackLanguage);\n        }\n        else {\n          this._fetchStatus.error = event.detail.error;\n          //console.log(this._fetchStatus.error);\n          // falls back to default\n          this.lang = '';\n        }\n      }\n      else {\n        // fetching dependent fallback languages\n        if (nextFallbackLanguage) {\n          //console.log(this.is + ': ' + this._fetchStatus.ajaxLang +\n          //            ' is missing and skipped');\n          //console.log(this.is + ': step to the next dependent fallback ' +\n          //            nextFallbackLanguage);\n          this._fetchBundle(nextFallbackLanguage);\n        }\n        else {\n          this._fetchBundle('');\n        }\n      }\n    },\n\n    /**\n     * Forward `lang-updated` event to other instances of the same element.\n     *\n     * @param {Object} event `lang-updated` event object.\n     */\n    _forwardLangEvent: function (event) {\n      //console.log('_forwardLangEvent ' + this.is + ' ' + event.detail.lang);\n      event.target.removeEventListener(event.type, this._forwardLangEventBindThis);\n      if (this.lang === event.detail.lang) {\n        this.notifyPath('text', this._getBundle(this.lang));\n        this.fire(event.type, event.detail);\n      }\n      else {\n        this.lang = event.detail.lang;\n        this.notifyPath('text', this._getBundle(this.lang));\n      }\n    },\n\n    /**\n     * Handle `bundle-fetched` event.\n     *\n     * @param {Object} event `bundle-fetched` event object.\n     */\n    _handleBundleFetched: function (event) {\n      var detail = event.detail;\n      //console.log('_handleBundleFetched ' + this.is + ' ' + detail.lang);\n      event.target.removeEventListener(event.type, this._handleBundleFetchedBindThis);\n      if (this._fetchStatus.ajaxLang === detail.lang) {\n        this._fetchStatus.fetchingInstance = null;\n        this._fetchBundle(this._fetchStatus.ajaxLang);\n      }\n    },\n\n    /**\n     * Handle changes of `observeHtmlLang` property.\n     *\n     * @param {Boolean} value Value of `observeHtmlLang`\n     */\n    _observeHtmlLangChanged: function (value) {\n      if (value) {\n        this._htmlLangObserver = this._htmlLangObserver || \n          new MutationObserver(this._handleHtmlLangChange.bind(this));\n        this._htmlLangObserver.observe(html, { attributes: true });\n      }\n      else {\n        if (this._htmlLangObserver) {\n          this._htmlLangObserver.disconnect();\n        }\n      }\n    },\n\n    /**\n     * MutationObserver callback of `<html lang>` attribute.\n     *\n     * @param {Array} mutations Array of MutationRecord (https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver).\n     */\n    _handleHtmlLangChange: function (mutations) {\n      mutations.forEach(function(mutation) {\n        switch (mutation.type) {\n        case 'attributes':\n          if (mutation.attributeName === 'lang') {\n            this.lang = html.lang;\n          }\n          break;\n        default:\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Construct the text message bundle of the target locale with fallback of missing texts.\n     *\n     * @param {strings} lang Target locale.\n     */\n    _constructBundle: function (lang) {\n      var fallbackLanguageList = this._enumerateFallbackLanguages(lang);\n      var bundle = {};\n      var raw;\n      var baseLang;\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n      var i;\n      fallbackLanguageList.push('');\n      for (i = 0; i < fallbackLanguageList.length; i++) {\n        if (bundles[fallbackLanguageList[i]] &&\n            bundles[fallbackLanguageList[i]][id]) {\n          break;\n        }\n      }\n      fallbackLanguageList.splice(i + 1, fallbackLanguageList.length);\n      while ((baseLang = fallbackLanguageList.pop()) !== undefined) {\n        if (bundles[baseLang][id]) {\n          bundle = deepcopy(bundles[baseLang][id]);\n        }\n        else {\n          raw = this._fetchStatus.rawResponses[baseLang];\n          if (raw) {\n            this._deepMap(bundle, raw, function (text) { return text; });\n          }\n        }\n      }\n      // store the constructed bundle\n      if (!bundles[lang]) {\n        bundles[lang] = {};\n      }\n      bundles[lang][id] = bundle;\n    },\n\n    /**\n     * Construct a pseudo-bundle for the target locale. (Not used for now)\n     *\n     * @param {string} lang Target locale.\n     */\n    /*\n    _constructPseudoBundle: function (lang) {\n      var bundle = {};\n      var id = this.is === 'i18n-dom-bind' ? this.id : this.is;\n      this._deepMap(bundle, bundles[''][id], function (value) {\n        return typeof value === 'string' ? lang + ' ' + value : value;\n      });\n      bundles[lang] = bundles[lang] || {};\n      bundles[lang][id] = bundle;\n      return bundle;\n    },\n    */\n\n    /**\n     * Recursively map the source object onto the target object with the specified map function.\n     * \n     * The method is used to merge a bundle into its fallback bundle.\n     *\n     * @param {Object} target Target object.\n     * @param {Object} source Source object.\n     * @param {Function} map Mapping function.\n     */\n    _deepMap: function (target, source, map) {\n      var value;\n      for (var prop in source) {\n        value = source[prop];\n        switch (typeof value) {\n        case 'string':\n        case 'number':\n        case 'boolean':\n          if (typeof target === 'object') {\n            target[prop] = map(value, prop);\n          }\n          break;\n        case 'object':\n          if (typeof target === 'object') {\n            if (Array.isArray(value)) {\n              // TODO: cannot handle deep objects properly\n              target[prop] = target[prop] || [];\n              this._deepMap(target[prop], value, map);\n            }\n            else {\n              target[prop] = target[prop] || {};\n              this._deepMap(target[prop], value, map);\n            }\n          }\n          break;\n        default:\n          if (typeof target === 'object') {\n            target[prop] = value;\n          }\n          break;\n        }\n      }\n    },\n\n    /**\n     * Construct the default bundle from the element's template.\n     *\n     * Extract the default bundle from the template if it is embedded as JSON at build time.\n     *\n     * ### Hard-coded UI text example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template>\n     *       <span id=\"label\">UI Text Label:</span>\n     *       <input id=\"input-el\"\n     *              value=\"{{keyword}}\"\n     *              placeholder=\"Keyword\">\n     *     </template>\n     *   </dom-module>\n     * ```\n     *\n     * ### Constructed default bundle for the above example:\n     * ```\n     *   {\n     *     \"model\" : {\n     *       \"input-el\": {\n     *         \"placeholder\": \"Keyword\"\n     *       }\n     *     },\n     *     \"label\": \"UI Text Label:\"\n     *   }\n     * ```\n     *\n     * ### Processed template with bound annotations for the above example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template localizable-text=\"embedded\">\n     *       <span id=\"label\">{{text.label}}</span>\n     *       <input id=\"input-el\"\n     *         value=\"{{keyword}}\"\n     *         placeholder=\"{{model.input-el.placeholder}}\">\n     *     </template>\n     *   </dom-module>\n     * ```\n     *\n     * ### Embedded JSON bundle format for the above example:\n     * ```\n     *   <dom-module id=\"custom-element\">\n     *     <template localizable-text=\"embedded\">\n     *       <span id=\"label\">{{text.label}}</span>\n     *       <input id=\"input-el\"\n     *         value=\"{{keyword}}\"\n     *         placeholder=\"{{model.input-el.placeholder}}\">\n     *       <template id=\"localizable-text\">\n     *         <json-data>{\n     *           \"model\" : {\n     *             \"input-el\": {\n     *               \"placeholder\": \"Keyword\"\n     *             }\n     *           },\n     *           \"label\": \"UI Text Label:\"\n     *         }</json-data>\n     *       </template>\n     *     </template>\n     *   </dom-module>\n     * ```\n     */\n    _constructDefaultBundle: function (_template, _id) {\n      var template;\n      var id = _id || this.is;\n      if (this.is === 'i18n-dom-bind') {\n        template = _template || this;\n        id = this.id;\n        /* istanbul ignore if */\n        if (template.content && template.content.childNodes.length === 0) {\n          // Find the real template in Internet Explorer 11 when i18n-dom-bind is concealed in a parent template\n          // This does not happen on Polymer 1.3.1 or later.  So ignore this 'if' statement in code coverage.\n          template = Array.prototype.map.call(document.querySelectorAll('template'), function (parentTemplate) {\n            return parentTemplate.content.querySelector('template#' + id + '[is=\"i18n-dom-bind\"]');\n          }).reduce(function (prev, current) {\n            return prev || current;\n          });\n          // Patch this.content with the real one\n          if (template) {\n            this.content = template.content;\n          }\n        }\n      }\n      else {\n        template = _template || Polymer.DomModule.import(id, 'template');\n      }\n      if (template) {\n        this.templateDefaultLang = template.hasAttribute('lang') ? template.lang : 'en';\n      }\n      else {\n        this.templateDefaultLang = 'en';\n      }\n      var bundle = { model: {} };\n      var path = [];\n      var templateDefaultLang = this.templateDefaultLang;\n      var localizableText, jsonData;\n\n      if (template) {\n        // register localizable attributes of the element itself\n        if (attributesRepository.registerLocalizableAttributes) {\n          attributesRepository.registerLocalizableAttributes(id, template);\n        }\n        else {\n          BehaviorsStore._I18nAttrRepo._created();\n          BehaviorsStore._I18nAttrRepo.registerLocalizableAttributes(id, template);\n        }\n        if (template.getAttribute('localizable-text') === 'embedded') {\n          // pick up embedded JSON from the template\n          localizableText = template.content.querySelector('#localizable-text');\n          if (localizableText) {\n            jsonData = localizableText.content.querySelector('json-data');\n            if (jsonData) {\n              bundle = JSON.parse(jsonData.textContent);\n            }\n            else {\n              console.error('<json-data> not found in <template id=\\\"localizable-text\\\">');\n            }\n          }\n          else {\n            console.error('<template id=\\\"localizable-text\\\"> not found');\n          }\n        }\n        else {\n          if (extraWhiteSpaceNode) {\n            template.setAttribute('strip-whitespace', '');\n          }\n          // traverse template to generate bundle\n          this._traverseTemplateTree(template.content, path, bundle, 0);\n        }\n      }\n\n      bundles[''][id] = bundle;\n      bundles[templateDefaultLang] = bundles[templateDefaultLang] || {};\n      bundles[templateDefaultLang][id] = bundle;\n      //console.log('text = ');\n      //console.log(JSON.stringify(bundle, null, 2));\n\n      return true;\n    },\n\n    /**\n     * Traverse localizable attributes of the target element node and \n     * add them to the target bundle under the `model` object.\n     * \n     * The `<i18n-attr-repo>` object is used \n     * to judge if the target attributes are localizable.\n     *\n     * @param {Object} node Target element node.\n     * @param {string} path Path to the target node.\n     * @param {Object} bundle Default bundle.\n     */\n    _traverseAttributes: function (node, path, bundle) {\n      var name = node.nodeName.toLowerCase();\n      var id = node.getAttribute ?\n                 (node.getAttribute('text-id') ||\n                  node.getAttribute('id')) : null;\n      var text;\n      var messageId;\n      var attrId;\n      var isLocalizable;\n      var dummy;\n      // pick up element attributes\n      Array.prototype.forEach.call(node.attributes, function (attribute) {\n        text = attribute.value;\n        switch (attribute.name) {\n        case 'id':\n        case 'text-id':\n        case 'is':\n        case 'lang':\n        case 'class':\n        // verification required before removing these attributes\n        case 'href':\n        case 'src':\n        case 'style':\n        case 'url':\n        case 'selected':\n          break;\n        default:\n          if (!(isLocalizable = BehaviorsStore._I18nAttrRepo.isLocalizableAttribute(node, attribute.name))) {\n            break;\n          }\n          if (text.length === 0) {\n            // skip empty value attribute\n          }\n          else if (text.match(/^{{[^{}]*}}$/) || text.match(/^\\[\\[[^\\[\\]]*\\]\\]$/)) {\n            // skip annotation attribute\n          }\n          else if (text.replace(/\\n/g, ' ').match(/^{.*}|\\[.*\\]$/g) &&\n                  !text.match(/^{{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]/) &&\n                  !text.match(/{{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]$/)) {\n            // generate message id\n            messageId = this._generateMessageId(path, id);\n            try {\n              //console.log(messageId + ' parsing attribute ' + attribute.name + ' = ' + text);\n              var value = JSON.parse(text.replace(/\\n/g, ' '));\n              //console.log('parsed JSON object = ');\n              //console.log(value);\n              switch (typeof value) {\n              case 'string':\n              case 'number':\n              case 'object':\n                // put into model\n                attrId = ['model', messageId, attribute.name].join('.');\n                debuglog(attrId + ' = ' + text);\n                this._setBundleValue(bundle, attrId, value);\n                attribute.value = '{{' + attrId + '}}';\n                break;\n              default: // skip other types\n                break;\n              }\n            }\n            catch (e) {\n              // invalid JSON\n              console.warn(e, 'Invalid JSON at <' + name + ' ' + attribute.name + '> with value = ' + text);\n            }\n          }\n          else if (text.match(/{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]/)) {\n            // compound binding attribute\n            // Parameterized:\n            //   e.g., attr=\"Compound binding attribute has [[bound.value]] {{parameters}} in the value string\"\n            //   replaced as \"{{i18nFormat(attrId.0,bound.value,parameters)}}\"\n            //   extracted as [ \"Compound binding attribute has {1} {2} in the value string\", \"[[bound.value]]\", \"{{parameters}}\" ]\n            // Concatenated: (Parameters with functions cannot be reordered in translation)\n            //   e.g., attr2=\"Compound binding attribute has [[f1(bound.value)]] {{f2(parameters)}} in the value string\"\n            //   replaced as \"{{attrId.0}}[[f1(bound.value)]]{{attrId.2}}{{f2(parameters)}}{{attrId.4}}\"\n            //   extracted as [ \"Compound binding attribute has \", \"[[f1(bound.value)]]\", \" \", \"{{f2(parameters)}}\", \" in the value string\" ]\n            var parsed = text.match(/([^{}\\[\\]]{1,})|({{[^{}]{1,}}})|(\\[\\[[^\\[\\]]{1,}\\]\\])/g);\n            var parameterized;\n            var processed;\n            var n;\n            messageId = this._generateMessageId(path, id);\n            attrId = ['model', messageId, attribute.name.replace(/\\$$/, '')].join('.');\n            if (text.match(/\\)}}|\\)\\]\\]/)) { // check for function parameter\n              // Concatenate\n              debuglog(attrId + ' = ' + JSON.stringify(parsed));\n              this._setBundleValue(bundle, attrId, parsed);\n              processed = '';\n              for (n = 0; n < parsed.length; n++) {\n                if (parsed[n].match(/^{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]$/)) {\n                  processed += parsed[n];\n                }\n                else {\n                  processed += '{{' + attrId + '.' + n + '}}';\n                }\n              }\n              if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n                dummy = document.createElement('span');\n                dummy.innerHTML = '<span ' + attribute.name + '$=\"' + processed + '\"></span>';\n                node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n              }\n              else {\n                attribute.value = processed;\n              }\n            }\n            else {\n              // Parameterize\n              parameterized = [ '' ];\n              while (parsed.length) {\n                if (parsed[0].match(/^{{[^{}]{1,}}}|\\[\\[[^\\[\\]]{1,}\\]\\]$/)) {\n                  parameterized.push(parsed[0]);\n                  parameterized[0] += '{' + (parameterized.length - 1) + '}';\n                }\n                else {\n                  parameterized[0] += parsed[0];\n                }\n                parsed.shift();\n              }\n              debuglog(attrId + ' = ' + JSON.stringify(parameterized));\n              this._setBundleValue(bundle, attrId, parameterized);\n              processed = '{{i18nFormat(' + attrId + '.0';\n              for (n = 1; n < parameterized.length; n++) {\n                processed += ',' + parameterized[n].replace(/^[{\\[][{\\[](.*)[}\\]][}\\]]$/, '$1');\n              }\n              processed += ')}}';\n              if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n                dummy = document.createElement('span');\n                dummy.innerHTML = '<span ' + attribute.name + '$=\"' + processed + '\"></span>';\n                node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n              }\n              else {\n                attribute.value = processed;\n              }\n            }\n          }\n          else {\n            // string attribute\n            messageId = this._generateMessageId(path, id);\n            attrId = ['model', messageId, attribute.name].join('.');\n            debuglog(attrId + ' = ' + text);\n            this._setBundleValue(bundle, attrId, text);\n            if (isLocalizable === '$' && !attribute.name.match(/\\$$/)) {\n              dummy = document.createElement('span');\n              dummy.innerHTML = '<span ' + attribute.name + '$=' + '\"{{' + attrId + '}}\"' + '></span>';\n              node.setAttributeNode(dummy.childNodes[0].attributes[0].cloneNode());\n            }\n            else {\n              attribute.value = '{{' + attrId + '}}';\n            }\n          }\n          break;\n        }\n      }, this);\n    },\n\n    /**\n     * Recursively traverse text contents of the target element node\n     * and add them to the target bundle object.\n     *\n     * Traversed text contents are replaced with annotations \n     * for the corresponding text in the bundle.\n     *\n     * - - -\n     *\n     * There are some special treatments in the following cases.\n     *\n     * ### Sentence with parameterized child parameter-like elements:\n     *\n     * As the order of the parameters can change in different languages,\n     * `<i18n-format>` element is used to make the sentence localizable.\n     *\n     * ### Before processing\n     *\n     * ```\n     *   <p id=\"p\"><code>i18n-format</code> is \n     *     used for  \n     *     <a href=\"https://www.google.com\">parameterized</a> \n     *     sentences.</p>\n     * ```\n     *\n     * ### After processing\n     *\n     * ```\n     *   <p id=\"p\">\n     *     <i18n-format lang=\"{{effectiveLang}}\">\n     *       <span>{{text.p.0}}</span>\n     *       <code>{{text.p.1}}</code>\n     *       <a href=\"https://www.google.com\">{{text.p.2}}</a>\n     *     </i18n-format>\n     *   </p>\n     * ```\n     *\n     * ### Constructed bundle data: Texts are stored in an Array of strings.\n     *\n     * ```\n     *   {\n     *     \"p\" : [\n     *       \"{1} is\\n used for\\n {2}\\n sentences.\",\n     *       \"i18n-format\",\n     *       \"parameterized\"\n     *     ]\n     *   }\n     * ```\n     *\n     * - - -\n     *\n     * ### `<i18n-format>` element with compound templates:\n     *\n     * Texts with compound templates for `<i18n-format>` element are\n     * processed as below.\n     *\n     * `lang=\"{{effectiveLang}}\"` attribute is added to `<i18n-format>` node\n     * as well as `<i18n-number>` node.\n     *\n     * ### Before processing\n     *\n     * ```\n     * <i18n-format id=\"sentence\">\n     *   <json-data>{\n     *     \"0\": \"You ({3}) gave no gifts.\",\n     *     \"1\": {\n     *       \"male\": \"You ({3}) gave him ({4}) {5}.\",\n     *       \"female\": \"You ({3}) gave her ({4}) {5}.\",\n     *       \"other\": \"You ({3}) gave them ({4}) {5}.\"\n     *     },\n     *     \"one\": {\n     *       \"male\": \n     *         \"You ({3}) gave him ({4}) and one other {5}.\",\n     *       \"female\": \n     *         \"You ({3}) gave her ({4}) and one other {5}.\",\n     *       \"other\": \n     *         \"You ({3}) gave them ({4}) and one other {5}.\"\n     *     },\n     *     \"other\": \n     *       \"You ({3}) gave them ({4}) and {1} others gifts.\"\n     *   }</json-data>\n     *   <i18n-number \n     *     offset=\"1\"\n     *     >{{recipients.length}}</i18n-number>\n     *   <span>{{recipients.0.gender}}</span>\n     *   <span>{{sender.name}}</span>\n     *   <span>{{recipients.0.name}}</span>\n     *   <span>a gift</span>\n     * </i18n-format>\n     * ```\n     *\n     * ### After processing\n     *\n     * ```\n     * <i18n-format id=\"sentence\" \n     *              lang=\"{{effectiveLang}}\">\n     *   <json-data>{{serialize(text.sentence.0)}}</json-data>\n     *   <i18n-number \n     *     offset=\"1\"\n     *     lang=\"{{effectiveLang}}\"\n     *     >{{recipients.length}}</i18n-number>\n     *   <span>{{recipients.0.gender}}</span>\n     *   <span>{{sender.name}}</span>\n     *   <span>{{recipients.0.name}}</span>\n     *   <span>{{text.sentence.5}}</span>\n     * </i18n-format>\n     * ```\n     *\n     * ### Constructed bundle data:\n     *\n     * ```\n     * {\n     *   \"sentence\" : [\n     *     {\n     *       \"0\": \"You ({3}) gave no gifts.\",\n     *       \"1\": {\n     *         \"male\": \"You ({3}) gave him ({4}) {5}.\",\n     *         \"female\": \"You ({3}) gave her ({4}) {5}.\",\n     *         \"other\": \"You ({3}) gave them ({4}) {5}.\"\n     *       },\n     *       \"one\": {\n     *         \"male\": \n     *         \"You ({3}) gave him ({4}) and one other {5}.\",\n     *         \"female\": \n     *         \"You ({3}) gave her ({4}) and one other {5}.\",\n     *         \"other\": \n     *         \"You ({3}) gave them ({4}) and one other {5}.\"\n     *       },\n     *       \"other\": \n     *       \"You ({3}) gave them ({4}) and {1} others gifts.\"\n     *     },\n     *     \"{{recipients.length - 1}}\",\n     *     \"{{recipients.0.gender}}\",\n     *     \"{{sender.name}}\",\n     *     \"{{recipients.0.name}}\",\n     *     \"a gift\"\n     *   ]\n     * }\n     * ```\n     *\n     * @param {Object} node Target element node.\n     * @param {string} path Path to the target node.\n     * @param {Object} bundle Default bundle.\n     * @param {Number} index Index in the siblings of the target node excluding whitespace nodes.\n     */\n    _traverseTemplateTree: function (node, path, bundle, index) {\n      var i;\n      var whiteSpaceElements = 0;\n      var isWhiteSpace = false;\n      var isCompoundAnnotatedNode = false;\n      var text;\n      var span;\n      var name = node.nodeName.toLowerCase();\n      var id = node.getAttribute ? \n                 (node.getAttribute('text-id') || \n                  node.getAttribute('id')) : null;\n      var messageId;\n      var n;\n      var templateText;\n      var templateTextParams;\n      path.push(id ? '#' + id : name + (index > 0 ? '_' + index : ''));\n      //console.log(path.join(':'));\n      switch (node.nodeType) {\n      case node.ELEMENT_NODE:\n        switch (name) {\n        case 'style':\n        case 'script':\n        case 'meta':\n          // skip\n          break;\n        case 'i18n-format':\n          // pick up element attributes\n          this._traverseAttributes(node, path, bundle);\n          // generate message id\n          messageId = this._generateMessageId(path, id);\n          if (!node.hasAttribute('lang')) {\n            node.setAttribute('lang', '{{effectiveLang}}');\n          }\n          text = Array.prototype.filter.call(node.childNodes, function (child) {\n            return child.nodeType === child.ELEMENT_NODE;\n          }).map(function (param, n) {\n            var value = param.textContent;\n            var parsedValue = value.match(/^({{)(.*)(}})$/) || \n                              value.match(/^(\\[\\[)(.*)(\\]\\])$/);\n            if (n === 0) {\n              // template element\n              if (param.tagName.toLowerCase() === 'json-data') {\n                if (parsedValue) {\n                  var parsedValue2 = value.match(/^({{)(serialize\\(.*\\))(}})$/) || \n                                     value.match(/^(\\[\\[)(serialize\\(.*\\))(\\]\\])$/);\n                  if (!parsedValue2) {\n                    // convert to {{serialize(id)}}\n                    parsedValue.shift();\n                    parsedValue.splice(1, 0, 'serialize(');\n                    parsedValue.splice(3, 0, ')');\n                    param.textContent = parsedValue.join('');\n                  }\n                }\n                else {\n                  value = JSON.parse(value);\n                  param.textContent = '{{serialize(text.' + messageId + '.' + n + ')}}';\n                }\n              }\n              else {\n                if (!parsedValue) {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n            }\n            else {\n              // param element\n              // TODO: handle localization of param nodes and attributes\n              if (!param.hasAttribute(paramAttribute)) {\n                param.setAttribute(paramAttribute, n);\n              }\n              if (param.tagName.toLowerCase() === 'i18n-number') {\n                if (!param.hasAttribute('lang')) {\n                  param.setAttribute('lang', '{{effectiveLang}}');\n                }\n                var offset = param.getAttribute('offset');\n                if (offset) {\n                  offset = ' - ' + offset;\n                }\n                else {\n                  offset = '';\n                }\n                if (parsedValue) {\n                  // convert to {{path - offset}}\n                  parsedValue.shift();\n                  parsedValue.splice(2, 0, offset);\n                  value = parsedValue.join('');\n                }\n                else {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n              else {\n                if (!parsedValue) {\n                  param.textContent = '{{text.' + messageId + '.' + n + '}}';\n                }\n              }\n            }\n            return value;\n          }, this);\n          debuglog(messageId + ' = ' + text);\n          this._setBundleValue(bundle, messageId, text);\n          break;\n        case 'template':\n          // traverse into its content\n          //console.log(path.join(':') + ':' + node.content.nodeName + ':' + 0);\n          if (extraWhiteSpaceNode) {\n            //if (node.hasAttribute('is') && node.getAttribute('is').match(/^(i18n-)?dom-/)) {\n              node.setAttribute('strip-whitespace', '');\n            //}\n          }\n          this._traverseTemplateTree(node.content, path, bundle, 0);\n          break;\n        default:\n          // element node\n          if (name === 'i18n-number' ||\n              name === 'i18n-datetime') {\n            if (!node.hasAttribute('lang')) {\n              node.setAttribute('lang', '{{effectiveLang}}');\n            }\n          }\n          // pick up element attributes\n          this._traverseAttributes(node, path, bundle);\n          // check annonated node\n          isCompoundAnnotatedNode = false;\n          if (node.childElementCount === 0) {\n            if (node.textContent) {\n              isCompoundAnnotatedNode = this._isCompoundAnnotatedText(node.textContent);\n            }\n          }\n          if (node.childElementCount === 0 && !isCompoundAnnotatedNode) {\n            if (node.textContent) { // use textContent for Firefox compatibility\n              text = node.textContent;\n              if (text.length === 0 || text.match(/^\\s*$/g)) {\n                // skip empty or whitespace node\n              }\n              else if (text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n                // skip annotation node\n                // TODO: compound bindings support\n              }\n              else {\n                // a text message found\n                // generate message id\n                messageId = this._generateMessageId(path, id);\n                // store the text message\n                text = text.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n                if (name === 'json-data') {\n                  this._setBundleValue(bundle, messageId, JSON.parse(text));\n                }\n                else {\n                  this._setBundleValue(bundle, messageId, text);\n                }\n                // replace textContent with annotation\n                node.textContent = '{{text.' + messageId + '}}';\n                if (!id) {\n                  //node.id = messageId;\n                  //console.warn('add missing node id as ' + messageId + ' for ' + text);\n                }\n                debuglog(messageId + ' = ' + text);\n              }\n            }\n            else {\n              // skip\n            }\n          } \n          else {\n            // has children or compound annotation\n            // check if i18n-format is applicable\n            var childStatus = Array.prototype.map.call(\n              node.childNodes, function (child) {\n                var result;\n                if (child.nodeType === child.ELEMENT_NODE &&\n                    child.tagName === 'TEMPLATE') {\n                  var templateNonCommentChildNodes =\n                    Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                      switch (templateChild.nodeType) {\n                      case templateChild.COMMENT_NODE:\n                        return false;\n                      case templateChild.TEXT_NODE:\n                        return !templateChild.textContent.match(/^\\s*$/g);\n                      default:\n                      case templateChild.ELEMENT_NODE:\n                        return true;\n                      }\n                    });\n                  var firstChild = templateNonCommentChildNodes.shift();\n                  // Examples:\n                  // hasText: <template>text</template>\n                  // hasCompoundAnnotatedText: <template>{{item.name}} text</template>\n                  // hasTextChild: <template><b>text</b></template> or <template><br></template>\n                  // hasCompoundAnnotatedChildNode: <template><b>{{item.name}} text</b></template>\n                  // hasGrandChildren: <template><span><b>text</b></span></template> or \n                  //                   <template><b>A</b><i>B</i></template> or\n                  //                   hasCompoundAnnotatedText\n                  result = {\n                    hasText: templateNonCommentChildNodes.length === 0 &&\n                             firstChild &&\n                             firstChild.nodeType === firstChild.TEXT_NODE &&\n                             firstChild.textContent.length > 0 &&\n                             !firstChild.textContent.match(/^\\s*$/g),\n                    hasCompoundAnnotatedText: firstChild &&\n                                              firstChild.nodeType === firstChild.TEXT_NODE &&\n                                              this._isCompoundAnnotatedText(firstChild.textContent),\n                    hasTextChild: templateNonCommentChildNodes.length === 0 &&\n                                  firstChild &&\n                                  firstChild.nodeType === child.ELEMENT_NODE &&\n                                  firstChild.childElementCount === 0, // including <br>\n                    hasCompoundAnnotatedChildNode: firstChild &&\n                                                   firstChild.nodeType === firstChild.ELEMENT_NODE &&\n                                                   firstChild.childElementCount === 0 &&\n                                                   this._isCompoundAnnotatedText(firstChild.textContent),\n                    hasGrandChildren: templateNonCommentChildNodes.length > 0 ||\n                                      (firstChild &&\n                                       firstChild.nodeType === firstChild.ELEMENT_NODE &&\n                                        Array.prototype.map.call(\n                                          firstChild.childNodes,\n                                          function (grandChild) {\n                                            return grandChild.nodeType !== grandChild.TEXT_NODE;\n                                          }\n                                        ).reduce(function (prev, current) {\n                                          return prev || current;\n                                        }, false)) ||\n                                      (firstChild &&\n                                       firstChild.nodeType === firstChild.TEXT_NODE &&\n                                       this._isCompoundAnnotatedText(firstChild.textContent))\n                  };\n                }\n                else {\n                  result = {\n                    hasText: child.nodeType === child.TEXT_NODE &&\n                             child.textContent.length > 0 &&\n                             !child.textContent.match(/^\\s*$/g),\n                    hasCompoundAnnotatedText: child.nodeType === child.TEXT_NODE &&\n                                              this._isCompoundAnnotatedText(child.textContent),\n                    hasTextChild: child.nodeType === child.ELEMENT_NODE &&\n                                  child.childElementCount === 0, // including <br>\n                    hasCompoundAnnotatedChildNode: child.nodeType === child.ELEMENT_NODE &&\n                                                   child.childElementCount === 0 &&\n                                                   this._isCompoundAnnotatedText(child.textContent),\n                    hasGrandChildren: child.nodeType === child.ELEMENT_NODE &&\n                                      Array.prototype.map.call(\n                                        child.childNodes,\n                                        function (grandChild) {\n                                          return grandChild.nodeType !== grandChild.TEXT_NODE;\n                                        }\n                                      ).reduce(function (prev, current) {\n                                        return prev || current;\n                                      }, false)\n                  };\n                }\n                return result;\n              }.bind(this)).reduce(function (prev, current) { \n                return {\n                  hasText: prev.hasText || current.hasText,\n                  hasCompoundAnnotatedText: prev.hasCompoundAnnotatedText || current.hasCompoundAnnotatedText,\n                  hasTextChild: prev.hasTextChild || current.hasTextChild,\n                  hasCompoundAnnotatedChildNode: prev.hasCompoundAnnotatedChildNode || current.hasCompoundAnnotatedChildNode,\n                  hasGrandChildren: prev.hasGrandChildren || current.hasGrandChildren\n                };\n              }, { \n                hasText: false, \n                hasCompoundAnnotatedText: false,\n                hasTextChild: false,\n                hasCompoundAnnotatedChildNode: false,\n                hasGrandChildren: false\n              });\n            if ((childStatus.hasText || node.hasAttribute('text-id')) &&\n                (childStatus.hasTextChild || childStatus.hasCompoundAnnotatedText) && \n                !childStatus.hasGrandChildren &&\n                !childStatus.hasCompoundAnnotatedChildNode) {\n              // apply i18n-format\n              /*\n                    <i18n-format>\n                      <span>{{text.simpleChartDesc.0}}</span>\n                      <code param=\"1\">{{text.simpleChartDesc.1}}</code>\n                      <a param=\"2\" href=\"link\">{{text.simpleChartDesc.2}}</a>\n                      <a param=\"3\" href=\"link2\">{{text.simpleChartDesc.3}}</a>\n                    </i18n-format>\n              */\n              n = 0;\n              messageId = this._generateMessageId(path, id);\n              templateTextParams = Array.prototype.map.call(\n                node.childNodes, function (child) {\n                  var firstChild;\n                  if (child.nodeType === child.TEXT_NODE &&\n                      this._hasAnnotatedText(child.textContent)) {\n                    return this._compoundAnnotationToSpan(child)\n                      .map(function (_child) {\n                        return {\n                          node: _child,\n                          templateNode: null,\n                          type: _child.nodeType,\n                          text: _child.nodeType === _child.TEXT_NODE ? \n                                  _child.textContent : null,\n                          childTextNode: _child.nodeType === _child.ELEMENT_NODE &&\n                                         _child.childNodes.length > 0\n                        };\n                      });\n                  }\n                  else if (child.nodeType === child.ELEMENT_NODE &&\n                      child.tagName === 'TEMPLATE') {\n                    firstChild =\n                      Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                        switch (templateChild.nodeType) {\n                        case templateChild.COMMENT_NODE:\n                          return false;\n                        case templateChild.TEXT_NODE:\n                          return !templateChild.textContent.match(/^\\s*$/g);\n                        default:\n                        case templateChild.ELEMENT_NODE:\n                          return true;\n                        }\n                      }).shift();\n                    if (!firstChild) {\n                      firstChild =\n                        Array.prototype.filter.call(child.content.childNodes, function (templateChild) {\n                          switch (templateChild.nodeType) {\n                          case templateChild.COMMENT_NODE:\n                            return false;\n                          default:\n                            return true;\n                          }\n                        }).shift();\n                    }\n                    if (firstChild) {\n                      return [{\n                        node: firstChild,\n                        templateNode: child,\n                        type: firstChild.nodeType,\n                        text: null,\n                        childTextNode: true\n                      }];\n                    }\n                    else {\n                      return [];\n                    }\n                  }\n                  else {\n                    return [{\n                      node: child,\n                      templateNode: null,\n                      type: child.nodeType,\n                      text: child.nodeType === child.TEXT_NODE ? \n                              child.textContent : null,\n                      childTextNode: child.nodeType === child.ELEMENT_NODE &&\n                                     child.childNodes.length > 0\n                    }];\n                  }\n                }.bind(this)).reduce(function (prev, currentList) {\n                  var current;\n                  var textContent;\n                  for (var i = 0; i < currentList.length; i++) {\n                    current = currentList[i];\n                    if (current.text) {\n                      prev.text[0] += current.text;\n                    }\n                    if (current.type === current.node.ELEMENT_NODE) {\n                      n++;\n                      prev.text[0] += '{' + n + '}';\n                      path.push(n);\n                      this._traverseAttributes(current.node, path, bundle);\n                      path.pop();\n                      if (current.childTextNode) {\n                        textContent = current.node.textContent;\n                        if (textContent.length === 0) {\n                          // tag without textContent\n                          prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                          current.node.textContent = '';\n                        }\n                        else if (textContent.match(/^\\s*$/g)) {\n                          // tag with whitespace textContent\n                          prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                          current.node.textContent = ' ';\n                        }\n                        else if (textContent.match(/^[\\s]*({{.*}}|\\[\\[.*\\]\\])[\\s]*$/)) {\n                          // tag with annotation\n                          prev.text.push(textContent);\n                          // textContent is untouched\n                        }\n                        else {\n                          prev.text.push(current.node.textContent.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' '));\n                          current.node.textContent = '{{text.' + messageId + '.' + n + '}}';\n                        }\n                      }\n                      else {\n                        prev.text.push('<' + current.node.nodeName.toLowerCase() + '>');\n                      }\n                      current.node.setAttribute(paramAttribute, n.toString());\n                      prev.params.push(current.templateNode || current.node);\n                    }\n                    else if (current.type === current.node.TEXT_NODE &&\n                             current.childTextNode) {\n                      // in template node\n                      n++;\n                      prev.text[0] += '{' + n + '}';\n                      textContent = current.node.textContent;\n                      if (textContent.length === 0) {\n                        // template without textContent\n                        prev.text.push('<template>');\n                        current.node.textContent = '';\n                      }\n                      else if (textContent.match(/^\\s*$/g)) {\n                        // template with whitespace textContent\n                        prev.text.push('<template>');\n                        current.node.textContent = ' ';\n                      }\n                      else if (textContent.match(/^[\\s]*({{.*}}|\\[\\[.*\\]\\])[\\s]*$/)) {\n                        // tag with annotation\n                        prev.text.push(textContent);\n                        // textContent is untouched\n                      }\n                      else {\n                        prev.text.push(textContent.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' '));\n                        current.node.textContent = '{{text.' + messageId + '.' + n + '}}';\n                      }\n                      span = document.createElement('span');\n                      span.setAttribute(paramAttribute, n.toString());\n                      current.templateNode.content.removeChild(current.node);\n                      span.appendChild(current.node);\n                      current.templateNode.content.appendChild(span);\n                      prev.params.push(current.templateNode);\n                    }\n                  }\n                  return prev;\n                }.bind(this), { text: [ '' ], params: [ '{{text.' + messageId + '.0}}' ] });\n              // clear original childNodes before implicit removals by appendChild to i18n-format for ShadyDOM compatibility\n              if (Polymer.ElementMixin) {\n                // Avoid ShadyDOM issue for Polymer 2.x (Implicit removal by appendChild to another element introduces inconsistencies)\n                node.innerHTML = '';\n              }\n              templateText = document.createElement('i18n-format');\n              templateText.setAttribute('lang', '{{effectiveLang}}');\n              if (Polymer.ElementMixin) {\n                // Avoid ShadyDOM issue for Polymer 2.x (Implicit removal by appendChild to another element introduces inconsistencies)\n                // insert i18n-format\n                Polymer.dom(node).appendChild(templateText);\n              }\n              span = document.createElement('span');\n              // span.innerText does not set an effective value in Firefox\n              span.textContent = templateTextParams.params.shift();\n              templateText.appendChild(span);\n              Array.prototype.forEach.call(templateTextParams.params,\n                function (param) {\n                  templateText.appendChild(param);\n                }\n              );\n              if (!Polymer.ElementMixin) {\n                // Avoid ShadyDOM issue for Polymer 1.x (Clearance of innerHTML unexpectedly removes textContent of child nodes)\n                // insert i18n-format\n                node.innerHTML = '';\n                Polymer.dom(node).appendChild(templateText);\n              }\n              // store the text message\n              templateTextParams.text[0] = templateTextParams.text[0].replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n              this._setBundleValue(bundle, messageId, templateTextParams.text);\n              if (!id) {\n                //node.id = messageId;\n                //console.warn('add missing node id as ' + messageId + ' for ' + templateTextParams.text[0]);\n              }\n              debuglog(messageId + ' = ' + templateTextParams.text);\n            }\n            else {\n              // traverse childNodes\n              for (i = 0; i < node.childNodes.length; i++) {\n                //console.log(path.join(':') + ':' + node.childNodes[i].nodeName + ':' + (i - whiteSpaceElements) + ' i = ' + i + ' whiteSpaceElements = ' + whiteSpaceElements);\n                if (this._traverseTemplateTree(node.childNodes[i], path, bundle, i - whiteSpaceElements)) {\n                  whiteSpaceElements++;\n                }\n              }\n            }\n          }\n          break;\n        }\n        break;\n      case node.TEXT_NODE:\n        // text node\n        text = node.textContent;\n        if (text.length === 0 || text.match(/^\\s*$/g)) {\n          // skip empty or whitespace node\n          isWhiteSpace = true;\n        }\n        else if (text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n          // skip annotation node\n        }\n        else {\n          var parent = node.parentNode;\n\n          if (this._isCompoundAnnotatedText(text)) {\n            // apply i18n-format\n            n = 0;\n            messageId = this._generateMessageId(path, id);\n            templateTextParams = Array.prototype.map.call(\n              [ node ], function (child) {\n                return this._compoundAnnotationToSpan(child)\n                  .map(function (_child) {\n                    return {\n                      node: _child,\n                      type: _child.nodeType,\n                      text: _child.nodeType === _child.TEXT_NODE ? \n                              _child.textContent : null,\n                      childTextNode: _child.nodeType === _child.ELEMENT_NODE &&\n                                     _child.childNodes.length > 0\n                    };\n                  });\n              }.bind(this)).reduce(function (prev, currentList) {\n                var current;\n                for (var i = 0; i < currentList.length; i++) {\n                  current = currentList[i];\n                  if (current.text) {\n                    prev.text[0] += current.text;\n                  }\n                  if (current.type === current.node.ELEMENT_NODE) {\n                    n++;\n                    prev.text[0] += '{' + n + '}';\n                    path.push(n);\n                    this._traverseAttributes(current.node, path, bundle);\n                    path.pop();\n                    /* current.childTextNode is always true since current.node is <span>{{annotation}}</span> */\n                    prev.text.push(current.node.textContent);\n                    current.node.setAttribute(paramAttribute, n.toString());\n                    prev.params.push(current.node);\n                  }\n                }\n                return prev;\n              }.bind(this), { text: [ '' ], params: [ '{{text.' + messageId + '.0}}' ] });\n            templateText = document.createElement('i18n-format');\n            templateText.setAttribute('lang', '{{effectiveLang}}');\n            // insert i18n-format\n            Polymer.dom(parent).insertBefore(templateText, node);\n            Polymer.dom(parent).removeChild(node);\n            span = document.createElement('span');\n            // span.innerText does not set an effective value in Firefox\n            span.textContent = templateTextParams.params.shift();\n            templateText.appendChild(span);\n            Array.prototype.forEach.call(templateTextParams.params,\n              function (param) {\n                templateText.appendChild(param);\n              }\n            );\n            // store the text message\n            templateTextParams.text[0] = templateTextParams.text[0].replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n            this._setBundleValue(bundle, messageId, templateTextParams.text);\n            debuglog(messageId + ' = ' + templateTextParams.text);\n          }\n          else {\n            // generate message id\n            messageId = this._generateMessageId(path, id);\n            // store the text message\n            text = text.replace(/^[\\s]*[\\s]/, ' ').replace(/[\\s][\\s]*$/, ' ');\n            this._setBundleValue(bundle, messageId, text);\n            // replace textContent with annotation\n            node.textContent = '{{text.' + messageId + '}}';\n            if (!id) {\n              //span.id = messageId;\n              //console.warn('add missing span with id as ' + messageId + ' for ' + text);\n            }\n            debuglog(messageId + ' = ' + text);\n          }\n        }\n        break;\n      case node.DOCUMENT_NODE:\n      case node.DOCUMENT_FRAGMENT_NODE:\n        // traverse childNodes\n        for (i = 0; i < node.childNodes.length; i++) {\n          //console.log(path.join(':') + ':' + node.childNodes[i].nodeName + ':' + (i - whiteSpaceElements) + ' i = ' + i + ' whiteSpaceElements = ' + whiteSpaceElements);\n          if (this._traverseTemplateTree(node.childNodes[i], path, bundle, i - whiteSpaceElements)) {\n            whiteSpaceElements++;\n          }\n        }\n        break;\n      default:\n        isWhiteSpace = true;\n        // comment node, etc.\n        break;\n      }\n      path.pop();\n      return isWhiteSpace;\n    },\n\n    /**\n     * Check if the text has compound annotation \n     * \n     * @param {string} text target text to check compound annotation\n     * @return {Boolean} true if the text contains compound annotation\n     */\n    _isCompoundAnnotatedText: function (text) {\n      return !text.trim().match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/) &&\n             !!text.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/);\n    },\n\n    /**\n     * Check if the text has annotation \n     * \n     * @param {string} text target text to check annotation\n     * @return {Boolean} true if the text contains annotation\n     */\n    _hasAnnotatedText: function (text) {\n      return !!text.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/);\n    },\n\n    /**\n     * Convert compound annotations to span elements\n     * \n     * @param {Text} node target text node to convert compound annotations\n     * @return {Object[]} Array of Text or span elements\n     */\n    _compoundAnnotationToSpan: function (node) {\n      var result;\n      /* istanbul ignore else: node is prechecked to contain annotation(s) */\n      if (node.textContent.match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])/)) {\n        result = node.textContent\n          .match(/({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\]|[^{}\\[\\]]{1,}|[{}\\[\\]]{1,})/g)\n          .reduce(function (prev, current) {\n            if (current.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n              prev.push(current);\n              prev.push('');\n            }\n            else {\n              if (prev.length === 0) {\n                prev.push(current);\n              }\n              else {\n                prev[prev.length - 1] += current;\n              }\n            }\n            return prev;\n          }.bind(this), [])\n          .map(function (item) {\n            var childNode;\n            if (item.match(/^({{[^{}]*}}|\\[\\[[^\\[\\]]*\\]\\])$/)) {\n              childNode = document.createElement('span');\n              childNode.textContent = item;\n            }\n            else if (item) {\n              childNode = document.createTextNode(item);\n            }\n            else {\n              childNode = null;\n            }\n            return childNode;\n          });\n        if (result.length > 0) {\n          if (!result[result.length - 1]) {\n            result.pop(); // pop null node for ''\n          }\n        }\n      }\n      else {\n        // no compound annotation\n        result = [ node ];\n      }\n      return result;\n    },\n\n    /**\n     * Add the value to the target default bundle with the specified message Id \n     * \n     * @param {Object} bundle Default bundle.\n     * @param {string} messageId ID string of the value.\n     * @param {Object} value Value of the text message. Normally a string.\n     */\n    _setBundleValue: function (bundle, messageId, value) {\n      var messageIdPath = messageId.split('.');\n      bundle.model = bundle.model || {};\n      if (messageIdPath.length === 1) {\n        bundle[messageId] = value;\n      }\n      else {\n        var cursor = bundle;\n        for (var i = 0; i < messageIdPath.length; i++) {\n          if (i < messageIdPath.length - 1) {\n            cursor[messageIdPath[i]] = cursor[messageIdPath[i]] || {};\n            cursor = cursor[messageIdPath[i]];\n          }\n          else {\n            cursor[messageIdPath[i]] = value;\n          }\n        }\n      }\n    },\n\n    /**\n     * Generate a message ID from the specified path and id.\n     * \n     * ### TODO: \n     *\n     * - Shorten or optimize ids\n     *\n     * @param {Array} path List of ascestor elements of the current node in traversal.\n     * @param {id} id Value of `id` or `text-id` attribute of the current node.\n     */\n    _generateMessageId: function (path, id) {\n      var messageId;\n      if (!id || id.length === 0) {\n        for (var i = 1; i < path.length; i++) {\n          if (path[i][0] === '#') {\n            if (path[i] !== '#document-fragment') {\n              if (messageId && path[i].substr(0, 5) === '#text') {\n                messageId += ':' + path[i].substr(1);\n              }\n              else {\n                messageId = path[i].substr(1);\n              }\n            }\n          }\n          else {\n            if (messageId) {\n              messageId += ':' + path[i];\n            }\n            else {\n              messageId = path[i];\n            }\n          }\n        }\n      }\n      else {\n        messageId = id;\n      }\n      return messageId;\n    },\n\n    /**\n     * Merge `this.defaultText` into the target default bundle.\n     * \n     * ### TODO: \n     *\n     * - Need more research on the effective usage of this feature.\n     *\n     * @param {Object} bundle Default bundle.\n     */\n    /*\n    _mergeDefaultText: function (bundle) {\n      if (this.defaultText) {\n        this._deepMap(bundle, this.defaultText, function (text) { return text; });\n      }\n    },\n    */\n\n    /**\n     * Return the first non-null argument.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <input is=\"iron-input\" class=\"flex\"\n     *     type=\"search\" id=\"query\" bind-value=\"{{query}}\"\n     *     autocomplete=\"off\"\n     *     placeholder=\"{{or(placeholder,text.search)}}\">\n     * ```\n     *\n     * @param {*} arguments List of arguments.\n     */\n    or: function () {\n      var result = arguments[0];\n      var i = 1;\n      while (!result && i < arguments.length) {\n        result = arguments[i++];\n      }\n      return result;\n    },\n\n\n    /**\n     * Translate a string by a message table.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <span>{{tr(status,text.statusMsgs)}}</span>\n     *   <span>{{tr(errorId,text)}}</span>\n     *   <template>\n     *     <json-data text-id=\"statusMsgs\">{\n     *       \"signed-in\": \"Authenticated\",\n     *       \"signed-out\": \"Not Authenticated\",\n     *       \"error\": \"Error in Authentication\",\n     *       \"default\": \"Unknown Status in Authentication\"\n     *     }</json-data>\n     *     <span text-id=\"http-404\">File Not Found</span>\n     *     <span text-id=\"http-301\">Moved Permanently</span>\n     *   </template>\n     * ```\n     *\n     * Note: The second `table` parameter should always be specified in order\n     * to trigger automatic updates on `this.text` mutations, i.e., updates of `this.effectiveLang`.\n     *\n     * @param {string} key Key of the message.\n     * @param {Object} table The message table object or this.text itself if omitted\n     * @return {string} Translated string, `table.default` if `table[key]` is undefined, or key string if table.default is undefined.\n     */\n    tr: function (key, table) {\n      if (table) {\n        if (typeof table === 'object') {\n          if (typeof table[key] !== 'undefined') {\n            return table[key];\n          }\n          else if (typeof table['default'] !== 'undefined') {\n            return table['default'];\n          }\n          else {\n            return key;\n          }\n        }\n        else {\n          return key;\n        }\n      }\n      else {\n        return (typeof this.text === 'object') &&\n               (typeof key !== 'undefined') &&\n               (typeof this.text[key] !== 'undefined') ? this.text[key] : key;\n      }\n    },\n\n    /**\n     * Format a parameterized string.\n     *\n     * Utility method for use in annotations.\n     *\n     * ### Example Usage:\n     * ```\n     *   <span attr=\"{{i18nFormat(text.param.0,text.textparam1,text.textparam2)}}\"></span>\n     *   <template>\n     *     <json-data text-id=\"param\">[\n     *       \"String with {1} and {2} are formetted\",\n     *       \"[[text.textparam1]]\",\n     *       \"[[text.textparam2]]\"\n     *     ]</json-data>\n     *     <span text-id=\"textparam1\">Parameter 1</span>\n     *     <span text-id=\"textparam2\">Parameter 2</span>\n     *   </template>\n     * ```\n     *\n     * Note: Compound bindings in attributes are automatically converted to {{i18nFormat()}} in preprocessing.\n     *\n     * @param {*} arguments List of arguments.\n     * @return {string} Formatted string\n     */\n    i18nFormat: function () {\n      if (arguments.length > 0) {\n        var formatted = arguments[0] || '';\n        for (var n = 1; n < arguments.length; n++) {\n          formatted = formatted.replace('{' + n + '}', arguments[n]);\n        }\n      }\n      return formatted;\n    },\n\n    // Lifecycle callbacks\n\n    /**\n     * Lifecycle callback before registration of the custom element.\n     *\n     * The default bundle is constructed via traversal of the element's template at this timing per registration.\n     *\n     * ### Notes: \n     *\n     * - For `i18n-dom-bind` elements, bundle construction is put off until `ready` lifecycle callback.\n     * - As called twice per custom element registration, the method skips bundle construction at the second call.\n     */\n    beforeRegister: function () {\n      if (this.is !== 'i18n-dom-bind') {\n        if (!this._templateLocalizable) {\n          this._templateLocalizable = this._constructDefaultBundle();\n        }\n      }\n    },\n\n\n    /**\n     * Lifecycle callback at registration of the custom element.\n     *\n     * this._fetchStatus is initialized per registration.\n     */\n    registered: function () {\n      if (this.is !== 'i18n-dom-bind') {\n        var template = Polymer.DomModule.import(this.is, 'template');\n        if (!template) {\n          var id = this.is;\n          var current = (!window.HTMLImports || HTMLImports.useNative) ? document.currentScript\n                                              : document._currentScript;\n          template = (current ? current.ownerDocument\n                      .querySelector('template[id=' + id + ']') : null) ||\n                     document.querySelector('template[id=' + id + ']');\n          if (!template) {\n            template = document.createElement('template');\n            template.setAttribute('id', id);\n          }\n          if (template) {\n            var domModule = document.createElement('dom-module');\n            var assetUrl = new URL((current ? current.baseURI : null) ||\n              (window.currentImport ? window.currentImport.baseURI : null) ||\n              (current && current.ownerDocument ? current.ownerDocument.baseURI : null) ||\n              document.baseURI);\n            domModule.appendChild(template);\n            domModule.setAttribute('assetpath', \n                                    template.hasAttribute('basepath') ?\n                                      template.getAttribute('basepath') :\n                                      template.hasAttribute('assetpath') ? \n                                        template.getAttribute('assetpath') : \n                                        assetUrl.pathname);\n            domModule.register(id);\n            this._template = template;\n          }\n          var bundle = { model: {} };\n          bundles[''][id] = bundle;\n          bundles[defaultLang] = bundles[defaultLang] || {};\n          bundles[defaultLang][id] = bundle;\n          console.warn('I18nBehavior.registered: ' + id + ' has no template. Supplying an empty template');\n        }\n        this._fetchStatus = deepcopy({ // per custom element\n          fetchingInstance: null,\n          ajax: null,\n          ajaxLang: null,\n          lastLang: null,\n          fallbackLanguageList: null,\n          targetLang: null,\n          lastResponse: {},\n          rawResponses: {}\n        });\n      }\n    },\n\n    /**\n     * Lifecycle callback on instance creation\n     */\n    created: function () {\n      // Fix #34. [Polymer 1.4.0] _propertyEffects have to be maintained per instance\n      if (this.is === 'i18n-dom-bind') {\n        this._propertyEffects = deepcopy(this._propertyEffects);\n      }\n      else {\n        var template = Polymer.DomModule.import(this.is, 'template');\n        if (template && template.hasAttribute('lang')) {\n          this.templateDefaultLang = template.getAttribute('lang') || '';\n        }\n        if (!this._fetchStatus) {\n          this._fetchStatus = deepcopy({ // per custom element\n            fetchingInstance: null,\n            ajax: null,\n            ajaxLang: null,\n            lastLang: null,\n            fallbackLanguageList: null,\n            targetLang: null,\n            lastResponse: {},\n            rawResponses: {}\n          });\n        }\n      }\n      if (!isStandardPropertyConfigurable) {\n        // Fix #36. Emulate lang's observer since Safari 7 predefines non-configurable lang property\n        this.observer = new MutationObserver(this._handleLangAttributeChange.bind(this));\n        this.observer.observe(this, {\n          attributes: true,\n          attributeFilter: [ 'lang' ],\n          attributeOldValue: true\n        });\n      }\n    },\n\n    /**\n     * Lifecycle callback when the template children are ready.\n     */\n    ready: function () {\n      if (this.is === 'i18n-dom-bind') {\n        if (!this._templateLocalizable) {\n          this._templateLocalizable = this._constructDefaultBundle();\n        }\n        if (!this._fetchStatus) {\n          this._fetchStatus = deepcopy({ // per instance\n            fetchingInstance: null,\n            ajax: null,\n            ajaxLang: null,\n            lastLang: null,\n            fallbackLanguageList: null,\n            targetLang: null, \n            lastResponse: {},\n            rawResponses: {}\n          });\n        }\n        this._onDomChangeBindThis = this._onDomChange.bind(this);\n        this.addEventListener('dom-change', this._onDomChangeBindThis);\n        // Fix #34. [Polymer 1.4.0] Supply an empty object if this.__data__ is undefined\n        this.__data__ = this.__data__ || Object.create(null);\n      }\n      else {\n        if (!isStandardPropertyConfigurable) {\n          // Fix #36. Patch missing properties except for lang\n          for (var p in this._propertyEffects) {\n            if (this._propertyEffects[p] &&\n                !Object.getOwnPropertyDescriptor(this, p)) {\n              //console.log('ready: creating accessors for ' + p);\n              Polymer.Bind._createAccessors(this, p, this._propertyEffects[p]);\n            }\n          }\n        }\n        if (Polymer.ElementMixin && !this.__data) {\n          this._initializeProperties();\n        }\n        this._langChanged(this.getAttribute('lang'), undefined);\n        // model per instance\n        if (this.text) {\n          this.model = deepcopy(this.text.model);\n        }\n      }\n    },\n\n    /**\n     * attached lifecycle callback.\n     */\n    attached: function () {\n      if (this.is === 'i18n-dom-bind') {\n        if (this._properties) {\n          // Fix #35. [IE10] Restore properties for use in rendering\n          this.properties = this._properties;\n          delete this._properties;\n        }\n      }\n      if (this.observeHtmlLang) {\n        this.lang = html.lang;\n        // TODO: this call is redundant\n        this._observeHtmlLangChanged(true);\n      }\n    },\n\n    /**\n     * Handle `dom-change` event for `i18n-dom-bind`\n     */\n    _onDomChange: function () {\n      // Fix #16: [IE11][Polymer 1.3.0] On IE11, i18n-dom-bind does not work with Polymer 1.3.0\n      // Patch the broken lang property accessors manually if it is missing\n      // Fix #34: [IE11][Polymer 1.4.0] Create missing property accessors including lang\n      for (var p in this._propertyEffects) {\n        if (this._propertyEffects[p] &&\n            !Object.getOwnPropertyDescriptor(this, p)) {\n          Polymer.Bind._createAccessors(this, p, this._propertyEffects[p]);\n        }\n      }\n      this.removeEventListener('dom-change', this._onDomChangeBindThis);\n      if (this.text && this.text.model) {\n        this.model = deepcopy(this.text.model);\n      }\n      // Fix #17: [Polymer 1.3.0] observeHtmlLang is undefined in i18n-dom-bind\n      // Explicitly initialize observeHtmlLang if the value is undefined.\n      if (typeof this.observeHtmlLang === 'undefined' &&\n          !this.hasAttribute('observe-html-lang')) {\n        this.observeHtmlLang = true;\n      }\n      if (this.observeHtmlLang) {\n        this.lang = html.lang;\n        this._observeHtmlLangChanged(true);\n      }\n    },\n\n    /**\n     * detached lifecycle callback\n     */\n    detached: function () {\n      if (this.observeHtmlLang) {\n        this._observeHtmlLangChanged(false);\n      }\n    }\n  };\n\n  // Fix #36. Rename lang property as _lang to avoid conflict with the predefined lang property\n  if (!isStandardPropertyConfigurable) {\n    var _properties = Object.create(null);\n    for (var p in BehaviorsStore.I18nBehavior.properties) {\n      if (p === 'lang') {\n        _properties._lang = BehaviorsStore.I18nBehavior.properties.lang;\n      }\n      else {\n        _properties[p] = BehaviorsStore.I18nBehavior.properties[p];\n      }\n    }\n    BehaviorsStore.I18nBehavior.properties = _properties;\n    BehaviorsStore.I18nBehavior.properties._lang.reflectToAttribute = false;\n    BehaviorsStore.I18nBehavior.properties.text.computed = '_getBundle(_lang)';\n    BehaviorsStore.I18nBehavior._updateEffectiveLang = function (event) {\n      if ((!Polymer.ElementMixin && Polymer.dom(event).rootTarget === this) ||\n          (Polymer.ElementMixin && event.composedPath()[0] === this)) {\n        //console.log('lang-updated: _updateEffectiveLang: assigning effectiveLang = ' + this._lang);\n        this.effectiveLang = this._lang;\n      }\n    };\n    BehaviorsStore.I18nBehavior.hostAttributes = {\n      'lang': defaultLang\n    };\n  }\n\n  if (Polymer.ElementMixin) {\n    // Polymer 2.x\n    BehaviorsStore._I18nBehavior = BehaviorsStore.I18nBehavior;\n    BehaviorsStore.I18nBehavior = [ BehaviorsStore._I18nBehavior ];\n    Object.defineProperty(BehaviorsStore.I18nBehavior, '0', {\n      get: function() {\n        var current = (!window.HTMLImports || HTMLImports.hasNative) ? document.currentScript : document._currentScript;\n        var i18nAttrRepos = current.ownerDocument.querySelectorAll('i18n-attr-repo:not([processed])');\n        var domModules = current.ownerDocument.querySelectorAll('dom-module[legacy]');\n        if (domModules.length === 0) {\n          domModules = current.ownerDocument.querySelectorAll('dom-module');\n          if (domModules.length !== 1) {\n            domModules = [];\n          }\n        }\n        BehaviorsStore._I18nAttrRepo._created();\n        Array.prototype.forEach.call(i18nAttrRepos, function (repo) {\n          if (!repo.hasAttribute('processed')) {\n            var customAttributes = repo.querySelector('template#custom');\n            if (customAttributes) {\n              BehaviorsStore._I18nAttrRepo._traverseTemplateTree(customAttributes.content || customAttributes._content);\n            }\n            repo.setAttribute('processed', '');\n          }\n        });\n        Array.prototype.forEach.call(domModules, function (domModule) {\n          if (domModule && domModule.id) {\n            var template = domModule.querySelector('template');\n            if (template) {\n              BehaviorsStore._I18nBehavior._constructDefaultBundle(template, domModule.id);\n              domModule.removeAttribute('legacy');\n            }\n          }\n        });\n        return BehaviorsStore._I18nBehavior;\n      }\n    });\n  }\n  else {\n    // Polymer 1.x\n  /**\n   * `<template is=\"i18n-dom-bind\">` element extends `dom-bind` template element with `I18nBehavior`\n   *\n   * @group I18nBehavior\n   * @element i18n-dom-bind\n   */\n  var i18nBehaviorDomBind = {};\n  Polymer.Base.extend(i18nBehaviorDomBind, BehaviorsStore.I18nBehavior);\n  var i18nDomBind = {};\n  var domBind = document.createElement('template', 'dom-bind');\n  var domBindProto = Object.getPrototypeOf(domBind);\n  if (typeof domBindProto.render !== 'function') {\n    domBindProto = domBind.__proto__; // fallback for IE10\n  }\n  Polymer.Base.extend(i18nDomBind, domBindProto);\n  i18nDomBind.is = 'i18n-dom-bind';\n  if (!navigator.language && navigator.browserLanguage) { // Detect IE10\n    // Fix #35. [IE10] Hide properties until attached phase in IE10\n    // to avoid exceptions in overriding unconfigurable properties in Object.defineProperty\n    i18nBehaviorDomBind._properties = i18nBehaviorDomBind.properties;\n    i18nBehaviorDomBind.properties = Object.create(null);\n  }\n  /* As of Polymer 1.3.1, dom-bind does not have predefined behaviors */\n  /* istanbul ignore if */\n  if (i18nDomBind.behaviors) {\n    i18nDomBind.behaviors.push(i18nBehaviorDomBind);\n  }\n  else {\n    i18nDomBind.behaviors = [ i18nBehaviorDomBind ];\n  }\n  var _Polymer = Polymer;\n  _Polymer(i18nDomBind);\n  }\n})(document);\n/*\n@license\nCopyright (c) 2014 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\nThe complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\nThe complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\nCode distributed by Google as part of the polymer project is also\nsubject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n*/\n// From polymer#2.0-preview src/legacy/class.html\nPolymer.Utils = Polymer.Utils || {};\nPolymer.Utils.MixinBehavior = function(behavior, Base) {\n  var utils = Polymer.Utils;\n  var metaProps = {\n    attached: true,\n    detached: true,\n    ready: true,\n    created: true,\n    beforeRegister: true,\n    registered: true,\n    attributeChanged: true,\n    // meta objects\n    behaviors: true,\n    hostAttributes: true,\n    properties: true,\n    observers: true,\n    listeners: true\n  };\n  var config = {\n    properties: behavior.properties,\n    observers: behavior.observers\n  };\n\n  class PolymerGenerated extends Base {\n\n    static get config() {\n      return config;\n    }\n\n    _invokeFunction(fn, args) {\n      if (fn) {\n        fn.apply(this, args);\n      }\n    }\n\n    constructor() {\n      super();\n      // call `registered` only if it was not called for *this* constructor\n      if (!PolymerGenerated.hasOwnProperty('__registered')) {\n        PolymerGenerated.__registered = true;\n        if (behavior.registered) {\n          behavior.registered.call(Object.getPrototypeOf(this));\n        }\n      }\n    }\n\n    created() {\n      super.created();\n      this._invokeFunction(behavior.created);\n    }\n\n    _applyConfigMetaData() {\n      super._applyConfigMetaData();\n      this._applyConfigMetaDataFrom(behavior);\n    }\n\n    _applyListeners() {\n      super._applyListeners();\n      this._applyConfigListeners(behavior);\n    }\n\n    _ensureAttributes() {\n      // ensure before calling super so that subclasses can override defaults\n      this._ensureConfigAttributes(behavior);\n      super._ensureAttributes();\n    }\n\n    ready() {\n      super.ready();\n      this._invokeFunction(behavior.ready);\n    }\n\n    attached() {\n      super.attached();\n      this._invokeFunction(behavior.attached);\n    }\n\n    detached() {\n      super.detached();\n      this._invokeFunction(behavior.detached);\n    }\n\n    attributeChanged(name, old, value) {\n      super.attributeChanged(name, old, value);\n      this._invokeFunction(behavior.attributeChanged, [name, old, value]);\n    }\n  }\n\n  for (var p in behavior) {\n    if (!(p in metaProps))\n      utils.copyOwnProperty(p, behavior, PolymerGenerated.prototype);\n  }\n\n  return PolymerGenerated;\n};\n// Globally expose base elements and mixins\nwindow.BaseElements = window.BaseElements || {};\nwindow.Mixins = window.Mixins || {};\n\n// Localizable mixin\nMixins.Localizable = function (base) {\n\n  return class Localizable extends Polymer.Utils.MixinBehavior(BehaviorsStore._I18nBehavior, base) {\n    constructor () {\n      Localizable.template;\n      super();\n    }\n    static get _rawTemplate() {\n      let id = this.is;\n      let name = this.name ||\n        (typeof this === 'function' ?\n                this.toString().replace(/^[\\S\\s]*?function\\s*/, \"\").replace(/[\\s\\(\\/][\\S\\s]+$/, \"\") :\n                undefined);\n      if (!id && name && name !== 'Localizable' && name != 'class' && !name.match(/^_class/)) {\n        id = this.is = this._uncamelCase(name);\n      }\n      // TODO: template fetching should be flexible to detect super.template\n      let template = Polymer.DomModule.import(id, 'template');\n      if (id && !template) {\n        let current = (!window.HTMLImports || HTMLImports.useNative) ? document.currentScript\n                                            : document._currentScript;\n        template = (current ? current.ownerDocument\n                    .querySelector('template[id=' + id + ']') : null) || \n                   document.querySelector('template[id=' + id + ']');\n        if (!template && id !== 'i18n-dom-bind') {\n          template = document.createElement('template');\n          template.setAttribute('id', id);\n          console.warn('Localizable._rawTemplate: ' + id + ' has no template. Supplying an empty template');\n        }\n        if (template) {\n          let domModule = document.createElement('dom-module');\n          let assetUrl = new URL((current ? current.baseURI : null) ||\n            (window.currentImport ? window.currentImport.baseURI : null) ||\n            (current && current.ownerDocument ? current.ownerDocument.baseURI : null) ||\n            document.baseURI);\n          domModule.appendChild(template);\n          domModule.setAttribute('assetpath', \n                                  template.hasAttribute('basepath') ?\n                                    template.getAttribute('basepath') :\n                                    template.hasAttribute('assetpath') ? \n                                      template.getAttribute('assetpath') : \n                                      assetUrl.pathname);\n          domModule.register(id);\n          this._template = template;\n        }\n      }\n      return template;\n    }\n    static get template() {\n      return this._i18nPreprocess(this._rawTemplate);\n    }\n    static _uncamelCase(name) {\n      return name\n        // insert a hyphen between lower & upper\n        .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n        // space before last upper in a sequence followed by lower\n        .replace(/\\b([A-Z]+)([A-Z])([a-z0-9])/, '$1 $2$3')\n        // replace spaces with hyphens\n        .replace(/ /g, '-')\n        // lowercase\n        .toLowerCase();\n    }\n    static get _templateLocalizable () {\n      return this.hasOwnProperty('__templateLocalizable');\n    }\n    static set _templateLocalizable (value) {\n      this.__templateLocalizable = value;\n    }\n    static _i18nPreprocess(template) {\n      if (this.is && template && !this._templateLocalizable) {\n        this._templateLocalizable = this.prototype._constructDefaultBundle(template);\n      }\n      return template;\n    }\n    get is () {\n      return this.constructor.is;\n    }\n  };\n}\n\n// Logger mixin\nMixins.Logger = (base) => class extends base {\n  connectedCallback() {\n    super.connectedCallback();\n    console.log('<' + Object.getPrototypeOf(this).constructor.is + '>: ' +\n      'id = ' + this.id + ', ' +\n      'this.text = ' + JSON.stringify(this.text, null, 2));\n    console.log('Preprocessed template = \\n', Object.getPrototypeOf(this).constructor.template);\n  }\n};\n\n// I18N Base Element\nObject.defineProperty(BaseElements, 'I18nElement', {\n  get: function () {\n    return Mixins.Localizable(Polymer.LegacyElement);\n  }\n});\n// i18n-dom-bind based on Polymer/polymer#2.0-preview src/templatizer/dom-bind.html\nclass I18nDomBind extends Mixins.Localizable(Polymer.LegacyElement) {\n  static get is() { return 'i18n-dom-bind'; }\n\n  connectedCallback() {\n    this._fetchStatus = deepcopy({ // per custom element\n      fetchingInstance: null,\n      ajax: null,\n      ajaxLang: null,\n      lastLang: null,\n      fallbackLanguageList: null,\n      targetLang: null,\n      lastResponse: {},\n      rawResponses: {}\n    });\n    this.render();\n  }\n\n  disconnectedCallback() {\n    this._removeChildren();\n  }\n\n  _insertChildren() {\n    if (this._children) {\n      for (var i=0; i<this._children.length; i++) {\n        this.parentNode.insertBefore(this._children[i], this);\n      }\n    }\n  }\n\n  _removeChildren() {\n    if (this._children) {\n      for (var i=0; i<this._children.length; i++) {\n        this.stamped.appendChild(this._children[i]);\n      }\n    }\n  }\n\n  render() {\n    if (!this._children) {\n      var template = this.querySelector('template');\n      if (!template) {\n        throw new Error('i18n-dom-bind requires a <template> child');\n      }\n      this._templateLocalizable = this._constructDefaultBundle(template);\n      this._bindTemplate(template);\n      this.root = this._stampTemplate(template);\n      this.stamped = this.root;\n      this._children = [];\n      for (var n=this.root.firstChild; n; n=n.nextSibling) {\n        this._children[this._children.length] = n;\n      }\n      /* Issue #4 is no longer reproducible\n      for (var prop in this.__dataProto) {\n        this[prop] = this.__dataProto[prop];\n      }\n      */\n      this._flushProperties(this);\n    }\n    this._insertChildren();\n    this.dispatchEvent(new CustomEvent('dom-change'));\n  }\n\n}\ncustomElements.define(I18nDomBind.is, I18nDomBind);\nclass LocalizableElement extends Mixins.Logger(Mixins.Localizable(Polymer.LegacyElement)) {\n  static get is() { return 'localizable-element'; }\n}\ncustomElements.define(LocalizableElement.is, LocalizableElement);\nclass I18nSubclassElement extends Mixins.Logger(BaseElements.I18nElement) {\n  static get is() { return 'i18n-subclass-element'; }\n  static get config() {\n    return {\n      listeners: {\n        'lang-updated': '_langUpdated'\n      }\n    };\n  }\n  _langUpdated() {\n    this.model = deepcopy(this.text.model);\n  }\n}\ncustomElements.define(I18nSubclassElement.is, I18nSubclassElement);\n(function () {\n  function UncamelCase (name) {\n    return name\n      // insert a hyphen between lower & upper\n      .replace(/([a-z0-9])([A-Z])/g, '$1 $2')\n      // space before last upper in a sequence followed by lower\n      .replace(/\\b([A-Z]+)([A-Z])([a-z0-9])/, '$1 $2$3')\n      // replace spaces with hyphens\n      .replace(/ /g, '-')\n      // lowercase\n      .toLowerCase();\n  }\n  function functionName (func) {\n    return typeof func === 'function' ? \n            func.toString().replace(/^[\\S\\s]*?function\\s*/, \"\").replace(/[\\s\\(\\/][\\S\\s]+$/, \"\") :\n            undefined;\n  }\n  var _Define = function (id) {\n    return customElements.get(id);\n  };\n  if (!window.Define) {\n    Object.defineProperty(window, 'Define', {\n      get: function () {\n        return _Define;\n      },\n      set: function (proto) {\n        /*\n        Patterns:\n          a) template id {}\n          b) template id {is}\n          c) document.template id {is}\n          d) template {is}\n          e) {is}\n          f) class Is {template}\n          g) {is,template}\n        */\n        var id;\n        var classId;\n        var obj;\n        var name = proto.hasOwnProperty('name') ? proto.name : functionName(proto);\n        var current; // currentScript\n        var template = null;\n        var previous; // previousSibling template\n        var cousin; // dom5.serialize output support\n\n        current = (!window.HTMLImports || HTMLImports.useNative) ? document.currentScript\n                                        : document._currentScript;\n\n        previous = current.previousSibling;\n        while (previous && !previous.tagName) {\n          previous = previous.previousSibling;\n        }\n        if (previous && previous.tagName !== 'template'.toUpperCase()) {\n          previous = null;\n        }\n        if (!previous) {\n          // search for cousin template\n          if (current.parentNode.tagName === 'body'.toUpperCase()) {\n            previous = current.parentNode.previousSibling;\n            while (previous && !previous.tagName) {\n              previous = previous.previousSibling;\n            }\n            if (previous && previous.tagName.toLowerCase() === 'head') {\n              for (var i = 0; i < previous.childNodes.length; i++) {\n                if (previous.childNodes[i].tagName === 'template'.toUpperCase()) {\n                  cousin = previous.childNodes[i];\n                  break;\n                }\n              }\n            }\n          }\n          if (cousin) {\n            previous = cousin;\n          }\n          else {\n            previous = null;\n          }\n        }\n\n        if (!proto.is && (!name || name === 'class' || name === 'Define')) {\n          if (previous) {\n            id = previous.id;\n            if (id) {\n              // Pattern a)\n              template = previous;\n              proto.is = id;\n            }\n          }\n        }\n        else {\n          if (proto.is) {\n            id = proto.is;\n          }\n          else if (typeof proto === 'function' && name) {\n            // ES6 class\n            id = UncamelCase(name);\n            classId = name;\n          }\n          var isNoIdPrevious = previous && !previous.id && id;\n          if (isNoIdPrevious) {\n            previous.id = id; // temporarily supply id\n          }\n          var rawTemplate = proto._rawTemplate || proto.template;\n          if (isNoIdPrevious) {\n            previous.removeAttribute('id');\n          }\n          if (!template && rawTemplate && !name) {\n            // Pattern g)\n            template = rawTemplate;\n          }\n          if (!rawTemplate && !template) {\n            // Pattern b), c)\n            template = current.ownerDocument\n                        .querySelector('template[id=' + id + ']') || \n                       document.querySelector('template[id=' + id + ']');\n          }\n          if (!rawTemplate && !template && previous && !previous.id) {\n            // Pattern d)\n            template = previous;\n            template.id = id;\n          }\n          else {\n            // Pattern e)\n          }\n        }\n\n        if (!id) {\n          throw 'Custom element name is not defined';\n        }\n\n        // register dom-module\n        if (template) {\n          var domModule = document.createElement('dom-module');\n          let assetUrl = new URL(current.baseURI ||\n            (window.currentImport ? window.currentImport.baseURI : null) ||\n            current.ownerDocument.baseURI);\n          domModule.appendChild(template);\n          domModule.setAttribute('assetpath', \n                                  template.hasAttribute('basepath') ?\n                                    template.getAttribute('basepath') :\n                                    template.hasAttribute('assetpath') ? \n                                      template.getAttribute('assetpath') : \n                                      assetUrl.pathname);\n          domModule.register(id);\n          proto._template = template;\n          proto.finalize();\n        }\n\n        // register Custom Element\n        classId = classId || id.split('-').map(function (word) {\n          return word[0].toUpperCase() + word.substr(1);\n        }).join('');\n        if (customElements.get(id)) {\n          console.warn('Discarding duplicate definition of custom element ' + id);\n        }\n        else {\n          customElements.define(id, proto);\n          _Define[classId] = customElements.get(id);\n        }\n        return customElements.get(id);\n      }\n    });\n  }\n})();\nDefine = class I18nThinElement extends Mixins.Logger(BaseElements.I18nElement) {\n};\nPolymer({\n  is: 'i18n-legacy-element',\n  behaviors: [\n    BehaviorsStore.I18nBehavior\n  ]\n});\nclass I18nBehaviorDemo extends Mixins.Localizable(Polymer.LegacyElement) {\n      static get is() { return 'i18n-behavior-demo'; }\n      static get config() {\n        return {\n          properties: {\n            recipientsLength: {\n              type: Number,\n              value: 2\n            },\n            recipientsIndex: {\n              type: Number,\n              value: 0\n            },\n            langIndex: {\n              type: Number,\n              value: 0\n            },\n            langList: {\n              type: Array,\n              value: function () {\n                return [ 'en', 'fr', 'ja' ];\n              }\n            },\n            recipients: {\n              type: Array\n            },\n            markdown: {\n              type: String,\n              notify: true,\n              value: '',\n              observer: '_markdownChanged'\n            }\n          },\n\n          observers: [\n            '_update(effectiveLang,recipientsLength,recipientsIndex,text.model.data.recipients)',\n          ],\n\n          listeners: {\n            'lang-updated': '_langUpdated'\n          }\n\n        };\n      }\n\n      connectedCallback() {\n        super.connectedCallback();\n        this.observeHtmlLang = false;\n        this._updateParameters();\n      }\n\n      _langUpdated() {\n        this.model = deepcopy(this.text.model);\n      }\n\n      _update(lang, recipientsLength, recipientsIndex, rawRecipients) {\n        this.recipients = this._getRecipients(rawRecipients, recipientsLength, recipientsIndex);\n        this.markdown = this._getMarkDown();\n        this.langName = this._getLangName(this.effectiveLang,this.text.langNames);\n        this.stringifiedUser = this._getStringifiedUser(this.text.model.data.sender);\n        this.stringifiedRecipients = this._getStringifiedRecipients(this.recipients);\n        this.serializedText = JSON.stringify(this.text, null, 2);\n      }\n\n      _markdownChanged(markdown) {\n        this.fire('markdown-changed', { markdown: markdown });\n      }\n\n      _getStringifiedRecipients(recipients) {\n        var result;\n        if (!recipients || recipients.length === 0) {\n          result = '[]\\n\\n\\n\\n\\n';\n        }\n        else {\n          result = '[ \\n' + \n            recipients.map(function (item) {\n              return '  ' + this._getStringifiedUser(item);\n            }.bind(this)).join(',\\n') + '\\n]';\n          result += '\\n\\n\\n\\n'.substr(recipients.length);\n        }\n        return result;\n      }\n\n      _getStringifiedUser(user) {\n        return user ? JSON.stringify(user, null, 0).replace(/{/g, '{ ').replace(/:/g, ': ').replace(/,/g, ', ').replace(/}/g, ' }') : '';\n      }\n\n      _getMarkDown() {\n        var markdown =\n          '<dom-module id=\"i18n-behavior-demo\">\\n' +\n          '  <template>\\n' +\n          '    <h2>Simple String</h2>\\n' +\n          '    <span id=\"simple\">UI Text String</span>\\n' +\n          '\\n' +\n          '    <h2>Simple Attribute</h2>\\n' +\n          '    <input id=\"simple-input\" placeholder=\"Placeholder String\">\\n' +\n          '\\n' +\n          '    <h2>Automatic Format</h2>\\n' +\n          '    <p id=\"example-sentence\">This <i>example sentence</i> with \\n' +\n          '      <b>some parameters or embedded tags</b> is automatically converted to \\n' +\n          '      <a class=\"code\" href=\"https://github.com/t2ym/i18n-format\">&lt;i18n-format&gt;</a>\\n' +\n          '      to translate it as a whole with any parameter order.\\n' +\n          '    </p>\\n' +\n          '\\n' +\n          '    <h2>Compound Format with &lt;i18n-format&gt;</h2>\\n' +\n          '    <p>\\n' +\n          '      <i18n-format id=\"compound-format-text\">\\n' +\n          '        <json-data>{\\n' +\n          '          \"0\": \"You ({3}) gave no gifts.\",\\n' +\n          '          \"1\": {\\n' +\n          '            \"male\": \"You ({3}) gave him ({4}) {5}.\",\\n' +\n          '            \"female\": \"You ({3}) gave her ({4}) {5}.\",\\n' +\n          '            \"other\": \"You ({3}) gave them ({4}) {5}.\"\\n' +\n          '          },\\n' +\n          '          \"one\": {\\n' +\n          '            \"male\": \"You ({3}) gave him ({4}) and one other person {5}.\",\\n' +\n          '            \"female\": \"You ({3}) gave her ({4}) and one other person {5}.\",\\n' +\n          '            \"other\": \"You ({3}) gave them ({4}) and one other person {5}.\"\\n' +\n          '          },\\n' +\n          '          \"other\": \"You ({3}) gave them ({4}) and {1} other people gifts.\"\\n' +\n          '        }</json-data>\\n' +\n          '        <i18n-number offset=\"1\">{{recipients.length}}</i18n-number>\\n' +\n          '        <span>{{recipients.0.gender}}</span>\\n' +\n          '        <span>{{model.data.sender.name}}</span>\\n' +\n          '        <span>{{recipients.0.name}}</span>\\n' +\n          '        <span>a gift</span>\\n' +\n          '      </i18n-format>\\n' +\n          '    </p>\\n' +\n          '    <h2>Parameters</h2>\\n' +\n          '    <pre>lang = {{effectiveLang}} ({{_getLangName(effectiveLang,text.langNames)}})</pre>\\n' +\n          '    <pre>sender = {{_getStringifiedUser(model.data.sender)}}</pre>\\n' +\n          '    <pre>recipients = {{_getStringifiedRecipients(recipients)}}</pre>\\n' +\n          '\\n' +\n          '    <template>\\n' +\n          '      <json-data id=\"data\"\\n' +\n          '        sender=\\'{ \"name\": \"Joe\", \"gender\": \"male\" }\\'\\n' +\n          '        recipients=\\'[\\n' +\n          '          { \"name\": \"Alice\", \"gender\": \"female\" },\\n' +\n          '          { \"name\": \"Bob\", \"gender\": \"male\" },\\n' +\n          '          { \"name\": \"Yoda\", \"gender\": \"other\" }\\n' +\n          '        ]\\'\\n' +\n          '      ></json-data>\\n' +\n          '      <json-data id=\"langNames\">{\\n' +\n          '        \"en\": \"English\",\\n' +\n          '        \"ja\": \"Japanese\",\\n' +\n          '        \"fr\": \"French\"\\n' +\n          '      }</json-data>\\n' +\n          '    </template>\\n' +\n          '  </template>\\n' +\n          '  <script>\\n' +\n          '  Polymer({\\n' +\n          '    is: \\'i18n-behavior-demo\\',\\n' +\n          '    behaviors: [ \\n' +\n          '      BehaviorsStore.I18nBehavior\\n' +\n          '    ],\\n' +\n          '    listeners: {\\n' +\n          '      \\'lang-updated\\': \\'_langUpdated\\'\\n' +\n          '    },\\n' +\n          '    _langUpdated: function () {\\n' +\n          '      this.model = deepcopy(this.text.model);\\n' +\n          '    }\\n' +\n          '  });\\n' +\n          '  <' + '/script>\\n' +\n          '</dom-module>\\n';\n        return '```html\\n\\n' + \n                markdown +\n                '```\\n' +\n                '\\n```\\n' +\n                'text = ' + this._jsonStringify(this.text) +\n                '\\n\\n```';\n      }\n\n      _getRecipients(rawRecipients, recipientsLength, recipientsIndex) {\n        var recipients = [];\n        if (0 <= recipientsLength && recipientsLength <= 3) {\n          for (var i = 0; i < recipientsLength; i++) {\n            recipients[i] = rawRecipients[(i + recipientsIndex) % rawRecipients.length];\n          }\n        }\n\n        return recipients;\n      }\n\n      _jsonStringify(obj) {\n        return obj ? JSON.stringify(obj,null,2) : '';\n      }\n\n      _getLangName(lang, langNames) {\n        return langNames[lang];\n      }\n\n      _updateParameters() {\n        if (this.model &&\n            this.model.data &&\n            this.model.data.recipients) {\n          this.recipientsIndex = this.recipientsLength === 0 ? 0 : (this.recipientsIndex + 1) % this.model.data.recipients.length;\n          if (this.recipientsIndex === 0) {\n            this.recipientsLength = (this.recipientsLength + 1) % (this.model.data.recipients.length + 1);\n            if (this.recipientsLength === 0) {\n              this.langIndex = (this.langIndex + 1) % this.langList.length;\n              this.lang = this.langList[this.langIndex];\n            }\n          }\n        }\n        this.async(this._updateParameters, 1000);\n      }\n    }\n    customElements.define(I18nBehaviorDemo.is, I18nBehaviorDemo);"]}